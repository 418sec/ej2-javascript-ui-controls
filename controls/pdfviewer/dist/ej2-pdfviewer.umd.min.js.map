{"version":3,"file":"ej2-pdfviewer.umd.min.js","sources":["../src/pdfviewer/annotation/link-annotation.js","../src/pdfviewer/base/navigation-pane.js","../src/pdfviewer/base/pdfviewer-base.js","../src/pdfviewer/base/text-layer.js","../src/pdfviewer/base/context-menu.js","../src/pdfviewer/magnification/magnification.js","../src/pdfviewer/navigation/page-navigation.js","../src/pdfviewer/thumbnail-view/thumbnail-view.js","../src/pdfviewer/toolbar/toolbar.js","../src/pdfviewer/pdfviewer.js","../src/pdfviewer/bookmark-view/bookmark-view.js","../src/pdfviewer/text-selection/text-selection.js","../src/pdfviewer/text-search/text-search.js","../src/pdfviewer/print/print.js"],"sourcesContent":["import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex - 1].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                aTag.name = scrollValue.toString();\n                aTag.onclick = function () {\n                    // tslint:disable-next-line:radix\n                    proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageChildNodes = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).childNodes;\n            for (var i = 0; i < pageChildNodes.length; i++) {\n                var childElement = pageChildNodes[i];\n                if (childElement.tagName === 'A') {\n                    if (isAdd) {\n                        childElement.classList.add('e-pv-onselection');\n                    }\n                    else {\n                        childElement.classList.remove('e-pv-onselection');\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isBookmarkOpen = false;\n        this.isThumbnailOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY\n            ];\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            event.preventDefault();\n            if (proxy.isDown && _this.sideBarContentContainer) {\n                // prevent the sidebar from becoming too narrow, or from occupying more\n                // than half of the available viewer width.\n                var width = event.clientX + proxy.offset[0];\n                var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                if (width > maxWidth) {\n                    width = maxWidth;\n                }\n                if (width < _this.thumbnailWidthMin) {\n                    width = _this.thumbnailWidthMin;\n                }\n                proxy.sideBarResizer.style.left = width + 'px';\n                proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                proxy.sideBarContentContainer.style.width = width + 'px';\n                proxy.sideBarContent.style.width = width + 'px';\n                proxy.sideBarContentSplitter.style.width = width + 'px';\n                proxy.sideBarTitleContainer.style.width = width + 'px';\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                // tslint:disable-next-line:max-line-length\n                var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                proxy.pdfViewerBase.updateZoomValue();\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        // tslint:disable-next-line:max-line-length\n        var sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(sideBarToolbarSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content' });\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title' });\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        var resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        resizeIcon.style.position = 'absolute';\n        resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(resizeIcon);\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            // tslint:disable-next-line:max-line-length\n            proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            proxy.updateZoomValue();\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                // tslint:disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    if (!isIE) {\n                        event.preventDefault();\n                    }\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.scrollHoldTimer) {\n                    clearTimeout(_this.scrollHoldTimer);\n                    _this.scrollHoldTimer = null;\n                }\n                if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                    _this.pageViewScrollChanged(_this.currentPageNumber);\n                }\n            }\n            if (event.button === 0) {\n                // 0 is for left button.\n                var eventTarget = event.target;\n                if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                    var idStringArray = eventTarget.id.split('_');\n                    // tslint:disable-next-line\n                    _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                }\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grab';\n                    _this.viewerContainer.style.cursor = '-moz-grab';\n                    _this.viewerContainer.style.cursor = 'grab';\n                }\n            }\n            _this.isViewerMouseDown = false;\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        event.preventDefault();\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                    }\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        this.onWindowMouseUp = function (event) {\n            if (event.button === 0) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    // tslint:disable-next-line:max-line-length\n                    if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                        if (window.getSelection().anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                        }\n                    }\n                    if (_this.viewerContainer.contains(event.target)) {\n                        if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                        }\n                        else {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                            }\n                        }\n                    }\n                }\n            }\n            else if (event.button === 2) {\n                if (_this.viewerContainer.contains(event.target)) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (_this.isViewerMouseDown) {\n                _this.isViewerMouseDown = false;\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clear();\n                    _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                return false;\n            }\n            else {\n                return true;\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1) {\n                _this.preventTouchEvent(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        this.viewerContainerOnScroll = function () {\n            var proxy = _this;\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.pdfViewer.toolbarModule.updateNavigationButtons();\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container' });\n            this.viewerContainer.tabIndex = 0;\n            element.style.touchAction = 'pan-x pan-y';\n            element.style.minHeight = '500px';\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (this.pdfViewer.element.clientWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0));\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container' });\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            // this.createPasswordPopup();\n            this.createPrintPopup();\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject)); // jshint ignore:line\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response; // jshint ignore:line\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                _this.requestSuccess(data, documentData, password);\n            }\n            else if (request.readyState === 4 && request.status === 400) { // jshint ignore:line\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.showLoadingIndicator(false);\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        spinnerElement.style.height = '48px';\n        spinnerElement.style.width = '48px';\n        spinnerElement.style.transformOrigin = '24px 24px 24px';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.initiateTextSelectMode();\n        if (this.navigationPane.sideBarToolbar) {\n            this.navigationPane.clear();\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(null);\n        }\n        window.sessionStorage.clear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (e) {\n        var _this = this;\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount };\n            var request_1 = new XMLHttpRequest();\n            request_1.open('POST', window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload'), false);\n            request_1.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            request_1.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request_1.onreadystatechange = function (event) {\n                if (request_1.readyState === 4 && request_1.status === 400) {\n                    // error message\n                    _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n                }\n            };\n            // tslint:disable-next-line\n            request_1.onerror = function (event) {\n                _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // tslint:disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1 && parentNode != null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', content: '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container' });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container' });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup' });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ], close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        window.addEventListener('unload', this.unloadDocument);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unloadDocument);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var _this = this;\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true };\n        var request = new XMLHttpRequest();\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    // tslint:disable-next-line\n                    var pageValues = data;\n                    var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                    for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                        var pageSize = pageValues.pageSizes[i].split(',');\n                        if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                            var previousPageHeight = proxy.pageSize[i - 1].height;\n                            topValue = _this.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        _this.pageSize.push(size);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pageContainer.style.height = _this.getPageTop(_this.pageSize.length - 1) + _this.getPageHeight(_this.pageSize.length - 1) + 'px';\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * 2;\n                                canvas_1.width = pageWidth_1 * 2;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.getZoomFactor() === 1 && _this.isDocumentLoaded) {\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div' });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber);\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.left = leftPosition + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var _this = this;\n        var jsonObject;\n        jsonObject = { hashId: this.hashId };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.download);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'text';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) { // jshint ignore:line\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var blobUrl = _this.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    _this.downloadDocument(blobUrl);\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var _this = this;\n        var canvas = this.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = this.getElement('_oldCanvas_' + pageIndex);\n        if (!this.getPagesZoomed()) {\n            this.showPageLoadingIndicator(pageIndex, true);\n        }\n        else {\n            this.showPageLoadingIndicator(pageIndex, false);\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                this.showPageLoadingIndicator(pageIndex, false);\n            }\n            // tslint:disable-next-line\n            var data = this.getStoredData(pageIndex);\n            if (data) {\n                this.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    var _loop_1 = function (y) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this_1.documentId, hashId: this_1.hashId, zoomFactor: this_1.getZoomFactor() };\n                        var request = new XMLHttpRequest();\n                        request.open('POST', this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages);\n                        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n                        request.responseType = 'json';\n                        request.send(JSON.stringify(jsonObject));\n                        // tslint:disable-next-line\n                        request.onreadystatechange = function (event) {\n                            var proxy = _this;\n                            if (request.readyState === 4 && request.status === 200) {\n                                // tslint:disable-next-line\n                                var data_1 = event.currentTarget.response;\n                                // tslint:disable-next-line:max-line-length\n                                if (typeof data_1 !== 'object') {\n                                    data_1 = JSON.parse(data_1);\n                                }\n                                if (data_1) {\n                                    if (data_1.image) {\n                                        proxy.storeWinData(data_1, pageIndex);\n                                        proxy.renderPage(data_1, pageIndex);\n                                    }\n                                }\n                            }\n                            else if (request.readyState === 4 && request.status === 400) {\n                                // error\n                                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                            }\n                        };\n                        // tslint:disable-next-line\n                        request.onerror = function (event) {\n                            _this.openNotificationPopup();\n                            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                        };\n                    };\n                    var this_1 = this;\n                    for (var y = 0; y < noTileY; y++) {\n                        _loop_1(y);\n                    }\n                }\n            }\n            this.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobUrl = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        var blob = new Blob(byteArrays, { type: contentType });\n        return URL.createObjectURL(blob);\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (!textDiv) {\n            // tslint:disable-next-line:max-line-length\n            var textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text' });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, bounds);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                textDiv.style.transform = 'scaleX(' + scale + ')';\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, textBounds);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                textDiv.style.transform = 'scaleX(' + scale + ')';\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height, textBounds) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.bottom = bottom * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.width = width * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        if (textHeight > 11 && textBounds) {\n            textDiv.style.top = (parseFloat(textDiv.style.top) + 2) + 'px';\n            // tslint:disable-next-line:radix\n            textDiv.style.fontSize = (parseInt(height.toString()) * this.pdfViewerBase.getZoomFactor() - 2.6) + 'px';\n        }\n        else {\n            textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n        }\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n                if (_this.pdfViewer.textSearchModule) {\n                    _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n            }\n        });\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy') }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            cssClass: 'e-pv-context-menu'\n        });\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            for (var i = 0; i < bounds.length; i++) {\n                var currentBound = bounds[i];\n                if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                    event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                    this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                    isWithin = true;\n                    break;\n                }\n            }\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case 'Copy':\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            return scaleX * 100;\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            if (this.pdfViewerBase.pageCount === 1) {\n                return ((viewerHeight - this.pdfViewerBase.pageSize[0].top) / highestHeight) * 100;\n            }\n            else {\n                return (viewerHeight / highestHeight) * 100;\n            }\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        this.renderInSeparateThread(this.reRenderPageNumber);\n        this.isPagesZoomed = false;\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n            if (currentPageCanvas) {\n                var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n                // update scroll top for the viewer container based on pinch zoom factor\n                var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n                var previousY = scrollValue + this.touchCenterY;\n                // tslint:disable-next-line:max-line-length\n                var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                    // tslint:disable-next-line:max-line-length\n                    previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n                this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n                // update scroll left for the viewer container based on pinch zoom factor\n                var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n                var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n                var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n                this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n            }\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                // tslint:disable-next-line:max-line-length\n                var newCanvas = this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i);\n                newCanvas.style.display = 'none';\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n * @hidden\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // tslint:disable-next-line\n            return new Promise(\n            // tslint:disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        var _this = this;\n        if (!proxy.isThumbnailCompleted) {\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n            if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                proxy.isThumbnailCompleted = false;\n                proxy.startIndex = 0;\n            }\n        }\n        else {\n            proxy.startIndex = proxy.thumbnailLimit;\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        }\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.renderThumbnailImage(data);\n                if (!proxy.isThumbnailCompleted) {\n                    proxy.startIndex = proxy.thumbnailLimit;\n                    proxy.isThumbnailCompleted = true;\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                var pageLink = createElement('a', { id: 'page_' + i });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n            this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n            this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n            this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        this.pdfViewerBase.navigationPane.resetThumbnailView();\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                args.cancel = true;\n            }\n            else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                var tooltipData = args.originalEvent.target.parentElement.dataset;\n                if (tooltipData && tooltipData.tooltipId) {\n                    var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                    if (tooltipElement) {\n                        tooltipElement.style.display = 'none';\n                    }\n                }\n            }\n            switch (args.originalEvent.target.id) {\n                case _this.pdfViewer.element.id + '_open':\n                case _this.pdfViewer.element.id + '_openIcon':\n                    _this.fileInputElement.click();\n                    break;\n                case _this.pdfViewer.element.id + '_download':\n                case _this.pdfViewer.element.id + '_downloadIcon':\n                    _this.pdfViewerBase.download();\n                    break;\n                case _this.pdfViewer.element.id + '_print':\n                case _this.pdfViewer.element.id + '_printIcon':\n                    if (_this.pdfViewer.printModule) {\n                        _this.pdfViewer.printModule.print();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_firstPage':\n                case _this.pdfViewer.element.id + '_firstPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToFirstPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_previousPage':\n                case _this.pdfViewer.element.id + '_previousPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToPreviousPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_nextPage':\n                case _this.pdfViewer.element.id + '_nextPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToNextPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_lastPage':\n                case _this.pdfViewer.element.id + '_lastPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToLastPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_zoomIn':\n                case _this.pdfViewer.element.id + '_zoomInIcon':\n                    _this.pdfViewer.magnificationModule.zoomIn();\n                    break;\n                case _this.pdfViewer.element.id + '_zoomOut':\n                case _this.pdfViewer.element.id + '_zoomOutIcon':\n                    _this.pdfViewer.magnificationModule.zoomOut();\n                    break;\n                case _this.pdfViewer.element.id + '_selectTool':\n                case _this.pdfViewer.element.id + '_selectToolIcon':\n                    if (!_this.isSelectionToolDisabled) {\n                        _this.pdfViewerBase.initiateTextSelectMode();\n                        _this.updateInteractionTools(true);\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_handTool':\n                case _this.pdfViewer.element.id + '_handToolIcon':\n                    if (!_this.isScrollingToolDisabled) {\n                        _this.pdfViewerBase.initiatePanning();\n                        _this.updateInteractionTools(false);\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_search':\n                case _this.pdfViewer.element.id + '_searchIcon':\n                    _this.textSearchButtonHandler();\n                    break;\n            }\n            // tslint:disable-next-line:max-line-length\n            if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                args.originalEvent.target.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (isIE) {\n            this.totalPageItem.classList.add('e-pv-total-page-ms');\n        }\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        this.applyToolbarSettings();\n        this.initialEnableItems();\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n        }\n        else {\n            toolbar.style.display = 'none';\n            this.pdfViewerBase.navigationPane.sideBarToolbar.style.display = 'none';\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items\n     * @param  {boolean} isVisible\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items\n     * @param  {boolean} isEnable\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 16, 16);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 17, 17);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 15, 15);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem.parentElement, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem.parentElement, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem.parentElement, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem.parentElement, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem.parentElement, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem.parentElement, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem.parentElement, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem.parentElement, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem.parentElement, enableSearchOption);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        this.currentPageBox.min = 0;\n        this.currentPageBox.value = 0;\n        this.updateTotalPage();\n        this.updateToolbarItems();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewerBase.pageCount === 0) {\n            this.toolbar.enableItems(this.downloadItem.parentElement, false);\n            this.toolbar.enableItems(this.printItem.parentElement, false);\n            this.updateNavigationButtons();\n            this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n            this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            if (this.pdfViewer.magnificationModule) {\n                this.zoomDropDown.readonly = true;\n            }\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), false);\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), false);\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            this.toolbar.enableItems(this.panItem.parentElement, false);\n            this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n        }\n        else if (this.pdfViewerBase.pageCount > 0) {\n            this.toolbar.enableItems(this.downloadItem.parentElement, true);\n            this.toolbar.enableItems(this.printItem.parentElement, true);\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), true);\n            this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), true);\n            this.updateNavigationButtons();\n            this.updateZoomButtons();\n            if (this.pdfViewer.magnificationModule) {\n                this.zoomDropDown.readonly = false;\n            }\n            this.updateInteractionItems();\n            if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n            this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n            this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n            this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (this.currentPageBox.value === pageIndex) {\n            this.currentPageBoxElement.value = pageIndex.toString();\n        }\n        this.currentPageBox.value = pageIndex;\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.currentPageBox.min = 1;\n        }\n        this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.itemsContainer = createElement('div', { id: this.pdfViewer.element.id + '_toolbarItemsContainer' });\n        // tslint:disable-next-line:max-line-length\n        var openButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_open', this.pdfViewer.localeObj.getConstant('Open'), 'e-pv-open-document');\n        this.openDocumentItem = openButtonContainer.firstChild;\n        this.itemsContainer.appendChild(openButtonContainer);\n        this.toolbarElement.appendChild(this.itemsContainer);\n        var seperatorDiv1 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv1);\n        // tslint:disable-next-line:max-line-length\n        var firstPageContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_firstPage', this.pdfViewer.localeObj.getConstant('Go To First Page'), 'e-pv-first-page-navigation');\n        this.firstPageItem = firstPageContainer.firstChild;\n        this.itemsContainer.appendChild(firstPageContainer);\n        // tslint:disable-next-line:max-line-length\n        var previousContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_previousPage', this.pdfViewer.localeObj.getConstant('Previous Page'), 'e-pv-previous-page-navigation');\n        this.previousPageItem = previousContainer.firstChild;\n        this.itemsContainer.appendChild(previousContainer);\n        // tslint:disable-next-line:max-line-length\n        var nextContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_nextPage', this.pdfViewer.localeObj.getConstant('Next Page'), 'e-pv-next-page-navigation');\n        this.nextPageItem = nextContainer.firstChild;\n        this.itemsContainer.appendChild(nextContainer);\n        // tslint:disable-next-line:max-line-length\n        var lastPageContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_lastPage', this.pdfViewer.localeObj.getConstant('Go To Last Page'), 'e-pv-last-page-navigation');\n        this.lastPageItem = lastPageContainer.firstChild;\n        this.itemsContainer.appendChild(lastPageContainer);\n        // tslint:disable-next-line:max-line-length\n        var goToPageContainer = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', this.pdfViewer.localeObj.getConstant('Page Number'), null);\n        this.itemsContainer.appendChild(goToPageContainer);\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = goToPageContainer.firstChild;\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n        // tslint:disable-next-line:max-line-length\n        var totalPageContainer = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', null, 'e-pv-total-page');\n        this.totalPageItem = totalPageContainer.firstChild;\n        this.itemsContainer.appendChild(totalPageContainer);\n        this.updateTotalPage();\n        var seperatorDiv2 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv2);\n        // tslint:disable-next-line:max-line-length\n        var zoomOutContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_zoomOut', this.pdfViewer.localeObj.getConstant('Zoom Out'), 'e-pv-zoom-out');\n        this.zoomOutItem = zoomOutContainer.firstChild;\n        this.itemsContainer.appendChild(zoomOutContainer);\n        // tslint:disable-next-line:max-line-length\n        var zoomInContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_zoomIn', this.pdfViewer.localeObj.getConstant('Zoom In'), 'e-pv-zoom-in');\n        this.zoomInItem = zoomInContainer.firstChild;\n        this.itemsContainer.appendChild(zoomInContainer);\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownContainer = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', this.pdfViewer.localeObj.getConstant('Zoom'), null);\n        zoomDropdownContainer.className = zoomDropdownContainer.className + ' e-pv-zoom-drop-down-container';\n        this.zoomDropdownItem = zoomDropdownContainer.firstChild;\n        this.itemsContainer.appendChild(zoomDropdownContainer);\n        var seperatorDiv3 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv3);\n        // tslint:disable-next-line:max-line-length\n        var selectToolContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_selectTool', this.pdfViewer.localeObj.getConstant('Text Selection'), 'e-pv-text-select-tool');\n        this.textSelectItem = selectToolContainer.firstChild;\n        this.itemsContainer.appendChild(selectToolContainer);\n        // tslint:disable-next-line:max-line-length\n        var handToolContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_handTool', this.pdfViewer.localeObj.getConstant('Panning'), 'e-pv-pan-tool');\n        this.panItem = handToolContainer.firstChild;\n        this.itemsContainer.appendChild(handToolContainer);\n        // tslint:disable-next-line:max-line-length\n        var searchButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_search', this.pdfViewer.localeObj.getConstant('Text Search'), 'e-pv-text-search');\n        this.textSearchItem = searchButtonContainer.firstChild;\n        this.itemsContainer.appendChild(searchButtonContainer);\n        searchButtonContainer.style.position = 'absolute';\n        // tslint:disable-next-line:max-line-length\n        var downloadButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_download', this.pdfViewer.localeObj.getConstant('Download'), 'e-pv-download-document');\n        this.downloadItem = downloadButtonContainer.firstChild;\n        downloadButtonContainer.style.position = 'absolute';\n        // tslint:disable-next-line:max-line-length\n        downloadButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft()) + 'px';\n        this.itemsContainer.appendChild(downloadButtonContainer);\n        // tslint:disable-next-line:max-line-length\n        var printButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_print', this.pdfViewer.localeObj.getConstant('Print'), 'e-pv-print-document');\n        this.printItem = printButtonContainer.firstChild;\n        printButtonContainer.style.position = 'absolute';\n        if (downloadButtonContainer !== undefined) { // tslint:disable-next-line:max-line-length\n            printButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - 43) + 'px';\n        }\n        else { // tslint:disable-next-line:max-line-length\n            printButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft()) + 'px';\n        } // tslint:disable-next-line:max-line-length\n        searchButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - downloadButtonContainer.clientWidth - printButtonContainer.clientWidth - 54) + 'px';\n        this.itemsContainer.appendChild(printButtonContainer);\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.zoomDropdownItem);\n        this.toolbar = new tool({ clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup' });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        return this.toolbarElement;\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, tooltipText, className) {\n        var containerElement = createElement('div', { id: id + 'Container' });\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            containerElement.className = className + '-container e-overflow-show e-popup-text';\n            toolbarItem.className = className;\n        }\n        if (elementName === 'button' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.className = 'e-btn e-tbar-btn e-icon-btn e-pv-tbar-btn ' + className;\n            var buttonSpan = createElement('span', { id: id + 'Icon', className: className + '-icon e-pv-icon' });\n            toolbarItem.appendChild(buttonSpan);\n        }\n        else if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        containerElement.appendChild(toolbarItem);\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n        return containerElement;\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n        this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n        this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n        this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n        this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n        this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n        this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n        this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n        this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        var navigationToolbar = document.getElementById(this.pdfViewer.element.id + '_toolbarContainer_nav');\n        var downloadButtonElement = document.getElementById(this.pdfViewer.element.id + '_downloadContainer');\n        var printButtonElement = document.getElementById(this.pdfViewer.element.id + '_printContainer');\n        var searchButtonElement = document.getElementById(this.pdfViewer.element.id + '_searchContainer');\n        if (!navigationToolbar) {\n            if (downloadButtonElement) {\n                downloadButtonElement.style.left = viewerWidth + 'px';\n                downloadButtonElement.style.position = 'absolute';\n            }\n            if (printButtonElement) {\n                if (downloadButtonElement !== null) {\n                    // calculate the print Icon left Position value\n                    printButtonElement.style.left = (viewerWidth - downloadButtonElement.clientWidth) + 'px';\n                    printButtonElement.style.position = 'absolute';\n                }\n                else {\n                    printButtonElement.style.left = viewerWidth + 'px';\n                    printButtonElement.style.position = 'absolute';\n                }\n            }\n            if (searchButtonElement) {\n                searchButtonElement.style.position = 'absolute';\n                if (printButtonElement !== null) {\n                    // calculate the search Icon left Position value\n                    searchButtonElement.style.left = (parseFloat(printButtonElement.style.left) - printButtonElement.clientWidth) + 'px';\n                }\n                else if (downloadButtonElement !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    searchButtonElement.style.left = (parseFloat(downloadButtonElement.style.left) - downloadButtonElement.clientWidth) + 'px';\n                }\n                else {\n                    searchButtonElement.style.left = viewerWidth + 'px';\n                }\n            }\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        // tslint:disable-next-line\n        var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n        if (this.zoomDropDown.text === currentPercent) {\n            this.zoomDropDown.element.value = currentPercent;\n        }\n        if (this.zoomDropDown.index === 9) {\n            this.zoomDropDown.value = 2;\n        }\n        // tslint:disable-next-line\n        this.zoomDropDown.text = currentPercent;\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n        }\n        this.toolbar.enableItems(this.panItem.parentElement, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n            this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n            this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n            if (this.isTextSearchBoxDisplayed) {\n                this.selectItem(this.textSearchItem);\n                // tslint:disable-next-line:max-line-length\n                var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                searchInputElement.select();\n                searchInputElement.focus();\n            }\n            else {\n                this.deSelectItem(this.textSearchItem);\n            }\n        }\n    };\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.pdfViewer.enablePrint) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.pdfViewer.enableDownload) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.pdfViewer.enableTextSearch) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (!this.isNavigationToolVisible && this.isOpenBtnVisible && this.isDownloadBtnVisible\n            && this.isPrintBtnVisible) || (this.isOpenBtnVisible && toolbarItems.length === 1)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if ((!this.isNavigationToolVisible || !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible && this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n            this.showOpenOption(true);\n        }\n        else {\n            this.showOpenOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n            this.showPageNavigationTool(true);\n        }\n        else {\n            this.showPageNavigationTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n            this.showMagnificationTool(true);\n        }\n        else {\n            this.showMagnificationTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n            this.showSelectionTool(true);\n        }\n        else {\n            this.showSelectionTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n            this.showScrollingTool(true);\n        }\n        else {\n            this.showScrollingTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n        this.showSeparator(toolbarSettingsItems);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n * @hidden\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n * @hidden\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download': 'Download file',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document. No more matches were found',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    // /**\n    //  * Shows /hides the toolbar in the PdfViewer\n    //  * @param  {boolean} enableToolbar\n    //  * @returns void\n    //  */\n    // public showToolbar(enableToolbar: boolean): void {\n    //     this.toolbarModule.showToolbar(enableToolbar);\n    // }\n    // /**\n    //  * Shows /hides the the toolbar items in the PdfViewer\n    //  * @param  {string[]} items\n    //  * @param  {boolean} isVisible\n    //  * @returns void\n    //  */\n    // public showToolbarItem(items: ToolbarItem[], isVisible: boolean): void {\n    //     if (this.toolbarModule) {\n    //         this.toolbarModule.showToolbarItem(items, isVisible);\n    //     }\n    // }\n    // /**\n    //  * Enables /disables the the toolbar items in the PdfViewer\n    //  * @param  {string[]} items\n    //  * @param  {boolean} isEnable\n    //  * @returns void\n    //  */\n    // public enableToolbarItem(items: ToolbarItem[], isEnable: boolean): void {\n    //     if (this.toolbarModule) {\n    //         this.toolbarModule.enableToolbarItem(items, isEnable);\n    //     }\n    // }\n    // /**\n    //  * Navigate to given Page number\n    //  * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n    //  * @param  {number} pageNumber\n    //  * @returns void\n    //  */\n    // public goToPage(pageNumber: number): void {\n    //     this.navigationModule.goToPage(pageNumber);\n    // }\n    // /**\n    //  * Navigate to First page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToFirstPage(): void {\n    //     this.navigationModule.goToFirstPage();\n    // }\n    // /**\n    //  * Navigate to Previous page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToPreviousPage(): void {\n    //     this.navigationModule.goToPreviousPage();\n    // }\n    // /**\n    //  * Navigate to Next page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToNextPage(): void {\n    //     this.navigationModule.goToNextPage();\n    // }\n    // /**\n    //  * Navigate to Last page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToLastPage(): void {\n    //     this.navigationModule.goToLastPage();\n    // }\n    // /**\n    //  * Zoom the PDF document to the given zoom value\n    //  * @param  {number} zoomValue\n    //  * @returns void\n    //  */\n    // public zoomTo(zoomValue: number): void {\n    //     if (this.viewerBase.pageCount !== 0) {\n    //         this.magnificationModule.zoomTo(zoomValue);\n    //     }\n    // }\n    // /**\n    //  * Magnifies the page to the next value in the zoom drop down list.\n    //  * @returns void\n    //  */\n    // public zoomIn(): void {\n    //     this.magnificationModule.zoomIn();\n    // }\n    // /**\n    //  * Magnifies the page to the previous value in the zoom drop down list.\n    //  * @returns void\n    //  */\n    // public zoomOut(): void {\n    //     this.magnificationModule.zoomOut();\n    // }\n    // /**\n    //  * Scales the page to fit the page in the container in the control.\n    //  * @param  {number} zoomValue\n    //  * @returns void\n    //  */\n    // public fitToPage(): void {\n    //     this.magnificationModule.fitToPage();\n    // }\n    // /**\n    //  * Scales the page to fit the page width to the width of the container in the control.\n    //  * @returns void\n    //  */\n    // public fitToWidth(): void {\n    //     this.magnificationModule.fitToWidth();\n    // }\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document\n     * @param  {string} password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    // /**\n    //  * Display Bookmarks the PDF Document being loaded in the ejPdfViewer control\n    //  * @returns any\n    //  */\n    // // tslint:disable-next-line\n    // public getBookmarks(): any {\n    //     if (this.enableBookmark) {\n    //         // tslint:disable-next-line:max-line-length\n    //         return { bookmarks: this.bookmarkViewModule.bookmarks , bookmarksDestination: this.bookmarkViewModule.bookmarksDestination };\n    //     }\n    // }\n    // /**\n    //  * Navigate To current Bookmark Location the PDF document being loaded in the ejPdfViewer control.\n    //  * @returns void\n    //  */\n    // public navigateBookmark(pageIndex: number, Y: number): void {\n    //     this.bookmarkViewModule.navigateTo(pageIndex, Y);\n    // }\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    // /**\n    //  * Print the PDF document being loaded in the ejPdfViewer control.\n    //  * @returns void\n    //  */\n    // public print(): void {\n    //     if (this.enablePrint) {\n    //         this.printModule.print();\n    //     }\n    // }\n    // /**\n    //  * Searches the target text in the PDF document and highlights the occurrences in the pages\n    //  * @param  {string} searchText\n    //  * @param  {boolean} isMatchCase\n    //  * @returns void\n    //  */\n    // public searchText(searchText: string, isMatchCase: boolean): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchText(searchText, isMatchCase);\n    //     }\n    // }\n    // /**\n    //  * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public searchNext(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchNext();\n    //     }\n    // }\n    // /**\n    //  * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public searchPrevious(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchPrevious();\n    //     }\n    // }\n    // /**\n    //  * Cancels the text search of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public cancelTextSearch(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.cancelTextSearch();\n    //     }\n    // }\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.element.classList.remove('e-pdfviewer');\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        while (this.element.hasChildNodes()) {\n            this.element.removeChild(this.element.lastChild);\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'TextMarkupAnnotationOption', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.nodeClick = function (args) {\n            var bookid = Number(args.nodeData.id);\n            var proxy = _this;\n            var pageIndex = _this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n            var Y = _this.bookmarksDestination.bookMarkDestination[bookid].Y;\n            _this.goToBookmark(pageIndex, Y);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var _this = this;\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/Bookmarks');\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        data = JSON.parse(data);\n                    }\n                    _this.bookmarks = { bookMark: data.Bookmarks };\n                    _this.bookmarksDestination = { bookMarkDestination: data.BookmarksDestination };\n                }\n                if (_this.bookmarks == null) {\n                    _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                else {\n                    _this.pdfViewerBase.navigationPane.enableBookmarkButton();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.parentElement.removeChild(this.bookmarkView);\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n        // tslint:disable-next-line:max-line-length\n        var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n        // tslint:disable-next-line:max-line-length\n        var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n        var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n        bookmarkTitle.innerText = '${Title}';\n        bookmarkIconView.appendChild(bookmarkIcon);\n        bookmarkIconView.appendChild(bookmarkTitle);\n        // tslint:disable-next-line:max-line-length\n        var treeObj = new TreeView({\n            fields: {\n                dataSource: this.bookmarks.bookMark,\n                id: 'Id',\n                text: 'Title',\n                child: 'Child',\n                hasChildren: 'HasChild',\n            },\n            nodeTemplate: bookmarkIconView.outerHTML,\n            nodeSelected: this.nodeClick.bind(this)\n        });\n        treeObj.appendTo(this.bookmarkView);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        this.pdfViewerBase.navigationPane.disableBookmarkButton();\n        this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, xTouch, yTouch, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, touchX, touchY, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range' || (!selection.type && !selection.isCollapsed)) {\n            var isBackward = this.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && (selection.type === 'Range' || (!selection.type && !selection.isCollapsed))) {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (this.getNodeElementFromNode(selection.anchorNode).childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (this.getNodeElementFromNode(selection.focusNode).childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: this.getNodeElementFromNode(selection.anchorNode).id,\n                    startOffset: anchorOffsetValue, endNode: this.getNodeElementFromNode(selection.focusNode).id,\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bounds: selectionBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = this.getNodeElementFromNode(node);\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], this.getTextLastLength(lastElement), selection);\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            this.extendSelectionStich(lastElement_1.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    TextSelection.prototype.extendSelectionStich = function (node, offset, selection) {\n        if (selection.extend) {\n            selection.extend(node, offset);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = this.getNodeElementFromNode(selection.focusNode);\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.focusNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBounds = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bounds: selectionBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode).childNodes[0];\n        var endElement = document.getElementById(endNode).childNodes[0];\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = [];\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds.push(this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber));\n        }\n        else {\n            bounds.push(this.normalizeBounds(range.getBoundingClientRect(), pageNumber));\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.height)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bounds = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bounds = ranges[i].bounds;\n                }\n            }\n        }\n        return bounds;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        // tslint:disable-next-line:max-line-length\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))) {\n            var isBackWardSelection = this.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = this.getNodeElementFromNode(selection.anchorNode);\n                var focusElement = this.getNodeElementFromNode(selection.focusNode);\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = this.getNodeElementFromNode(anchorElement);\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = this.getNodeElementFromNode(focusElement);\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.touches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop, event.touches[0].clientX - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.getNodeElement = function (range, touchX, touchY, event, nodeElement) {\n        if (document.caretRangeFromPoint) {\n            range = document.caretRangeFromPoint(touchX, touchY);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n            // tslint:disable-next-line\n        }\n        else if (document.caretPositionFromPoint) {\n            // tslint:disable-next-line\n            var start = document.caretPositionFromPoint(touchX, touchY);\n            // tslint:disable-next-line\n            var end = document.caretPositionFromPoint(touchX, touchY);\n            range = document.createRange();\n            range.setStart(start.offsetNode, start.offset);\n            range.setEnd(end.offsetNode, end.offset);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    TextSelection.prototype.getNodeElementFromNode = function (node) {\n        if (node.parentElement) {\n            return node.parentElement;\n        }\n        else {\n            return node.parentNode;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            if (_this.searchBtn.classList.contains('e-pv-search-icon')) {\n                _this.initiateTextSearch();\n            }\n            else if (_this.searchBtn.classList.contains('e-pv-search-close')) {\n                _this.searchInput.value = '';\n                _this.resetTextSearch();\n                _this.searchInput.focus();\n            }\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        this.searchBox.style.right = '88.3px';\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n            this.searchBox.style.right = '0px';\n            // tslint:disable-next-line\n            this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            // tslint:disable-next-line\n            this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n        }\n        else {\n            this.searchBox.style.right = '88.3px';\n            this.searchBox.style.width = '';\n            this.searchInput.style.width = '';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch();\n            }\n        }\n        else {\n            this.initiateTextSearch();\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // tslint:disable-next-line:max-line-length\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // tslint:disable-next-line:max-line-length\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                        }\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                                this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                                this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -400 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                this.scrollToSearchStr(element, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                this.scrollToSearchStr(element_1, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                parent.scrollLeft = offsetX;\n            }\n        }\n        parent.scrollTop = offsetY;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var _this = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: this.pdfViewerBase.getDocumentId(), hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            var proxy = _this.pdfViewerBase;\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (data.pageText) {\n                        proxy.storeWinData(data, pageIndex);\n                        _this.initSearch(pageIndex, false);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (isEnable) {\n            this.prevSearchBtn.removeAttribute('disabled');\n        }\n        else {\n            this.prevSearchBtn.disabled = true;\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (isEnable) {\n            this.nextSearchBtn.removeAttribute('disabled');\n        }\n        else {\n            this.nextSearchBtn.disabled = true;\n        }\n    };\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (isEnable) {\n            this.searchBtn.classList.remove('e-pv-search-close');\n            this.searchBtn.classList.add('e-pv-search-icon');\n        }\n        else {\n            this.searchBtn.classList.remove('e-pv-search-icon');\n            this.searchBtn.classList.add('e-pv-search-close');\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText\n     * @param  {boolean} isMatchCase\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container' });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex <= _this.pdfViewerBase.pageCount; pageIndex++) {\n                    if (pageIndex < _this.pdfViewerBase.pageCount) {\n                        var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                        var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                        _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                    }\n                    else {\n                        _this.printWindowOpen();\n                    }\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.  \n        var jsonObject = { pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: 1 };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/PrintImages', false);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.send(JSON.stringify(jsonObject));\n        var printImage = request.responseText;\n        // tslint:disable-next-line\n        var pageImage = new Image();\n        pageImage.src = printImage;\n        pageImage.height = pageHeight;\n        pageImage.width = pageWidth;\n        this.printImageContainer = createElement('div', { id: this.pdfViewer.element.id + '_print_image_container' + pageIndex });\n        if (pageHeight < pageWidth) {\n            this.printImageContainer.style.height = pageWidth + 'px';\n            pageImage.height = pageWidth;\n            this.printImageContainer.style.width = pageHeight + 'px';\n            pageImage.width = pageHeight;\n        }\n        this.printImageContainer.appendChild(pageImage);\n        this.printViewerContainer.appendChild(this.printImageContainer);\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                + ' img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; }'\n                // set default page Height and page Width for A4 size.\n                + ' div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } '\n                // set default page Height and page Width for A4 size.\n                + 'div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>');\n        }\n        this.frameDoc.document.write(this.printViewerContainer.outerHTML);\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        setTimeout(function () {\n            _this.iframe.contentWindow.print();\n            _this.iframe.contentWindow.focus();\n            document.body.removeChild(_this.iframe);\n        }, 200);\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n"],"names":["LinkAnnotation","pdfViewer","viewerBase","this","pdfViewerBase","prototype","renderHyperlinkContent","data","pageIndex","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","_loop_1","i","aTag","createElement","id","rect","this_1","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","target","onclick","fireHyperlinkClick","window","open","document","getElementById","element","appendChild","_loop_2","this_2","undefined","destPageHeight","pageSize","destLocation","scrollValue","top","getZoomFactor","name","toString","viewerContainer","scrollTop","parseInt","className","style","background","position","left","Left","Top","width","Width","Height","height","color","modifyZindexForTextSelection","pageNumber","isAdd","pageCount","pageChildNodes","getElement","childNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","destroy","pageDiv","aElement","getElementsByTagName","index","parentNode","removeChild","getModuleName","NavigationPane","viewer","base","_this","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isBookmarkOpen","isThumbnailOpen","isNavigationPaneResized","resizeIconMouseOver","event","srcElement","cursor","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","clientX","offsetTop","clientY","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","preventDefault","maxWidth","Math","floor","outerContainerWidth","closeDiv","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","viewerWidth","clientWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","textContent","localeObj","getConstant","bookmarkPane","display","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","bookmarkButtonOnClick","bookmarkViewModule","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","sideBarToolbar","mainContainer","sideBarToolbarSplitter","addEventListener","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","bind","sideBarTitleOnMouseup","thumbnailButton","attrs","disabled","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","appendTo","bookmarkButton","buttonSpan","args","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","children","enableBookmarkButton","resizeIcon","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","clear","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","y","t","call","label","ops","pop","trys","push","g","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","toolbarHeight","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","isPanMode","dragX","dragY","isScrollbarMouseDown","onWindowResize","navigationPane","toolbarModule","updatePageHeight","getBoundingClientRect","onToolbarResize","enableToolbar","textSearchModule","textSearchBoxOnResize","viewerContainerOnMousedown","button","detail","isIE","documentMode","textSelectionModule","isClickedOnScrollBar","clearTextSelection","pageX","pageY","contains","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","eventTarget","idStringArray","split","firePageClick","offsetX","offsetY","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","selection","getSelection","type","isCollapsed","anchorNode","isTextSelection","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","removeAllRanges","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","touches","setTouchPoints","preventTouchEvent","contextMenuObj","close","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","viewerContainerOnPointerEnd","viewerContainerOnScroll","verticalScrollValue","pageHeight","getPageHeight","getPageTop","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","textLayer","TextLayer","initializeComponent","toolbarDiv","viewerMainContainer","tabIndex","touchAction","minHeight","intializeToolbar","createThumbnailContainer","createPrintPopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","initiatePageRender","documentData","password","documentId","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","request","XMLHttpRequest","serviceUrl","serverActionSettings","setRequestHeader","responseType","send","JSON","stringify","onreadystatechange","readyState","status","currentTarget","response","parse","requestSuccess","fireAjaxRequestFailed","statusText","onerror","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","hide","initPageDiv","isAutoZoom","isInitialLoading","indexOf","createRequestForRender","pageTop","viewerHeight","clientHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","show","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","sessionStorage","setItem","unload","updateWaitingPopup","pageCurrentRect","firstChild","bottom","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","fireDocumentUnload","unWireEvents","getItem","request_1","removeItem","scrollX","scrollY","getScrollParent","scrollNodeX","scrollNodeY","focus","userAgent","appVersion","scrollTo","node","nodeName","getComputedStyle","overflowY","popupElement","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","click","closeCorruptPopup","beforeClose","inputContainer","passwordInput","applyPassword","passwordCancelClick","passwordCancel","parentElement","isInteraction","removeEventListener","fitToAuto","fitType","fitToWidth","applyLeftPosition","initiatePanning","modifyTextCursor","disableTextSelectionMode","enableTextSelectionMode","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","parseFloat","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","j","pageCanvas","maintainSelectionOnScroll","indexInArray","splice","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","getContext","imageData","matrix_1","image_1","Image","onload","isNaN","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","linkAnnotationModule","renderTextContent","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","bounds","renderTextContents","resizeTextContents","pageWidth","orderPageDivElements","renderPageCanvas","nextElement","insertBefore","addTextLayer","leftPosition","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","anchorElement","href","documentElement","location","padCharacter","replace","createBlobUrl","canvas","oldCanvas","getStoredData","x","xCoordinate","yCoordinate","renderPages","data_1","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","storeObject","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","slice","byteNumbers","Array","charCodeAt","byteArray","Uint8Array","blob","Blob","URL","createObjectURL","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","idString","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","innerHTML","whiteSpace","setStyleToTextDiv","X","Y","Bottom","setTextElementProperties","context","font","fontSize","fontFamily","contextWidth","measureText","scale","transform","resizeExcessDiv","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","anchorOffset","focusOffset","startId","endId","textDivs","initId","lastId","length_1","clearDivSelection","textHeight","textLayerList","textElement","previousZoomFactor","text","textSearch","isMessagePopupOpened","copyContextMenu","Context","items","contextMenuOnBeforeOpen","select","onMenuItemSelect","Browser","isDevice","animationSettings","effect","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","right","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","pageBounds","item","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","getMagnifiedValue","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","requestCreation","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","pageId","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","thumbnailViewChildrenElement","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","tooltipElement","fileInputElement","printModule","print","navigationModule","updateInteractionTools","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","navigateToPage","which","enteredValue","textBoxFocusOut","currentPageBox","createToolbar","totalPageItem","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","showToolbar","toolbar","toolbarElement","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","applyHideToToolbar","showSeparator","enableToolbarItem","isEnable","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableItems","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","resetToolbar","updateInteractionItems","unWireEvent","controlWidth","itemsContainer","openButtonContainer","createToolbarItem","seperatorDiv1","firstPageContainer","previousContainer","nextContainer","lastPageContainer","goToPageContainer","NumericTextBox","format","showSpinButton","totalPageContainer","seperatorDiv2","zoomOutContainer","zoomInContainer","zoomDropdownContainer","seperatorDiv3","selectToolContainer","handToolContainer","searchButtonContainer","downloadButtonContainer","printButtonContainer","ComboBox","dataSource","fields","popupHeight","showClearButton","tool","clicked","overflowMode","elementName","tooltipText","containerElement","toolbarItem","styles","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","navigationToolbar","downloadButtonElement","printButtonElement","searchButtonElement","endIndex","isHide","hideItem","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","interactionMode","selectItem","deSelectItem","showSearchBox","searchInputElement","isTextSelect","enablePrint","enableDownload","toolbarItems","toolbarSettingsItems","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","ServerActionSettings","PdfViewer","options","defaultLocale","Cancel","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","No matches","Server error","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","enable","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","Event","NotifyPropertyChanges","Component","BookmarkView","nodeClick","bookid","Number","nodeData","bookmarksDestination","bookMarkDestination","PageIndex","goToBookmark","bookmarks","bookMark","BookmarksDestination","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","innerText","TreeView","child","hasChildren","nodeTemplate","outerHTML","nodeSelected","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","selectionRangeArray","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","nodeElement","zIndex","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","changedTouches","yTouch","getNodeElement","range","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","createRange","compareDocumentPosition","focusNode","Node","DOCUMENT_POSITION_PRECEDING","selectNodeContents","currentPosition","endPosition","endOffset","setStart","setEnd","rangeBounds","addRange","extend","detach","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","lowerPageIndex","higherPageIndex","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","isBackWardSelection","anchorPageId","getNodeElementFromNode","focusPageId","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","selectionObject","endNode","startNode","startOffset","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","backward","selectionBounds","getSelectionBounds","getRangeAt","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","extendSelectionStich","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","getTextId","elementId","lastIndexOf","bound","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","caretRangeFromPoint","onTouchElementScroll","caretPositionFromPoint","offsetNode","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","contentEditable","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","resetVariables","clearAllOccurrences","inputString","searchInput","searchKeypressHandler","enableNextButton","enablePrevButton","initiateTextSearch","updateSearchInputIcon","searchClickHandler","searchBtn","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","onTextSearchClose","initSearch","highlightOthers","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","pageString","searchText","queryLength","toLowerCase","matches","matchIndex","onMessageBoxOpen","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","k","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","offsetParent","applyTextSelection","iconSpan","searchNext","searchPrevious","cancelTextSearch","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printWindowOpen","printImage","responseText","pageImage","printImageContainer","browserUserAgent","write"],"mappings":"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"}