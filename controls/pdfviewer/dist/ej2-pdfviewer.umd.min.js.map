{"version":3,"file":"ej2-pdfviewer.umd.min.js","sources":["../src/pdfviewer/annotation/annotation.js","../src/pdfviewer/annotation/link-annotation.js","../src/pdfviewer/annotation/text-markup-annotation.js","../src/pdfviewer/base/navigation-pane.js","../src/pdfviewer/base/pdfviewer-base.js","../src/pdfviewer/base/text-layer.js","../src/pdfviewer/base/context-menu.js","../src/pdfviewer/magnification/magnification.js","../src/pdfviewer/navigation/page-navigation.js","../src/pdfviewer/thumbnail-view/thumbnail-view.js","../src/pdfviewer/toolbar/toolbar.js","../src/pdfviewer/toolbar/annotation-toolbar.js","../src/pdfviewer/pdfviewer.js","../src/pdfviewer/bookmark-view/bookmark-view.js","../src/pdfviewer/text-selection/text-selection.js","../src/pdfviewer/text-search/text-search.js","../src/pdfviewer/print/print.js"],"sourcesContent":["import { TextMarkupAnnotation } from '../index';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\nvar Annotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Annotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.actionCollection = [];\n        /**\n         * @private\n         */\n        this.redoCollection = [];\n        /**\n         * @private\n         */\n        this.isPopupNoteVisible = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n    }\n    /**\n     * Set annotation type to be added in next user interaction in PDF Document.\n     * @param type\n     * @returns void\n     */\n    Annotation.prototype.setAnnotationMode = function (type) {\n        if (type === 'None') {\n            this.clearAnnotationMode();\n        }\n        else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n            if (this.textMarkupAnnotationModule) {\n                this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n            }\n        }\n    };\n    Annotation.prototype.clearAnnotationMode = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.deleteAnnotation = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false);\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.initializeCollection = function () {\n        this.actionCollection = [];\n        this.redoCollection = [];\n        if (!this.popupNote) {\n            this.createNote();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.addAction = function (pageNumber, index, annotation, actionString, property) {\n        var action = { pageIndex: pageNumber, index: index, annotation: annotation, action: actionString, modifiedProperty: property };\n        this.actionCollection.push(action);\n        this.updateToolbar();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.undo = function () {\n        var actionObject = this.actionCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.redoCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.redo = function () {\n        var actionObject = this.redoCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.actionCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    Annotation.prototype.updateToolbar = function () {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n        }\n    };\n    Annotation.prototype.createNote = function () {\n        // tslint:disable-next-line:max-line-length\n        this.popupNote = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note', className: 'e-pv-annotation-note', styles: 'display:none' });\n        this.popupNoteAuthor = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_author', className: 'e-pv-annotation-note-author' });\n        this.popupNote.appendChild(this.popupNoteAuthor);\n        // tslint:disable-next-line:max-line-length\n        this.popupNoteContent = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_content', className: 'e-pv-annotation-note-content' });\n        this.popupNote.appendChild(this.popupNoteContent);\n        this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n        var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n        var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n        if (author) {\n            this.popupNoteAuthor.textContent = author;\n        }\n        this.popupNoteContent.textContent = note;\n        if (type === 'Highlight') {\n            this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n        }\n        else if (type === 'Underline') {\n            this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n        }\n        else if (type === 'Strikethrough') {\n            this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n        }\n        this.popupNote.style.display = 'block';\n        var topPosition = (event.pageY - mainContainerPosition.top + 5);\n        var leftPosition = (event.pageX - mainContainerPosition.left + 5);\n        if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n            leftPosition = leftPosition - popupNoteClientRect.width;\n        }\n        if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n            topPosition = topPosition - popupNoteClientRect.height;\n        }\n        this.popupNote.style.top = topPosition + 'px';\n        this.popupNote.style.left = leftPosition + 'px';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.hidePopupNote = function () {\n        this.popupNote.style.display = 'none';\n    };\n    Annotation.prototype.createTextMarkupPopup = function () {\n        var _this = this;\n        var elementId = this.pdfViewer.element.id;\n        // tslint:disable-next-line:max-line-length\n        this.popupElement = createElement('div', { id: elementId + '_popup_annotation_note', className: 'e-pv-annotation-popup-menu', styles: 'display:none' });\n        var headerElement = createElement('div', { id: elementId + '_popup_header', className: 'e-pv-annotation-popup-header' });\n        // tslint:disable-next-line:max-line-length\n        this.authorPopupElement = createElement('div', { id: elementId + '_popup_author', className: 'e-pv-annotation-popup-author' });\n        headerElement.appendChild(this.authorPopupElement);\n        // tslint:disable-next-line:max-line-length\n        var closeBtn = createElement('span', { id: elementId + '_popup_close', className: 'e-pv-annotation-popup-close e-pv-icon' });\n        headerElement.appendChild(closeBtn);\n        this.popupElement.appendChild(headerElement);\n        // tslint:disable-next-line:max-line-length\n        this.modifiedDateElement = createElement('div', { id: elementId + '_popup_modified_time', className: 'e-pv-annotation-modified-time' });\n        this.popupElement.appendChild(this.modifiedDateElement);\n        // tslint:disable-next-line:max-line-length\n        var contentContainer = createElement('div', { id: elementId + '_popup_content_container', className: 'e-pv-annotation-popup-note-container' });\n        this.noteContentElement = createElement('div', { id: elementId + '_popup_content', className: 'e-pv-annotation-popup-content' });\n        this.noteContentElement.contentEditable = 'true';\n        contentContainer.appendChild(this.noteContentElement);\n        this.popupElement.appendChild(contentContainer);\n        this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n        closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n        closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n        this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n        window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n        this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n        window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n        this.noteContentElement.addEventListener('mousedown', function () { _this.noteContentElement.focus(); });\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMoveStart = function (event) {\n        if (event.type === 'touchstart') {\n            event = event.changedTouches[0];\n        }\n        if ((event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            this.isPopupMenuMoved = true;\n            var popupElementClientRect = this.popupElement.getBoundingClientRect();\n            this.clientX = event.clientX - popupElementClientRect.left;\n            // tslint:disable-next-line:max-line-length\n            this.clientY = (event.clientY - popupElementClientRect.top) + (this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMove = function (event) {\n        if (event.type === 'touchmove') {\n            event = event.changedTouches[0];\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.isPopupMenuMoved && (event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            var left = (event.clientX - this.clientX) + parseFloat(this.popupElement.style.left);\n            var top_1 = ((event.clientY - this.clientY) + parseFloat(this.popupElement.style.top));\n            this.clientX = event.clientX;\n            this.clientY = event.clientY;\n            var clientPosition = this.popupElement.getBoundingClientRect();\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (left > parseFloat(pageDiv.style.left) && (left + clientPosition.width) < (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                this.popupElement.style.left = (left) + 'px';\n            }\n            else {\n                this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            if (top_1 > parseFloat(pageDiv.style.top) && (top_1 + clientPosition.height) < (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                this.popupElement.style.top = (top_1) + 'px';\n            }\n            else {\n                this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n            }\n        }\n    };\n    Annotation.prototype.onPopupElementMoveEnd = function () {\n        this.isPopupMenuMoved = false;\n    };\n    Annotation.prototype.saveClosePopupMenu = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n        }\n        this.closePopupMenu();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.closePopupMenu = function () {\n        if (this.popupElement) {\n            this.popupElement.parentElement.removeChild(this.popupElement);\n            this.popupElement = null;\n            this.isPopupNoteVisible = false;\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showAnnotationPopup = function (event) {\n        if (this.textMarkupAnnotationModule) {\n            this.currentAnnotPageNumber = this.getEventPageNumber(event);\n            // tslint:disable-next-line:max-line-length\n            if (this.textMarkupAnnotationModule && (event.target !== (this.noteContentElement) || (event.target.contains(this.noteContentElement.childNodes[0])))) {\n                this.hidePopupNote();\n                if (!this.popupElement) {\n                    this.createTextMarkupPopup();\n                    this.popupElement.style.display = 'block';\n                    this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;\n                    // tslint:disable-next-line:max-line-length\n                    this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n                    this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n                    var clientPosition = this.popupElement.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n                    var canvasPosition = pageDiv.getBoundingClientRect();\n                    var topPosition = ((event.clientY) - canvasPosition.top) + parseFloat(pageDiv.style.top);\n                    var leftPosition = (event.clientX);\n                    if ((leftPosition + clientPosition.width) > (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                        this.popupElement.style.left = (leftPosition - clientPosition.width) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.left = leftPosition + 'px';\n                    }\n                    if ((topPosition + clientPosition.height) > (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                        this.popupElement.style.top = (topPosition - clientPosition.height) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.top = topPosition + 'px';\n                    }\n                    this.isPopupNoteVisible = true;\n                }\n            }\n        }\n    };\n    Annotation.prototype.getProperDate = function (date) {\n        var dateObject = new Date(date.toString());\n        if (isNaN(dateObject.getFullYear())) {\n            var dateString = date.slice(2, 16);\n            // tslint:disable-next-line:max-line-length\n            dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n            dateObject = new Date(dateString);\n        }\n        // tslint:disable-next-line:max-line-length\n        return (dateObject.getMonth() + 1) + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.getEventPageNumber = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line:max-line-length\n        var pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1];\n        // tslint:disable-next-line\n        return parseInt(pageString);\n    };\n    /**\n     * private\n     */\n    Annotation.prototype.clear = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.destroy = function () {\n        this.textMarkupAnnotationModule.clear();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.getModuleName = function () {\n        return 'Annotation';\n    };\n    return Annotation;\n}());\nexport { Annotation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined && linkPage[i] > 0) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                if (scrollValue !== undefined) {\n                    aTag.name = scrollValue.toString();\n                    aTag.onclick = function () {\n                        // tslint:disable-next-line:radix\n                        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                        return false;\n                    };\n                }\n            }\n            var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n            if (pageDiv) {\n                var pageChildNodes = pageDiv.childNodes;\n                for (var i = 0; i < pageChildNodes.length; i++) {\n                    var childElement = pageChildNodes[i];\n                    if (childElement.tagName === 'A') {\n                        if (isAdd) {\n                            childElement.classList.add('e-pv-onselection');\n                        }\n                        else {\n                            childElement.classList.remove('e-pv-onselection');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\n/**\n * The `TextMarkupAnnotation` module is used to handle text markup annotation actions of PDF viewer.\n * @hidden\n */\nvar TextMarkupAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextMarkupAnnotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.currentTextMarkupAddMode = '';\n        /**\n         * @private\n         */\n        this.selectTextMarkupCurrentPage = null;\n        /**\n         * @private\n         */\n        this.currentTextMarkupAnnotation = null;\n        this.currentAnnotationIndex = null;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.highlightColor = pdfViewer.highlightSettings.color;\n        this.underlineColor = pdfViewer.underlineSettings.color;\n        this.strikethroughColor = pdfViewer.strikethroughSettings.color;\n        this.highlightOpacity = pdfViewer.highlightSettings.opacity;\n        this.underlineOpacity = pdfViewer.underlineSettings.opacity;\n        this.strikethroughOpacity = pdfViewer.strikethroughSettings.opacity;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        // tslint:disable-next-line:max-line-length\n        var annotationCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber, className: 'e-pv-annotation-canvas' });\n        annotationCanvas.width = pageWidth;\n        annotationCanvas.height = pageHeight;\n        annotationCanvas.style.display = displayMode;\n        pageDiv.appendChild(annotationCanvas);\n        return annotationCanvas;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotationsInPage = function (textMarkupAnnotations, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        this.renderTextMarkupAnnotations(textMarkupAnnotations, pageNumber, canvas, this.pdfViewerBase.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotations = function (textMarkupAnnotations, pageNumber, canvas, factor) {\n        if (canvas) {\n            canvas.width = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].width, factor);\n            canvas.height = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].height, factor);\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            // tslint:disable-next-line\n            var annotations = this.getAnnotations(pageNumber, textMarkupAnnotations);\n            if (annotations) {\n                for (var i = 0; i < annotations.length; i++) {\n                    // tslint:disable-next-line\n                    var annotation = annotations[i];\n                    var annotationObject = null;\n                    if (annotation.TextMarkupAnnotationType) {\n                        // tslint:disable-next-line:max-line-length\n                        annotationObject = { textMarkupAnnotationType: annotation.TextMarkupAnnotationType, color: annotation.Color, opacity: annotation.Opacity, bounds: annotation.Bounds, author: annotation.Author, subject: annotation.Subject, modifiedDate: annotation.ModifiedDate, note: annotation.Note, rect: annotation.Rect };\n                        this.storeAnnotations(pageNumber, annotationObject);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var type = annotation.TextMarkupAnnotationType ? annotation.TextMarkupAnnotationType : annotation.textMarkupAnnotationType;\n                    // tslint:disable-next-line\n                    var annotBounds = annotation.Bounds ? annotation.Bounds : annotation.bounds;\n                    var opacity = annotation.Opacity ? annotation.Opacity : annotation.opacity;\n                    var color = annotation.Color ? annotation.Color : annotation.color;\n                    switch (type) {\n                        case 'Highlight':\n                            this.renderHighlightAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Strikethrough':\n                            this.renderStrikeoutAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Underline':\n                            this.renderUnderlineAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                    }\n                }\n            }\n            if (pageNumber === this.selectTextMarkupCurrentPage) {\n                this.maintainAnnotationSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.drawTextMarkupAnnotations = function (type) {\n        this.isTextMarkupAnnotationMode = true;\n        this.currentTextMarkupAddMode = type;\n        var selectionObject = this.pdfViewer.textSelectionModule.selectionRangeArray;\n        if (selectionObject.length > 0) {\n            this.convertSelectionToTextMarkup(type, selectionObject, this.pdfViewerBase.getZoomFactor());\n        }\n        if (window.getSelection().toString()) {\n            var pageBounds = this.getDrawnBounds();\n            if (pageBounds.length > 0) {\n                for (var i = 0; i < pageBounds.length; i++) {\n                    // tslint:disable-next-line:max-line-length\n                    this.drawTextMarkups(type, pageBounds[i].bounds, pageBounds[i].pageIndex, pageBounds[i].rect, this.pdfViewerBase.getZoomFactor());\n                }\n            }\n        }\n        // this.pdfViewerBase.annotationHelper.redoCollection = [];\n        this.pdfViewer.textSelectionModule.clearTextSelection();\n    };\n    TextMarkupAnnotation.prototype.convertSelectionToTextMarkup = function (type, selectionObject, factor) {\n        for (var i = 0; i < selectionObject.length; i++) {\n            this.drawTextMarkups(type, selectionObject[i].rectangleBounds, selectionObject[i].pageNumber, selectionObject[i].bound, factor);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.drawTextMarkups = function (type, bounds, pageNumber, rect, factor) {\n        var annotation = null;\n        var context = this.getPageContext(pageNumber);\n        if (context) {\n            context.setLineDash([]);\n            switch (type) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.highlightColor, this.highlightOpacity, bounds, this.pdfViewer.highlightSettings.author, this.pdfViewer.highlightSettings.subject, this.pdfViewer.highlightSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderHighlightAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.strikethroughColor, this.strikethroughOpacity, bounds, this.pdfViewer.strikethroughSettings.author, this.pdfViewer.strikethroughSettings.subject, this.pdfViewer.strikethroughSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderStrikeoutAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.underlineColor, this.underlineOpacity, bounds, this.pdfViewer.underlineSettings.author, this.pdfViewer.underlineSettings.subject, this.pdfViewer.underlineSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderUnderlineAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n            }\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line\n            var settings = { opacity: annotation.opacity, color: annotation.color, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate };\n            var index = this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length - 1].index;\n            this.pdfViewer.fireAnnotationAdd(pageNumber, index, type, annotation.rect, settings);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderHighlightAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = bounds[i];\n            context.beginPath();\n            var x = bound.X ? bound.X : bound.left;\n            var y = bound.Y ? bound.Y : bound.top;\n            var width = bound.Width ? bound.Width : bound.width;\n            var height = bound.Height ? bound.Height : bound.height;\n            // tslint:disable-next-line:max-line-length\n            context.rect((x * factor), (y * factor), (width * factor), (height * factor));\n            context.globalAlpha = opacity * 0.5;\n            context.closePath();\n            context.fillStyle = color;\n            context.msFillRule = 'nonzero';\n            context.fill();\n        }\n        context.save();\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderStrikeoutAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, bound.x, bound.y, bound.width, (bound.height / 2), color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderUnderlineAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var boundValues = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, boundValues.x, boundValues.y, boundValues.width, boundValues.height, color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getProperBounds = function (bound) {\n        var x = bound.X ? bound.X : bound.left;\n        var y = bound.Y ? bound.Y : bound.top;\n        var width = bound.Width ? bound.Width : bound.width;\n        var height = bound.Height ? bound.Height : bound.height;\n        return { x: x, y: y, width: width, height: height };\n    };\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.drawLine = function (opacity, x, y, width, height, color, factor, context) {\n        context.globalAlpha = opacity;\n        context.beginPath();\n        context.moveTo((x * factor), (y + height) * factor);\n        context.lineTo((width + x) * factor, (y + height) * factor);\n        context.lineWidth = 1;\n        context.strokeStyle = color;\n        context.closePath();\n        context.msFillRule = 'nonzero';\n        context.stroke();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.printTextMarkupAnnotations = function (textMarkupAnnotations, pageIndex) {\n        var canvas = createElement('canvas', { id: this.pdfViewer.element.id + '_print_annotation_layer_' + pageIndex });\n        // tslint:disable-next-line\n        var annotations = this.getAnnotations(pageIndex, null);\n        if (annotations) {\n            this.renderTextMarkupAnnotations(null, pageIndex, canvas, 1);\n        }\n        else {\n            this.renderTextMarkupAnnotations(textMarkupAnnotations, pageIndex, canvas, 1);\n        }\n        var imageSource = canvas.toDataURL();\n        return imageSource;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveTextMarkupAnnotations = function () {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        // tslint:disable-next-line\n        var annotations = new Array();\n        var colorpick = new ColorPicker();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        // tslint:disable-next-line:max-line-length\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds));\n                        var colorString = colorpick.getValue(pageAnnotationObject.annotations[z].color, 'rgba');\n                        pageAnnotationObject.annotations[z].color = JSON.stringify(this.getRgbCode(colorString));\n                        pageAnnotationObject.annotations[z].rect = JSON.stringify(pageAnnotationObject.annotations[z].rect);\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.deleteTextMarkupAnnotation = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n            var deletedAnnotation = null;\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    deletedAnnotation = pageAnnotations.splice(i, 1)[0];\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, deletedAnnotation, 'Text Markup Deleted', null);\n                    this.currentAnnotationIndex = i;\n                }\n            }\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.currentTextMarkupAnnotation = null;\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, deletedAnnotation.textMarkupAnnotationType);\n            this.currentAnnotationIndex = null;\n            this.selectTextMarkupCurrentPage = null;\n            if (Browser.isDevice) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyColorProperty = function (color) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Color', color, null);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, true, false);\n            this.currentAnnotationIndex = null;\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyOpacityProperty = function (args) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Opacity', args.value / 100, args.name);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            if (args.name === 'changed') {\n                this.pdfViewerBase.isDocumentEdited = true;\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, false, true);\n                this.currentAnnotationIndex = null;\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.modifyAnnotationProperty = function (property, value, status) {\n        var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                if (property === 'Color') {\n                    pageAnnotations[i].color = value;\n                }\n                else if (property === 'Opacity') {\n                    pageAnnotations[i].opacity = value;\n                }\n                var date = new Date();\n                pageAnnotations[i].modifiedDate = date.toLocaleString();\n                this.currentAnnotationIndex = i;\n                if (status === null || status === 'changed') {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, this.currentTextMarkupAnnotation, 'Text Markup Property modified', property);\n                }\n                this.currentTextMarkupAnnotation = pageAnnotations[i];\n            }\n        }\n        return pageAnnotations;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.undoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.splice(index, 1);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 0, annotation);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.undoRedoPropertyChange = function (annotation, pageNumber, index, property) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (property === 'Color') {\n                var tempColor = pageAnnotations[index].color;\n                pageAnnotations[index].color = annotation.color;\n                annotation.color = tempColor;\n            }\n            else {\n                var tempOpacity = pageAnnotations[index].opacity;\n                pageAnnotations[index].opacity = annotation.opacity;\n                annotation.opacity = tempOpacity;\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        return annotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.redoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.push(annotation);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 1);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveNoteContent = function (pageNumber, note) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    pageAnnotations[i].note = note;\n                }\n            }\n        }\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.pdfViewerBase.isDocumentEdited = true;\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotation = function () {\n        this.selectTextMarkupCurrentPage = null;\n        this.currentTextMarkupAnnotation = null;\n        this.enableAnnotationPropertiesTool(false);\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotationSelection = function (pageNumber) {\n        var lowerPageIndex = (pageNumber - 2) >= 0 ? (pageNumber - 2) : 0;\n        // tslint:disable-next-line:max-line-length\n        var higherPageIndex = (pageNumber + 2) < this.pdfViewerBase.pageCount ? (pageNumber + 2) : this.pdfViewerBase.pageCount - 1;\n        for (var k = lowerPageIndex; k <= higherPageIndex; k++) {\n            this.clearAnnotationSelection(k);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getBoundsForSave = function (bounds) {\n        // tslint:disable-next-line\n        var newArray = [];\n        for (var i = 0; i < bounds.length; i++) {\n            var left = bounds[i].left ? bounds[i].left : bounds[i].Left;\n            var top_1 = bounds[i].top ? bounds[i].top : bounds[i].Top;\n            var height = bounds[i].height ? bounds[i].height : bounds[i].Height;\n            var width = bounds[i].width ? bounds[i].width : bounds[i].Width;\n            newArray.push({ left: left, top: top_1, width: width, height: height });\n        }\n        return newArray;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getRgbCode = function (colorString) {\n        var stringArray = colorString.split(',');\n        // tslint:disable-next-line:radix\n        var r = parseInt(stringArray[0].split('(')[1]);\n        // tslint:disable-next-line:radix\n        var g = parseInt(stringArray[1]);\n        // tslint:disable-next-line:radix\n        var b = parseInt(stringArray[2]);\n        return { r: r, g: g, b: b };\n    };\n    TextMarkupAnnotation.prototype.getDrawnBounds = function () {\n        var pageBounds = [];\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var range = document.createRange();\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode === selection.focusNode) {\n                var pageId = this.pdfViewerBase.textLayer.getPageIndex(selection.anchorNode);\n                if (!isNaN(pageId)) {\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + pageId).getBoundingClientRect();\n                    if (isBackWardSelection) {\n                        range.setStart(selection.focusNode, selection.focusOffset);\n                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                    }\n                    else {\n                        if (selection.anchorOffset < selection.focusOffset) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            range.setStart(selection.focusNode, selection.focusOffset);\n                            range.setEnd(selection.anchorNode, selection.anchorOffset);\n                        }\n                    }\n                    var boundingRect = range.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                    var rectangleArray = [];\n                    rectangleArray.push(rectangle);\n                    // tslint:disable-next-line\n                    var rect = { left: rectangle.left, top: rectangle.top, right: rectangle.right, bottom: rectangle.bottom };\n                    pageBounds.push({ pageIndex: pageId, bounds: rectangleArray, rect: rect });\n                }\n            }\n            else {\n                var startNode = void 0;\n                var endNode = void 0;\n                var selectionStartOffset = void 0;\n                var selectionEndOffset = void 0;\n                if (isBackWardSelection) {\n                    startNode = selection.focusNode;\n                    selectionStartOffset = selection.focusOffset;\n                    endNode = selection.anchorNode;\n                    selectionEndOffset = selection.anchorOffset;\n                }\n                else {\n                    startNode = selection.anchorNode;\n                    selectionStartOffset = selection.anchorOffset;\n                    endNode = selection.focusNode;\n                    selectionEndOffset = selection.focusOffset;\n                }\n                var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(startNode);\n                var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(startNode, anchorPageId);\n                var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(endNode);\n                var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(endNode, focusPageId);\n                var startOffset = 0;\n                var endOffset = 0;\n                var currentId = 0;\n                for (var i = anchorPageId; i <= focusPageId; i++) {\n                    var selectionRects = [];\n                    var pageStartId = void 0;\n                    var pageEndId = void 0;\n                    var pageStartOffset = void 0;\n                    var pageEndOffset = void 0;\n                    var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + i).getBoundingClientRect();\n                    if (i === anchorPageId) {\n                        currentId = anchorTextId;\n                    }\n                    else {\n                        currentId = 0;\n                    }\n                    for (var j = currentId; j < textDivs.length; j++) {\n                        var textElement = textDivs[j];\n                        if (j === currentId) {\n                            pageStartId = currentId;\n                            pageStartOffset = (i === anchorPageId) ? selectionStartOffset : 0;\n                        }\n                        else {\n                            pageEndId = j;\n                            pageEndOffset = (i === focusPageId) ? selectionEndOffset : textElement.textContent.length;\n                        }\n                        if (j === anchorTextId && i === anchorPageId) {\n                            startOffset = selectionStartOffset;\n                        }\n                        else {\n                            startOffset = 0;\n                        }\n                        if (j === focusTextId && i === focusPageId) {\n                            endOffset = selectionEndOffset;\n                        }\n                        else {\n                            endOffset = textElement.textContent.length;\n                        }\n                        for (var k = 0; k < textElement.childNodes.length; k++) {\n                            var node = textElement.childNodes[k];\n                            range.setStart(node, startOffset);\n                            range.setEnd(node, endOffset);\n                        }\n                        var boundingRect = range.getBoundingClientRect();\n                        // tslint:disable-next-line:max-line-length\n                        var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                        selectionRects.push(rectangle);\n                        range.detach();\n                        if (i === focusPageId && j === focusTextId) {\n                            break;\n                        }\n                    }\n                    var startElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageStartId).childNodes[0];\n                    var endElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageEndId).childNodes[0];\n                    var pageRange = document.createRange();\n                    pageRange.setStart(startElementNode, pageStartOffset);\n                    pageRange.setEnd(endElementNode, pageEndOffset);\n                    var pageRectBounds = pageRange.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageRectangle = { left: this.getDefaultValue(pageRectBounds.left - pageRect.left), top: this.getDefaultValue(pageRectBounds.top - pageRect.top), width: this.getDefaultValue(pageRectBounds.width), height: this.getDefaultValue(pageRectBounds.height), right: this.getDefaultValue(pageRectBounds.right - pageRect.left), bottom: this.getDefaultValue(pageRectBounds.bottom - pageRect.top) };\n                    // tslint:disable-next-line\n                    var rect = { left: pageRectangle.left, top: pageRectangle.top, right: pageRectangle.right, bottom: pageRectangle.bottom };\n                    pageBounds.push({ pageIndex: i, bounds: selectionRects, rect: rect });\n                }\n            }\n        }\n        selection.removeAllRanges();\n        return pageBounds;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotationsPinch = function (pageNumber) {\n        var annotCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (annotCanvas) {\n            var oldAnnotCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n            if (oldAnnotCanvas) {\n                if (annotCanvas) {\n                    oldAnnotCanvas.id = annotCanvas.id;\n                    annotCanvas.parentElement.removeChild(annotCanvas);\n                }\n                else {\n                    oldAnnotCanvas.id = this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber;\n                }\n                annotCanvas = oldAnnotCanvas;\n            }\n            annotCanvas.style.width = '';\n            annotCanvas.style.height = '';\n            annotCanvas.width = this.pdfViewerBase.pageSize[pageNumber].width * this.pdfViewerBase.getZoomFactor();\n            annotCanvas.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor();\n            this.renderTextMarkupAnnotations(null, pageNumber, annotCanvas, this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotations = function (pageNumber) {\n        var oldCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n        if (oldCanvas) {\n            oldCanvas.parentElement.removeChild(oldCanvas);\n        }\n        var newCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (newCanvas) {\n            newCanvas.style.display = 'block';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            canvas.style.width = width + 'px';\n            canvas.style.height = height + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseUp = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageNumber, canvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, canvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n                if (this.pdfViewer.toolbarModule) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                }\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else {\n            if (!this.pdfViewerBase.isClickedOnScrollBar(event)) {\n                this.clearCurrentAnnotation();\n                this.clearCurrentAnnotationSelection(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationTouchEnd = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            this.clearCurrentAnnotationSelection(pageNumber);\n            var touchCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            // tslint:disable-next-line:max-line-length\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.touches[0].clientX, event.touches[0].clientY, pageNumber, touchCanvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, touchCanvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else if (this.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n            var number = this.selectTextMarkupCurrentPage;\n            this.selectTextMarkupCurrentPage = null;\n            this.clearAnnotationSelection(number);\n        }\n        else {\n            this.clearCurrentAnnotation();\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseMove = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line\n        var pageIndex = parseInt(eventTarget.id.split('_text_')[1]) || parseInt(eventTarget.id.split('_textLayer_')[1]) || parseInt(eventTarget.id.split('_annotationCanvas_')[1]);\n        if (pageIndex) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageIndex, canvas);\n            if (currentAnnot) {\n                eventTarget.style.cursor = 'pointer';\n                // this.showPopupNote(event, currentAnnot);\n            }\n            else {\n                this.pdfViewer.annotationModule.hidePopupNote();\n                if (this.pdfViewerBase.isPanMode && !this.pdfViewerBase.getAnnotationToolStatus()) {\n                    eventTarget.style.cursor = 'grab';\n                }\n                else {\n                    eventTarget.style.cursor = 'auto';\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.showPopupNote = function (event, annotation) {\n        if (annotation.note) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.showPopupNote(event, annotation.color, annotation.author, annotation.note, annotation.textMarkupAnnotationType);\n        }\n    };\n    TextMarkupAnnotation.prototype.getCurrentMarkupAnnotation = function (clientX, clientY, pageNumber, canvas) {\n        var currentTextMarkupAnnotations = [];\n        var canvasParentPosition = canvas.parentElement.getBoundingClientRect();\n        var leftClickPosition = clientX - canvasParentPosition.left;\n        var topClickPosition = clientY - canvasParentPosition.top;\n        var annotationList = this.getAnnotations(pageNumber, null);\n        var isAnnotationGot = false;\n        if (annotationList) {\n            for (var i = 0; i < annotationList.length; i++) {\n                var annotation = annotationList[i];\n                for (var j = 0; j < annotation.bounds.length; j++) {\n                    // tslint:disable-next-line\n                    var bound = annotation.bounds[j];\n                    var left = bound.left ? bound.left : bound.Left;\n                    var top_2 = bound.top ? bound.top : bound.Top;\n                    var width = bound.width ? bound.width : bound.Width;\n                    var height = bound.height ? bound.height : bound.Height;\n                    // tslint:disable-next-line:max-line-length\n                    if (leftClickPosition >= this.getMagnifiedValue(left, this.pdfViewerBase.getZoomFactor()) && leftClickPosition <= this.getMagnifiedValue(left + width, this.pdfViewerBase.getZoomFactor()) && topClickPosition >= this.getMagnifiedValue(top_2, this.pdfViewerBase.getZoomFactor()) && topClickPosition <= this.getMagnifiedValue(top_2 + height, this.pdfViewerBase.getZoomFactor())) {\n                        currentTextMarkupAnnotations.push(annotation);\n                        isAnnotationGot = true;\n                    }\n                    else {\n                        if (isAnnotationGot) {\n                            isAnnotationGot = false;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        var currentAnnot = null;\n        if (currentTextMarkupAnnotations.length > 1) {\n            currentAnnot = this.compareCurrentAnnotations(currentTextMarkupAnnotations);\n        }\n        else if (currentTextMarkupAnnotations.length === 1) {\n            currentAnnot = currentTextMarkupAnnotations[0];\n        }\n        return currentAnnot;\n    };\n    TextMarkupAnnotation.prototype.compareCurrentAnnotations = function (annotations) {\n        var previousX;\n        var currentAnnotation = null;\n        for (var i = 0; i < annotations.length; i++) {\n            if (i === annotations.length - 1) {\n                break;\n            }\n            // tslint:disable-next-line\n            var firstAnnotBounds = annotations[i].bounds;\n            var firstXposition = firstAnnotBounds[0].left ? firstAnnotBounds[0].left : firstAnnotBounds[0].Left;\n            var firstYposition = firstAnnotBounds[0].top ? firstAnnotBounds[0].top : firstAnnotBounds[0].Top;\n            // tslint:disable-next-line\n            var secondAnnotBounds = annotations[i + 1].bounds;\n            var secondXposition = secondAnnotBounds[0].left ? secondAnnotBounds[0].left : secondAnnotBounds[0].Left;\n            var secondYposition = secondAnnotBounds[0].top ? secondAnnotBounds[0].top : secondAnnotBounds[0].Top;\n            if ((firstXposition < secondXposition) || (firstYposition < secondYposition)) {\n                previousX = secondXposition;\n                currentAnnotation = annotations[i + 1];\n            }\n            else {\n                previousX = firstXposition;\n                currentAnnotation = annotations[i];\n            }\n            if (previousX && (i === (annotations.length - 2))) {\n                if ((previousX === firstXposition) && (previousX === secondXposition)) {\n                    previousX = secondXposition;\n                    currentAnnotation = annotations[i + 1];\n                }\n            }\n        }\n        return currentAnnotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clearAnnotationSelection = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        }\n    };\n    TextMarkupAnnotation.prototype.selectAnnotation = function (annotation, canvas) {\n        for (var i = 0; i < annotation.bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = annotation.bounds[i];\n            var x = bound.left ? bound.left : bound.Left;\n            var y = bound.top ? bound.top : bound.Top;\n            var width = bound.width ? bound.width : bound.Width;\n            var height = bound.height ? bound.height : bound.Height;\n            // tslint:disable-next-line:max-line-length\n            this.drawAnnotationSelectRect(canvas, this.getMagnifiedValue(x - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(y - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(width + 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(height + 0.5, this.pdfViewerBase.getZoomFactor()));\n        }\n    };\n    TextMarkupAnnotation.prototype.drawAnnotationSelectRect = function (canvas, x, y, width, height) {\n        var context = canvas.getContext('2d');\n        context.beginPath();\n        context.setLineDash([4 * this.pdfViewerBase.getZoomFactor()]);\n        context.globalAlpha = 1;\n        context.rect(x, y, width, height);\n        context.closePath();\n        context.strokeStyle = '#0000ff';\n        context.stroke();\n        context.save();\n    };\n    TextMarkupAnnotation.prototype.enableAnnotationPropertiesTool = function (isEnable) {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(isEnable);\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(isEnable);\n                var enable = isEnable;\n                if (this.isTextMarkupAnnotationMode) {\n                    enable = true;\n                }\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(enable);\n                if (this.currentTextMarkupAnnotation) {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, this.currentTextMarkupAnnotation.color);\n                }\n                else {\n                    if (!this.isTextMarkupAnnotationMode) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, '#000000');\n                    }\n                    else {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.maintainAnnotationSelection = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + this.selectTextMarkupCurrentPage);\n            if (canvas) {\n                this.selectAnnotation(this.currentTextMarkupAnnotation, canvas);\n            }\n        }\n    };\n    TextMarkupAnnotation.prototype.storeAnnotations = function (pageNumber, annotation) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        var index = 0;\n        if (!storeObject) {\n            var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n            markupAnnotation.annotations.push(annotation);\n            index = markupAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(markupAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        else {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var pageIndex = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[pageIndex]) {\n                annotObject[pageIndex].annotations.push(annotation);\n                index = annotObject[pageIndex].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        return index;\n    };\n    TextMarkupAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var index = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAnnotations = function (pageIndex, textMarkupAnnotations) {\n        // tslint:disable-next-line\n        var annotationCollection;\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = textMarkupAnnotations;\n            }\n        }\n        else {\n            annotationCollection = textMarkupAnnotations;\n        }\n        return annotationCollection;\n    };\n    TextMarkupAnnotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n        var index = null;\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].pageIndex === pageNumber) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAddedAnnotation = function (type, color, opacity, bounds, author, subject, predefinedDate, note, rect, pageNumber) {\n        var date = new Date();\n        // tslint:disable-next-line:max-line-length\n        var modifiedDate = predefinedDate ? predefinedDate : date.toLocaleString();\n        // tslint:disable-next-line\n        var annotation = { textMarkupAnnotationType: type, color: color, opacity: opacity, bounds: bounds, author: author, subject: subject, modifiedDate: modifiedDate, note: note, rect: rect };\n        var storedIndex = this.storeAnnotations(pageNumber, annotation);\n        this.pdfViewer.annotationModule.addAction(pageNumber, storedIndex, annotation, 'Text Markup Added', null);\n        return annotation;\n    };\n    TextMarkupAnnotation.prototype.getPageContext = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        var context = null;\n        if (canvas) {\n            context = canvas.getContext('2d');\n        }\n        return context;\n    };\n    TextMarkupAnnotation.prototype.getDefaultValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    TextMarkupAnnotation.prototype.getMagnifiedValue = function (value, factor) {\n        return value * factor;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clear = function () {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n    };\n    return TextMarkupAnnotation;\n}());\nexport { TextMarkupAnnotation };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { Toast } from '@syncfusion/ej2-notifications';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isTooltipCreated = false;\n        /**\n         * @private\n         */\n        this.isNavigationToolbarVisible = false;\n        /**\n         * @private\n         */\n        this.isBookmarkListOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        /**\n         * @private\n         */\n        this.isBookmarkOpen = false;\n        /**\n         * @private\n         */\n        this.isThumbnailOpen = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY,\n                proxy.sideBarResizer.offsetParent.clientWidth\n            ];\n            _this.previousX = event.clientX;\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            if (!_this.pdfViewerBase.getPopupNoteVisibleStatus()) {\n                event.preventDefault();\n                if (proxy.isDown && _this.sideBarContentContainer) {\n                    // prevent the sidebar from becoming too narrow, or from occupying more\n                    // than half of the available viewer width.\n                    if (_this.pdfViewer.enableRtl) {\n                        var currentWidth = _this.previousX - event.clientX;\n                        var width = currentWidth + proxy.offset[2];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.right = width + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    else {\n                        var width = event.clientX + proxy.offset[0];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.left = width + 'px';\n                        proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                    proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                    proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                    proxy.pdfViewerBase.updateZoomValue();\n                    if (!proxy.bookmarkButton.children[0].classList.contains('e-pv-bookmark-disable-icon')) {\n                        proxy.pdfViewer.bookmarkViewModule.setBookmarkContentHeight();\n                    }\n                }\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            _this.sideBarContent.setAttribute('aria-label', 'Thumbnail View Panel');\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.sideBarContent.setAttribute('aria-label', 'Bookmark View Panel');\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        if (!Browser.isDevice) {\n            this.createNavigationPane();\n        }\n    };\n    NavigationPane.prototype.createNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar', attrs: { 'role': 'toolbar', 'aria-orientation': 'vertical', 'tabindex': '-1' } });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbar.style.cssFloat = 'right';\n            this.sideBarToolbar.style.right = 1 + 'px';\n            this.sideBarToolbar.style.position = 'relative';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbarSplitter.classList.add('e-right');\n        }\n        else {\n            this.sideBarToolbarSplitter.classList.add('e-left');\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentContainer.classList.add('e-right');\n        }\n        else {\n            this.sideBarContentContainer.classList.add('e-left');\n        }\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentSplitter.style.right = 0 + 'px';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content', attrs: { 'tabindex': '0' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContent.style.right = 0 + 'px';\n            this.sideBarContent.style.direction = 'rtl';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitleContainer.style.right = 0 + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title', attrs: { 'tabindex': '-1' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitle.classList.add('e-right');\n        }\n        else {\n            this.sideBarTitle.classList.add('e-left');\n        }\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarResizer.classList.add('e-right');\n        }\n        else {\n            this.sideBarResizer.classList.add('e-left');\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        if (!this.pdfViewer.enableRtl) {\n            this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        }\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.adjustPane = function () {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n        if (toolbarHeight === 0) {\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(toolbarContainer)['height']) + 1;\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar.style.top = toolbarHeight + 'px';\n        this.sideBarContentContainer.style.top = toolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + 'px';\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createNavigationPaneMobile = function (option) {\n        var _this = this;\n        this.isNavigationToolbarVisible = true;\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_navigationToolbar', className: 'e-pv-nav-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n        var items;\n        if (option === 'search') {\n            var searchTemplate = '<div class=\"e-input-group e-pv-search-input-mobile\" id=\"' + this.pdfViewer.element.id +\n                '_search_input_container\"><input class=\"e-input\" type=\"text\" placeholder=\"' +\n                this.pdfViewer.localeObj.getConstant('Find in document') + '\" id=\"' +\n                this.pdfViewer.element.id + '_search_input\"></input></div>';\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { template: searchTemplate },\n                {\n                    prefixIcon: 'e-pv-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_search_box-icon',\n                    click: function () {\n                        var iconElement = _this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n                        if (iconElement.classList.contains('e-pv-search-close')) {\n                            _this.enableSearchItems(false);\n                        }\n                        _this.pdfViewer.textSearchModule.searchButtonClick(iconElement, _this.searchInput);\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-prev-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_prev_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchPrevious();\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-next-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_next_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchNext();\n                    }\n                }\n            ];\n        }\n        else {\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { text: this.pdfViewer.localeObj.getConstant('Bookmarks') }\n            ];\n        }\n        this.toolbar = new Tool({ items: items, width: '', height: '', overflowMode: 'Popup' });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        if (option === 'search') {\n            this.initiateSearchBox();\n        }\n        else {\n            this.initiateBookmarks();\n        }\n    };\n    NavigationPane.prototype.initiateSearchBox = function () {\n        var _this = this;\n        this.searchInput = this.pdfViewerBase.getElement('_search_input');\n        this.pdfViewer.textSearchModule.searchBtn = this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n        this.searchInput.addEventListener('keyup', function (event) {\n            _this.enableSearchItems(true);\n            var searchString = _this.searchInput.value;\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n            }\n            else {\n                _this.pdfViewer.textSearchModule.resetVariables();\n            }\n        });\n        this.pdfViewer.textSearchModule.searchInput = this.searchInput;\n        this.setSearchInputWidth();\n        this.enableSearchItems(false);\n        this.searchInput.focus();\n    };\n    NavigationPane.prototype.enableSearchItems = function (isEnable) {\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_prev_occurrence').parentElement, isEnable);\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_next_occurrence').parentElement, isEnable);\n    };\n    NavigationPane.prototype.initiateBookmarks = function () {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = 'none';\n        }\n        // tslint:disable-next-line:max-line-length\n        var bookmarkContainer = createElement('div', { id: this.pdfViewer.element.id + '_bookmarks_container', className: 'e-pv-bookmark-container' });\n        bookmarkContainer.style.width = '100%';\n        bookmarkContainer.style.height = this.pdfViewerBase.viewerContainer.style.height;\n        this.pdfViewerBase.getElement('_viewerMainContainer').appendChild(bookmarkContainer);\n        this.pdfViewerBase.viewerContainer.style.display = 'none';\n        this.isBookmarkListOpen = true;\n        this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile();\n    };\n    NavigationPane.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        this.pdfViewer.textSearchModule.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.goBackToToolbar = function () {\n        this.isNavigationToolbarVisible = false;\n        this.pdfViewer.textSearchModule.cancelTextSearch();\n        this.searchInput = null;\n        if (this.pdfViewer.bookmarkViewModule.childNavigateCount !== 0) {\n            this.pdfViewer.bookmarkViewModule.bookmarkList.back();\n            this.pdfViewer.bookmarkViewModule.childNavigateCount--;\n        }\n        else {\n            if (this.toolbar != null) {\n                this.toolbar.destroy();\n                this.toolbar = null;\n            }\n            var bookmarkContainer = this.pdfViewerBase.getElement('_bookmarks_container');\n            if (bookmarkContainer) {\n                bookmarkContainer.parentElement.removeChild(bookmarkContainer);\n                if (Browser.isDevice) {\n                    this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n                }\n            }\n            if (this.toolbarElement && this.toolbarElement.parentElement != null) {\n                this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n            }\n            this.pdfViewerBase.viewerContainer.style.display = 'block';\n            this.isBookmarkListOpen = false;\n            if (!this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled) {\n                this.pdfViewer.toolbarModule.showToolbar(true);\n                this.pdfViewerBase.onWindowResize();\n            }\n        }\n    };\n    NavigationPane.prototype.setSearchInputWidth = function () {\n        var searchInputParent = this.searchInput.parentElement;\n        var padding = window.getComputedStyle(searchInputParent.parentElement, null).getPropertyValue('padding-left');\n        // tslint:disable-next-line:max-line-length\n        var width = this.toolbarElement.clientWidth - this.getParentElementSearchBox('_backward').clientWidth\n            - this.getParentElementSearchBox('_search_box-icon').clientWidth - this.getParentElementSearchBox('_prev_occurrence').clientWidth\n            - this.getParentElementSearchBox('_next_occurrence').clientWidth - 6;\n        if (padding !== '') {\n            width = width - (parseFloat(padding) * 2);\n        }\n        searchInputParent.style.width = width + 'px';\n    };\n    NavigationPane.prototype.getParentElementSearchBox = function (idString) {\n        return this.pdfViewerBase.getElement(idString).parentElement;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createTooltipMobile = function (text) {\n        if (!this.isTooltipCreated) { //boolean to prevent again toast creation.\n            // tslint:disable-next-line:max-line-length\n            var tooltipDiv = createElement('div', { className: 'e-pv-container-tooltip', id: this.pdfViewer.element.id + '_container_tooltip' });\n            this.pdfViewer.element.appendChild(tooltipDiv);\n            // tslint:disable-next-line:max-line-length\n            this.toastObject = new Toast({ title: text, target: this.pdfViewer.element, close: this.onTooltipClose.bind(this), position: { X: 0, Y: 0 }, animation: { hide: { duration: 200, effect: 'FadeOut' } } });\n            this.toastObject.appendTo(tooltipDiv);\n            var y = this.pdfViewer.element.clientHeight * 0.65;\n            var x = (this.pdfViewer.element.clientWidth - tooltipDiv.clientWidth) / 2;\n            this.isTooltipCreated = true;\n            this.toastObject.show({ position: { X: x, Y: y } });\n            var tooltipChild = tooltipDiv.firstElementChild;\n            if (tooltipChild) {\n                tooltipChild.style.width = 'auto';\n            }\n        }\n        else {\n            if (this.toastObject) {\n                this.toastObject.title = text;\n                var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n                var tooltipChild = tooltipElement.firstElementChild;\n                if (tooltipChild) {\n                    tooltipChild.style.width = 'auto';\n                    tooltipChild.firstElementChild.firstElementChild.textContent = text;\n                }\n            }\n        }\n    };\n    NavigationPane.prototype.onTooltipClose = function (args) {\n        this.isTooltipCreated = false;\n        var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n        this.pdfViewer.textSearchModule.isMessagePopupOpened = false;\n        this.toastObject.destroy();\n        tooltipElement.parentElement.removeChild(tooltipElement);\n        this.toastObject = null;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.toolbarResize = function () {\n        if (this.searchInput) {\n            this.searchInput.style.width = 'auto';\n            this.setSearchInputWidth();\n        }\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled', 'aria-label': 'Page Thumbnails', 'tabindex': '-1' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled', 'aria-label': 'Bookmarks', 'tabindex': '-1' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        if (this.pdfViewer.enableRtl) {\n            this.closeDiv.style.left = 8 + 'px';\n        }\n        else {\n            this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        this.resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        this.setResizeIconTop();\n        this.resizeIcon.style.position = 'absolute';\n        this.resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        this.resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(this.resizeIcon);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.setResizeIconTop = function () {\n        // tslint:disable-next-line:max-line-length\n        if (this.sideBarToolbar && this.sideBarToolbar.clientHeight && this.resizeIcon.style.top === '') {\n            this.resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        }\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                proxy.pdfViewerBase.viewerContainer.style.right = (proxy.sideToolbarWidth) + 'px';\n            }\n            else {\n                proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            }\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            if (this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                this.pdfViewerBase.viewerContainer.style.left = 1 + 'px';\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            }\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.isDocumentEdited = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        /**\n         * @private\n         */\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.previousTime = 0;\n        this.currentTime = 0;\n        this.isTouchScrolled = false;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        /**\n         * @private\n         */\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        this.scrollX = 0;\n        this.scrollY = 0;\n        this.ispageMoved = false;\n        this.isThumb = false;\n        this.isTapHidden = false;\n        // tslint:disable-next-line\n        this.singleTapTimer = null;\n        this.tapCount = 0;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            if (_this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                var toolbarHeight = proxy.getElement('_toolbarContainer').getBoundingClientRect().height;\n                if (proxy.isAnnotationToolbarHidden() || Browser.isDevice) {\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight);\n                }\n                else {\n                    var annotationToolbarHeight = proxy.getElement('_annotation_toolbar').getBoundingClientRect().height;\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n                }\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            if (proxy.pdfViewer.bookmarkViewModule && Browser.isDevice) {\n                var bookmarkContainer = proxy.getElement('_bookmarks_container');\n                if (bookmarkContainer) {\n                    bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n                }\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule && !Browser.isDevice) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            if (!proxy.navigationPane.isBookmarkListOpen) {\n                proxy.updateZoomValue();\n            }\n            if (Browser.isDevice) {\n                proxy.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width)) + 'px';\n                proxy.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(proxy.mobilePageNoContainer.style.width) / 2) + 'px';\n                proxy.mobilePageNoContainer.style.top = (proxy.pdfViewer.element.clientHeight / 2) + 'px';\n                proxy.updateMobileScrollerPosition();\n            }\n            else {\n                proxy.navigationPane.setResizeIconTop();\n            }\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0 && !_this.getPopupNoteVisibleStatus()) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                // tslint:disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    if (!isIE) {\n                        event.preventDefault();\n                    }\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (_this.isViewerMouseDown) {\n                    if (_this.scrollHoldTimer) {\n                        clearTimeout(_this.scrollHoldTimer);\n                        _this.scrollHoldTimer = null;\n                    }\n                    if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                        _this.pageViewScrollChanged(_this.currentPageNumber);\n                    }\n                }\n                if (event.button === 0) {\n                    // 0 is for left button.\n                    var eventTarget = event.target;\n                    if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                        var idStringArray = eventTarget.id.split('_');\n                        // tslint:disable-next-line\n                        _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                    }\n                    if (_this.isTextMarkupAnnotationModule()) {\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n                _this.isViewerMouseDown = false;\n            }\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    case 90: //z key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.undo();\n                        }\n                        break;\n                    case 89: //y key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.redo();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            else {\n                switch (event.keyCode) {\n                    case 46:\n                        if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                            _this.pdfViewer.annotationModule.deleteAnnotation();\n                        }\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        event.preventDefault();\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                            _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                        }\n                        else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n                            // tslint:disable-next-line:max-line-length\n                            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                        }\n                    }\n                }\n                else if (_this.getCurrentTextMarkupAnnotation()) {\n                    // this.pdfViewer.annotationModule.showAnnotationPopup(event);\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        // tslint:disable-next-line\n        this.onWindowMouseUp = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (event.button === 0) {\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                        }\n                        if (_this.viewerContainer.contains(event.target)) {\n                            if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                            else {\n                                if (window.getSelection().anchorNode !== null) {\n                                    _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                                }\n                            }\n                        }\n                    }\n                    else if (_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                    }\n                }\n                else if (event.button === 2) {\n                    if (_this.viewerContainer.contains(event.target)) {\n                        window.getSelection().removeAllRanges();\n                    }\n                }\n                if (_this.isViewerMouseDown) {\n                    _this.isViewerMouseDown = false;\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.clear();\n                        _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                    }\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                _this.preventTouchEvent(event);\n            }\n            if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            _this.scrollY = touchPoints[0].clientY;\n            _this.previousTime = new Date().getTime();\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (Browser.isDevice && _this.pageCount > 0 && !_this.isThumb && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                    _this.handleTaps(touchPoints);\n                }\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n                if (Browser.isDevice) {\n                    clearTimeout(_this.singleTapTimer);\n                    _this.tapCount = 0;\n                }\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            if (Browser.isDevice) {\n                clearTimeout(_this.singleTapTimer);\n                _this.tapCount = 0;\n            }\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.isTouchScrolled = true;\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n            if (Browser.isDevice && _this.isTouchScrolled) {\n                _this.currentTime = new Date().getTime();\n                var duration = _this.currentTime - _this.previousTime;\n                // tslint:disable-next-line\n                var difference = _this.scrollY - event.changedTouches[0].pageY;\n                // tslint:disable-next-line\n                var speed = (difference) / (duration);\n                if (Math.abs(speed) > 1.5) {\n                    // tslint:disable-next-line\n                    var scrollTop = (difference) + ((duration) * speed);\n                    _this.viewerContainer.scrollTop += scrollTop;\n                    _this.updateMobileScrollerPosition();\n                }\n            }\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnScroll = function (event) {\n            var proxy = _this;\n            var scrollposX = 0;\n            var scrollposY = 0;\n            if (event.touches && Browser.isDevice) {\n                // tslint:disable-next-line\n                var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n                if (_this.isThumb) {\n                    _this.ispageMoved = true;\n                    _this.mobilePageNoContainer.style.display = 'block';\n                    scrollposX = event.touches[0].pageX - _this.scrollX;\n                    scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n                    _this.viewerContainer.scrollTop = scrollposY * ratio;\n                    // tslint:disable-next-line\n                    var containerValue = event.touches[0].pageY;\n                    if (_this.viewerContainer.scrollTop !== 0 && ((containerValue) <= _this.viewerContainer.clientHeight)) {\n                        _this.mobileScrollerContainer.style.top = containerValue + 'px';\n                    }\n                }\n                else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                    _this.mobilePageNoContainer.style.display = 'none';\n                    scrollposY = _this.touchClientY - event.touches[0].pageY;\n                    scrollposX = _this.touchClientX - event.touches[0].pageX;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + (scrollposY);\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + (scrollposX);\n                    // tslint:disable-next-line\n                    _this.updateMobileScrollerPosition();\n                    _this.touchClientY = event.touches[0].pageY;\n                    _this.touchClientX = event.touches[0].pageX;\n                }\n            }\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            // tslint:disable-next-line:max-line-length\n            if (_this.pdfViewer.magnificationModule && _this.pdfViewer.magnificationModule.fitType === 'fitToPage' && _this.currentPageNumber > 0) {\n                _this.viewerContainer.scrollTop = _this.pageSize[_this.currentPageNumber - 1].top * _this.getZoomFactor();\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.viewerContainer.setAttribute('aria-labelledby', _this.pdfViewer.element.id + '_pageDiv_' + (_this.currentPageNumber - 1));\n                if (!Browser.isDevice) {\n                    _this.pdfViewer.toolbarModule.updateNavigationButtons();\n                }\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            if (Browser.isDevice) {\n                this.pdfViewer.element.classList.add('e-pv-mobile-view');\n            }\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container', attrs: { 'aria-label': 'pdfviewer scroll view' } });\n            if (Browser.isDevice) {\n                this.createMobilePageNumberContainer();\n            }\n            this.viewerContainer.tabIndex = 0;\n            if (this.pdfViewer.enableRtl) {\n                this.viewerContainer.style.direction = 'rtl';\n            }\n            element.style.touchAction = 'pan-x pan-y';\n            this.setMaximumHeight(element);\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = this.pdfViewer.element.clientWidth;\n            if (!Browser.isDevice) {\n                viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0);\n            }\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(this.mobileScrollerContainer.style.width)) + 'px';\n                this.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(this.mobilePageNoContainer.style.width) / 2) + 'px';\n                this.mobilePageNoContainer.style.top = (this.pdfViewer.element.clientHeight / 2) + 'px';\n                this.mobilePageNoContainer.style.display = 'none';\n                this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n                this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n                this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n                this.viewerContainer.appendChild(this.mobilePageNoContainer);\n                this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n                this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container', attrs: { 'tabindex': '0', 'aria-label': 'pdfviewer Page View' } });\n            if (this.pdfViewer.enableRtl) {\n                this.pageContainer.style.direction = 'ltr';\n            }\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            this.createPrintPopup();\n            if (Browser.isDevice) {\n                this.createGoToPagePopup();\n            }\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule && !Browser.isDevice) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.initializeCollection();\n            }\n        }\n    };\n    PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.mobilePageNoContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilepagenoContainer', className: 'e-pv-mobilepagenoscroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilecurrentPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilecurrentpageContainer', className: 'e-pv-mobilecurrentpage-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilenumberContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiledashedlineContainer', className: 'e-pv-mobiledashedline-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobiletotalPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiletotalpageContainer', className: 'e-pv-mobiletotalpage-container' });\n        this.mobileScrollerContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilescrollContainer', className: 'e-pv-mobilescroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobileSpanContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilespanContainer', className: 'e-pv-mobilespanscroll-container' });\n        this.mobileSpanContainer.innerHTML = '1';\n        this.mobilecurrentPageContainer.innerHTML = '1';\n        this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n        this.mobileScrollerContainer.style.cssFloat = 'right';\n        this.mobileScrollerContainer.style.width = '40px';\n        this.mobileScrollerContainer.style.height = '32px';\n        this.mobileScrollerContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.width = '120px';\n        this.mobilePageNoContainer.style.height = '100px';\n        this.mobilePageNoContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.position = 'fixed';\n        this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n        this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n        this.mobileScrollerContainer.style.display = 'none';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n        this.ispageMoved = false;\n        this.isThumb = true;\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n                var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n                this.pdfViewer.toolbar.showToolbar(true);\n            }\n        }\n        this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.setMaximumHeight = function (element) {\n        if (!Browser.isDevice) {\n            element.style.minHeight = '500px';\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n        if (!this.ispageMoved) {\n            this.goToPagePopup.show();\n        }\n        this.isThumb = false;\n        this.ispageMoved = false;\n        this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n        this.mobilePageNoContainer.style.display = 'none';\n    };\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject)); // jshint ignore:line\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response; // jshint ignore:line\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                _this.requestSuccess(data, documentData, password);\n            }\n            else if (request.readyState === 4 && request.status === 400) { // jshint ignore:line\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.showLoadingIndicator(false);\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = '';\n                this.mobileScrollerContainer.style.top = (this.toolbarHeight) + 'px';\n            }\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        if (Browser.isDevice) {\n            this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n            this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            this.promptElement.focus();\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        if (spinnerElement) {\n            spinnerElement.style.height = '48px';\n            spinnerElement.style.width = '48px';\n            spinnerElement.style.transformOrigin = '24px 24px 24px';\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.initiateTextSelectMode();\n        if (!Browser.isDevice) {\n            if (this.navigationPane.sideBarToolbar) {\n                this.navigationPane.clear();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.clear();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.initializeCollection();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(null);\n        }\n        this.windowSessionStorageClear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        if (Browser.isDevice) {\n            this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n        }\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        this.contextMenuModule.destroy();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (e) {\n        var _this = this;\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount };\n            var request_1 = new XMLHttpRequest();\n            request_1.open('POST', window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload'), false);\n            request_1.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            request_1.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request_1.onreadystatechange = function (event) {\n                if (request_1.readyState === 4 && request_1.status === 400) {\n                    // error message\n                    _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n                }\n            };\n            // tslint:disable-next-line\n            request_1.onerror = function (event) {\n                _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem('currentDocument');\n        window.sessionStorage.removeItem('serviceURL');\n        window.sessionStorage.removeItem('unload');\n        this.sessionStorage.forEach(function (element) {\n            window.sessionStorage.removeItem(element);\n        });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // tslint:disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        if (this.currentPageNumber > 0) {\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1 && parentNode != null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n            this.corruptPopup.enableRtl = true;\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n        }\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container'\n        });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container'\n        });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createGoToPagePopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_goTopage_popup', className: 'e-pv-gotopage-popup' });\n        this.goToPageElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n        popupElement.appendChild(this.goToPageElement);\n        var inputContainer = createElement('span', { className: 'e-pv-text-input' });\n        // tslint:disable-next-line:max-line-length\n        this.goToPageInput = createElement('input', { id: this.pdfViewer.element.id + '_page_input', className: 'e-input' });\n        this.goToPageInput.type = 'text';\n        this.goToPageInput.style.maxWidth = '80%';\n        this.pageNoContainer = createElement('span', { className: '.e-pv-number-ofpages' });\n        inputContainer.appendChild(this.goToPageInput);\n        inputContainer.appendChild(this.pageNoContainer);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.goToPagePopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('GoToPage'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') },\n                    click: this.GoToPageCancelClick.bind(this),\n                },\n                // tslint:disable-next-line:max-line-length\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Apply'), disabled: true, cssClass: 'e-pv-gotopage-apply-btn', isPrimary: true },\n                    click: this.GoToPageApplyClick.bind(this),\n                },\n            ], close: this.closeGoToPagePopUp.bind(this),\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.goToPagePopup.enableRtl = true;\n        }\n        this.goToPagePopup.appendTo(popupElement);\n        var goToPageTextBox = new NumericTextBox({ format: '##', showSpinButton: false });\n        goToPageTextBox.appendTo(this.goToPageInput);\n        this.goToPageInput.addEventListener('keyup', function () {\n            // tslint:disable-next-line\n            var inputValue = _this.goToPageInput.value;\n            if (inputValue !== '' && parseFloat(inputValue) > 0 && (_this.pdfViewer.pageCount + 1) > parseFloat(inputValue)) {\n                _this.EnableApplyButton();\n            }\n            else {\n                _this.DisableApplyButton();\n            }\n        });\n    };\n    PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n        this.goToPageInput.value = '';\n        this.DisableApplyButton();\n    };\n    PdfViewerBase.prototype.EnableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.removeAttribute('disabled');\n    };\n    PdfViewerBase.prototype.DisableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.setAttribute('disabled', true);\n    };\n    PdfViewerBase.prototype.GoToPageCancelClick = function () {\n        this.goToPagePopup.hide();\n    };\n    PdfViewerBase.prototype.GoToPageApplyClick = function () {\n        this.goToPagePopup.hide();\n        // tslint:disable-next-line\n        var pageNumber = this.goToPageInput.value;\n        this.pdfViewer.navigation.goToPage(pageNumber);\n        this.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56);\n            // tslint:disable-next-line\n            var differenceRatio = (this.viewerContainer.scrollTop) / ratio;\n            this.mobileScrollerContainer.style.top = (this.toolbarHeight + differenceRatio) + 'px';\n        }\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup', attrs: { 'tabindex': '-1' } });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt', attrs: { 'tabindex': '-1' } });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false,\n            close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (!Browser.isDevice) {\n            this.passwordPopup.buttons = [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ];\n        }\n        else {\n            this.passwordPopup.buttons = [\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) },\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                }\n            ];\n        }\n        if (this.pdfViewer.enableRtl) {\n            this.passwordPopup.enableRtl = true;\n        }\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        window.addEventListener('unload', this.unloadDocument);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unloadDocument);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n        this.enableAnnotationAddTools(false);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n        if (!Browser.isDevice) {\n            this.enableAnnotationAddTools(true);\n        }\n    };\n    PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n            }\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.handleTaps = function (touchPoints) {\n        var _this = this;\n        this.singleTapTimer = setTimeout(function () { _this.onSingleTap(touchPoints); }, 300);\n        this.tapCount++;\n        // tslint:disable-next-line\n        var timer = setTimeout(function () { _this.onDoubleTap(touchPoints); }, 200);\n        if (this.tapCount > 2) {\n            this.tapCount = 0;\n        }\n    };\n    PdfViewerBase.prototype.onSingleTap = function (touches) {\n        if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible) {\n            if (this.pdfViewer.toolbarModule) {\n                if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                    (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                    if (!this.isTapHidden) {\n                        this.viewerContainer.scrollTop -= this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                        if (this.pdfViewer.toolbar.moreDropDown) {\n                            var dropDown = this.getElement('_more_option-popup');\n                            if (dropDown.firstElementChild) {\n                                dropDown.classList.remove('e-popup-open');\n                                dropDown.classList.add('e-popup-close');\n                                dropDown.removeChild(dropDown.firstElementChild);\n                            }\n                        }\n                    }\n                    else {\n                        this.viewerContainer.scrollTop += this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        // tslint:disable-next-line:max-line-length\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n                    }\n                    if (this.isTapHidden && Browser.isDevice) {\n                        this.mobileScrollerContainer.style.display = '';\n                        this.updateMobileScrollerPosition();\n                    }\n                    else if (Browser.isDevice && this.getSelectTextMarkupCurrentPage() == null) {\n                        this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    if (this.getSelectTextMarkupCurrentPage() == null) {\n                        this.pdfViewer.toolbarModule.showToolbar(this.isTapHidden);\n                        this.isTapHidden = !this.isTapHidden;\n                    }\n                }\n                this.tapCount = 0;\n            }\n        }\n    };\n    PdfViewerBase.prototype.onDoubleTap = function (touches) {\n        if (this.tapCount === 2) {\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            this.tapCount = 0;\n            if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                if (this.pdfViewer.magnification) {\n                    this.pdfViewer.magnification.onDoubleTapMagnification();\n                }\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                this.isTapHidden = false;\n                clearTimeout(this.singleTapTimer);\n            }\n        }\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n            if (Browser.isDevice && this.mobiletotalPageContainer) {\n                this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n                this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n            }\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var _this = this;\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true };\n        var request = new XMLHttpRequest();\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    // tslint:disable-next-line\n                    var pageValues = data;\n                    var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                    for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                        var pageSize = pageValues.pageSizes[i].split(',');\n                        if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                            var previousPageHeight = proxy.pageSize[i - 1].height;\n                            topValue = _this.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        _this.pageSize.push(size);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pageContainer.style.height = _this.getPageTop(_this.pageSize.length - 1) + _this.getPageHeight(_this.pageSize.length - 1) + 'px';\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * window.devicePixelRatio;\n                                canvas_1.width = pageWidth_1 * window.devicePixelRatio;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.isTextMarkupAnnotationModule()) {\n                    // tslint:disable-next-line\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(data['textMarkupAnnotation'], pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        // tslint:disable-next-line\n        var rotation = data['rotation'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (!textLayer) {\n            // tslint:disable-next-line:max-line-length\n            textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n        }\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div', attrs: { 'tabindex': '0' } });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        if (this.pdfViewer.enableRtl) {\n            pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        else {\n            pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = displayMode;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n        }\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                if (!this.pdfViewer.enableRtl) {\n                    pageDiv.style.left = leftPosition + 'px';\n                }\n                else {\n                    pageDiv.style.right = leftPosition + 'px';\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    this.renderCountIncrement();\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        blobUrl = URL.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var _this = this;\n        var jsonObject;\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n            jsonObject = { hashId: this.hashId, textMarkupAnnotations: textMarkupAnnotationCollection };\n        }\n        else {\n            jsonObject = { hashId: this.hashId };\n        }\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.download);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'text';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) { // jshint ignore:line\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data === 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var blobUrl = _this.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    if (Browser.isIE || Browser.info.name === 'edge') {\n                        window.navigator.msSaveOrOpenBlob(blobUrl, _this.pdfViewer.fileName);\n                    }\n                    else {\n                        _this.downloadDocument(blobUrl);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var _this = this;\n        var canvas = this.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = this.getElement('_oldCanvas_' + pageIndex);\n        if (!this.getPagesZoomed()) {\n            this.showPageLoadingIndicator(pageIndex, true);\n        }\n        else {\n            this.showPageLoadingIndicator(pageIndex, false);\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                this.showPageLoadingIndicator(pageIndex, false);\n            }\n            // tslint:disable-next-line\n            var data = this.getStoredData(pageIndex);\n            if (data) {\n                this.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    var _loop_1 = function (y) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this_1.documentId, hashId: this_1.hashId, zoomFactor: this_1.getZoomFactor() };\n                        var request = new XMLHttpRequest();\n                        request.open('POST', this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages);\n                        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n                        request.responseType = 'json';\n                        request.send(JSON.stringify(jsonObject));\n                        // tslint:disable-next-line\n                        request.onreadystatechange = function (event) {\n                            var proxy = _this;\n                            if (request.readyState === 4 && request.status === 200) {\n                                // tslint:disable-next-line\n                                var data_1 = event.currentTarget.response;\n                                // tslint:disable-next-line:max-line-length\n                                if (typeof data_1 !== 'object') {\n                                    data_1 = JSON.parse(data_1);\n                                }\n                                if (data_1) {\n                                    if (data_1.image) {\n                                        proxy.storeWinData(data_1, pageIndex);\n                                        proxy.renderPage(data_1, pageIndex);\n                                    }\n                                }\n                            }\n                            else if (request.readyState === 4 && request.status === 400) {\n                                // error\n                                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                            }\n                        };\n                        // tslint:disable-next-line\n                        request.onerror = function (event) {\n                            _this.openNotificationPopup();\n                            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                        };\n                    };\n                    var this_1 = this;\n                    for (var y = 0; y < noTileY; y++) {\n                        _loop_1(y);\n                    }\n                }\n            }\n            this.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        var blobUrl = URL.createObjectURL(blobObj);\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText'], rotation: data['rotation']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n        this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        // tslint:disable-next-line\n        var blob = new Blob(byteArrays, { type: contentType });\n        return blob;\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n        if (this.pdfViewer.toolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.isPopupNoteVisible;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        }\n        else {\n            return null;\n        }\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var textLayer;\n        if (!textDiv) {\n            textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n        return textLayer;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text', attrs: { 'tabindex': '0' } });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation) {\n        var scaleString = 'scale(' + scale + ')';\n        if (rotation === 0) {\n            if (textRotation === 0) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 1) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n            }\n            else if (textRotation === -90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 2) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n            }\n            else if (textRotation === 180) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 3) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n            }\n            else if (textRotation === 90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        // tslint:disable-next-line\n        var rotation;\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n            // tslint:disable-next-line\n            rotation = data['rotation'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds, rotation);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getPageIndex = function (element) {\n        var pageId;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(element.id.split('_text_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(parentElement.id.split('_text_')[1]);\n        }\n        return pageId;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n        var textIndex;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        return textIndex;\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n                if (_this.pdfViewer.textSearchModule) {\n                    _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.notifyDialog.enableRtl = true;\n        }\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy'), iconCss: 'e-pv-copy-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Highlight context'), iconCss: 'e-pv-highlight-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Underline context'), iconCss: 'e-pv-underline-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Strikethrough context'), iconCss: 'e-pv-strikethrough-icon' }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            created: this.contextMenuOnCreated.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.contextMenuObj.enableRtl = true;\n        }\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnCreated = function (args) {\n        // tslint:disable-next-line:max-line-length\n        var items = [this.pdfViewer.localeObj.getConstant('Highlight context'), this.pdfViewer.localeObj.getConstant('Underline context'),\n            this.pdfViewer.localeObj.getConstant('Strikethrough context')];\n        if (this.pdfViewer.annotationModule) {\n            if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                this.contextMenuObj.enableItems(items, false);\n            }\n        }\n        else {\n            this.contextMenuObj.enableItems(items, false);\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    // tslint:disable-next-line:max-line-length\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if ((Browser.isIE || Browser.info.name === 'edge') && args.event.target.classList.contains('e-pv-page-container')) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            var currentBound = bounds;\n            if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                isWithin = true;\n            }\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n            isWithin = true;\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case this.pdfViewer.localeObj.getConstant('Copy'):\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Highlight context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Underline context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Strikethrough context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    ContextMenu.prototype.destroy = function () {\n        this.contextMenuObj.destroy();\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { Browser } from '@syncfusion/ej2-base';\n/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        this.isTapToFitZoom = false;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            return scaleX * 100;\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            if (this.pdfViewerBase.pageCount === 1) {\n                return ((viewerHeight - this.pdfViewerBase.pageSize[0].top) / highestHeight) * 100;\n            }\n            else {\n                return (viewerHeight / highestHeight) * 100;\n            }\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.closePopupMenu();\n        }\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    if (Browser.isDevice) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewerBase.mobilePageNoContainer.style.left = (this.pdfViewer.element.clientWidth / 2) - (parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width) / 2) + 'px';\n                    }\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n        if (Browser.isDevice && this.isPinchZoomed) {\n            // tslint:disable-next-line:radix\n            var zoomPercentage = parseInt((this.zoomFactor * 100).toString()) + '%';\n            this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        this.renderInSeparateThread(this.reRenderPageNumber);\n        this.isPagesZoomed = false;\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            this.calculateScrollValues(scrollValue);\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.calculateScrollValues = function (scrollValue) {\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n        if (currentPageCanvas) {\n            var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n            // update scroll top for the viewer container based on pinch zoom factor\n            var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n            var previousY = scrollValue + this.touchCenterY;\n            // tslint:disable-next-line:max-line-length\n            var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                // tslint:disable-next-line:max-line-length\n                previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n            this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n            // update scroll left for the viewer container based on pinch zoom factor\n            var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n            var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n            var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n            this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n        }\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                var annotationLayers = document.querySelectorAll('canvas[id*=\"_annotationCanvas_\"]');\n                for (var j = 0; j < annotationLayers.length; j++) {\n                    var pageNumber = annotationLayers[j].id.split('_annotationCanvas_')[1];\n                    // tslint:disable-next-line:radix\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                    var annotationCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + i);\n                    annotationCanvas.id = this.pdfViewer.element.id + '_old_annotationCanvas_' + i;\n                }\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i, 'none');\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        if (this.pdfViewer.enableRtl) {\n                            pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        else {\n                            pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                                this.pdfViewer.annotationModule.textMarkupAnnotationModule.resizeAnnotations(width, height, i);\n                            }\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            this.isMagnified = false;\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.onDoubleTapMagnification = function () {\n        this.pdfViewer.toolbarModule.showToolbar(false);\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (!this.isTapToFitZoom) {\n            if (this.zoomFactor < 2) {\n                this.zoomTo(200);\n            }\n            else {\n                this.fitToWidth();\n            }\n        }\n        else {\n            this.zoomTo(this.previousZoomFactor * 100);\n        }\n        this.calculateScrollValues(scrollValue);\n        this.isTapToFitZoom = !this.isTapToFitZoom;\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber - Defines the page number to navigate\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n * @hidden\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // tslint:disable-next-line\n            return new Promise(\n            // tslint:disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        var _this = this;\n        if (!proxy.isThumbnailCompleted) {\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n            if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                proxy.isThumbnailCompleted = false;\n                proxy.startIndex = 0;\n            }\n        }\n        else {\n            proxy.startIndex = proxy.thumbnailLimit;\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        }\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.renderThumbnailImage(data);\n                if (!proxy.isThumbnailCompleted) {\n                    proxy.startIndex = proxy.thumbnailLimit;\n                    proxy.isThumbnailCompleted = true;\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                // tslint:disable-next-line:max-line-length\n                var pageLink = createElement('a', { id: 'page_' + i, attrs: { 'aria-label': 'Thumbnail of Page' + (i + 1), 'tabindex': '-1', 'role': 'link' } });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane) {\n            if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n                this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n            }\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.resetThumbnailView();\n        }\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { AnnotationToolbar } from '../index';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.isUndoRedoBtnsVisible = true;\n        this.isAnnotationEditBtnVisible = true;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                    args.cancel = true;\n                }\n                else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                    var tooltipData = args.originalEvent.target.parentElement.dataset;\n                    if (tooltipData && tooltipData.tooltipId) {\n                        var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                        if (tooltipElement) {\n                            tooltipElement.style.display = 'none';\n                        }\n                    }\n                }\n            }\n            _this.handleToolbarButtonClick(args);\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                    args.originalEvent.target.blur();\n                    _this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (isIE) {\n            this.totalPageItem.classList.add('e-pv-total-page-ms');\n        }\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        if (!Browser.isDevice) {\n            this.applyToolbarSettings();\n            this.initialEnableItems();\n            this.pdfViewerBase.navigationPane.adjustPane();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.annotationToolbarModule = new AnnotationToolbar(this.pdfViewer, this.pdfViewerBase, this);\n            if (!Browser.isDevice) {\n                this.annotationToolbarModule.initializeAnnotationToolbar();\n            }\n        }\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n            if (Browser.isDevice) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n            }\n        }\n        else {\n            toolbar.style.display = 'none';\n            if (!Browser.isDevice) {\n                this.pdfViewerBase.navigationPane.sideBarToolbar.style.display = 'none';\n            }\n        }\n    };\n    /**\n     * Shows/hides the Navigation toolbar in the PdfViewer\n     * @param  {boolean} enableNavigationToolbar - If set true , its show the Navigation Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showNavigationToolbar = function (enableNavigationToolbar) {\n        if (!Browser.isDevice) {\n            var navigationToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n            var navigationToolbarSplitter = this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;\n            if (enableNavigationToolbar) {\n                navigationToolbar.style.display = 'block';\n                navigationToolbarSplitter.style.display = 'block';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.clear();\n                }\n            }\n            else {\n                navigationToolbar.style.display = 'none';\n                navigationToolbarSplitter.style.display = 'none';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n                }\n            }\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isVisible - If set true, then its show the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n                case 'UndoRedoTool':\n                    this.showUndoRedoTool(isVisible);\n                    break;\n                case 'AnnotationEditTool':\n                    this.showAnnotationEditTool(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.applyHideToToolbar(true, 15, 15);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isEnable - If set true, then its Enable the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n                case 'UndoRedoTool':\n                    this.enableUndoRedoTool(isEnable);\n                    break;\n                case 'AnnotationEditTool':\n                    this.enableAnnotationEditTool(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 21, 21);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 20, 20);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 18, 18);\n    };\n    Toolbar.prototype.showUndoRedoTool = function (isEnable) {\n        this.isUndoRedoBtnsVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 16, 17);\n    };\n    Toolbar.prototype.showAnnotationEditTool = function (isEnable) {\n        this.isAnnotationEditBtnVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 19, 19);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem.parentElement, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem.parentElement, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem.parentElement, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem.parentElement, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem.parentElement, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem.parentElement, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem.parentElement, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem.parentElement, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem.parentElement, enableSearchOption);\n    };\n    Toolbar.prototype.enableUndoRedoTool = function (isEnable) {\n        this.toolbar.enableItems(this.undoItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.redoItem.parentElement, isEnable);\n    };\n    Toolbar.prototype.enableAnnotationEditTool = function (isEnable) {\n        this.toolbar.enableItems(this.annotationItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        if (!Browser.isDevice) {\n            this.currentPageBox.min = 0;\n            this.currentPageBox.value = 0;\n            this.updateTotalPage();\n            this.updateToolbarItems();\n            if (this.annotationToolbarModule) {\n                this.annotationToolbarModule.clear();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, false);\n                this.toolbar.enableItems(this.printItem.parentElement, false);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = true;\n                }\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), false);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), false);\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n                this.toolbar.enableItems(this.annotationItem.parentElement, false);\n                this.toolbar.enableItems(this.panItem.parentElement, false);\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.deSelectItem(this.annotationItem);\n                if (this.annotationToolbarModule) {\n                    this.annotationToolbarModule.resetToolbar();\n                }\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, true);\n                this.toolbar.enableItems(this.printItem.parentElement, true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), true);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.updateZoomButtons();\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = false;\n                }\n                this.updateInteractionItems();\n                // modify this condition if new annotation types are added.\n                if (this.pdfViewer.annotationModule && this.pdfViewer.enableAnnotation) {\n                    this.toolbar.enableItems(this.annotationItem.parentElement, true);\n                }\n                if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                    this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                }\n            }\n            if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.length === 0 || !this.pdfViewer.annotationModule) {\n                this.enableToolbarItem(['AnnotationEditTool'], false);\n            }\n        }\n        else {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, true);\n                this.updateUndoRedoButtons();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n            this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n            this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n            this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled && !Browser.isDevice) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateUndoRedoButtons = function () {\n        if (this.pdfViewer.annotationModule) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection, this.undoItem.parentElement);\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection, this.redoItem.parentElement);\n            }\n            else {\n                this.disableUndoRedoButtons();\n            }\n        }\n        else {\n            this.disableUndoRedoButtons();\n        }\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.enableCollectionAvailable = function (collection, item) {\n        if (collection.length > 0) {\n            this.toolbar.enableItems(item, true);\n        }\n        else {\n            this.toolbar.enableItems(item, false);\n        }\n    };\n    Toolbar.prototype.disableUndoRedoButtons = function () {\n        this.toolbar.enableItems(this.undoItem.parentElement, false);\n        this.toolbar.enableItems(this.redoItem.parentElement, false);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        if (this.moreDropDown) {\n            this.moreDropDown.destroy();\n        }\n        if (this.annotationToolbarModule) {\n            this.annotationToolbarModule.destroy();\n        }\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (!Browser.isDevice) {\n            if (this.currentPageBox.value === pageIndex) {\n                this.currentPageBoxElement.value = pageIndex.toString();\n            }\n            this.currentPageBox.value = pageIndex;\n        }\n        else {\n            this.pdfViewerBase.mobileSpanContainer.innerHTML = pageIndex.toString();\n            this.pdfViewerBase.mobilecurrentPageContainer.innerHTML = pageIndex.toString();\n        }\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.currentPageBox.min = 1;\n            }\n            this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        if (!Browser.isDevice) {\n            this.toolbar = new tool({\n                clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup',\n                items: this.createToolbarItems(), created: function () {\n                    _this.createZoomDropdown();\n                    _this.createNumericTextBox();\n                    _this.toolbar.refreshOverflow();\n                }\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.toolbar.appendTo(this.toolbarElement);\n            this.afterToolbarCreation();\n            this.updateTotalPage();\n            this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        }\n        else {\n            this.createToolbarItemsForMobile();\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.disableUndoRedoButtons();\n        }\n        return this.toolbarElement;\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.createToolbarItems = function () {\n        var currentPageInputTemplate = this.createCurrentPageInputTemplate();\n        var totalPageTemplate = this.createTotalPageTemplate();\n        var zoomDropDownTemplateString = this.createZoomDropdownElement();\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-open-document-icon e-pv-icon', cssClass: 'e-pv-open-document-container', id: this.pdfViewer.element.id + '_open', text: this.pdfViewer.localeObj.getConstant('Open text'), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n        }\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-zoom-out-icon e-pv-icon', cssClass: 'e-pv-zoom-out-container', id: this.pdfViewer.element.id + '_zoomOut', text: this.pdfViewer.localeObj.getConstant('Zoom out text'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-zoom-in-icon e-pv-icon', cssClass: 'e-pv-zoom-in-container', id: this.pdfViewer.element.id + '_zoomIn', text: this.pdfViewer.localeObj.getConstant('Zoom in text'), align: 'Left' });\n        items.push({ template: zoomDropDownTemplateString, cssClass: 'e-pv-zoom-drop-down-container', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-select-tool-icon e-pv-icon', cssClass: 'e-pv-text-select-tool-container', id: this.pdfViewer.element.id + '_selectTool', text: this.pdfViewer.localeObj.getConstant('Selection text') });\n        items.push({ prefixIcon: 'e-pv-pan-tool-icon e-pv-icon', cssClass: 'e-pv-pan-tool-container', id: this.pdfViewer.element.id + '_handTool', text: this.pdfViewer.localeObj.getConstant('Pan text') });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-undo-icon e-pv-icon', cssClass: 'e-pv-undo-container', id: this.pdfViewer.element.id + '_undo', text: this.pdfViewer.localeObj.getConstant('Undo'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-redo-icon e-pv-icon', cssClass: 'e-pv-redo-container', id: this.pdfViewer.element.id + '_redo', text: this.pdfViewer.localeObj.getConstant('Redo'), align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-search-icon e-pv-icon', cssClass: 'e-pv-text-search-container', id: this.pdfViewer.element.id + '_search', text: this.pdfViewer.localeObj.getConstant('Search text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-annotation-icon e-pv-icon', cssClass: 'e-pv-annotation-container', id: this.pdfViewer.element.id + '_annotation', text: this.pdfViewer.localeObj.getConstant('Annotation Edit text'), align: 'Right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-print-document-icon e-pv-icon', cssClass: 'e-pv-print-document-container', id: this.pdfViewer.element.id + '_print', text: this.pdfViewer.localeObj.getConstant('Print text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-download-document-icon e-pv-icon', cssClass: 'e-pv-download-document-container', id: this.pdfViewer.element.id + '_download', text: this.pdfViewer.localeObj.getConstant('Download'), align: 'Right' });\n        return items;\n    };\n    Toolbar.prototype.afterToolbarCreation = function () {\n        this.itemsContainer = this.toolbar.element.childNodes[0];\n        this.itemsContainer.id = this.pdfViewer.element.id + '_toolbarItemsContainer';\n        this.openDocumentItem = this.addClassToolbarItem('_open', 'e-pv-open-document', this.pdfViewer.localeObj.getConstant('Open'));\n        this.undoItem = this.addClassToolbarItem('_undo', 'e-pv-undo', this.pdfViewer.localeObj.getConstant('Undo'));\n        this.redoItem = this.addClassToolbarItem('_redo', 'e-pv-redo', this.pdfViewer.localeObj.getConstant('Redo'));\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        this.zoomOutItem = this.addClassToolbarItem('_zoomOut', 'e-pv-zoom-out', this.pdfViewer.localeObj.getConstant('Zoom Out'));\n        this.zoomInItem = this.addClassToolbarItem('_zoomIn', 'e-pv-zoom-in', this.pdfViewer.localeObj.getConstant('Zoom In'));\n        // tslint:disable-next-line:max-line-length\n        this.textSelectItem = this.addClassToolbarItem('_selectTool', 'e-pv-text-select-tool', this.pdfViewer.localeObj.getConstant('Text Selection'));\n        this.panItem = this.addClassToolbarItem('_handTool', 'e-pv-pan-tool', this.pdfViewer.localeObj.getConstant('Panning'));\n        // tslint:disable-next-line:max-line-length\n        this.textSearchItem = this.addClassToolbarItem('_search', 'e-pv-text-search', this.pdfViewer.localeObj.getConstant('Text Search'));\n        this.annotationItem = this.addClassToolbarItem('_annotation', 'e-pv-annotation', this.pdfViewer.localeObj.getConstant('Annotation'));\n        // tslint:disable-next-line:max-line-length\n        this.printItem = this.addClassToolbarItem('_print', 'e-pv-print-document', this.pdfViewer.localeObj.getConstant('Print'));\n        this.downloadItem = this.addClassToolbarItem('_download', 'e-pv-download-document', this.pdfViewer.localeObj.getConstant('Download file'));\n        this.zoomDropdownItem = this.pdfViewerBase.getElement('_zoomDropDown');\n        this.createTooltip(this.zoomDropdownItem, this.pdfViewer.localeObj.getConstant('Zoom'));\n        this.zoomDropdownItem.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Zoom'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement, null, '_zoomDropDownContainer');\n        this.pdfViewerBase.getElement('_zoomDropDownContainer').style.minWidth = '';\n        this.createTooltip(this.currentPageBoxElement, this.pdfViewer.localeObj.getConstant('Page Number'));\n        this.currentPageBoxElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Page Number'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement, 'e-pv-current-page-container', '_currentPageInputContainer');\n        this.pdfViewerBase.getElement('_currentPageInputContainer').style.minWidth = '20px';\n        this.totalPageItem = this.pdfViewerBase.getElement('_totalPage');\n        this.addPropertiesToolItemContainer(this.totalPageItem.parentElement, 'e-pv-total-page-container', '_totalPageContainer');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.addClassToolbarItem = function (idString, className, tooltipText) {\n        var element = this.pdfViewerBase.getElement(idString);\n        element.classList.add(className);\n        element.classList.add('e-pv-tbar-btn');\n        element.setAttribute('aria-label', tooltipText);\n        element.parentElement.classList.add(className + '-container');\n        element.parentElement.classList.add('e-popup-text');\n        element.parentElement.id = this.pdfViewer.element.id + idString + 'Container';\n        if (element.childNodes.length > 0) {\n            var spanElement = element.childNodes[0];\n            spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n            spanElement.classList.remove('e-icons');\n            spanElement.classList.remove('e-btn-icon');\n            if (this.pdfViewer.enableRtl) {\n                spanElement.classList.add('e-right');\n            }\n            var textElement = element.childNodes[1];\n            if (textElement) {\n                if (textElement.classList.contains('e-tbar-btn-text')) {\n                    textElement.id = this.pdfViewer.element.id + idString + 'Text';\n                }\n            }\n        }\n        element.style.width = '';\n        this.createTooltip(element, tooltipText);\n        return element;\n    };\n    Toolbar.prototype.addPropertiesToolItemContainer = function (element, className, idString) {\n        if (className !== null) {\n            element.classList.add(className);\n        }\n        element.classList.add('e-popup-text');\n        element.id = this.pdfViewer.element.id + idString;\n    };\n    Toolbar.prototype.createZoomDropdownElement = function () {\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', null);\n        return zoomDropdownElement.outerHTML;\n    };\n    Toolbar.prototype.createZoomDropdown = function () {\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.pdfViewerBase.getElement('_zoomDropDown'));\n    };\n    Toolbar.prototype.createCurrentPageInputTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var goToPageElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', null);\n        return goToPageElement.outerHTML;\n    };\n    Toolbar.prototype.createTotalPageTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var totalPageElement = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', 'e-pv-total-page');\n        return totalPageElement.outerHTML;\n    };\n    Toolbar.prototype.createNumericTextBox = function () {\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = this.pdfViewerBase.getElement('_currentPageInput');\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n    };\n    Toolbar.prototype.createToolbarItemsForMobile = function () {\n        this.toolbarElement.classList.add('e-pv-mobile-toolbar');\n        var template = '<button id=\"' + this.pdfViewer.element.id + '_more_option\" class=\"e-tbar-btn\"></button>';\n        this.toolbar = new tool({\n            // tslint:disable-next-line:max-line-length\n            items: [{ prefixIcon: 'e-pv-open-document-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Open'), id: this.pdfViewer.element.id + '_open' },\n                { type: 'Separator', align: 'Left' },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-undo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Undo'), id: this.pdfViewer.element.id + '_undo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-redo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Redo'), id: this.pdfViewer.element.id + '_redo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-text-search-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Text Search'), id: this.pdfViewer.element.id + '_search', align: 'Right' },\n                { template: template, align: 'Right' }\n            ], clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup'\n        });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.openDocumentItem = this.pdfViewerBase.getElement('_open');\n        this.openDocumentItem.classList.add('e-pv-open-document');\n        this.openDocumentItem.firstElementChild.id = this.pdfViewer.element.id + '_openIcon';\n        this.textSearchItem = this.pdfViewerBase.getElement('_search');\n        this.textSearchItem.classList.add('e-pv-text-search');\n        this.textSearchItem.firstElementChild.id = this.pdfViewer.element.id + '_searchIcon';\n        this.undoItem = this.pdfViewerBase.getElement('_undo');\n        this.undoItem.classList.add('e-pv-undo');\n        this.redoItem = this.pdfViewerBase.getElement('_redo');\n        this.redoItem.classList.add('e-pv-redo');\n        this.redoItem.firstElementChild.id = this.pdfViewer.element.id + '_redoIcon';\n        this.undoItem.firstElementChild.id = this.pdfViewer.element.id + '_undoIcon';\n        this.createMoreOption(this.pdfViewer.element.id + '_more_option');\n    };\n    Toolbar.prototype.createMoreOption = function (idString) {\n        var _this = this;\n        this.moreOptionItem = document.getElementById(idString);\n        var items = [\n            {\n                text: this.pdfViewer.localeObj.getConstant('Download'), id: this.pdfViewer.element.id + '_menu_download',\n                iconCss: 'e-icons e-pv-download-document-icon e-pv-icon'\n            },\n            {\n                text: this.pdfViewer.localeObj.getConstant('Bookmarks'), id: this.pdfViewer.element.id + '_menu_bookmarks',\n                iconCss: 'e-icons e-pv-bookmark-icon e-pv-icon'\n            }\n        ];\n        this.moreDropDown = new DropDownButton({\n            items: items, iconCss: 'e-pv-more-icon e-pv-icon', cssClass: 'e-caret-hide',\n            open: function (args) {\n                var dropdownButtonPosition = _this.moreDropDown.element.getBoundingClientRect();\n                // tslint:disable-next-line:max-line-length\n                if (!_this.pdfViewer.enableRtl) {\n                    args.element.parentElement.style.left = dropdownButtonPosition.left + dropdownButtonPosition.width - args.element.parentElement.offsetWidth + 'px';\n                }\n            }, select: function (args) {\n                switch (args.item.id) {\n                    case _this.pdfViewer.element.id + '_menu_download':\n                        _this.pdfViewerBase.download();\n                        break;\n                    case _this.pdfViewer.element.id + '_menu_bookmarks':\n                        _this.showToolbar(false);\n                        _this.pdfViewerBase.navigationPane.createNavigationPaneMobile('bookmarks');\n                        break;\n                    default:\n                        break;\n                }\n            }, beforeItemRender: function (args) {\n                if (args.item.id === _this.pdfViewer.element.id + '_menu_bookmarks') {\n                    if (!_this.pdfViewer.bookmarkViewModule || !_this.pdfViewer.bookmarkViewModule.bookmarks) {\n                        args.element.classList.add('e-disabled');\n                    }\n                    else {\n                        args.element.classList.remove('e-disabled');\n                    }\n                }\n            }, close: function (args) {\n                _this.moreOptionItem.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        });\n        this.moreDropDown.appendTo('#' + idString);\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, className) {\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            toolbarItem.className = className;\n        }\n        if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        return toolbarItem;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.createTooltip = function (toolbarItem, tooltipText) {\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip && this.toolbarElement.contains(args.target)) {\n            args.cancel = true;\n        }\n        if (this.annotationToolbarModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.annotationToolbarSettings.showTooltip && this.annotationToolbarModule.toolbarElement.contains(args.target)) {\n                args.cancel = true;\n            }\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n            this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n            this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n            this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n            this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.navigationPane.toolbarResize();\n        }\n        else {\n            this.toolbar.refreshOverflow();\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.handleToolbarButtonClick = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_open':\n            case this.pdfViewer.element.id + '_openIcon':\n            case this.pdfViewer.element.id + '_openText':\n                this.fileInputElement.click();\n                if (Browser.isDevice) {\n                    args.originalEvent.target.blur();\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n                break;\n            case this.pdfViewer.element.id + '_download':\n            case this.pdfViewer.element.id + '_downloadIcon':\n            case this.pdfViewer.element.id + '_downloadText':\n                this.pdfViewerBase.download();\n                break;\n            case this.pdfViewer.element.id + '_print':\n            case this.pdfViewer.element.id + '_printIcon':\n            case this.pdfViewer.element.id + '_printText':\n                if (this.pdfViewer.printModule) {\n                    this.pdfViewer.printModule.print();\n                }\n                break;\n            case this.pdfViewer.element.id + '_undo':\n            case this.pdfViewer.element.id + '_undoIcon':\n            case this.pdfViewer.element.id + '_undoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.undo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_redo':\n            case this.pdfViewer.element.id + '_redoIcon':\n            case this.pdfViewer.element.id + '_redoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.redo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_firstPage':\n            case this.pdfViewer.element.id + '_firstPageIcon':\n            case this.pdfViewer.element.id + '_firstPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToFirstPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_previousPage':\n            case this.pdfViewer.element.id + '_previousPageIcon':\n            case this.pdfViewer.element.id + '_previousPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToPreviousPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_nextPage':\n            case this.pdfViewer.element.id + '_nextPageIcon':\n            case this.pdfViewer.element.id + '_nextPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToNextPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_lastPage':\n            case this.pdfViewer.element.id + '_lastPageIcon':\n            case this.pdfViewer.element.id + '_lastPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToLastPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_zoomIn':\n            case this.pdfViewer.element.id + '_zoomInIcon':\n            case this.pdfViewer.element.id + '_zoomInText':\n                this.pdfViewer.magnificationModule.zoomIn();\n                break;\n            case this.pdfViewer.element.id + '_zoomOut':\n            case this.pdfViewer.element.id + '_zoomOutIcon':\n            case this.pdfViewer.element.id + '_zoomOutText':\n                this.pdfViewer.magnificationModule.zoomOut();\n                break;\n            case this.pdfViewer.element.id + '_selectTool':\n            case this.pdfViewer.element.id + '_selectToolIcon':\n            case this.pdfViewer.element.id + '_selectToolText':\n                if (!this.isSelectionToolDisabled) {\n                    this.pdfViewerBase.initiateTextSelectMode();\n                    this.updateInteractionTools(true);\n                }\n                break;\n            case this.pdfViewer.element.id + '_handTool':\n            case this.pdfViewer.element.id + '_handToolIcon':\n            case this.pdfViewer.element.id + '_handToolText':\n                if (!this.isScrollingToolDisabled) {\n                    this.pdfViewerBase.initiatePanning();\n                    this.updateInteractionTools(false);\n                }\n                break;\n            case this.pdfViewer.element.id + '_search':\n            case this.pdfViewer.element.id + '_searchIcon':\n            case this.pdfViewer.element.id + '_searchText':\n                this.textSearchButtonHandler();\n                break;\n            case this.pdfViewer.element.id + '_annotation':\n            case this.pdfViewer.element.id + '_annotationIcon':\n            case this.pdfViewer.element.id + '_annotationText':\n                this.initiateAnnotationMode();\n                break;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:radix\n            var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n            if (this.zoomDropDown.text === currentPercent) {\n                this.zoomDropDown.element.value = currentPercent;\n            }\n            if (this.zoomDropDown.index === 9) {\n                this.zoomDropDown.value = 2;\n            }\n            // tslint:disable-next-line\n            this.zoomDropDown.text = currentPercent;\n        }\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n        }\n        this.toolbar.enableItems(this.panItem.parentElement, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n                this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n                this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n                if (this.isTextSearchBoxDisplayed) {\n                    this.selectItem(this.textSearchItem);\n                    // tslint:disable-next-line:max-line-length\n                    var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                    searchInputElement.select();\n                    searchInputElement.focus();\n                }\n                else {\n                    this.deSelectItem(this.textSearchItem);\n                }\n            }\n        }\n        else {\n            this.showToolbar(false);\n            this.pdfViewerBase.navigationPane.createNavigationPaneMobile('search');\n        }\n    };\n    Toolbar.prototype.initiateAnnotationMode = function () {\n        if (this.annotationToolbarModule) {\n            if (this.pdfViewerBase.isPanMode && this.annotationToolbarModule.isToolbarHidden) {\n                this.pdfViewerBase.initiateTextSelectMode();\n            }\n            this.DisableInteractionTools();\n            this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.DisableInteractionTools = function () {\n        this.deSelectItem(this.textSelectItem);\n        this.deSelectItem(this.panItem);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.pdfViewer.enableNavigationToolbar) {\n            this.showNavigationToolbar(true);\n        }\n        else {\n            this.showNavigationToolbar(false);\n        }\n        if (this.isPrintBtnVisible) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.isDownloadBtnVisible) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.isSearchBtnVisible) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (this.isOpenBtnVisible && toolbarItems.length === 1) ||\n            // tslint:disable-next-line:max-line-length\n            (!this.isNavigationToolVisible && !this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible && !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if (((!this.isNavigationToolVisible && !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) ||\n            (this.isOpenBtnVisible && !this.isNavigationToolVisible) ||\n            // tslint:disable-next-line:max-line-length\n            ((!this.isOpenBtnVisible && !this.isNavigationToolVisible) || (!this.isMagnificationToolVisible && !this.isScrollingBtnVisible && !this.isSelectionBtnVisible))) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible || this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n        if (((!this.isMagnificationToolVisible && !this.isNavigationToolVisible && !this.isScrollingBtnVisible\n            && !this.isSelectionBtnVisible) && this.isUndoRedoBtnsVisible || !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems) {\n            if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n                this.showOpenOption(true);\n            }\n            else {\n                this.showOpenOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n                this.showPageNavigationTool(true);\n            }\n            else {\n                this.showPageNavigationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n                this.showMagnificationTool(true);\n            }\n            else {\n                this.showMagnificationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n                this.showSelectionTool(true);\n            }\n            else {\n                this.showSelectionTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n                this.showScrollingTool(true);\n            }\n            else {\n                this.showScrollingTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n                this.showPrintOption(true);\n            }\n            else {\n                this.showPrintOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n                this.showDownloadOption(true);\n            }\n            else {\n                this.showDownloadOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n                this.showSearchOption(true);\n            }\n            else {\n                this.showSearchOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('UndoRedoTool') !== -1) {\n                this.showUndoRedoTool(true);\n            }\n            else {\n                this.showUndoRedoTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('AnnotationEditTool') !== -1) {\n                this.showAnnotationEditTool(true);\n            }\n            else {\n                this.showAnnotationEditTool(false);\n            }\n            this.showSeparator(toolbarSettingsItems);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\n/**\n * @hidden\n */\nvar AnnotationToolbar = /** @class */ (function () {\n    function AnnotationToolbar(viewer, viewerBase, toolbar) {\n        this.toolbarBorderHeight = 1;\n        /**\n         * @private\n         */\n        this.isToolbarHidden = false;\n        /**\n         * @private\n         */\n        this.isMobileAnnotEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        this.isHighlightBtnVisible = true;\n        this.isUnderlineBtnVisible = true;\n        this.isStrikethroughBtnVisible = true;\n        this.isColorToolVisible = true;\n        this.isOpacityToolVisible = true;\n        this.isDeleteAnnotationToolVisible = true;\n        this.isCurrentAnnotationOpacitySet = false;\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n        this.primaryToolbar = toolbar;\n    }\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.toolbar = new Tool({\n            width: '', height: '', overflowMode: 'Popup',\n            items: this.createToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n            created: function () {\n                _this.createDropDowns();\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterToolbarCreation();\n        this.showAnnotationToolbar(null);\n        this.applyAnnotationToolbarSettings();\n        this.updateToolbarItems();\n    };\n    AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable) {\n        var _this = this;\n        if (Browser.isDevice) {\n            if (this.toolbarElement == null && isEnable) {\n                this.isMobileAnnotEnabled = true;\n                // tslint:disable-next-line:max-line-length\n                this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n                this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n                this.toolbar = new Tool({\n                    width: '', height: '', overflowMode: 'Popup',\n                    items: this.createMobileToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n                    created: function () {\n                        _this.createDropDowns();\n                    }\n                });\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.pdfViewerBase.navigationPane.goBackToToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(false);\n                this.toolbar.appendTo(this.toolbarElement);\n                this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n                this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n            }\n            else if (this.toolbarElement != null) {\n                if (isEnable) {\n                    this.isMobileAnnotEnabled = true;\n                    this.pdfViewerBase.navigationPane.goBackToToolbar();\n                    this.pdfViewer.toolbarModule.showToolbar(false);\n                    this.toolbarElement.style.display = 'block';\n                }\n                else if (!isEnable) {\n                    this.isMobileAnnotEnabled = false;\n                    this.pdfViewer.toolbarModule.showToolbar(true);\n                    this.hideMobileAnnotationToolbar();\n                }\n            }\n        }\n        else {\n            this.isMobileAnnotEnabled = true;\n        }\n    };\n    AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n        if (this.toolbarElement != null) {\n            this.toolbarElement.style.display = 'none';\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createMobileToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        // tslint:disable-next-line:max-line-length\n        items.push({ template: colorTemplate, align: 'right' });\n        items.push({ template: opacityTemplate, align: 'right' });\n        items.push({ type: 'Separator', align: 'right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.goBackToToolbar = function () {\n        this.isMobileAnnotEnabled = false;\n        this.hideMobileAnnotationToolbar();\n        this.pdfViewer.toolbarModule.showToolbar(true);\n        var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n        if (page) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate, align: 'Left' });\n        items.push({ template: opacityTemplate, align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon', className: 'e-pv-annotation-tools-close-container', id: this.pdfViewer.element.id + '_annotation_close', align: 'Right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n        var element = createElement(elementName, { id: this.pdfViewer.element.id + id });\n        if (className) {\n            element.className = className;\n        }\n        return element.outerHTML;\n    };\n    AnnotationToolbar.prototype.createDropDowns = function () {\n        this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n        this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n        this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n        this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n        this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n        this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n        var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n        this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n        this.opacitySlider.change = this.opacityChange.bind(this);\n        this.opacitySlider.changed = this.opacityChange.bind(this);\n        this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n    };\n    AnnotationToolbar.prototype.opacityDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            var opacityElement = this.pdfViewerBase.getElement('_annotation_opacity-popup');\n            opacityElement.style.left = '0px';\n        }\n    };\n    AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.colorDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n            }\n            else {\n                this.setCurrentColorInPicker();\n            }\n        }\n        this.colorPalette.refresh();\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor }, true);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor }, true);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor }, true);\n                    break;\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    AnnotationToolbar.prototype.colorDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.getElement('_annotation_color-popup').style.left = '0px';\n        }\n        this.colorPalette.refresh();\n    };\n    AnnotationToolbar.prototype.opacityChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n                    this.isCurrentAnnotationOpacitySet = false;\n                }\n                else {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n                }\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = args.value / 100;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = args.value / 100;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = args.value / 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.isCurrentAnnotationOpacitySet = true;\n                // tslint:disable-next-line:max-line-length\n                this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n                        break;\n                    case 'Underline':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n                        break;\n                    case 'Strikethrough':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n        // tslint:disable-next-line:max-line-length\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        return dropDownButton;\n    };\n    AnnotationToolbar.prototype.createColorPicker = function (idString) {\n        var inputElement = createElement('input', { id: idString + '_target' });\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', cssClass: 'e-show-value', enableOpacity: false,\n            change: this.onColorPickerChange.bind(this), value: '#000000', showButtons: false,\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(args.currentValue.hex);\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = args.currentValue.hex;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = args.currentValue.hex;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = args.currentValue.hex;\n                        break;\n                }\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, args.currentValue.hex);\n        this.colorDropDown.toggle();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n        element.childNodes[0].style.borderBottomColor = color;\n    };\n    AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n        this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n    };\n    AnnotationToolbar.prototype.createSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-opacity-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-opacity-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.opacitySlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-opacity-slider', max: 100, min: 0 });\n        // tslint:disable-next-line:max-line-length\n        this.opacityIndicator = createElement('div', { id: idString + '_opacity_indicator', className: 'e-pv-annotation-opacity-indicator' });\n        this.opacityIndicator.textContent = '100%';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(this.opacityIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.opacityIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.enableRtl = true;\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(label);\n        }\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.afterToolbarCreation = function () {\n        // tslint:disable-next-line:max-line-length\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // tslint:disable-next-line:max-line-length\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete'));\n        this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n        this.selectAnnotationDeleteItem(false);\n        this.enableAnnotationPropertiesTools(false);\n    };\n    AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_highlight':\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.handleHighlight();\n                break;\n            case this.pdfViewer.element.id + '_underline':\n            case this.pdfViewer.element.id + '_underlineIcon':\n                this.handleUnderline();\n                break;\n            case this.pdfViewer.element.id + '_strikethrough':\n            case this.pdfViewer.element.id + '_strikethroughIcon':\n                this.handleStrikethrough();\n                break;\n            case this.pdfViewer.element.id + '_annotation_delete':\n            case this.pdfViewer.element.id + '_annotation_deleteIcon':\n                this.pdfViewer.annotationModule.deleteAnnotation();\n                break;\n            case this.pdfViewer.element.id + '_annotation_close':\n            case this.pdfViewer.element.id + '_annotation_closeIcon':\n                this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.showAnnotationToolbar = function (element) {\n        if (!this.isToolbarHidden) {\n            // tslint:disable-next-line\n            var annotationModule = this.pdfViewer.annotationModule;\n            if (element) {\n                this.adjustViewer(false);\n                this.primaryToolbar.deSelectItem(element);\n            }\n            // tslint:disable-next-line:max-line-length           \n            if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.enablePropertiesTool(annotationModule);\n            }\n            else {\n                this.deselectAllItems();\n            }\n            this.toolbarElement.style.display = 'none';\n            this.primaryToolbar.updateInteractionTools(true);\n        }\n        else {\n            var toolBarInitialStatus = this.toolbarElement.style.display;\n            this.toolbarElement.style.display = 'block';\n            if (element) {\n                this.primaryToolbar.selectItem(element);\n                if (toolBarInitialStatus === 'none') {\n                    this.primaryToolbar.DisableInteractionTools();\n                    this.adjustViewer(true);\n                }\n            }\n        }\n        // tslint:disable-next-line:max-line-length           \n        if (this.pdfViewer.magnification && this.pdfViewer.magnification.fitType === 'fitToPage') {\n            this.pdfViewer.magnification.fitToPage();\n        }\n        if (this.pdfViewerBase.isPanMode) {\n            this.enableAnnotationAddTools(false);\n        }\n        else {\n            this.enableAnnotationAddTools(true);\n        }\n        this.isToolbarHidden = !this.isToolbarHidden;\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.enablePropertiesTool = function (annotationModule) {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(true);\n        // tslint:disable-next-line:max-line-length  \n        this.updateColorInIcon(this.colorDropDownElement, annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);\n        this.selectAnnotationDeleteItem(true);\n    };\n    AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('HighlightTool') !== -1) {\n            this.showHighlightTool(true);\n        }\n        else {\n            this.showHighlightTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('UnderlineTool') !== -1) {\n            this.showUnderlineTool(true);\n        }\n        else {\n            this.showUnderlineTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('StrikethroughTool') !== -1) {\n            this.showStrikethroughTool(true);\n        }\n        else {\n            this.showStrikethroughTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('ColorEditTool') !== -1) {\n            this.showColorEditTool(true);\n        }\n        else {\n            this.showColorEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('OpacityEditTool') !== -1) {\n            this.showOpacityEditTool(true);\n        }\n        else {\n            this.showOpacityEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('AnnotationDeleteTool') !== -1) {\n            this.showAnnotationDeleteTool(true);\n        }\n        else {\n            this.showAnnotationDeleteTool(false);\n        }\n        this.showSeparator();\n    };\n    AnnotationToolbar.prototype.showSeparator = function () {\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)\n            || (!this.isColorToolVisible && !this.isOpacityToolVisible)) {\n            this.applyHideToToolbar(false, 3, 3);\n        }\n        if ((!this.isColorToolVisible && !this.isOpacityToolVisible) && (!this.isHighlightBtnVisible &&\n            !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) || !this.isDeleteAnnotationToolVisible) {\n            this.applyHideToToolbar(false, 6, 6);\n        }\n    };\n    AnnotationToolbar.prototype.showHighlightTool = function (isShow) {\n        this.isHighlightBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 0, 0);\n    };\n    AnnotationToolbar.prototype.showUnderlineTool = function (isShow) {\n        this.isUnderlineBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 1, 1);\n    };\n    AnnotationToolbar.prototype.showStrikethroughTool = function (isShow) {\n        this.isStrikethroughBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 2, 2);\n    };\n    AnnotationToolbar.prototype.showColorEditTool = function (isShow) {\n        this.isColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 4, 4);\n    };\n    AnnotationToolbar.prototype.showOpacityEditTool = function (isShow) {\n        this.isOpacityToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 5, 5);\n    };\n    AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow) {\n        this.isDeleteAnnotationToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 7, 7);\n    };\n    AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = this.getToolbarHeight(toolbarContainer);\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n        var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n        if (isAdjust) {\n            // tslint:disable-next-line:max-line-length\n            sideBarToolbar.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            sideBarContentContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            splitterElement.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (annotationToolbarHeight)) + 'px';\n            sideBarToolbar.style.height = sideBarToolbar.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n            splitterElement.style.height = splitterElement.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            sideBarToolbar.style.top = toolbarHeight + 'px';\n            sideBarContentContainer.style.top = toolbarHeight + 'px';\n            splitterElement.style.top = toolbarHeight + 'px';\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n            sideBarToolbar.style.height = this.getHeight(sideBarToolbar, annotationToolbarHeight);\n            splitterElement.style.height = this.getHeight(splitterElement, annotationToolbarHeight);\n        }\n        this.updateContentContainerHeight(isAdjust);\n    };\n    AnnotationToolbar.prototype.updateContentContainerHeight = function (isAdjust) {\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarClientRect = this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();\n        if (sideBarClientRect.height !== 0) {\n            if (isAdjust) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height - annotationToolbarHeight + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height + annotationToolbarHeight + 'px';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getToolbarHeight = function (element) {\n        var toolbarHeight = element.getBoundingClientRect().height;\n        if (toolbarHeight === 0 && element === this.pdfViewerBase.getElement('_toolbarContainer')) {\n            // getComputedStyle gets the value from style and toolbar border height is added to it.\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(element)['height']) + this.toolbarBorderHeight;\n        }\n        return toolbarHeight;\n    };\n    AnnotationToolbar.prototype.getHeight = function (element, toolbarHeight) {\n        var height = element.getBoundingClientRect().height;\n        return (height !== 0) ? height + toolbarHeight + 'px' : '';\n    };\n    AnnotationToolbar.prototype.handleHighlight = function () {\n        if (!this.isHighlightEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n            this.primaryToolbar.selectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            this.isHighlightEnabled = true;\n            this.isUnderlineEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderline = function () {\n        if (!this.isUnderlineEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n            this.primaryToolbar.selectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            this.isUnderlineEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethrough = function () {\n        if (!this.isStrikethroughEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n            this.primaryToolbar.selectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.enableAnnotationPropertiesTools(true);\n            // tslint:disable-next-line:max-line-length\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            this.isStrikethroughEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isUnderlineEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.deselectAllItems = function () {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(false);\n        this.updateColorInIcon(this.colorDropDownElement, '#000000');\n        this.selectAnnotationDeleteItem(false);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable) {\n        this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n        this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n        this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n        var isButtonsEnabled = false;\n        if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n            isButtonsEnabled = true;\n        }\n        return isButtonsEnabled;\n    };\n    AnnotationToolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.enableAnnotationAddTools(true);\n        }\n        else {\n            this.enableAnnotationAddTools(false);\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.resetToolbar = function () {\n        this.adjustViewer(false);\n        this.updateToolbarItems();\n        this.toolbarElement.style.display = 'none';\n        this.isToolbarHidden = true;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clear = function () {\n        this.deselectAllItems();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.destroy = function () {\n        this.colorDropDown.destroy();\n        this.opacityDropDown.destroy();\n        this.toolbar.destroy();\n    };\n    AnnotationToolbar.prototype.getElementHeight = function (element) {\n        return element.getBoundingClientRect().height;\n    };\n    AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight - toolbarHeight;\n    };\n    AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight + toolbarHeight;\n    };\n    return AnnotationToolbar;\n}());\nexport { AnnotationToolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `AnnotationToolbarSettings` module is used to provide the annotation toolbar settings of the PDF viewer.\n */\nvar AnnotationToolbarSettings = /** @class */ (function (_super) {\n    __extends(AnnotationToolbarSettings, _super);\n    function AnnotationToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], AnnotationToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], AnnotationToolbarSettings.prototype, \"annotationToolbarItem\", void 0);\n    return AnnotationToolbarSettings;\n}(ChildProperty));\nexport { AnnotationToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * The `StrikethroughSettings` module is used to provide the properties to Strikethrough annotation.\n */\nvar StrikethroughSettings = /** @class */ (function (_super) {\n    __extends(StrikethroughSettings, _super);\n    function StrikethroughSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], StrikethroughSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ff0000')\n    ], StrikethroughSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], StrikethroughSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('strikethrough')\n    ], StrikethroughSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], StrikethroughSettings.prototype, \"modifiedDate\", void 0);\n    return StrikethroughSettings;\n}(ChildProperty));\nexport { StrikethroughSettings };\n/**\n * The `UnderlineSettings` module is used to provide the properties to Underline annotation.\n */\nvar UnderlineSettings = /** @class */ (function (_super) {\n    __extends(UnderlineSettings, _super);\n    function UnderlineSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], UnderlineSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#00ff00')\n    ], UnderlineSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], UnderlineSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('underline')\n    ], UnderlineSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], UnderlineSettings.prototype, \"modifiedDate\", void 0);\n    return UnderlineSettings;\n}(ChildProperty));\nexport { UnderlineSettings };\n/**\n * The `HighlightSettings` module is used to provide the properties to Highlight annotation.\n */\nvar HighlightSettings = /** @class */ (function (_super) {\n    __extends(HighlightSettings, _super);\n    function HighlightSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], HighlightSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ffff00')\n    ], HighlightSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], HighlightSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('highlight')\n    ], HighlightSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], HighlightSettings.prototype, \"modifiedDate\", void 0);\n    return HighlightSettings;\n}(ChildProperty));\nexport { HighlightSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download file': 'Download file',\n            'Download': 'Download',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            'Apply': 'Apply',\n            'GoToPage': 'Go to Page',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document. No more matches were found',\n            'No Text Found': 'No Text Found',\n            'Undo': 'Undo',\n            'Redo': 'Redo',\n            'Annotation': 'Add or Edit annotations',\n            'Highlight': 'Highlight Text',\n            'Underline': 'Underline Text',\n            'Strikethrough': 'Strikethrough Text',\n            'Delete': 'Delete annotation',\n            'Opacity': 'Opacity',\n            'Color edit': 'Change Color',\n            'Opacity edit': 'Change Opacity',\n            'Highlight context': 'Highlight',\n            'Underline context': 'Underline',\n            'Strikethrough context': 'Strike through',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.',\n            'Open text': 'Open',\n            'First text': 'First Page',\n            'Previous text': 'Previous Page',\n            'Next text': 'Next Page',\n            'Last text': 'Last Page',\n            'Zoom in text': 'Zoom In',\n            'Zoom out text': 'Zoom Out',\n            'Selection text': 'Selection',\n            'Pan text': 'Pan',\n            'Print text': 'Print',\n            'Search text': 'Search',\n            'Annotation Edit text': 'Edit Annotation'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"isDocumentEdited\", {\n        /**\n         * Checks whether the PDF document is edited.\n         */\n        get: function () {\n            return this.viewerBase.isDocumentEdited;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"annotation\", {\n        /**\n         * Gets the annotation object of the pdf viewer.\n         * @returns { Annotation }\n         */\n        get: function () {\n            return this.annotationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableAnnotation) {\n            modules.push({\n                member: 'Annotation', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document - Specifies the document name for load\n     * @param  {string} password - Specifies the Given document password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    /**\n     * Perform undo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.undo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.undo();\n        }\n    };\n    /**\n     * Perform redo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.redo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.redo();\n        }\n    };\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        if (!isNullOrUndefined(this.element)) {\n            this.element.classList.remove('e-pdfviewer');\n            this.element.innerHTML = '';\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewer.prototype.fireAnnotationAdd = function (pageNumber, index, type, bounds, settings) {\n        var eventArgs = { name: 'annotationAdd', pageIndex: pageNumber, annotationId: index, annotationType: type, annotationBound: bounds, annotationSettings: settings };\n        this.trigger('annotationAdd', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAnnotationRemove = function (pageNumber, index, type) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'annotationRemove', pageIndex: pageNumber, annotationId: index, annotationType: type };\n        this.trigger('annotationRemove', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewer.prototype.fireAnnotationPropertiesChange = function (pageNumber, index, type, isColorChanged, isOpacityChanged) {\n        var eventArgs = { name: 'annotationPropertiesChange', pageIndex: pageNumber, annotationId: index, annotationType: type, isColorChanged: isColorChanged, isOpacityChanged: isOpacityChanged };\n        this.trigger('annotationPropertiesChange', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigationToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableAnnotation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextMarkupAnnotation\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'AnnotationEditTool', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ showTooltip: true, annotationToolbarItem: ['HighlightTool', 'UnderlineTool', 'StrikethroughTool', 'ColorEditTool', 'OpacityEditTool', 'AnnotationDeleteTool'] })\n    ], PdfViewer.prototype, \"annotationToolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#FFDF56', author: 'Guest', subject: 'Highlight', modifiedDate: '' })\n    ], PdfViewer.prototype, \"highlightSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#ff0000', author: 'Guest', subject: 'Strikethrough', modifiedDate: '' })\n    ], PdfViewer.prototype, \"strikethroughSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#00ff00', author: 'Guest', subject: 'Underline', modifiedDate: '' })\n    ], PdfViewer.prototype, \"underlineSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationAdd\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationRemove\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationPropertiesChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { ListView } from '@syncfusion/ej2-lists';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.childNavigateCount = 0;\n        // tslint:disable-next-line\n        this.bookmarkClick = function (args) {\n            // tslint:disable-next-line\n            if (!args.event.target.classList.contains('e-icons')) {\n                var bookid = args.data.Id;\n                _this.childNavigateCount = 0;\n                _this.pdfViewerBase.navigationPane.goBackToToolbar();\n                _this.navigateToBookmark(bookid);\n            }\n            else {\n                _this.childNavigateCount++;\n            }\n            return false;\n        };\n        this.nodeClick = function (args) {\n            _this.setHeight(args.node);\n            var bookid = Number(args.nodeData.id);\n            _this.navigateToBookmark(bookid);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var _this = this;\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/Bookmarks');\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                if (_this.pdfViewerBase.navigationPane) {\n                    _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (data) {\n                    if (typeof data !== 'object') {\n                        data = JSON.parse(data);\n                    }\n                    _this.bookmarks = { bookMark: data.Bookmarks };\n                    _this.bookmarksDestination = { bookMarkDestination: data.BookmarksDestination };\n                }\n                if (_this.pdfViewerBase.navigationPane) {\n                    if (_this.bookmarks == null) {\n                        _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                    }\n                    else {\n                        _this.pdfViewerBase.navigationPane.enableBookmarkButton();\n                        _this.isBookmarkViewDiv = false;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        var _this = this;\n        if (!this.isBookmarkViewDiv) {\n            this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n            this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n            // tslint:disable-next-line:max-line-length\n            var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon e-right' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            // tslint:disable-next-line:max-line-length\n            var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n            if (this.pdfViewer.enableRtl) {\n                bookmarkTitle.style.paddingRight = 26 + 'px';\n            }\n            else {\n                bookmarkTitle.style.paddingLeft = 40 + 'px';\n            }\n            bookmarkTitle.innerText = '${Title}';\n            bookmarkIconView.appendChild(bookmarkTitle);\n            // tslint:disable-next-line:max-line-length\n            this.treeObj = new TreeView({\n                fields: {\n                    dataSource: this.bookmarks.bookMark,\n                    id: 'Id',\n                    text: 'Title',\n                    child: 'Child',\n                    hasChildren: 'HasChild',\n                },\n                nodeTemplate: bookmarkIconView.outerHTML,\n                nodeSelected: this.nodeClick.bind(this),\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.treeObj.enableRtl = true;\n            }\n            this.treeObj.appendTo(this.bookmarkView);\n            ['mouseover', 'keydown'].forEach(function (evt) { return _this.bookmarkView.addEventListener(evt, function (event) {\n                _this.setHeight(event.target);\n            }); });\n            this.isBookmarkViewDiv = true;\n        }\n        this.bookmarkView.style.display = 'block';\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkContentMobile = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.remove();\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.getElement('_bookmarks_container').appendChild(this.bookmarkView);\n        this.bookmarkList = new ListView({\n            dataSource: this.bookmarks.bookMark,\n            fields: {\n                id: 'Id',\n                text: 'Title',\n                child: 'Child'\n            },\n            showHeader: false,\n            select: this.bookmarkClick.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.bookmarkList.enableRtl = true;\n        }\n        this.bookmarkList.appendTo(this.bookmarkView);\n    };\n    // tslint:disable-next-line\n    BookmarkView.prototype.setHeight = function (element) {\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            else if (element.classList.contains('e-list-parent')) {\n                element = element.querySelector('.e-fullrow');\n            }\n            else if (element.classList.value !== ('e-fullrow') && element.closest('.e-list-item')) {\n                element = element.closest('.e-list-item').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.setBookmarkContentHeight = function () {\n        // tslint:disable-next-line\n        var element = this.treeObj.element;\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    BookmarkView.prototype.navigateToBookmark = function (bookid) {\n        var pageIndex = this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n        var Y = this.bookmarksDestination.bookMarkDestination[bookid].Y;\n        this.goToBookmark(pageIndex, Y);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @param  {number} pageIndex - Specifies the pageIndex for Navigate\n     * @param  {number} y - Specifies the Y coordinates value of the Page\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n            this.pdfViewerBase.updateMobileScrollerPosition();\n        }\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.disableBookmarkButton();\n            this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        }\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            if (this.bookmarkView.parentElement !== null) {\n                this.bookmarkView.parentElement.removeChild(this.bookmarkView);\n            }\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.contextMenuHeight = 144;\n        /**\n         * @private\n         */\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, xTouch, yTouch, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, touchX, touchY, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range' || (!selection.type && !selection.isCollapsed)) {\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && (selection.type === 'Range' || (!selection.type && !selection.isCollapsed))) {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                var selectionRectBounds = this.getSelectionRectangleBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (this.getNodeElementFromNode(selection.anchorNode).childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (this.getNodeElementFromNode(selection.focusNode).childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: this.getNodeElementFromNode(selection.anchorNode).id,\n                    startOffset: anchorOffsetValue, endNode: this.getNodeElementFromNode(selection.focusNode).id,\n                    // tslint:disable-next-line:max-line-length\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bound: selectionBounds, rectangleBounds: selectionRectBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = this.getNodeElementFromNode(node);\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            if (lastElement.childNodes[0]) {\n                                this.extendSelectionStich(lastElement.childNodes[0], this.getTextLastLength(lastElement), selection);\n                            }\n                            else {\n                                this.extendSelectionStich(lastElement, this.getTextLastLength(lastElement), selection);\n                            }\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            this.extendSelectionStich(lastElement_1.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    TextSelection.prototype.extendSelectionStich = function (node, offset, selection) {\n        if (selection.extend) {\n            selection.extend(node, offset);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = this.getNodeElementFromNode(selection.focusNode);\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.focusNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBound = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    var selectionRectBounds = this.getSelectionRectangleBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bound: selectionBound, rectangleBounds: selectionRectBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode);\n        var endElement = document.getElementById(endNode);\n        if (startElement.childNodes[0]) {\n            startElement = startElement.childNodes[0];\n        }\n        if (endElement.childNodes[0]) {\n            endElement = endElement.childNodes[0];\n        }\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds = this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber);\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getSelectionRectangleBounds = function (range, pageNumber) {\n        var selectionBounds = [];\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var startOffset = 0;\n            var endOffset = 0;\n            var currentId = 0;\n            var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(range.startContainer);\n            var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(range.startContainer, anchorPageId);\n            var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(range.endContainer);\n            var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(range.endContainer, focusPageId);\n            var textDivs = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).childNodes;\n            if (pageNumber === anchorPageId) {\n                currentId = anchorTextId;\n            }\n            else {\n                currentId = 0;\n            }\n            for (var j = currentId; j < textDivs.length; j++) {\n                var textElement = textDivs[j];\n                if (j === anchorTextId) {\n                    startOffset = range.startOffset;\n                }\n                else {\n                    startOffset = 0;\n                }\n                if (j === focusTextId) {\n                    endOffset = range.endOffset;\n                }\n                else {\n                    endOffset = textElement.textContent.length;\n                }\n                var newRange = document.createRange();\n                for (var k = 0; k < textElement.childNodes.length; k++) {\n                    var node = textElement.childNodes[k];\n                    newRange.setStart(node, startOffset);\n                    newRange.setEnd(node, endOffset);\n                }\n                var boundingRect = this.normalizeBounds(newRange.getBoundingClientRect(), pageNumber);\n                selectionBounds.push(boundingRect);\n                newRange.detach();\n                if (j === focusTextId) {\n                    break;\n                }\n            }\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n            selectionBounds.push(bounds);\n        }\n        return selectionBounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.width)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bound = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bound = ranges[i].bound;\n                }\n            }\n        }\n        return bound;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        // tslint:disable-next-line:max-line-length\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))) {\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = this.getNodeElementFromNode(selection.anchorNode);\n                var focusElement = this.getNodeElementFromNode(selection.focusNode);\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = this.getNodeElementFromNode(anchorElement);\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = this.getNodeElementFromNode(focusElement);\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.calculateContextMenuPosition(event.touches[0].clientY, event.touches[0].clientX);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.calculateContextMenuPosition = function (top, left) {\n        top = top - this.pdfViewerBase.toolbarHeight;\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var contextTop = top - this.contextMenuHeight;\n            if (contextTop < this.pdfViewerBase.toolbarHeight) {\n                top = top + this.contextMenuHeight;\n            }\n            else {\n                top = contextTop;\n            }\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(top, left - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        if (this.pdfViewerBase.getTextMarkupAnnotationMode()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.getNodeElement = function (range, touchX, touchY, event, nodeElement) {\n        if (document.caretRangeFromPoint) {\n            range = document.caretRangeFromPoint(touchX, touchY);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n            // tslint:disable-next-line\n        }\n        else if (document.caretPositionFromPoint) {\n            // tslint:disable-next-line\n            var start = document.caretPositionFromPoint(touchX, touchY);\n            // tslint:disable-next-line\n            var end = document.caretPositionFromPoint(touchX, touchY);\n            range = document.createRange();\n            range.setStart(start.offsetNode, start.offset);\n            range.setEnd(end.offsetNode, end.offset);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    TextSelection.prototype.getNodeElementFromNode = function (node) {\n        if (node.parentElement) {\n            return node.parentElement;\n        }\n        else {\n            return node.parentNode;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch(_this.searchInput);\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            _this.searchButtonClick(_this.searchBtn, _this.searchInput);\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        if (this.pdfViewer.enableRtl) {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-next-search');\n        }\n        else {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        }\n        this.prevSearchBtn.setAttribute('aria-label', 'Previous Search text');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        if (this.pdfViewer.enableRtl) {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-prev-search');\n        }\n        else {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        }\n        this.nextSearchBtn.setAttribute('aria-label', 'Next Search text');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        if (this.pdfViewer.enableRtl) {\n            this.searchBox.classList.add('e-rtl');\n            this.searchBox.style.left = '88.3px';\n        }\n        else {\n            this.searchBox.classList.remove('e-rtl');\n            this.searchBox.style.right = '88.3px';\n        }\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.enableToolbar) {\n            var secondaryToolbar = this.pdfViewerBase.getElement('_toolbarContainer_popup');\n            if (secondaryToolbar) {\n                if (secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)) {\n                    this.searchBox.style.right = '0px';\n                }\n            }\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n                this.searchBox.style.right = '0px';\n                // tslint:disable-next-line\n                this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n                // tslint:disable-next-line\n                this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            }\n            else {\n                this.searchBox.style.right = '88.3px';\n                this.searchBox.style.width = '';\n                this.searchInput.style.width = '';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function (searchElement) {\n        var inputString = searchElement.value;\n        this.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.initiateSearch = function (inputString) {\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch(this.searchInput);\n            }\n        }\n        else {\n            this.initiateTextSearch(this.searchInput);\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // tslint:disable-next-line:max-line-length\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // tslint:disable-next-line:max-line-length\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -100 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                var targetScrollElement = this.getScrollElement(element);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                var targetScrollElement = this.getScrollElement(element_1);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    TextSearch.prototype.getScrollElement = function (element) {\n        var targetElement = element;\n        if (element.childNodes.length > 0) {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                if (element.childNodes[i].classList) {\n                    if (element.childNodes[i].classList.contains('e-pv-search-text-highlight')) {\n                        targetElement = element.childNodes[i];\n                    }\n                }\n            }\n        }\n        return targetElement;\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (Browser.isDevice) {\n                parent.scrollLeft = offsetX;\n            }\n            else {\n                if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                    parent.scrollLeft = offsetX;\n                }\n            }\n        }\n        parent.scrollTop = offsetY;\n        this.pdfViewerBase.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var _this = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: this.pdfViewerBase.getDocumentId(), hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            var proxy = _this.pdfViewerBase;\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (data.pageText) {\n                        proxy.storeWinData(data, pageIndex);\n                        _this.initSearch(pageIndex, false);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.prevSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.prevSearchBtn.disabled = true;\n            }\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.nextSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.nextSearchBtn.disabled = true;\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchButtonClick = function (element, inputElement) {\n        if (element.classList.contains('e-pv-search-icon')) {\n            this.initiateTextSearch(inputElement);\n        }\n        else if (element.classList.contains('e-pv-search-close')) {\n            inputElement.value = '';\n            this.resetTextSearch();\n            inputElement.focus();\n        }\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (this.searchBtn) {\n            if (isEnable) {\n                this.searchBtn.classList.remove('e-pv-search-close');\n                this.searchBtn.classList.add('e-pv-search-icon');\n            }\n            else {\n                this.searchBtn.classList.remove('e-pv-search-icon');\n                this.searchBtn.classList.add('e-pv-search-close');\n            }\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant('No Text Found'));\n        }\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText - Specifies the searchText content\n     * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', {\n                id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container'\n            });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex < _this.pdfViewerBase.pageCount; pageIndex++) {\n                    var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                    var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                    _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.  \n        var jsonObject = {\n            pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: 1\n        };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/PrintImages', false);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        var printImage = request.responseText;\n        if (typeof printImage !== 'object') {\n            printImage = JSON.parse(printImage);\n        }\n        var annotationSource = '';\n        if (printImage.textMarkupAnnotation && this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            annotationSource = this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printImage.textMarkupAnnotation, pageIndex);\n        }\n        // tslint:disable-next-line:max-line-length\n        this.printCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_printCanvas_' + pageIndex, className: 'e-pv-print-canvas' });\n        this.printCanvas.style.width = pageWidth + 'px';\n        this.printCanvas.style.height = pageHeight + 'px';\n        this.printCanvas.height = 1056 * window.devicePixelRatio;\n        this.printCanvas.width = 816 * window.devicePixelRatio;\n        var context = this.printCanvas.getContext('2d');\n        var pageImage = new Image();\n        var annotationImage = new Image();\n        pageImage.onload = function () {\n            if (pageHeight > pageWidth) {\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                }\n            }\n            else {\n                // translate to center canvas\n                context.translate(proxy.printCanvas.width * 0.5, proxy.printCanvas.height * 0.5);\n                // rotate the canvas to - 90 degree \n                context.rotate(-0.5 * Math.PI);\n                // un translate the canvas back to origin\n                context.translate(-proxy.printCanvas.height * 0.5, -proxy.printCanvas.width * 0.5);\n                // draw the image\n                context.drawImage(pageImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                if (annotationSource) {\n                    context.drawImage(annotationImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                }\n            }\n            if (pageIndex === (proxy.pdfViewerBase.pageCount - 1)) {\n                proxy.printWindowOpen();\n            }\n        };\n        pageImage.src = printImage.image;\n        annotationImage.src = annotationSource;\n        this.printViewerContainer.appendChild(this.printCanvas);\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                + ' img { width:100%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; }'\n                // set default page Height and page Width for A4 size.\n                + ' div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } '\n                // set default page Height and page Width for A4 size.\n                + 'div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>');\n        }\n        for (var i = 0; i < this.printViewerContainer.children.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            var canvasUrl = this.printViewerContainer.children[i].toDataURL();\n            this.frameDoc.document.write('<div style=\"margin:0mm;width:816px;height:1056px;position:relative\"><img src=\"' + canvasUrl + '\" id=\"' + 'image_' + i + '\" /></div>');\n        }\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            try {\n                this.iframe.contentWindow.document.execCommand('print', false, null);\n            }\n            catch (e) {\n                this.iframe.contentWindow.print();\n            }\n        }\n        else {\n            setTimeout(function () {\n                _this.iframe.contentWindow.print();\n                _this.iframe.contentWindow.focus();\n                document.body.removeChild(_this.iframe);\n            }, 200);\n        }\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n"],"names":["Annotation","pdfViewer","viewerBase","this","actionCollection","redoCollection","isPopupNoteVisible","pdfViewerBase","enableTextMarkupAnnotation","textMarkupAnnotationModule","TextMarkupAnnotation","prototype","setAnnotationMode","type","clearAnnotationMode","drawTextMarkupAnnotations","toString","isTextMarkupAnnotationMode","deleteAnnotation","deleteTextMarkupAnnotation","toolbarModule","annotationToolbarModule","selectAnnotationDeleteItem","enableAnnotationPropertiesTools","initializeCollection","popupNote","createNote","addAction","pageNumber","index","annotation","actionString","property","action","pageIndex","modifiedProperty","push","updateToolbar","undo","actionObject","pop","undoTextMarkupAction","undoRedoPropertyChange","redo","redoTextMarkupAction","updateUndoRedoButtons","createElement","id","element","className","styles","popupNoteAuthor","appendChild","popupNoteContent","mainContainer","showPopupNote","event","color","author","note","mainContainerPosition","getBoundingClientRect","popupNoteClientRect","textContent","style","backgroundColor","display","topPosition","pageY","top","leftPosition","pageX","left","width","height","hidePopupNote","createTextMarkupPopup","_this","elementId","popupElement","headerElement","authorPopupElement","closeBtn","modifiedDateElement","contentContainer","noteContentElement","contentEditable","viewerContainer","addEventListener","saveClosePopupMenu","bind","onPopupElementMoveStart","onPopupElementMove","window","onPopupElementMoveEnd","focus","changedTouches","target","contains","childNodes","isPopupMenuMoved","popupElementClientRect","clientX","clientY","pageSize","currentAnnotPageNumber","getZoomFactor","parseFloat","top_1","clientPosition","pageDiv","document","getElementById","saveNoteContent","innerText","closePopupMenu","parentElement","removeChild","showAnnotationPopup","getEventPageNumber","currentTextMarkupAnnotation","getProperDate","modifiedDate","canvasPosition","date","dateObject","Date","isNaN","getFullYear","dateString","slice","getMonth","getDate","getHours","getMinutes","getSeconds","eventTarget","pageString","split","parseInt","clear","destroy","getModuleName","LinkAnnotation","renderHyperlinkContent","data","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","_loop_1","i","aTag","rect","this_1","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","onclick","fireHyperlinkClick","open","_loop_2","this_2","undefined","destPageHeight","destLocation","scrollValue","name","scrollTop","background","position","Left","Top","Width","Height","modifyZindexForTextSelection","isAdd","pageCount","getElement","pageChildNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","aElement","getElementsByTagName","parentNode","currentTextMarkupAddMode","selectTextMarkupCurrentPage","currentAnnotationIndex","highlightColor","highlightSettings","underlineColor","underlineSettings","strikethroughColor","strikethroughSettings","highlightOpacity","opacity","underlineOpacity","strikethroughOpacity","createAnnotationLayer","pageWidth","pageHeight","displayMode","annotationCanvas","renderTextMarkupAnnotationsInPage","textMarkupAnnotations","canvas","renderTextMarkupAnnotations","factor","getMagnifiedValue","context","getContext","setLineDash","annotations","getAnnotations","annotationObject","TextMarkupAnnotationType","textMarkupAnnotationType","Color","Opacity","bounds","Bounds","Author","subject","Subject","ModifiedDate","Note","Rect","storeAnnotations","annotBounds","renderHighlightAnnotation","renderStrikeoutAnnotation","renderUnderlineAnnotation","maintainAnnotationSelection","selectionObject","textSelectionModule","selectionRangeArray","convertSelectionToTextMarkup","getSelection","pageBounds","getDrawnBounds","drawTextMarkups","clearTextSelection","rectangleBounds","bound","getPageContext","getAddedAnnotation","isDocumentEdited","settings","annotationModule","fireAnnotationAdd","beginPath","x","X","y","Y","globalAlpha","closePath","fillStyle","msFillRule","fill","save","getProperBounds","drawLine","boundValues","moveTo","lineTo","lineWidth","strokeStyle","stroke","printTextMarkupAnnotations","toDataURL","saveTextMarkupAnnotations","storeObject","sessionStorage","getItem","documentId","Array","colorpick","ColorPicker","j","annotationCollection","JSON","parse","newArray","pageAnnotationObject","z","stringify","getBoundsForSave","colorString","getValue","getRgbCode","pageAnnotations","deletedAnnotation","splice","manageAnnotations","fireAnnotationRemove","Browser","isDevice","hideMobileAnnotationToolbar","showToolbar","modifyColorProperty","modifyAnnotationProperty","fireAnnotationPropertiesChange","modifyOpacityProperty","args","value","status","toLocaleString","clearCurrentAnnotation","tempColor","tempOpacity","enableAnnotationPropertiesTool","clearCurrentAnnotationSelection","lowerPageIndex","higherPageIndex","k","clearAnnotationSelection","stringArray","r","g","b","selection","anchorNode","range","createRange","isBackWardSelection","textLayer","focusNode","pageId","getPageIndex","pageRect","setStart","focusOffset","setEnd","anchorOffset","boundingRect","rectangle","getDefaultValue","right","bottom","rectangleArray","startNode","endNode","selectionStartOffset","selectionEndOffset","anchorPageId","anchorTextId","getTextIndex","focusPageId","focusTextId","startOffset","endOffset","currentId","selectionRects","pageStartId","pageEndId","pageStartOffset","pageEndOffset","textDivs","textElement","node","detach","startElementNode","endElementNode","pageRange","pageRectBounds","pageRectangle","removeAllRanges","rerenderAnnotationsPinch","annotCanvas","oldAnnotCanvas","rerenderAnnotations","oldCanvas","newCanvas","resizeAnnotations","onTextMarkupAnnotationMouseUp","isNullOrUndefined","isClickedOnScrollBar","currentAnnot","getCurrentMarkupAnnotation","selectAnnotation","isToolbarHidden","showAnnotationToolbar","annotationItem","onTextMarkupAnnotationTouchEnd","number","touchCanvas","touches","onTextMarkupAnnotationMouseMove","cursor","isPanMode","getAnnotationToolStatus","currentTextMarkupAnnotations","canvasParentPosition","leftClickPosition","topClickPosition","annotationList","isAnnotationGot","top_2","compareCurrentAnnotations","previousX","currentAnnotation","firstAnnotBounds","firstXposition","firstYposition","secondAnnotBounds","secondXposition","secondYposition","drawAnnotationSelectRect","isEnable","createMobileAnnotationToolbar","isMobileAnnotEnabled","enable","updateColorInIcon","colorDropDownElement","setCurrentColorInPicker","annotObject","removeItem","getPageCollection","indexOf","markupAnnotation","annotationStringified","setItem","predefinedDate","storedIndex","NavigationPane","viewer","base","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isTooltipCreated","isNavigationToolbarVisible","isBookmarkListOpen","isNavigationPaneResized","isBookmarkOpen","isThumbnailOpen","resizeIconMouseOver","srcElement","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","offsetTop","offsetParent","clientWidth","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","getPopupNoteVisibleStatus","preventDefault","enableRtl","maxWidth","Math","floor","outerContainerWidth","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","closeDiv","viewerWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","bookmarkButton","children","bookmarkViewModule","setBookmarkContentHeight","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","localeObj","getConstant","bookmarkPane","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","bookmarkButtonOnClick","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","createNavigationPane","sideBarToolbar","attrs","role","aria-orientation","tabindex","cssFloat","sideBarToolbarSplitter","direction","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","sideBarTitleOnMouseup","adjustPane","splitterElement","toolbarContainer","toolbarHeight","getComputedStyle","createNavigationPaneMobile","option","toolbarElement","viewerMainContainer","insertBefore","items","searchTemplate","prefixIcon","tooltipText","click","goBackToToolbar","template","iconElement","firstElementChild","enableSearchItems","textSearchModule","searchButtonClick","searchInput","searchPrevious","searchNext","text","toolbar","Tool","overflowMode","appendTo","initiateSearchBox","initiateBookmarks","searchBtn","which","initiateTextSearch","resetVariables","setSearchInputWidth","enableItems","mobileScrollerContainer","bookmarkContainer","renderBookmarkContentMobile","inputString","initiateSearch","cancelTextSearch","childNavigateCount","bookmarkList","back","onWindowResize","searchInputParent","padding","getPropertyValue","getParentElementSearchBox","idString","createTooltipMobile","toastObject","tooltipChild","tooltipDiv","Toast","close","onTooltipClose","animation","hide","duration","effect","clientHeight","show","tooltipElement","isMessagePopupOpened","toolbarResize","thumbnailButton","disabled","aria-label","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","buttonSpan","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","enableBookmarkButton","resizeIcon","setResizeIconTop","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","t","call","label","ops","trys","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","previousTime","currentTime","isTouchScrolled","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","dragX","dragY","isScrollbarMouseDown","scrollX","scrollY","ispageMoved","isThumb","isTapHidden","singleTapTimer","tapCount","navigationPane","isAnnotationToolbarHidden","updatePageHeight","annotationToolbarHeight","onToolbarResize","enableToolbar","textSearchBoxOnResize","mobilePageNoContainer","updateMobileScrollerPosition","viewerContainerOnMousedown","button","detail","isIE","documentMode","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","idStringArray","firePageClick","offsetX","offsetY","isTextMarkupAnnotationModule","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","isCollapsed","isTextSelection","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","getTextMarkupAnnotationMode","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","getCurrentTextMarkupAnnotation","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","setTouchPoints","preventTouchEvent","getTime","handleTaps","contextMenuObj","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","difference","speed","abs","viewerContainerOnPointerEnd","viewerContainerOnScroll","scrollposX","scrollposY","ratio","scrollHeight","containerValue","verticalScrollValue","getPageHeight","getPageTop","fitType","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","TextLayer","initializeComponent","toolbarDiv","createMobilePageNumberContainer","tabIndex","touchAction","setMaximumHeight","intializeToolbar","mobilecurrentPageContainer","mobilenumberContainer","mobiletotalPageContainer","mobileSpanContainer","createThumbnailContainer","createPrintPopup","createGoToPagePopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","innerHTML","zIndex","mobileScrollContainerDown","mobileScrollContainerEnd","initiatePageRender","documentData","password","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","minHeight","goToPagePopup","removeEventListener","request","XMLHttpRequest","serviceUrl","serverActionSettings","setRequestHeader","responseType","send","onreadystatechange","readyState","currentTarget","response","requestSuccess","fireAjaxRequestFailed","statusText","onerror","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","initPageDiv","isAutoZoom","isInitialLoading","createRequestForRender","pageTop","viewerHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","unload","updateWaitingPopup","pageCurrentRect","firstChild","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","windowSessionStorageClear","fireDocumentUnload","unWireEvents","request_1","forEach","getScrollParent","scrollNodeX","scrollNodeY","userAgent","appVersion","scrollTo","nodeName","overflowY","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","closeCorruptPopup","beforeClose","goToPageElement","inputContainer","goToPageInput","pageNoContainer","GoToPageCancelClick","GoToPageApplyClick","closeGoToPagePopUp","NumericTextBox","format","showSpinButton","inputValue","EnableApplyButton","DisableApplyButton","getElementsByClassName","navigation","goToPage","differenceRatio","passwordInput","passwordCancel","passwordCancelClick","applyPassword","isInteraction","fitToAuto","fitToWidth","applyLeftPosition","initiatePanning","modifyTextCursor","disableTextSelectionMode","enableAnnotationAddTools","enableTextSelectionMode","onSingleTap","onDoubleTap","moreDropDown","dropDown","getSelectTextMarkupCurrentPage","magnification","onDoubleTapMagnification","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","pageCanvas","maintainSelectionOnScroll","indexInArray","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","imageData","matrix_1","image_1","Image","onload","devicePixelRatio","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","renderTextContent","linkAnnotationModule","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","rotation","addTextLayer","renderTextContents","resizeTextContents","orderPageDivElements","renderPageCanvas","nextElement","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","URL","createObjectURL","anchorElement","href","documentElement","location","padCharacter","replace","textMarkupAnnotationCollection","createBlobUrl","info","msSaveOrOpenBlob","getStoredData","xCoordinate","yCoordinate","renderPages","data_1","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","blobObj","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","byteNumbers","charCodeAt","byteArray","Uint8Array","Blob","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","isAnnotationButtonsEnabled","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","whiteSpace","setStyleToTextDiv","Bottom","setTextElementProperties","font","fontSize","fontFamily","contextWidth","measureText","scale","applyTextRotation","Rotation","resizeExcessDiv","textRotation","scaleString","transform","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","startId","endId","initId","lastId","length_1","clearDivSelection","textHeight","textLayerList","compareDocumentPosition","backward","Node","DOCUMENT_POSITION_PRECEDING","previousZoomFactor","textSearch","copyContextMenu","iconCss","Context","contextMenuOnBeforeOpen","select","onMenuItemSelect","created","contextMenuOnCreated","animationSettings","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","item","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","isTapToFitZoom","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","zoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","calculateScrollValues","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","annotationLayers","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","requestCreation","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","thumbnailViewChildrenElement","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","isUndoRedoBtnsVisible","isAnnotationEditBtnVisible","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","handleToolbarButtonClick","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","navigateToPage","enteredValue","navigationModule","textBoxFocusOut","currentPageBox","createToolbar","totalPageItem","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","AnnotationToolbar","initializeAnnotationToolbar","showNavigationToolbar","enableNavigationToolbar","navigationToolbar","navigationToolbarSplitter","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","showUndoRedoTool","showAnnotationEditTool","applyHideToToolbar","showSeparator","enableToolbarItem","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableUndoRedoTool","enableAnnotationEditTool","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","undoItem","redoItem","resetToolbar","moreOptionItem","deSelectItem","updateInteractionItems","enableAnnotation","annotationToolbarSettings","annotationToolbarItem","enableCollectionAvailable","disableUndoRedoButtons","collection","unWireEvent","fileInputElement","controlWidth","createToolbarItemsForMobile","tool","clicked","createToolbarItems","createZoomDropdown","createNumericTextBox","refreshOverflow","afterToolbarCreation","currentPageInputTemplate","createCurrentPageInputTemplate","totalPageTemplate","createTotalPageTemplate","zoomDropDownTemplateString","createZoomDropdownElement","align","itemsContainer","addClassToolbarItem","createTooltip","addPropertiesToolItemContainer","minWidth","createToolbarItem","outerHTML","ComboBox","dataSource","fields","popupHeight","showClearButton","createMoreOption","DropDownButton","dropdownButtonPosition","beforeItemRender","bookmarks","elementName","toolbarItem","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","endIndex","isHide","hideItem","printModule","print","updateInteractionTools","initiateAnnotationMode","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","interactionMode","selectItem","showSearchBox","searchInputElement","DisableInteractionTools","isTextSelect","toolbarItems","toolbarSettingsItems","toolbarBorderHeight","isHighlightEnabled","isUnderlineEnabled","isStrikethroughEnabled","isHighlightBtnVisible","isUnderlineBtnVisible","isStrikethroughBtnVisible","isColorToolVisible","isOpacityToolVisible","isDeleteAnnotationToolVisible","isCurrentAnnotationOpacitySet","primaryToolbar","onToolbarClicked","createDropDowns","applyAnnotationToolbarSettings","createMobileToolbarItems","deleteItem","colorTemplate","getTemplate","opacityTemplate","page","colorPalette","createColorPicker","colorDropDown","createDropDownButton","colorDropDownBeforeOpen","colorDropDownOpen","onColorPickerCancelClick","opacityDropDownElement","sliderContainer","createSlider","opacityDropDown","opacityDropDownBeforeOpen","opacitySlider","opacityChange","changed","opacityDropDownOpen","toggle","refresh","setProperties","updateOpacityIndicator","iconClass","dropDownButton","inputElement","colorPicker","inline","mode","enableOpacity","onColorPickerChange","showButtons","currentValue","hex","borderBottomColor","opacityIndicator","outerContainer","sliderElement","Slider","highlightItem","underlineItem","strikethroughItem","closeItem","handleHighlight","handleUnderline","handleStrikethrough","toolBarInitialStatus","adjustViewer","enablePropertiesTool","deselectAllItems","showHighlightTool","showUnderlineTool","showStrikethroughTool","showColorEditTool","showOpacityEditTool","showAnnotationDeleteTool","isAdjust","getToolbarHeight","updateViewerHeight","getElementHeight","resetViewerHeight","getHeight","updateContentContainerHeight","sideBarClientRect","isButtonsEnabled","__extends","extendStatics","d","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","AnnotationToolbarSettings","ServerActionSettings","StrikethroughSettings","UnderlineSettings","HighlightSettings","PdfViewer","options","defaultLocale","Cancel","Download file","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","Apply","GoToPage","No matches","No Text Found","Undo","Redo","Highlight","Underline","Strikethrough","Delete","Color edit","Opacity edit","Highlight context","Underline context","Strikethrough context","Server error","Open text","First text","Previous text","Next text","Last text","Zoom in text","Zoom out text","Selection text","Pan text","Print text","Search text","Annotation Edit text","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","enablePrint","enableDownload","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","annotationId","annotationType","annotationBound","annotationSettings","isColorChanged","isOpacityChanged","Event","NotifyPropertyChanges","Component","BookmarkView","bookmarkClick","bookid","Id","navigateToBookmark","nodeClick","setHeight","Number","nodeData","bookMark","bookmarksDestination","bookMarkDestination","BookmarksDestination","isBookmarkViewDiv","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","paddingRight","paddingLeft","treeObj","TreeView","child","hasChildren","nodeTemplate","nodeSelected","evt","ListView","showHeader","fullRowSelect","querySelector","closest","nextElementSibling","PageIndex","goToBookmark","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","contextMenuHeight","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","nodeElement","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","yTouch","getNodeElement","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","selectNodeContents","currentPosition","endPosition","rangeBounds","addRange","extend","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","getNodeElementFromNode","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","selectionBounds","getSelectionBounds","getRangeAt","selectionRectBounds","getSelectionRectangleBounds","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","extendSelectionStich","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","selectionBound","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","newRange","getTextId","lastIndexOf","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","calculateContextMenuPosition","contextTop","caretRangeFromPoint","onTouchElementScroll","caretPositionFromPoint","offsetNode","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","clearAllOccurrences","searchKeypressHandler","enableNextButton","enablePrevButton","updateSearchInputIcon","searchClickHandler","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","secondaryToolbar","onTextSearchClose","initSearch","highlightOthers","searchElement","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","searchText","queryLength","toLowerCase","matches","matchIndex","onMessageBoxOpen","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","targetScrollElement","getScrollElement","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","applyTextSelection","iconSpan","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printImage","responseText","annotationSource","textMarkupAnnotation","printCanvas","pageImage","annotationImage","translate","rotate","PI","printWindowOpen","browserUserAgent","write","canvasUrl"],"mappings":"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"}