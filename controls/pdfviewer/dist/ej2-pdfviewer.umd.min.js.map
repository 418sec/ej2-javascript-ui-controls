{"version":3,"file":"ej2-pdfviewer.umd.min.js","sources":["../src/pdfviewer/annotation/annotation.js","../src/pdfviewer/annotation/link-annotation.js","../src/pdfviewer/annotation/text-markup-annotation.js","../src/pdfviewer/base/navigation-pane.js","../src/pdfviewer/base/pdfviewer-base.js","../src/pdfviewer/base/text-layer.js","../src/pdfviewer/base/context-menu.js","../src/pdfviewer/base/ajax-handler.js","../src/pdfviewer/magnification/magnification.js","../src/pdfviewer/navigation/page-navigation.js","../src/pdfviewer/thumbnail-view/thumbnail-view.js","../src/pdfviewer/toolbar/toolbar.js","../src/pdfviewer/toolbar/annotation-toolbar.js","../src/pdfviewer/pdfviewer.js","../src/pdfviewer/bookmark-view/bookmark-view.js","../src/pdfviewer/text-selection/text-selection.js","../src/pdfviewer/text-search/text-search.js","../src/pdfviewer/print/print.js"],"sourcesContent":["import { TextMarkupAnnotation } from '../index';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * The `Annotation` module is used to handle annotation actions of PDF viewer.\n */\nvar Annotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Annotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.actionCollection = [];\n        /**\n         * @private\n         */\n        this.redoCollection = [];\n        /**\n         * @private\n         */\n        this.isPopupNoteVisible = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.textMarkupAnnotationModule = new TextMarkupAnnotation(this.pdfViewer, this.pdfViewerBase);\n        }\n    }\n    /**\n     * Set annotation type to be added in next user interaction in PDF Document.\n     * @param type\n     * @returns void\n     */\n    Annotation.prototype.setAnnotationMode = function (type) {\n        if (type === 'None') {\n            this.clearAnnotationMode();\n        }\n        else if (type === 'Highlight' || type === 'Strikethrough' || type === 'Underline') {\n            if (this.textMarkupAnnotationModule) {\n                this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());\n            }\n        }\n    };\n    Annotation.prototype.clearAnnotationMode = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.deleteAnnotation = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();\n            if (this.pdfViewer.toolbarModule) {\n                if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false);\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(false);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.initializeCollection = function () {\n        this.actionCollection = [];\n        this.redoCollection = [];\n        if (!this.popupNote) {\n            this.createNote();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.addAction = function (pageNumber, index, annotation, actionString, property) {\n        var action = { pageIndex: pageNumber, index: index, annotation: annotation, action: actionString, modifiedProperty: property };\n        this.actionCollection.push(action);\n        this.updateToolbar();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.undo = function () {\n        var actionObject = this.actionCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.redoCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.redo = function () {\n        var actionObject = this.redoCollection.pop();\n        if (actionObject) {\n            switch (actionObject.action) {\n                case 'Text Markup Added':\n                case 'Text Markup Deleted':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.action);\n                    }\n                    break;\n                case 'Text Markup Property modified':\n                    if (this.textMarkupAnnotationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        actionObject.annotation = this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation, actionObject.pageIndex, actionObject.index, actionObject.modifiedProperty);\n                    }\n                    break;\n            }\n            this.actionCollection.push(actionObject);\n            this.updateToolbar();\n        }\n    };\n    Annotation.prototype.updateToolbar = function () {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateUndoRedoButtons();\n        }\n    };\n    Annotation.prototype.createNote = function () {\n        // tslint:disable-next-line:max-line-length\n        this.popupNote = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note', className: 'e-pv-annotation-note', styles: 'display:none' });\n        this.popupNoteAuthor = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_author', className: 'e-pv-annotation-note-author' });\n        this.popupNote.appendChild(this.popupNoteAuthor);\n        // tslint:disable-next-line:max-line-length\n        this.popupNoteContent = createElement('div', { id: this.pdfViewer.element.id + '_annotation_note_content', className: 'e-pv-annotation-note-content' });\n        this.popupNote.appendChild(this.popupNoteContent);\n        this.pdfViewerBase.mainContainer.appendChild(this.popupNote);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showPopupNote = function (event, color, author, note, type) {\n        var mainContainerPosition = this.pdfViewerBase.mainContainer.getBoundingClientRect();\n        var popupNoteClientRect = this.popupNote.getBoundingClientRect();\n        if (author) {\n            this.popupNoteAuthor.textContent = author;\n        }\n        this.popupNoteContent.textContent = note;\n        if (type === 'Highlight') {\n            this.popupNote.style.backgroundColor = 'rgb(237, 232, 177)';\n        }\n        else if (type === 'Underline') {\n            this.popupNote.style.backgroundColor = 'rgb(187, 241, 191)';\n        }\n        else if (type === 'Strikethrough') {\n            this.popupNote.style.backgroundColor = 'rgb(242, 188, 207)';\n        }\n        this.popupNote.style.display = 'block';\n        var topPosition = (event.pageY - mainContainerPosition.top + 5);\n        var leftPosition = (event.pageX - mainContainerPosition.left + 5);\n        if (leftPosition + popupNoteClientRect.width > mainContainerPosition.width) {\n            leftPosition = leftPosition - popupNoteClientRect.width;\n        }\n        if (topPosition + popupNoteClientRect.height > mainContainerPosition.height) {\n            topPosition = topPosition - popupNoteClientRect.height;\n        }\n        this.popupNote.style.top = topPosition + 'px';\n        this.popupNote.style.left = leftPosition + 'px';\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.hidePopupNote = function () {\n        this.popupNote.style.display = 'none';\n    };\n    Annotation.prototype.createTextMarkupPopup = function () {\n        var _this = this;\n        var elementId = this.pdfViewer.element.id;\n        // tslint:disable-next-line:max-line-length\n        this.popupElement = createElement('div', { id: elementId + '_popup_annotation_note', className: 'e-pv-annotation-popup-menu', styles: 'display:none' });\n        var headerElement = createElement('div', { id: elementId + '_popup_header', className: 'e-pv-annotation-popup-header' });\n        // tslint:disable-next-line:max-line-length\n        this.authorPopupElement = createElement('div', { id: elementId + '_popup_author', className: 'e-pv-annotation-popup-author' });\n        headerElement.appendChild(this.authorPopupElement);\n        // tslint:disable-next-line:max-line-length\n        var closeBtn = createElement('span', { id: elementId + '_popup_close', className: 'e-pv-annotation-popup-close e-pv-icon' });\n        headerElement.appendChild(closeBtn);\n        this.popupElement.appendChild(headerElement);\n        // tslint:disable-next-line:max-line-length\n        this.modifiedDateElement = createElement('div', { id: elementId + '_popup_modified_time', className: 'e-pv-annotation-modified-time' });\n        this.popupElement.appendChild(this.modifiedDateElement);\n        // tslint:disable-next-line:max-line-length\n        var contentContainer = createElement('div', { id: elementId + '_popup_content_container', className: 'e-pv-annotation-popup-note-container' });\n        this.noteContentElement = createElement('div', { id: elementId + '_popup_content', className: 'e-pv-annotation-popup-content' });\n        this.noteContentElement.contentEditable = 'true';\n        contentContainer.appendChild(this.noteContentElement);\n        this.popupElement.appendChild(contentContainer);\n        this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);\n        closeBtn.addEventListener('click', this.saveClosePopupMenu.bind(this));\n        closeBtn.addEventListener('touchend', this.saveClosePopupMenu.bind(this));\n        this.popupElement.addEventListener('mousedown', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('mousemove', this.onPopupElementMove.bind(this));\n        window.addEventListener('mouseup', this.onPopupElementMoveEnd.bind(this));\n        this.popupElement.addEventListener('touchstart', this.onPopupElementMoveStart.bind(this));\n        this.popupElement.addEventListener('touchmove', this.onPopupElementMove.bind(this));\n        window.addEventListener('touchend', this.onPopupElementMoveEnd.bind(this));\n        this.noteContentElement.addEventListener('mousedown', function () { _this.noteContentElement.focus(); });\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMoveStart = function (event) {\n        if (event.type === 'touchstart') {\n            event = event.changedTouches[0];\n        }\n        if ((event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            this.isPopupMenuMoved = true;\n            var popupElementClientRect = this.popupElement.getBoundingClientRect();\n            this.clientX = event.clientX - popupElementClientRect.left;\n            // tslint:disable-next-line:max-line-length\n            this.clientY = (event.clientY - popupElementClientRect.top) + (this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top * this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    // tslint:disable-next-line\n    Annotation.prototype.onPopupElementMove = function (event) {\n        if (event.type === 'touchmove') {\n            event = event.changedTouches[0];\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.isPopupMenuMoved && (event.target.id !== (this.noteContentElement.id) || !(event.target.contains(this.noteContentElement.childNodes[0])))) {\n            var left = (event.clientX - this.clientX) + parseFloat(this.popupElement.style.left);\n            var top_1 = ((event.clientY - this.clientY) + parseFloat(this.popupElement.style.top));\n            this.clientX = event.clientX;\n            this.clientY = event.clientY;\n            var clientPosition = this.popupElement.getBoundingClientRect();\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (left > parseFloat(pageDiv.style.left) && (left + clientPosition.width) < (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                this.popupElement.style.left = (left) + 'px';\n            }\n            else {\n                this.popupElement.style.left = parseFloat(this.popupElement.style.left) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            if (top_1 > parseFloat(pageDiv.style.top) && (top_1 + clientPosition.height) < (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                this.popupElement.style.top = (top_1) + 'px';\n            }\n            else {\n                this.popupElement.style.top = parseFloat(this.popupElement.style.top) + 'px';\n            }\n        }\n    };\n    Annotation.prototype.onPopupElementMoveEnd = function () {\n        this.isPopupMenuMoved = false;\n    };\n    Annotation.prototype.saveClosePopupMenu = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber, this.noteContentElement.innerText);\n        }\n        this.closePopupMenu();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.closePopupMenu = function () {\n        if (this.popupElement) {\n            this.popupElement.parentElement.removeChild(this.popupElement);\n            this.popupElement = null;\n            this.isPopupNoteVisible = false;\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.showAnnotationPopup = function (event) {\n        if (this.textMarkupAnnotationModule) {\n            this.currentAnnotPageNumber = this.getEventPageNumber(event);\n            // tslint:disable-next-line:max-line-length\n            if (this.textMarkupAnnotationModule && (event.target !== (this.noteContentElement) || (event.target.contains(this.noteContentElement.childNodes[0])))) {\n                this.hidePopupNote();\n                if (!this.popupElement) {\n                    this.createTextMarkupPopup();\n                    this.popupElement.style.display = 'block';\n                    this.authorPopupElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;\n                    // tslint:disable-next-line:max-line-length\n                    this.modifiedDateElement.textContent = this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);\n                    this.noteContentElement.textContent = this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;\n                    var clientPosition = this.popupElement.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + this.currentAnnotPageNumber);\n                    var canvasPosition = pageDiv.getBoundingClientRect();\n                    var topPosition = ((event.clientY) - canvasPosition.top) + parseFloat(pageDiv.style.top);\n                    var leftPosition = (event.clientX);\n                    if ((leftPosition + clientPosition.width) > (parseFloat(pageDiv.style.left) + parseFloat(pageDiv.style.width))) {\n                        this.popupElement.style.left = (leftPosition - clientPosition.width) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.left = leftPosition + 'px';\n                    }\n                    if ((topPosition + clientPosition.height) > (parseFloat(pageDiv.style.top) + parseFloat(pageDiv.style.height))) {\n                        this.popupElement.style.top = (topPosition - clientPosition.height) + 'px';\n                    }\n                    else {\n                        this.popupElement.style.top = topPosition + 'px';\n                    }\n                    this.isPopupNoteVisible = true;\n                }\n            }\n        }\n    };\n    Annotation.prototype.getProperDate = function (date) {\n        var dateObject = new Date(date.toString());\n        if (isNaN(dateObject.getFullYear())) {\n            var dateString = date.slice(2, 16);\n            // tslint:disable-next-line:max-line-length\n            dateString = dateString.slice(0, 4) + '/' + dateString.slice(4, 6) + '/' + dateString.slice(6, 8) + ' ' + dateString.slice(8, 10) + ':' + dateString.slice(10, 12) + ':' + dateString.slice(12, 14);\n            dateObject = new Date(dateString);\n        }\n        // tslint:disable-next-line:max-line-length\n        return (dateObject.getMonth() + 1) + '/' + dateObject.getDate() + '/' + dateObject.getFullYear() + ' ' + dateObject.getHours() + ':' + dateObject.getMinutes() + ':' + dateObject.getSeconds();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    Annotation.prototype.getEventPageNumber = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line:max-line-length\n        var pageString = eventTarget.id.split('_text_')[1] || eventTarget.id.split('_textLayer_')[1] || eventTarget.id.split('_annotationCanvas_')[1];\n        // tslint:disable-next-line\n        return parseInt(pageString);\n    };\n    /**\n     * private\n     */\n    Annotation.prototype.clear = function () {\n        if (this.textMarkupAnnotationModule) {\n            this.textMarkupAnnotationModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.destroy = function () {\n        this.textMarkupAnnotationModule.clear();\n    };\n    /**\n     * @private\n     */\n    Annotation.prototype.getModuleName = function () {\n        return 'Annotation';\n    };\n    return Annotation;\n}());\nexport { Annotation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined && linkPage[i] > 0) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                if (scrollValue !== undefined) {\n                    aTag.name = scrollValue.toString();\n                    aTag.onclick = function () {\n                        // tslint:disable-next-line:radix\n                        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                        return false;\n                    };\n                }\n                var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n                pageDiv.appendChild(aTag);\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n            if (pageDiv) {\n                var pageChildNodes = pageDiv.childNodes;\n                for (var i = 0; i < pageChildNodes.length; i++) {\n                    var childElement = pageChildNodes[i];\n                    if (childElement.tagName === 'A') {\n                        if (isAdd) {\n                            childElement.classList.add('e-pv-onselection');\n                        }\n                        else {\n                            childElement.classList.remove('e-pv-onselection');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\n/**\n * The `TextMarkupAnnotation` module is used to handle text markup annotation actions of PDF viewer.\n * @hidden\n */\nvar TextMarkupAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextMarkupAnnotation(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.currentTextMarkupAddMode = '';\n        /**\n         * @private\n         */\n        this.selectTextMarkupCurrentPage = null;\n        /**\n         * @private\n         */\n        this.currentTextMarkupAnnotation = null;\n        this.currentAnnotationIndex = null;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.highlightColor = pdfViewer.highlightSettings.color;\n        this.underlineColor = pdfViewer.underlineSettings.color;\n        this.strikethroughColor = pdfViewer.strikethroughSettings.color;\n        this.highlightOpacity = pdfViewer.highlightSettings.opacity;\n        this.underlineOpacity = pdfViewer.underlineSettings.opacity;\n        this.strikethroughOpacity = pdfViewer.strikethroughSettings.opacity;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.createAnnotationLayer = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        // tslint:disable-next-line:max-line-length\n        var annotationCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber, className: 'e-pv-annotation-canvas' });\n        annotationCanvas.width = pageWidth;\n        annotationCanvas.height = pageHeight;\n        annotationCanvas.style.display = displayMode;\n        pageDiv.appendChild(annotationCanvas);\n        return annotationCanvas;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotationsInPage = function (textMarkupAnnotations, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        this.renderTextMarkupAnnotations(textMarkupAnnotations, pageNumber, canvas, this.pdfViewerBase.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderTextMarkupAnnotations = function (textMarkupAnnotations, pageNumber, canvas, factor) {\n        if (canvas) {\n            canvas.width = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].width, factor);\n            canvas.height = this.getMagnifiedValue(this.pdfViewerBase.pageSize[pageNumber].height, factor);\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            // tslint:disable-next-line\n            var annotations = this.getAnnotations(pageNumber, textMarkupAnnotations);\n            if (annotations) {\n                for (var i = 0; i < annotations.length; i++) {\n                    // tslint:disable-next-line\n                    var annotation = annotations[i];\n                    var annotationObject = null;\n                    if (annotation.TextMarkupAnnotationType) {\n                        // tslint:disable-next-line:max-line-length\n                        annotationObject = { textMarkupAnnotationType: annotation.TextMarkupAnnotationType, color: annotation.Color, opacity: annotation.Opacity, bounds: annotation.Bounds, author: annotation.Author, subject: annotation.Subject, modifiedDate: annotation.ModifiedDate, note: annotation.Note, rect: annotation.Rect };\n                        this.storeAnnotations(pageNumber, annotationObject);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var type = annotation.TextMarkupAnnotationType ? annotation.TextMarkupAnnotationType : annotation.textMarkupAnnotationType;\n                    // tslint:disable-next-line\n                    var annotBounds = annotation.Bounds ? annotation.Bounds : annotation.bounds;\n                    var opacity = annotation.Opacity ? annotation.Opacity : annotation.opacity;\n                    var color = annotation.Color ? annotation.Color : annotation.color;\n                    switch (type) {\n                        case 'Highlight':\n                            this.renderHighlightAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Strikethrough':\n                            this.renderStrikeoutAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                        case 'Underline':\n                            this.renderUnderlineAnnotation(annotBounds, opacity, color, context, factor);\n                            break;\n                    }\n                }\n            }\n            if (pageNumber === this.selectTextMarkupCurrentPage) {\n                this.maintainAnnotationSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.drawTextMarkupAnnotations = function (type) {\n        this.isTextMarkupAnnotationMode = true;\n        this.currentTextMarkupAddMode = type;\n        var selectionObject = this.pdfViewer.textSelectionModule.selectionRangeArray;\n        if (selectionObject.length > 0) {\n            this.convertSelectionToTextMarkup(type, selectionObject, this.pdfViewerBase.getZoomFactor());\n        }\n        if (window.getSelection().toString()) {\n            var pageBounds = this.getDrawnBounds();\n            if (pageBounds.length > 0) {\n                for (var i = 0; i < pageBounds.length; i++) {\n                    // tslint:disable-next-line:max-line-length\n                    this.drawTextMarkups(type, pageBounds[i].bounds, pageBounds[i].pageIndex, pageBounds[i].rect, this.pdfViewerBase.getZoomFactor());\n                }\n            }\n        }\n        // this.pdfViewerBase.annotationHelper.redoCollection = [];\n        this.pdfViewer.textSelectionModule.clearTextSelection();\n    };\n    TextMarkupAnnotation.prototype.convertSelectionToTextMarkup = function (type, selectionObject, factor) {\n        for (var i = 0; i < selectionObject.length; i++) {\n            this.drawTextMarkups(type, selectionObject[i].rectangleBounds, selectionObject[i].pageNumber, selectionObject[i].bound, factor);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.drawTextMarkups = function (type, bounds, pageNumber, rect, factor) {\n        var annotation = null;\n        var context = this.getPageContext(pageNumber);\n        if (context) {\n            context.setLineDash([]);\n            switch (type) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.highlightColor, this.highlightOpacity, bounds, this.pdfViewer.highlightSettings.author, this.pdfViewer.highlightSettings.subject, this.pdfViewer.highlightSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderHighlightAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.strikethroughColor, this.strikethroughOpacity, bounds, this.pdfViewer.strikethroughSettings.author, this.pdfViewer.strikethroughSettings.subject, this.pdfViewer.strikethroughSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderStrikeoutAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    annotation = this.getAddedAnnotation(type, this.underlineColor, this.underlineOpacity, bounds, this.pdfViewer.underlineSettings.author, this.pdfViewer.underlineSettings.subject, this.pdfViewer.underlineSettings.modifiedDate, '', rect, pageNumber);\n                    this.renderUnderlineAnnotation(annotation.bounds, annotation.opacity, annotation.color, context, factor);\n                    break;\n            }\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line\n            var settings = { opacity: annotation.opacity, color: annotation.color, author: annotation.author, subject: annotation.subject, modifiedDate: annotation.modifiedDate };\n            var index = this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length - 1].index;\n            this.pdfViewer.fireAnnotationAdd(pageNumber, index, type, annotation.rect, settings);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderHighlightAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = bounds[i];\n            context.beginPath();\n            var x = bound.X ? bound.X : bound.left;\n            var y = bound.Y ? bound.Y : bound.top;\n            var width = bound.Width ? bound.Width : bound.width;\n            var height = bound.Height ? bound.Height : bound.height;\n            // tslint:disable-next-line:max-line-length\n            context.rect((x * factor), (y * factor), (width * factor), (height * factor));\n            context.globalAlpha = opacity * 0.5;\n            context.closePath();\n            context.fillStyle = color;\n            context.msFillRule = 'nonzero';\n            context.fill();\n        }\n        context.save();\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderStrikeoutAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, bound.x, bound.y, bound.width, (bound.height / 2), color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.renderUnderlineAnnotation = function (bounds, opacity, color, context, factor) {\n        for (var i = 0; i < bounds.length; i++) {\n            // tslint:disable-next-line\n            var boundValues = this.getProperBounds(bounds[i]);\n            this.drawLine(opacity, boundValues.x, boundValues.y, boundValues.width, boundValues.height, color, factor, context);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getProperBounds = function (bound) {\n        var x = bound.X ? bound.X : bound.left;\n        var y = bound.Y ? bound.Y : bound.top;\n        var width = bound.Width ? bound.Width : bound.width;\n        var height = bound.Height ? bound.Height : bound.height;\n        return { x: x, y: y, width: width, height: height };\n    };\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.drawLine = function (opacity, x, y, width, height, color, factor, context) {\n        context.globalAlpha = opacity;\n        context.beginPath();\n        context.moveTo((x * factor), (y + height) * factor);\n        context.lineTo((width + x) * factor, (y + height) * factor);\n        context.lineWidth = 1;\n        context.strokeStyle = color;\n        context.closePath();\n        context.msFillRule = 'nonzero';\n        context.stroke();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.printTextMarkupAnnotations = function (textMarkupAnnotations, pageIndex) {\n        var canvas = createElement('canvas', { id: this.pdfViewer.element.id + '_print_annotation_layer_' + pageIndex });\n        // tslint:disable-next-line\n        var annotations = this.getAnnotations(pageIndex, null);\n        if (annotations) {\n            this.renderTextMarkupAnnotations(null, pageIndex, canvas, 1);\n        }\n        else {\n            this.renderTextMarkupAnnotations(textMarkupAnnotations, pageIndex, canvas, 1);\n        }\n        var imageSource = canvas.toDataURL();\n        return imageSource;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveTextMarkupAnnotations = function () {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        // tslint:disable-next-line\n        var annotations = new Array();\n        var colorpick = new ColorPicker();\n        for (var j = 0; j < this.pdfViewerBase.pageCount; j++) {\n            annotations[j] = [];\n        }\n        if (storeObject) {\n            var annotationCollection = JSON.parse(storeObject);\n            for (var i = 0; i < annotationCollection.length; i++) {\n                var newArray = [];\n                var pageAnnotationObject = annotationCollection[i];\n                if (pageAnnotationObject) {\n                    for (var z = 0; pageAnnotationObject.annotations.length > z; z++) {\n                        // tslint:disable-next-line:max-line-length\n                        pageAnnotationObject.annotations[z].bounds = JSON.stringify(this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds));\n                        var colorString = colorpick.getValue(pageAnnotationObject.annotations[z].color, 'rgba');\n                        pageAnnotationObject.annotations[z].color = JSON.stringify(this.getRgbCode(colorString));\n                        pageAnnotationObject.annotations[z].rect = JSON.stringify(pageAnnotationObject.annotations[z].rect);\n                    }\n                    newArray = pageAnnotationObject.annotations;\n                }\n                annotations[pageAnnotationObject.pageIndex] = newArray;\n            }\n        }\n        return JSON.stringify(annotations);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.deleteTextMarkupAnnotation = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n            var deletedAnnotation = null;\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    deletedAnnotation = pageAnnotations.splice(i, 1)[0];\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, deletedAnnotation, 'Text Markup Deleted', null);\n                    this.currentAnnotationIndex = i;\n                }\n            }\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.currentTextMarkupAnnotation = null;\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, deletedAnnotation.textMarkupAnnotationType);\n            this.currentAnnotationIndex = null;\n            this.selectTextMarkupCurrentPage = null;\n            if (Browser.isDevice) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyColorProperty = function (color) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Color', color, null);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            this.pdfViewerBase.isDocumentEdited = true;\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, true, false);\n            this.currentAnnotationIndex = null;\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.modifyOpacityProperty = function (args) {\n        if (this.currentTextMarkupAnnotation) {\n            var pageAnnotations = this.modifyAnnotationProperty('Opacity', args.value / 100, args.name);\n            this.manageAnnotations(pageAnnotations, this.selectTextMarkupCurrentPage);\n            this.renderTextMarkupAnnotationsInPage(null, this.selectTextMarkupCurrentPage);\n            if (args.name === 'changed') {\n                this.pdfViewerBase.isDocumentEdited = true;\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage, this.currentAnnotationIndex, this.currentTextMarkupAnnotation.textMarkupAnnotationType, false, true);\n                this.currentAnnotationIndex = null;\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.modifyAnnotationProperty = function (property, value, status) {\n        var pageAnnotations = this.getAnnotations(this.selectTextMarkupCurrentPage, null);\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                if (property === 'Color') {\n                    pageAnnotations[i].color = value;\n                }\n                else if (property === 'Opacity') {\n                    pageAnnotations[i].opacity = value;\n                }\n                var date = new Date();\n                pageAnnotations[i].modifiedDate = date.toLocaleString();\n                this.currentAnnotationIndex = i;\n                if (status === null || status === 'changed') {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage, i, this.currentTextMarkupAnnotation, 'Text Markup Property modified', property);\n                }\n                this.currentTextMarkupAnnotation = pageAnnotations[i];\n            }\n        }\n        return pageAnnotations;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.undoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.splice(index, 1);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 0, annotation);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextMarkupAnnotation.prototype.undoRedoPropertyChange = function (annotation, pageNumber, index, property) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (property === 'Color') {\n                var tempColor = pageAnnotations[index].color;\n                pageAnnotations[index].color = annotation.color;\n                annotation.color = tempColor;\n            }\n            else {\n                var tempOpacity = pageAnnotations[index].opacity;\n                pageAnnotations[index].opacity = annotation.opacity;\n                annotation.opacity = tempOpacity;\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        return annotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.redoTextMarkupAction = function (annotation, pageNumber, index, action) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            if (action === 'Text Markup Added') {\n                pageAnnotations.push(annotation);\n            }\n            else if (action === 'Text Markup Deleted') {\n                pageAnnotations.splice(index, 1);\n            }\n        }\n        this.clearCurrentAnnotation();\n        this.pdfViewerBase.isDocumentEdited = true;\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.saveNoteContent = function (pageNumber, note) {\n        var pageAnnotations = this.getAnnotations(pageNumber, null);\n        if (pageAnnotations) {\n            for (var i = 0; i < pageAnnotations.length; i++) {\n                if (JSON.stringify(this.currentTextMarkupAnnotation) === JSON.stringify(pageAnnotations[i])) {\n                    pageAnnotations[i].note = note;\n                }\n            }\n        }\n        this.manageAnnotations(pageAnnotations, pageNumber);\n        this.pdfViewerBase.isDocumentEdited = true;\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotation = function () {\n        this.selectTextMarkupCurrentPage = null;\n        this.currentTextMarkupAnnotation = null;\n        this.enableAnnotationPropertiesTool(false);\n    };\n    TextMarkupAnnotation.prototype.clearCurrentAnnotationSelection = function (pageNumber) {\n        var lowerPageIndex = (pageNumber - 2) >= 0 ? (pageNumber - 2) : 0;\n        // tslint:disable-next-line:max-line-length\n        var higherPageIndex = (pageNumber + 2) < this.pdfViewerBase.pageCount ? (pageNumber + 2) : this.pdfViewerBase.pageCount - 1;\n        for (var k = lowerPageIndex; k <= higherPageIndex; k++) {\n            this.clearAnnotationSelection(k);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getBoundsForSave = function (bounds) {\n        // tslint:disable-next-line\n        var newArray = [];\n        for (var i = 0; i < bounds.length; i++) {\n            var left = bounds[i].left ? bounds[i].left : bounds[i].Left;\n            var top_1 = bounds[i].top ? bounds[i].top : bounds[i].Top;\n            var height = bounds[i].height ? bounds[i].height : bounds[i].Height;\n            var width = bounds[i].width ? bounds[i].width : bounds[i].Width;\n            newArray.push({ left: left, top: top_1, width: width, height: height });\n        }\n        return newArray;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getRgbCode = function (colorString) {\n        var stringArray = colorString.split(',');\n        // tslint:disable-next-line:radix\n        var r = parseInt(stringArray[0].split('(')[1]);\n        // tslint:disable-next-line:radix\n        var g = parseInt(stringArray[1]);\n        // tslint:disable-next-line:radix\n        var b = parseInt(stringArray[2]);\n        return { r: r, g: g, b: b };\n    };\n    TextMarkupAnnotation.prototype.getDrawnBounds = function () {\n        var pageBounds = [];\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var range = document.createRange();\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode === selection.focusNode) {\n                var pageId = this.pdfViewerBase.textLayer.getPageIndex(selection.anchorNode);\n                if (!isNaN(pageId)) {\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + pageId).getBoundingClientRect();\n                    if (isBackWardSelection) {\n                        range.setStart(selection.focusNode, selection.focusOffset);\n                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                    }\n                    else {\n                        if (selection.anchorOffset < selection.focusOffset) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            range.setStart(selection.focusNode, selection.focusOffset);\n                            range.setEnd(selection.anchorNode, selection.anchorOffset);\n                        }\n                    }\n                    var boundingRect = range.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                    var rectangleArray = [];\n                    rectangleArray.push(rectangle);\n                    // tslint:disable-next-line\n                    var rect = { left: rectangle.left, top: rectangle.top, right: rectangle.right, bottom: rectangle.bottom };\n                    pageBounds.push({ pageIndex: pageId, bounds: rectangleArray, rect: rect });\n                }\n            }\n            else {\n                var startNode = void 0;\n                var endNode = void 0;\n                var selectionStartOffset = void 0;\n                var selectionEndOffset = void 0;\n                if (isBackWardSelection) {\n                    startNode = selection.focusNode;\n                    selectionStartOffset = selection.focusOffset;\n                    endNode = selection.anchorNode;\n                    selectionEndOffset = selection.anchorOffset;\n                }\n                else {\n                    startNode = selection.anchorNode;\n                    selectionStartOffset = selection.anchorOffset;\n                    endNode = selection.focusNode;\n                    selectionEndOffset = selection.focusOffset;\n                }\n                var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(startNode);\n                var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(startNode, anchorPageId);\n                var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(endNode);\n                var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(endNode, focusPageId);\n                var startOffset = 0;\n                var endOffset = 0;\n                var currentId = 0;\n                for (var i = anchorPageId; i <= focusPageId; i++) {\n                    var selectionRects = [];\n                    var pageStartId = void 0;\n                    var pageEndId = void 0;\n                    var pageStartOffset = void 0;\n                    var pageEndOffset = void 0;\n                    var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                    var pageRect = this.pdfViewerBase.getElement('_pageDiv_' + i).getBoundingClientRect();\n                    if (i === anchorPageId) {\n                        currentId = anchorTextId;\n                    }\n                    else {\n                        currentId = 0;\n                    }\n                    for (var j = currentId; j < textDivs.length; j++) {\n                        var textElement = textDivs[j];\n                        if (j === currentId) {\n                            pageStartId = currentId;\n                            pageStartOffset = (i === anchorPageId) ? selectionStartOffset : 0;\n                        }\n                        else {\n                            pageEndId = j;\n                            pageEndOffset = (i === focusPageId) ? selectionEndOffset : textElement.textContent.length;\n                        }\n                        if (j === anchorTextId && i === anchorPageId) {\n                            startOffset = selectionStartOffset;\n                        }\n                        else {\n                            startOffset = 0;\n                        }\n                        if (j === focusTextId && i === focusPageId) {\n                            endOffset = selectionEndOffset;\n                        }\n                        else {\n                            endOffset = textElement.textContent.length;\n                        }\n                        for (var k = 0; k < textElement.childNodes.length; k++) {\n                            var node = textElement.childNodes[k];\n                            range.setStart(node, startOffset);\n                            range.setEnd(node, endOffset);\n                        }\n                        var boundingRect = range.getBoundingClientRect();\n                        // tslint:disable-next-line:max-line-length\n                        var rectangle = { left: this.getDefaultValue(boundingRect.left - pageRect.left), top: this.getDefaultValue(boundingRect.top - pageRect.top), width: this.getDefaultValue(boundingRect.width), height: this.getDefaultValue(boundingRect.height), right: this.getDefaultValue(boundingRect.right - pageRect.left), bottom: this.getDefaultValue(boundingRect.bottom - pageRect.top) };\n                        selectionRects.push(rectangle);\n                        range.detach();\n                        if (i === focusPageId && j === focusTextId) {\n                            break;\n                        }\n                    }\n                    var startElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageStartId).childNodes[0];\n                    var endElementNode = this.pdfViewerBase.getElement('_text_' + i + '_' + pageEndId).childNodes[0];\n                    var pageRange = document.createRange();\n                    pageRange.setStart(startElementNode, pageStartOffset);\n                    pageRange.setEnd(endElementNode, pageEndOffset);\n                    var pageRectBounds = pageRange.getBoundingClientRect();\n                    // tslint:disable-next-line:max-line-length\n                    var pageRectangle = { left: this.getDefaultValue(pageRectBounds.left - pageRect.left), top: this.getDefaultValue(pageRectBounds.top - pageRect.top), width: this.getDefaultValue(pageRectBounds.width), height: this.getDefaultValue(pageRectBounds.height), right: this.getDefaultValue(pageRectBounds.right - pageRect.left), bottom: this.getDefaultValue(pageRectBounds.bottom - pageRect.top) };\n                    // tslint:disable-next-line\n                    var rect = { left: pageRectangle.left, top: pageRectangle.top, right: pageRectangle.right, bottom: pageRectangle.bottom };\n                    pageBounds.push({ pageIndex: i, bounds: selectionRects, rect: rect });\n                }\n            }\n        }\n        selection.removeAllRanges();\n        return pageBounds;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotationsPinch = function (pageNumber) {\n        var annotCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (annotCanvas) {\n            var oldAnnotCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n            if (oldAnnotCanvas) {\n                if (annotCanvas) {\n                    oldAnnotCanvas.id = annotCanvas.id;\n                    annotCanvas.parentElement.removeChild(annotCanvas);\n                }\n                else {\n                    oldAnnotCanvas.id = this.pdfViewer.element.id + '_annotationCanvas_' + pageNumber;\n                }\n                annotCanvas = oldAnnotCanvas;\n            }\n            annotCanvas.style.width = '';\n            annotCanvas.style.height = '';\n            annotCanvas.width = this.pdfViewerBase.pageSize[pageNumber].width * this.pdfViewerBase.getZoomFactor();\n            annotCanvas.height = this.pdfViewerBase.pageSize[pageNumber].height * this.pdfViewerBase.getZoomFactor();\n            this.renderTextMarkupAnnotations(null, pageNumber, annotCanvas, this.pdfViewerBase.getZoomFactor());\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.rerenderAnnotations = function (pageNumber) {\n        var oldCanvas = this.pdfViewerBase.getElement('_old_annotationCanvas_' + pageNumber);\n        if (oldCanvas) {\n            oldCanvas.parentElement.removeChild(oldCanvas);\n        }\n        var newCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (newCanvas) {\n            newCanvas.style.display = 'block';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.resizeAnnotations = function (width, height, pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            canvas.style.width = width + 'px';\n            canvas.style.height = height + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseUp = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageNumber, canvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, canvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n                if (this.pdfViewer.toolbarModule) {\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden = true;\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);\n                }\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else {\n            if (!this.pdfViewerBase.isClickedOnScrollBar(event)) {\n                this.clearCurrentAnnotation();\n                this.clearCurrentAnnotationSelection(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationTouchEnd = function (event) {\n        var pageNumber = this.pdfViewer.annotationModule.getEventPageNumber(event);\n        if (!isNullOrUndefined(pageNumber) && !isNaN(pageNumber)) {\n            this.clearCurrentAnnotationSelection(pageNumber);\n            var touchCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n            // tslint:disable-next-line:max-line-length\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.touches[0].clientX, event.touches[0].clientY, pageNumber, touchCanvas);\n            if (currentAnnot) {\n                this.selectAnnotation(currentAnnot, touchCanvas);\n                this.currentTextMarkupAnnotation = currentAnnot;\n                this.selectTextMarkupCurrentPage = pageNumber;\n                this.enableAnnotationPropertiesTool(true);\n            }\n            else {\n                this.clearCurrentAnnotation();\n            }\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n        else if (this.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n            var number = this.selectTextMarkupCurrentPage;\n            this.selectTextMarkupCurrentPage = null;\n            this.clearAnnotationSelection(number);\n        }\n        else {\n            this.clearCurrentAnnotation();\n            this.clearCurrentAnnotationSelection(pageNumber);\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseMove = function (event) {\n        var eventTarget = event.target;\n        // tslint:disable-next-line\n        var pageIndex = parseInt(eventTarget.id.split('_text_')[1]) || parseInt(eventTarget.id.split('_textLayer_')[1]) || parseInt(eventTarget.id.split('_annotationCanvas_')[1]);\n        if (pageIndex) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageIndex);\n            var currentAnnot = this.getCurrentMarkupAnnotation(event.clientX, event.clientY, pageIndex, canvas);\n            if (currentAnnot) {\n                eventTarget.style.cursor = 'pointer';\n                // this.showPopupNote(event, currentAnnot);\n            }\n            else {\n                this.pdfViewer.annotationModule.hidePopupNote();\n                if (this.pdfViewerBase.isPanMode && !this.pdfViewerBase.getAnnotationToolStatus()) {\n                    eventTarget.style.cursor = 'grab';\n                }\n                else {\n                    eventTarget.style.cursor = 'auto';\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.showPopupNote = function (event, annotation) {\n        if (annotation.note) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.showPopupNote(event, annotation.color, annotation.author, annotation.note, annotation.textMarkupAnnotationType);\n        }\n    };\n    TextMarkupAnnotation.prototype.getCurrentMarkupAnnotation = function (clientX, clientY, pageNumber, canvas) {\n        var currentTextMarkupAnnotations = [];\n        var canvasParentPosition = canvas.parentElement.getBoundingClientRect();\n        var leftClickPosition = clientX - canvasParentPosition.left;\n        var topClickPosition = clientY - canvasParentPosition.top;\n        var annotationList = this.getAnnotations(pageNumber, null);\n        var isAnnotationGot = false;\n        if (annotationList) {\n            for (var i = 0; i < annotationList.length; i++) {\n                var annotation = annotationList[i];\n                for (var j = 0; j < annotation.bounds.length; j++) {\n                    // tslint:disable-next-line\n                    var bound = annotation.bounds[j];\n                    var left = bound.left ? bound.left : bound.Left;\n                    var top_2 = bound.top ? bound.top : bound.Top;\n                    var width = bound.width ? bound.width : bound.Width;\n                    var height = bound.height ? bound.height : bound.Height;\n                    // tslint:disable-next-line:max-line-length\n                    if (leftClickPosition >= this.getMagnifiedValue(left, this.pdfViewerBase.getZoomFactor()) && leftClickPosition <= this.getMagnifiedValue(left + width, this.pdfViewerBase.getZoomFactor()) && topClickPosition >= this.getMagnifiedValue(top_2, this.pdfViewerBase.getZoomFactor()) && topClickPosition <= this.getMagnifiedValue(top_2 + height, this.pdfViewerBase.getZoomFactor())) {\n                        currentTextMarkupAnnotations.push(annotation);\n                        isAnnotationGot = true;\n                    }\n                    else {\n                        if (isAnnotationGot) {\n                            isAnnotationGot = false;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        var currentAnnot = null;\n        if (currentTextMarkupAnnotations.length > 1) {\n            currentAnnot = this.compareCurrentAnnotations(currentTextMarkupAnnotations);\n        }\n        else if (currentTextMarkupAnnotations.length === 1) {\n            currentAnnot = currentTextMarkupAnnotations[0];\n        }\n        return currentAnnot;\n    };\n    TextMarkupAnnotation.prototype.compareCurrentAnnotations = function (annotations) {\n        var previousX;\n        var currentAnnotation = null;\n        for (var i = 0; i < annotations.length; i++) {\n            if (i === annotations.length - 1) {\n                break;\n            }\n            // tslint:disable-next-line\n            var firstAnnotBounds = annotations[i].bounds;\n            var firstXposition = firstAnnotBounds[0].left ? firstAnnotBounds[0].left : firstAnnotBounds[0].Left;\n            var firstYposition = firstAnnotBounds[0].top ? firstAnnotBounds[0].top : firstAnnotBounds[0].Top;\n            // tslint:disable-next-line\n            var secondAnnotBounds = annotations[i + 1].bounds;\n            var secondXposition = secondAnnotBounds[0].left ? secondAnnotBounds[0].left : secondAnnotBounds[0].Left;\n            var secondYposition = secondAnnotBounds[0].top ? secondAnnotBounds[0].top : secondAnnotBounds[0].Top;\n            if ((firstXposition < secondXposition) || (firstYposition < secondYposition)) {\n                previousX = secondXposition;\n                currentAnnotation = annotations[i + 1];\n            }\n            else {\n                previousX = firstXposition;\n                currentAnnotation = annotations[i];\n            }\n            if (previousX && (i === (annotations.length - 2))) {\n                if ((previousX === firstXposition) && (previousX === secondXposition)) {\n                    previousX = secondXposition;\n                    currentAnnotation = annotations[i + 1];\n                }\n            }\n        }\n        return currentAnnotation;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clearAnnotationSelection = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        if (canvas) {\n            var context = canvas.getContext('2d');\n            context.setLineDash([]);\n            this.renderTextMarkupAnnotationsInPage(null, pageNumber);\n        }\n    };\n    TextMarkupAnnotation.prototype.selectAnnotation = function (annotation, canvas) {\n        for (var i = 0; i < annotation.bounds.length; i++) {\n            // tslint:disable-next-line\n            var bound = annotation.bounds[i];\n            var x = bound.left ? bound.left : bound.Left;\n            var y = bound.top ? bound.top : bound.Top;\n            var width = bound.width ? bound.width : bound.Width;\n            var height = bound.height ? bound.height : bound.Height;\n            // tslint:disable-next-line:max-line-length\n            this.drawAnnotationSelectRect(canvas, this.getMagnifiedValue(x - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(y - 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(width + 0.5, this.pdfViewerBase.getZoomFactor()), this.getMagnifiedValue(height + 0.5, this.pdfViewerBase.getZoomFactor()));\n        }\n    };\n    TextMarkupAnnotation.prototype.drawAnnotationSelectRect = function (canvas, x, y, width, height) {\n        var context = canvas.getContext('2d');\n        context.beginPath();\n        context.setLineDash([4 * this.pdfViewerBase.getZoomFactor()]);\n        context.globalAlpha = 1;\n        context.rect(x, y, width, height);\n        context.closePath();\n        context.strokeStyle = '#0000ff';\n        context.stroke();\n        context.save();\n    };\n    TextMarkupAnnotation.prototype.enableAnnotationPropertiesTool = function (isEnable) {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(isEnable);\n        }\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule && this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(isEnable);\n                var enable = isEnable;\n                if (this.isTextMarkupAnnotationMode) {\n                    enable = true;\n                }\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(enable);\n                if (this.currentTextMarkupAnnotation) {\n                    // tslint:disable-next-line:max-line-length\n                    this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, this.currentTextMarkupAnnotation.color);\n                }\n                else {\n                    if (!this.isTextMarkupAnnotationMode) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement, '#000000');\n                    }\n                    else {\n                        this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.maintainAnnotationSelection = function () {\n        if (this.currentTextMarkupAnnotation) {\n            var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + this.selectTextMarkupCurrentPage);\n            if (canvas) {\n                this.selectAnnotation(this.currentTextMarkupAnnotation, canvas);\n            }\n        }\n    };\n    TextMarkupAnnotation.prototype.storeAnnotations = function (pageNumber, annotation) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        var index = 0;\n        if (!storeObject) {\n            var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n            markupAnnotation.annotations.push(annotation);\n            index = markupAnnotation.annotations.indexOf(annotation);\n            var annotationCollection = [];\n            annotationCollection.push(markupAnnotation);\n            var annotationStringified = JSON.stringify(annotationCollection);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        else {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var pageIndex = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[pageIndex]) {\n                annotObject[pageIndex].annotations.push(annotation);\n                index = annotObject[pageIndex].annotations.indexOf(annotation);\n            }\n            else {\n                var markupAnnotation = { pageIndex: pageNumber, annotations: [] };\n                markupAnnotation.annotations.push(annotation);\n                index = markupAnnotation.annotations.indexOf(annotation);\n                annotObject.push(markupAnnotation);\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n        return index;\n    };\n    TextMarkupAnnotation.prototype.manageAnnotations = function (pageAnnotations, pageNumber) {\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n            var index = this.getPageCollection(annotObject, pageNumber);\n            if (annotObject[index]) {\n                annotObject[index].annotations = pageAnnotations;\n            }\n            var annotationStringified = JSON.stringify(annotObject);\n            window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);\n        }\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAnnotations = function (pageIndex, textMarkupAnnotations) {\n        // tslint:disable-next-line\n        var annotationCollection;\n        // tslint:disable-next-line\n        var storeObject = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n        if (storeObject) {\n            var annotObject = JSON.parse(storeObject);\n            var index = this.getPageCollection(annotObject, pageIndex);\n            if (annotObject[index]) {\n                annotationCollection = annotObject[index].annotations;\n            }\n            else {\n                annotationCollection = textMarkupAnnotations;\n            }\n        }\n        else {\n            annotationCollection = textMarkupAnnotations;\n        }\n        return annotationCollection;\n    };\n    TextMarkupAnnotation.prototype.getPageCollection = function (pageAnnotations, pageNumber) {\n        var index = null;\n        for (var i = 0; i < pageAnnotations.length; i++) {\n            if (pageAnnotations[i].pageIndex === pageNumber) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    // tslint:disable-next-line\n    TextMarkupAnnotation.prototype.getAddedAnnotation = function (type, color, opacity, bounds, author, subject, predefinedDate, note, rect, pageNumber) {\n        var date = new Date();\n        // tslint:disable-next-line:max-line-length\n        var modifiedDate = predefinedDate ? predefinedDate : date.toLocaleString();\n        // tslint:disable-next-line\n        var annotation = { textMarkupAnnotationType: type, color: color, opacity: opacity, bounds: bounds, author: author, subject: subject, modifiedDate: modifiedDate, note: note, rect: rect };\n        var storedIndex = this.storeAnnotations(pageNumber, annotation);\n        this.pdfViewer.annotationModule.addAction(pageNumber, storedIndex, annotation, 'Text Markup Added', null);\n        return annotation;\n    };\n    TextMarkupAnnotation.prototype.getPageContext = function (pageNumber) {\n        var canvas = this.pdfViewerBase.getElement('_annotationCanvas_' + pageNumber);\n        var context = null;\n        if (canvas) {\n            context = canvas.getContext('2d');\n        }\n        return context;\n    };\n    TextMarkupAnnotation.prototype.getDefaultValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    TextMarkupAnnotation.prototype.getMagnifiedValue = function (value, factor) {\n        return value * factor;\n    };\n    /**\n     * @private\n     */\n    TextMarkupAnnotation.prototype.clear = function () {\n        window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');\n    };\n    return TextMarkupAnnotation;\n}());\nexport { TextMarkupAnnotation };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { Toast } from '@syncfusion/ej2-notifications';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isTooltipCreated = false;\n        this.isThumbnail = false;\n        /**\n         * @private\n         */\n        this.isNavigationToolbarVisible = false;\n        /**\n         * @private\n         */\n        this.isBookmarkListOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        /**\n         * @private\n         */\n        this.isBookmarkOpen = false;\n        /**\n         * @private\n         */\n        this.isThumbnailOpen = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY,\n                proxy.sideBarResizer.offsetParent.clientWidth\n            ];\n            _this.previousX = event.clientX;\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            if (!_this.pdfViewerBase.getPopupNoteVisibleStatus()) {\n                event.preventDefault();\n                if (proxy.isDown && _this.sideBarContentContainer) {\n                    // prevent the sidebar from becoming too narrow, or from occupying more\n                    // than half of the available viewer width.\n                    if (_this.pdfViewer.enableRtl) {\n                        var currentWidth = _this.previousX - event.clientX;\n                        var width = currentWidth + proxy.offset[2];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.right = width + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    else {\n                        var width = event.clientX + proxy.offset[0];\n                        var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                        if (width > maxWidth) {\n                            width = maxWidth;\n                        }\n                        if (width < _this.thumbnailWidthMin) {\n                            width = _this.thumbnailWidthMin;\n                        }\n                        proxy.sideBarResizer.style.left = width + 'px';\n                        proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                        proxy.sideBarContentContainer.style.width = width + 'px';\n                        proxy.sideBarContent.style.width = width + 'px';\n                        proxy.sideBarContentSplitter.style.width = width + 'px';\n                        proxy.sideBarTitleContainer.style.width = width + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                    proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                    proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                    proxy.pdfViewerBase.updateZoomValue();\n                    if (!proxy.bookmarkButton.children[0].classList.contains('e-pv-bookmark-disable-icon')) {\n                        proxy.pdfViewer.bookmarkViewModule.setBookmarkContentHeight();\n                    }\n                }\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            _this.sideBarContent.setAttribute('aria-label', 'Thumbnail View Panel');\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        /**\n         * @private\n         */\n        this.openThumbnailPane = function () {\n            var proxy = _this;\n            var sideBarContent = document.getElementById(_this.pdfViewer.element.id + '_sideBarContent');\n            var sideBarContentContainer = document.getElementById(_this.pdfViewer.element.id + '_sideBarContentContainer');\n            var viewerContainer = document.getElementById(_this.pdfViewer.element.id + '_viewerContainer');\n            var pageContainer = document.getElementById(_this.pdfViewer.element.id + '_pageViewContainer');\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'block';\n            document.getElementById(_this.pdfViewer.element.id + '_sideBarResizer').style.display = 'none';\n            document.getElementById(_this.pdfViewer.element.id + '_sideBarTitleContainer').style.display = 'none';\n            document.getElementById(_this.pdfViewer.element.id + '_sideBarContentSplitter').style.display = 'none';\n            sideBarContent.classList.add('e-thumbnail');\n            sideBarContentContainer.classList.add('e-thumbnail');\n            if (sideBarContentContainer) {\n                if (proxy.isThumbnail) {\n                    sideBarContentContainer.style.display = 'none';\n                    viewerContainer.style.width = proxy.pdfViewer.element.clientWidth + 'px';\n                    pageContainer.style.width = viewerContainer.clientWidth + 'px';\n                    viewerContainer.style.left = sideBarContentContainer.clientWidth + 'px';\n                    proxy.pdfViewerBase.updateZoomValue();\n                    proxy.isThumbnail = false;\n                }\n                else {\n                    sideBarContent.focus();\n                    sideBarContentContainer.style.display = 'block';\n                    // tslint:disable-next-line:max-line-length\n                    viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - sideBarContentContainer.clientWidth) + 'px';\n                    pageContainer.style.width = viewerContainer.clientWidth + 'px';\n                    viewerContainer.style.left = (sideBarContentContainer.clientWidth) + 'px';\n                    proxy.pdfViewerBase.updateZoomValue();\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                    proxy.isThumbnail = true;\n                }\n            }\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.sideBarContent.setAttribute('aria-label', 'Bookmark View Panel');\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.sideBarContent.focus();\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        if (!Browser.isDevice) {\n            this.createNavigationPane();\n        }\n    };\n    NavigationPane.prototype.createNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar', attrs: { 'role': 'toolbar', 'aria-orientation': 'vertical', 'tabindex': '-1' } });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbar.style.cssFloat = 'right';\n            this.sideBarToolbar.style.right = 1 + 'px';\n            this.sideBarToolbar.style.position = 'relative';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarToolbarSplitter.classList.add('e-right');\n        }\n        else {\n            this.sideBarToolbarSplitter.classList.add('e-left');\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentContainer.classList.add('e-right');\n        }\n        else {\n            this.sideBarContentContainer.classList.add('e-left');\n        }\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContentSplitter.style.right = 0 + 'px';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content', attrs: { 'tabindex': '0' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarContent.style.right = 0 + 'px';\n            this.sideBarContent.style.direction = 'rtl';\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitleContainer.style.right = 0 + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title', attrs: { 'tabindex': '-1' } });\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarTitle.classList.add('e-right');\n        }\n        else {\n            this.sideBarTitle.classList.add('e-left');\n        }\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        if (this.pdfViewer.enableRtl) {\n            this.sideBarResizer.classList.add('e-right');\n        }\n        else {\n            this.sideBarResizer.classList.add('e-left');\n        }\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        if (!this.pdfViewer.enableRtl) {\n            this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        }\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.adjustPane = function () {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = toolbarContainer.getBoundingClientRect().height;\n        if (toolbarHeight === 0) {\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(toolbarContainer)['height']) + 1;\n        }\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar.style.top = toolbarHeight + 'px';\n        this.sideBarContentContainer.style.top = toolbarHeight + 'px';\n        splitterElement.style.top = toolbarHeight + 'px';\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createNavigationPaneMobile = function (option) {\n        var _this = this;\n        this.isNavigationToolbarVisible = true;\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_navigationToolbar', className: 'e-pv-nav-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n        var items;\n        if (option === 'search') {\n            var searchTemplate = '<div class=\"e-input-group e-pv-search-input-mobile\" id=\"' + this.pdfViewer.element.id +\n                '_search_input_container\"><input class=\"e-input\" type=\"text\" placeholder=\"' +\n                this.pdfViewer.localeObj.getConstant('Find in document') + '\" id=\"' +\n                this.pdfViewer.element.id + '_search_input\"></input></div>';\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { template: searchTemplate },\n                {\n                    prefixIcon: 'e-pv-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_search_box-icon',\n                    click: function () {\n                        var iconElement = _this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n                        if (iconElement.classList.contains('e-pv-search-close')) {\n                            _this.enableSearchItems(false);\n                        }\n                        _this.pdfViewer.textSearchModule.searchButtonClick(iconElement, _this.searchInput);\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-prev-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_prev_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchPrevious();\n                    }\n                },\n                {\n                    prefixIcon: 'e-pv-next-search-icon e-pv-icon', id: this.pdfViewer.element.id + '_next_occurrence',\n                    click: function (args) {\n                        _this.pdfViewer.textSearchModule.searchNext();\n                    }\n                }\n            ];\n        }\n        else {\n            items = [\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-backward-icon e-pv-icon', id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) },\n                { text: this.pdfViewer.localeObj.getConstant('Bookmarks') }\n            ];\n        }\n        this.toolbar = new Tool({ items: items, width: '', height: '', overflowMode: 'Popup' });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        if (option === 'search') {\n            this.initiateSearchBox();\n        }\n        else {\n            this.initiateBookmarks();\n        }\n    };\n    NavigationPane.prototype.initiateSearchBox = function () {\n        var _this = this;\n        this.searchInput = this.pdfViewerBase.getElement('_search_input');\n        this.pdfViewer.textSearchModule.searchBtn = this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;\n        this.searchInput.addEventListener('keyup', function (event) {\n            _this.enableSearchItems(true);\n            var searchString = _this.searchInput.value;\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n            }\n            else {\n                _this.pdfViewer.textSearchModule.resetVariables();\n            }\n        });\n        this.pdfViewer.textSearchModule.searchInput = this.searchInput;\n        this.setSearchInputWidth();\n        this.enableSearchItems(false);\n        this.searchInput.focus();\n    };\n    NavigationPane.prototype.enableSearchItems = function (isEnable) {\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_prev_occurrence').parentElement, isEnable);\n        this.toolbar.enableItems(this.pdfViewerBase.getElement('_next_occurrence').parentElement, isEnable);\n    };\n    NavigationPane.prototype.initiateBookmarks = function () {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = 'none';\n        }\n        // tslint:disable-next-line:max-line-length\n        var bookmarkContainer = createElement('div', { id: this.pdfViewer.element.id + '_bookmarks_container', className: 'e-pv-bookmark-container' });\n        bookmarkContainer.style.width = '100%';\n        bookmarkContainer.style.height = this.pdfViewerBase.viewerContainer.style.height;\n        this.pdfViewerBase.getElement('_viewerMainContainer').appendChild(bookmarkContainer);\n        this.pdfViewerBase.viewerContainer.style.display = 'none';\n        this.isBookmarkListOpen = true;\n        this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile();\n    };\n    NavigationPane.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        this.pdfViewer.textSearchModule.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.goBackToToolbar = function () {\n        this.isNavigationToolbarVisible = false;\n        this.pdfViewer.textSearchModule.cancelTextSearch();\n        this.searchInput = null;\n        if (this.pdfViewer.bookmarkViewModule.childNavigateCount !== 0) {\n            this.pdfViewer.bookmarkViewModule.bookmarkList.back();\n            this.pdfViewer.bookmarkViewModule.childNavigateCount--;\n        }\n        else {\n            if (this.toolbar != null) {\n                this.toolbar.destroy();\n                this.toolbar = null;\n            }\n            var bookmarkContainer = this.pdfViewerBase.getElement('_bookmarks_container');\n            if (bookmarkContainer) {\n                bookmarkContainer.parentElement.removeChild(bookmarkContainer);\n                if (Browser.isDevice) {\n                    this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n                }\n            }\n            if (this.toolbarElement && this.toolbarElement.parentElement != null) {\n                this.toolbarElement.parentElement.removeChild(this.toolbarElement);\n            }\n            this.pdfViewerBase.viewerContainer.style.display = 'block';\n            this.isBookmarkListOpen = false;\n            if (!this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled) {\n                this.pdfViewer.toolbarModule.showToolbar(true);\n                this.pdfViewerBase.onWindowResize();\n            }\n        }\n    };\n    NavigationPane.prototype.setSearchInputWidth = function () {\n        var searchInputParent = this.searchInput.parentElement;\n        var padding = window.getComputedStyle(searchInputParent.parentElement, null).getPropertyValue('padding-left');\n        // tslint:disable-next-line:max-line-length\n        var width = this.toolbarElement.clientWidth - this.getParentElementSearchBox('_backward').clientWidth\n            - this.getParentElementSearchBox('_search_box-icon').clientWidth - this.getParentElementSearchBox('_prev_occurrence').clientWidth\n            - this.getParentElementSearchBox('_next_occurrence').clientWidth - 6;\n        if (padding !== '') {\n            width = width - (parseFloat(padding) * 2);\n        }\n        searchInputParent.style.width = width + 'px';\n    };\n    NavigationPane.prototype.getParentElementSearchBox = function (idString) {\n        return this.pdfViewerBase.getElement(idString).parentElement;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.createTooltipMobile = function (text) {\n        if (!this.isTooltipCreated) { //boolean to prevent again toast creation.\n            // tslint:disable-next-line:max-line-length\n            var tooltipDiv = createElement('div', { className: 'e-pv-container-tooltip', id: this.pdfViewer.element.id + '_container_tooltip' });\n            this.pdfViewer.element.appendChild(tooltipDiv);\n            // tslint:disable-next-line:max-line-length\n            this.toastObject = new Toast({ title: text, target: this.pdfViewer.element, close: this.onTooltipClose.bind(this), position: { X: 0, Y: 0 }, animation: { hide: { duration: 200, effect: 'FadeOut' } } });\n            this.toastObject.appendTo(tooltipDiv);\n            var y = this.pdfViewer.element.clientHeight * 0.65;\n            var x = (this.pdfViewer.element.clientWidth - tooltipDiv.clientWidth) / 2;\n            this.isTooltipCreated = true;\n            this.toastObject.show({ position: { X: x, Y: y } });\n            var tooltipChild = tooltipDiv.firstElementChild;\n            if (tooltipChild) {\n                tooltipChild.style.width = 'auto';\n            }\n        }\n        else {\n            if (this.toastObject) {\n                this.toastObject.title = text;\n                var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n                var tooltipChild = tooltipElement.firstElementChild;\n                if (tooltipChild) {\n                    tooltipChild.style.width = 'auto';\n                    tooltipChild.firstElementChild.firstElementChild.textContent = text;\n                }\n            }\n        }\n    };\n    NavigationPane.prototype.onTooltipClose = function (args) {\n        this.isTooltipCreated = false;\n        var tooltipElement = this.pdfViewerBase.getElement('_container_tooltip');\n        this.pdfViewer.textSearchModule.isMessagePopupOpened = false;\n        this.toastObject.destroy();\n        tooltipElement.parentElement.removeChild(tooltipElement);\n        this.toastObject = null;\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.toolbarResize = function () {\n        if (this.searchInput) {\n            this.searchInput.style.width = 'auto';\n            this.setSearchInputWidth();\n        }\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled', 'aria-label': 'Page Thumbnails', 'tabindex': '-1' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled', 'aria-label': 'Bookmarks', 'tabindex': '-1' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        if (this.pdfViewer.enableRtl) {\n            this.closeDiv.style.left = 8 + 'px';\n        }\n        else {\n            this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        }\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        this.resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        this.setResizeIconTop();\n        this.resizeIcon.style.position = 'absolute';\n        this.resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        this.resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(this.resizeIcon);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.setResizeIconTop = function () {\n        // tslint:disable-next-line:max-line-length\n        if (this.sideBarToolbar && this.sideBarToolbar.clientHeight && this.resizeIcon.style.top === '') {\n            this.resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        }\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                proxy.pdfViewerBase.viewerContainer.style.right = (proxy.sideToolbarWidth) + 'px';\n            }\n            else {\n                proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            }\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            if (this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.right = proxy.getViewerContainerLeft() + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            if (this.pdfViewer.enableRtl) {\n                this.pdfViewerBase.viewerContainer.style.left = 1 + 'px';\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            }\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { AjaxHandler } from '../index';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.isDocumentEdited = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        /**\n         * @private\n         */\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.sessionStorage = [];\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.previousTime = 0;\n        this.currentTime = 0;\n        this.isTouchScrolled = false;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        /**\n         * @private\n         */\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        this.scrollX = 0;\n        this.scrollY = 0;\n        this.ispageMoved = false;\n        this.isThumb = false;\n        this.isTapHidden = false;\n        // tslint:disable-next-line\n        this.singleTapTimer = null;\n        this.tapCount = 0;\n        /**\n         * @private\n         */\n        this.isInitialLoaded = false;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            if (_this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.right = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                var toolbarHeight = proxy.getElement('_toolbarContainer').getBoundingClientRect().height;\n                if (proxy.isAnnotationToolbarHidden() || Browser.isDevice) {\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight);\n                }\n                else {\n                    var annotationToolbarHeight = proxy.getElement('_annotation_toolbar').getBoundingClientRect().height;\n                    // tslint:disable-next-line:max-line-length\n                    proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, toolbarHeight + annotationToolbarHeight);\n                }\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            if (proxy.pdfViewer.bookmarkViewModule && Browser.isDevice) {\n                var bookmarkContainer = proxy.getElement('_bookmarks_container');\n                if (bookmarkContainer) {\n                    bookmarkContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n                }\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule && !Browser.isDevice) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            if (!proxy.navigationPane.isBookmarkListOpen) {\n                proxy.updateZoomValue();\n            }\n            if (Browser.isDevice) {\n                proxy.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(proxy.mobileScrollerContainer.style.width)) + 'px';\n                proxy.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(proxy.mobilePageNoContainer.style.width) / 2) + 'px';\n                proxy.mobilePageNoContainer.style.top = (proxy.pdfViewer.element.clientHeight / 2) + 'px';\n                proxy.updateMobileScrollerPosition();\n            }\n            else {\n                proxy.navigationPane.setResizeIconTop();\n            }\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0 && !_this.getPopupNoteVisibleStatus()) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                // tslint:disable-next-line\n                var isIE = !!document.documentMode;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    if (!isIE) {\n                        event.preventDefault();\n                    }\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (_this.isViewerMouseDown) {\n                    if (_this.scrollHoldTimer) {\n                        clearTimeout(_this.scrollHoldTimer);\n                        _this.scrollHoldTimer = null;\n                    }\n                    if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                        _this.pageViewScrollChanged(_this.currentPageNumber);\n                    }\n                }\n                if (event.button === 0) {\n                    // 0 is for left button.\n                    var eventTarget = event.target;\n                    if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                        var idStringArray = eventTarget.id.split('_');\n                        // tslint:disable-next-line\n                        _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                    }\n                    if (_this.isTextMarkupAnnotationModule()) {\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n                _this.isViewerMouseDown = false;\n            }\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    case 90: //z key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.undo();\n                        }\n                        break;\n                    case 89: //y key\n                        if (_this.pdfViewer.annotationModule) {\n                            _this.pdfViewer.annotationModule.redo();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            else {\n                switch (event.keyCode) {\n                    case 46:\n                        if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                            _this.pdfViewer.annotationModule.deleteAnnotation();\n                        }\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled && !_this.getPopupNoteVisibleStatus()) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    if (!isIE) {\n                        event.preventDefault();\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                    }\n                    else {\n                        var selection = window.getSelection();\n                        if (!selection.type && !selection.isCollapsed && selection.anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.isTextSelection = true;\n                        }\n                    }\n                }\n                else {\n                    event.preventDefault();\n                }\n            }\n            if (_this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (_this.isViewerMouseDown) {\n                if (!isIE) {\n                    event.preventDefault();\n                }\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getCurrentTextMarkupAnnotation()) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        if (!_this.getTextMarkupAnnotationMode()) {\n                            _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                            _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                        }\n                        else if (_this.isTextMarkupAnnotationModule() && _this.getTextMarkupAnnotationMode()) {\n                            // tslint:disable-next-line:max-line-length\n                            _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                        }\n                    }\n                }\n                else if (_this.getCurrentTextMarkupAnnotation()) {\n                    // this.pdfViewer.annotationModule.showAnnotationPopup(event);\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                event.preventDefault();\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        // tslint:disable-next-line\n        this.onWindowMouseUp = function (event) {\n            if (!_this.getPopupNoteVisibleStatus()) {\n                if (event.button === 0) {\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled && !_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                        }\n                        if (_this.viewerContainer.contains(event.target)) {\n                            if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                                _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                            }\n                            else {\n                                if (window.getSelection().anchorNode !== null) {\n                                    _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                                }\n                            }\n                        }\n                    }\n                    else if (_this.getTextMarkupAnnotationMode()) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n                    }\n                }\n                else if (event.button === 2) {\n                    if (_this.viewerContainer.contains(event.target)) {\n                        window.getSelection().removeAllRanges();\n                    }\n                }\n                if (_this.isViewerMouseDown) {\n                    _this.isViewerMouseDown = false;\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.clear();\n                        _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                    }\n                    event.preventDefault();\n                    event.stopPropagation();\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                _this.preventTouchEvent(event);\n            }\n            if (event.touches.length === 1 && _this.isTextMarkupAnnotationModule() && !_this.getPopupNoteVisibleStatus()) {\n                _this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            _this.scrollY = touchPoints[0].clientY;\n            _this.previousTime = new Date().getTime();\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (Browser.isDevice && _this.pageCount > 0 && !_this.isThumb && !(event.target.classList.contains('e-pv-hyperlink'))) {\n                    _this.handleTaps(touchPoints);\n                }\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n                if (Browser.isDevice) {\n                    clearTimeout(_this.singleTapTimer);\n                    _this.tapCount = 0;\n                }\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            if (Browser.isDevice) {\n                clearTimeout(_this.singleTapTimer);\n                _this.tapCount = 0;\n            }\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.isTouchScrolled = true;\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    if (Browser.isDevice) {\n                        _this.isTouchScrolled = false;\n                        _this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n            if (Browser.isDevice && _this.isTouchScrolled) {\n                _this.currentTime = new Date().getTime();\n                var duration = _this.currentTime - _this.previousTime;\n                // tslint:disable-next-line\n                var difference = _this.scrollY - event.changedTouches[0].pageY;\n                // tslint:disable-next-line\n                var speed = (difference) / (duration);\n                if (Math.abs(speed) > 1.5) {\n                    // tslint:disable-next-line\n                    var scrollTop = (difference) + ((duration) * speed);\n                    _this.viewerContainer.scrollTop += scrollTop;\n                    _this.updateMobileScrollerPosition();\n                }\n            }\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnScroll = function (event) {\n            var proxy = _this;\n            var scrollposX = 0;\n            var scrollposY = 0;\n            if (event.touches && Browser.isDevice) {\n                // tslint:disable-next-line\n                var ratio = (_this.viewerContainer.scrollHeight - _this.viewerContainer.clientHeight) / (_this.viewerContainer.clientHeight - _this.toolbarHeight);\n                if (_this.isThumb) {\n                    _this.ispageMoved = true;\n                    _this.mobilePageNoContainer.style.display = 'block';\n                    scrollposX = event.touches[0].pageX - _this.scrollX;\n                    scrollposY = event.touches[0].pageY - _this.viewerContainer.offsetTop;\n                    _this.viewerContainer.scrollTop = scrollposY * ratio;\n                    // tslint:disable-next-line\n                    var containerValue = event.touches[0].pageY;\n                    if (_this.viewerContainer.scrollTop !== 0 && ((containerValue) <= _this.viewerContainer.clientHeight)) {\n                        _this.mobileScrollerContainer.style.top = containerValue + 'px';\n                    }\n                }\n                else if (event.touches[0].target.className !== 'e-pv-touch-ellipse') {\n                    _this.mobilePageNoContainer.style.display = 'none';\n                    scrollposY = _this.touchClientY - event.touches[0].pageY;\n                    scrollposX = _this.touchClientX - event.touches[0].pageX;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + (scrollposY);\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + (scrollposX);\n                    // tslint:disable-next-line\n                    _this.updateMobileScrollerPosition();\n                    _this.touchClientY = event.touches[0].pageY;\n                    _this.touchClientX = event.touches[0].pageX;\n                }\n            }\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            // tslint:disable-next-line:max-line-length\n            if (_this.pdfViewer.magnificationModule && _this.pdfViewer.magnificationModule.fitType === 'fitToPage' && _this.currentPageNumber > 0) {\n                _this.viewerContainer.scrollTop = _this.pageSize[_this.currentPageNumber - 1].top * _this.getZoomFactor();\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.viewerContainer.setAttribute('aria-labelledby', _this.pdfViewer.element.id + '_pageDiv_' + (_this.currentPageNumber - 1));\n                if (!Browser.isDevice) {\n                    _this.pdfViewer.toolbarModule.updateNavigationButtons();\n                }\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                    proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            if (Browser.isDevice) {\n                this.pdfViewer.element.classList.add('e-pv-mobile-view');\n            }\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container', attrs: { 'aria-label': 'pdfviewer scroll view' } });\n            if (Browser.isDevice) {\n                this.createMobilePageNumberContainer();\n            }\n            this.viewerContainer.tabIndex = 0;\n            if (this.pdfViewer.enableRtl) {\n                this.viewerContainer.style.direction = 'rtl';\n            }\n            element.style.touchAction = 'pan-x pan-y';\n            this.setMaximumHeight(element);\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = this.pdfViewer.element.clientWidth;\n            if (!Browser.isDevice) {\n                viewerWidth = viewerWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0);\n            }\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.left = (viewerWidth - parseFloat(this.mobileScrollerContainer.style.width)) + 'px';\n                this.mobilePageNoContainer.style.left = (viewerWidth / 2) - (parseFloat(this.mobilePageNoContainer.style.width) / 2) + 'px';\n                this.mobilePageNoContainer.style.top = (this.pdfViewer.element.clientHeight / 2) + 'px';\n                this.mobilePageNoContainer.style.display = 'none';\n                this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);\n                this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);\n                this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);\n                this.viewerContainer.appendChild(this.mobilePageNoContainer);\n                this.viewerMainContainer.appendChild(this.mobileScrollerContainer);\n                this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container', attrs: { 'tabindex': '0', 'aria-label': 'pdfviewer Page View' } });\n            if (this.pdfViewer.enableRtl) {\n                this.pageContainer.style.direction = 'ltr';\n            }\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            this.createPrintPopup();\n            if (Browser.isDevice) {\n                this.createGoToPagePopup();\n            }\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule && !Browser.isDevice) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n            if (this.pdfViewer.annotationModule) {\n                this.pdfViewer.annotationModule.initializeCollection();\n            }\n        }\n    };\n    PdfViewerBase.prototype.createMobilePageNumberContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.mobilePageNoContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilepagenoContainer', className: 'e-pv-mobilepagenoscroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilecurrentPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilecurrentpageContainer', className: 'e-pv-mobilecurrentpage-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobilenumberContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiledashedlineContainer', className: 'e-pv-mobiledashedline-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobiletotalPageContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobiletotalpageContainer', className: 'e-pv-mobiletotalpage-container' });\n        this.mobileScrollerContainer = createElement('div', { id: this.pdfViewer.element.id + '_mobilescrollContainer', className: 'e-pv-mobilescroll-container' });\n        // tslint:disable-next-line:max-line-length\n        this.mobileSpanContainer = createElement('span', { id: this.pdfViewer.element.id + '_mobilespanContainer', className: 'e-pv-mobilespanscroll-container' });\n        this.mobileSpanContainer.innerHTML = '1';\n        this.mobilecurrentPageContainer.innerHTML = '1';\n        this.mobilenumberContainer.innerHTML = '&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';\n        this.mobileScrollerContainer.style.cssFloat = 'right';\n        this.mobileScrollerContainer.style.width = '40px';\n        this.mobileScrollerContainer.style.height = '32px';\n        this.mobileScrollerContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.width = '120px';\n        this.mobilePageNoContainer.style.height = '100px';\n        this.mobilePageNoContainer.style.zIndex = '100';\n        this.mobilePageNoContainer.style.position = 'fixed';\n        this.mobileScrollerContainer.addEventListener('touchstart', this.mobileScrollContainerDown.bind(this));\n        this.mobileScrollerContainer.addEventListener('touchend', this.mobileScrollContainerEnd.bind(this));\n        this.mobileScrollerContainer.style.display = 'none';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        if (this.pdfViewer.interactionMode === 'Pan') {\n            this.initiatePanning();\n        }\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerDown = function (event) {\n        this.ispageMoved = false;\n        this.isThumb = true;\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage != null && Browser.isDevice) {\n                var pageNumber = this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);\n                this.pdfViewer.toolbar.showToolbar(true);\n            }\n        }\n        this.mobileScrollerContainer.addEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.setMaximumHeight = function (element) {\n        if (!Browser.isDevice) {\n            element.style.minHeight = '500px';\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.mobileScrollContainerEnd = function (event) {\n        if (!this.ispageMoved) {\n            this.goToPagePopup.show();\n        }\n        this.isThumb = false;\n        this.ispageMoved = false;\n        this.mobileScrollerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll.bind(this), true);\n        this.mobilePageNoContainer.style.display = 'none';\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var proxy = this;\n        this.loadRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.loadRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load;\n        this.loadRequestHandler.responseType = 'json';\n        this.loadRequestHandler.mode = true;\n        // tslint:disable-next-line\n        jsonObject['action'] = 'Load';\n        this.loadRequestHandler.send(jsonObject);\n        // tslint:disable-next-line\n        this.loadRequestHandler.onSuccess = function (result) {\n            // tslint:disable-next-line\n            var data = result.data;\n            if (typeof data !== 'object') {\n                data = JSON.parse(data);\n            }\n            proxy.requestSuccess(data, documentData, password);\n        };\n        // tslint:disable-next-line\n        this.loadRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // tslint:disable-next-line\n        this.loadRequestHandler.onError = function (result) {\n            proxy.openNotificationPopup();\n            proxy.showLoadingIndicator(false);\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = '';\n                this.mobileScrollerContainer.style.top = (this.toolbarHeight) + 'px';\n            }\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule && !Browser.isDevice) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        if (Browser.isDevice) {\n            this.mobileSpanContainer.innerHTML = this.currentPageNumber.toString();\n            this.mobilecurrentPageContainer.innerHTML = this.currentPageNumber.toString();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            this.promptElement.focus();\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        if (spinnerElement) {\n            spinnerElement.style.height = '48px';\n            spinnerElement.style.width = '48px';\n            spinnerElement.style.transformOrigin = '24px 24px 24px';\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.isInitialLoaded = false;\n        this.initiateTextSelectMode();\n        if (!Browser.isDevice) {\n            if (this.navigationPane.sideBarToolbar) {\n                this.navigationPane.clear();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.clear();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.initializeCollection();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(this);\n        }\n        this.windowSessionStorageClear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        if (Browser.isDevice) {\n            this.pdfViewer.element.classList.remove('e-pv-mobile-view');\n        }\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        this.contextMenuModule.destroy();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (proxy) {\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount, action: 'Unload' };\n            this.unloadRequestHandler = new AjaxHandler(this.pdfViewer);\n            this.unloadRequestHandler.url = window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload');\n            this.unloadRequestHandler.mode = false;\n            this.unloadRequestHandler.responseType = null;\n            this.unloadRequestHandler.send(jsonObject);\n            // tslint:disable-next-line\n            this.unloadRequestHandler.onFailure = function (result) {\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n            };\n            // tslint:disable-next-line\n            this.unloadRequestHandler.onError = function (result) {\n                proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.windowSessionStorageClear = function () {\n        window.sessionStorage.removeItem('currentDocument');\n        window.sessionStorage.removeItem('serviceURL');\n        window.sessionStorage.removeItem('unload');\n        this.sessionStorage.forEach(function (element) {\n            window.sessionStorage.removeItem(element);\n        });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        // tslint:disable-next-line\n        var parentNode = this.getScrollParent(this.viewerContainer);\n        var scrollNodeX = 0;\n        var scrollNodeY = 0;\n        if (parentNode !== null) {\n            scrollNodeX = parentNode.scrollLeft;\n            scrollNodeY = parentNode.scrollTop;\n        }\n        this.viewerContainer.focus();\n        if (this.currentPageNumber > 0) {\n            this.viewerContainer.setAttribute('aria-labelledby', this.pdfViewer.element.id + '_pageDiv_' + (this.currentPageNumber - 1));\n        }\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > -1 || navigator.userAgent.indexOf('Edge') !== -1 && parentNode != null) {\n            parentNode.scrollLeft = scrollNodeX;\n            parentNode.scrollTop = scrollNodeY;\n        }\n        else if (parentNode !== null) {\n            parentNode.scrollTo(scrollNodeX, scrollNodeY);\n        }\n        window.scrollTo(scrollX, scrollY);\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getScrollParent = function (node) {\n        if (node === null || node.nodeName === 'HTML') {\n            return null;\n        }\n        var style = getComputedStyle(node);\n        if (this.viewerContainer.id !== node.id && (style.overflowY === 'scroll' || style.overflowY === 'auto')) {\n            return node;\n        }\n        else {\n            return this.getScrollParent(node.parentNode);\n        }\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"templatertl\" class=\"e-pv-notification-icon-rtl\"> <div class=\"e-pv-corrupted-popup-content-rtl\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n            this.corruptPopup.enableRtl = true;\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.corruptPopup.content = '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\" tabindex=\"0\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>';\n        }\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', {\n            id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container'\n        });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', {\n            id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container'\n        });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createGoToPagePopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_goTopage_popup', className: 'e-pv-gotopage-popup' });\n        this.goToPageElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.goToPageElement.textContent = this.pdfViewer.localeObj.getConstant('Enter pagenumber');\n        popupElement.appendChild(this.goToPageElement);\n        var inputContainer = createElement('span', { className: 'e-pv-text-input' });\n        // tslint:disable-next-line:max-line-length\n        this.goToPageInput = createElement('input', { id: this.pdfViewer.element.id + '_page_input', className: 'e-input' });\n        this.goToPageInput.type = 'text';\n        this.goToPageInput.style.maxWidth = '80%';\n        this.pageNoContainer = createElement('span', { className: '.e-pv-number-ofpages' });\n        inputContainer.appendChild(this.goToPageInput);\n        inputContainer.appendChild(this.pageNoContainer);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.goToPagePopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('GoToPage'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') },\n                    click: this.GoToPageCancelClick.bind(this),\n                },\n                // tslint:disable-next-line:max-line-length\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('Apply'), disabled: true, cssClass: 'e-pv-gotopage-apply-btn', isPrimary: true },\n                    click: this.GoToPageApplyClick.bind(this),\n                },\n            ], close: this.closeGoToPagePopUp.bind(this),\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.goToPagePopup.enableRtl = true;\n        }\n        this.goToPagePopup.appendTo(popupElement);\n        var goToPageTextBox = new NumericTextBox({ format: '##', showSpinButton: false });\n        goToPageTextBox.appendTo(this.goToPageInput);\n        this.goToPageInput.addEventListener('keyup', function () {\n            // tslint:disable-next-line\n            var inputValue = _this.goToPageInput.value;\n            if (inputValue !== '' && parseFloat(inputValue) > 0 && (_this.pdfViewer.pageCount + 1) > parseFloat(inputValue)) {\n                _this.EnableApplyButton();\n            }\n            else {\n                _this.DisableApplyButton();\n            }\n        });\n    };\n    PdfViewerBase.prototype.closeGoToPagePopUp = function () {\n        this.goToPageInput.value = '';\n        this.DisableApplyButton();\n    };\n    PdfViewerBase.prototype.EnableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.removeAttribute('disabled');\n    };\n    PdfViewerBase.prototype.DisableApplyButton = function () {\n        // tslint:disable-next-line\n        var popupElements = document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];\n        popupElements.setAttribute('disabled', true);\n    };\n    PdfViewerBase.prototype.GoToPageCancelClick = function () {\n        this.goToPagePopup.hide();\n    };\n    PdfViewerBase.prototype.GoToPageApplyClick = function () {\n        this.goToPagePopup.hide();\n        // tslint:disable-next-line\n        var pageNumber = this.goToPageInput.value;\n        this.pdfViewer.navigation.goToPage(pageNumber);\n        this.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateMobileScrollerPosition = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var ratio = (this.viewerContainer.scrollHeight - this.viewerContainer.clientHeight) / (this.viewerContainer.clientHeight - 56);\n            // tslint:disable-next-line\n            var differenceRatio = (this.viewerContainer.scrollTop) / ratio;\n            this.mobileScrollerContainer.style.top = (this.toolbarHeight + differenceRatio) + 'px';\n        }\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup', attrs: { 'tabindex': '-1' } });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt', attrs: { 'tabindex': '-1' } });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false,\n            close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        if (!Browser.isDevice) {\n            this.passwordPopup.buttons = [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ];\n        }\n        else {\n            this.passwordPopup.buttons = [\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) },\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                }\n            ];\n        }\n        if (this.pdfViewer.enableRtl) {\n            this.passwordPopup.enableRtl = true;\n        }\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        var _this = this;\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        this.unload = function () { return _this.unloadDocument(_this); };\n        window.addEventListener('unload', this.unload);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        if (Browser.isDevice) {\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnScroll, true);\n        }\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unload);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n        this.enableAnnotationAddTools(false);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n        if (!Browser.isDevice) {\n            this.enableAnnotationAddTools(true);\n        }\n    };\n    PdfViewerBase.prototype.enableAnnotationAddTools = function (isEnable) {\n        if (this.pdfViewer.toolbarModule) {\n            if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);\n            }\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.handleTaps = function (touchPoints) {\n        var _this = this;\n        this.singleTapTimer = setTimeout(function () { _this.onSingleTap(touchPoints); }, 300);\n        this.tapCount++;\n        // tslint:disable-next-line\n        var timer = setTimeout(function () { _this.onDoubleTap(touchPoints); }, 200);\n        if (this.tapCount > 2) {\n            this.tapCount = 0;\n        }\n    };\n    PdfViewerBase.prototype.onSingleTap = function (touches) {\n        if (!this.isLongTouchPropagated && !this.navigationPane.isNavigationToolbarVisible) {\n            if (this.pdfViewer.toolbarModule) {\n                if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                    (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                    if (!this.isTapHidden) {\n                        this.viewerContainer.scrollTop -= this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                        if (this.pdfViewer.toolbar.moreDropDown) {\n                            var dropDown = this.getElement('_more_option-popup');\n                            if (dropDown.firstElementChild) {\n                                dropDown.classList.remove('e-popup-open');\n                                dropDown.classList.add('e-popup-close');\n                                dropDown.removeChild(dropDown.firstElementChild);\n                            }\n                        }\n                    }\n                    else {\n                        this.viewerContainer.scrollTop += this.getElement('_toolbarContainer').clientHeight * this.getZoomFactor();\n                        // tslint:disable-next-line:max-line-length\n                        this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n                    }\n                    if (this.isTapHidden && Browser.isDevice) {\n                        this.mobileScrollerContainer.style.display = '';\n                        this.updateMobileScrollerPosition();\n                    }\n                    else if (Browser.isDevice && this.getSelectTextMarkupCurrentPage() == null) {\n                        this.mobileScrollerContainer.style.display = 'none';\n                    }\n                    if (this.getSelectTextMarkupCurrentPage() == null) {\n                        this.pdfViewer.toolbarModule.showToolbar(this.isTapHidden);\n                        this.isTapHidden = !this.isTapHidden;\n                    }\n                }\n                this.tapCount = 0;\n            }\n        }\n    };\n    PdfViewerBase.prototype.onDoubleTap = function (touches) {\n        if (this.tapCount === 2) {\n            if (Browser.isDevice) {\n                this.mobileScrollerContainer.style.display = 'none';\n            }\n            this.tapCount = 0;\n            if ((this.touchClientX >= touches[0].clientX - 10) && (this.touchClientX <= touches[0].clientX + 10) &&\n                (this.touchClientY >= touches[0].clientY - 10) && (this.touchClientY <= touches[0].clientY + 10)) {\n                if (this.pdfViewer.magnification) {\n                    this.pdfViewer.magnification.onDoubleTapMagnification();\n                }\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n                this.isTapHidden = false;\n                clearTimeout(this.singleTapTimer);\n            }\n        }\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled && this.getSelectTextMarkupCurrentPage() == null) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n            if (Browser.isDevice && this.mobiletotalPageContainer) {\n                this.mobiletotalPageContainer.innerHTML = this.pageCount.toString();\n                this.pageNoContainer.innerHTML = '(1-' + this.pageCount.toString() + ')';\n            }\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true, action: 'VirtualLoad' };\n        this.virtualLoadRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.virtualLoadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load;\n        this.virtualLoadRequestHandler.responseType = 'json';\n        this.loadRequestHandler.mode = true;\n        this.virtualLoadRequestHandler.send(jsonObject);\n        // tslint:disable-next-line\n        this.virtualLoadRequestHandler.onSuccess = function (result) {\n            // tslint:disable-next-line\n            var data = result.data;\n            if (typeof data !== 'object') {\n                data = JSON.parse(data);\n            }\n            if (data) {\n                // tslint:disable-next-line\n                var pageValues = data;\n                var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                    var pageSize = pageValues.pageSizes[i].split(',');\n                    if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                        var previousPageHeight = proxy.pageSize[i - 1].height;\n                        topValue = proxy.pageGap + parseFloat(previousPageHeight) + topValue;\n                    }\n                    var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                    proxy.pageSize.push(size);\n                }\n                // tslint:disable-next-line:max-line-length\n                proxy.pageContainer.style.height = proxy.getPageTop(proxy.pageSize.length - 1) + proxy.getPageHeight(proxy.pageSize.length - 1) + 'px';\n            }\n        };\n        // tslint:disable-next-line\n        this.virtualLoadRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // tslint:disable-next-line\n        this.virtualLoadRequestHandler.onError = function (result) {\n            proxy.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                if (this.pdfViewer.enableRtl) {\n                    pageDiv.style.right = this.updateLeftPosition(pageIndex) + 'px';\n                }\n                else {\n                    pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n                }\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * window.devicePixelRatio;\n                                canvas_1.width = pageWidth_1 * window.devicePixelRatio;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.isDocumentLoaded) {\n                                _this.isInitialLoaded = true;\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.isTextMarkupAnnotationModule()) {\n                    // tslint:disable-next-line\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(data['textMarkupAnnotation'], pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        // tslint:disable-next-line\n        var rotation = data['rotation'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (!textLayer) {\n            // tslint:disable-next-line:max-line-length\n            textLayer = this.textLayer.addTextLayer(pageIndex, this.getPageWidth(pageIndex), this.getPageHeight(pageIndex), this.getElement('_pageDiv_' + pageIndex));\n        }\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds, rotation);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds, rotation);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div', attrs: { 'tabindex': '0' } });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        if (this.pdfViewer.enableRtl) {\n            pageDiv.style.right = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        else {\n            pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        }\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber, 'block');\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber, displayMode) {\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageCanvas.style.display = displayMode;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.createAnnotationLayer(pageDiv, pageWidth, pageHeight, pageNumber, displayMode);\n        }\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                if (!this.pdfViewer.enableRtl) {\n                    pageDiv.style.left = leftPosition + 'px';\n                }\n                else {\n                    pageDiv.style.right = leftPosition + 'px';\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    this.renderCountIncrement();\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        blobUrl = URL.createObjectURL(blobUrl);\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var jsonObject;\n        if (this.isTextMarkupAnnotationModule()) {\n            // tslint:disable-next-line:max-line-length\n            var textMarkupAnnotationCollection = this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();\n            jsonObject = { hashId: proxy.hashId, textMarkupAnnotations: textMarkupAnnotationCollection };\n        }\n        else {\n            jsonObject = { hashId: proxy.hashId };\n        }\n        // tslint:disable-next-line\n        jsonObject['action'] = 'Download';\n        this.dowonloadRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.dowonloadRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.download;\n        this.dowonloadRequestHandler.responseType = 'text';\n        this.dowonloadRequestHandler.send(jsonObject);\n        // tslint:disable-next-line\n        this.dowonloadRequestHandler.onSuccess = function (result) {\n            // tslint:disable-next-line\n            var data = result.data;\n            if (typeof data === 'object') {\n                data = JSON.parse(data);\n            }\n            if (data) {\n                var blobUrl = proxy.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                if (Browser.isIE || Browser.info.name === 'edge') {\n                    window.navigator.msSaveOrOpenBlob(blobUrl, proxy.pdfViewer.fileName);\n                }\n                else {\n                    proxy.downloadDocument(blobUrl);\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.dowonloadRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // tslint:disable-next-line\n        this.dowonloadRequestHandler.onError = function (result) {\n            proxy.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var proxy = this;\n        var canvas = proxy.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = proxy.getElement('_oldCanvas_' + pageIndex);\n        proxy.showPageLoadingIndicator(pageIndex, true);\n        if (proxy.getPagesZoomed()) {\n            if (proxy.isInitialLoaded) {\n                proxy.showPageLoadingIndicator(pageIndex, false);\n            }\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                if (proxy.isInitialLoaded) {\n                    proxy.showPageLoadingIndicator(pageIndex, false);\n                }\n            }\n            // tslint:disable-next-line\n            var data = proxy.getStoredData(pageIndex);\n            if (data) {\n                proxy.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    for (var y = 0; y < noTileY; y++) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this.documentId, hashId: this.hashId, zoomFactor: this.getZoomFactor(), action: 'RenderPdfPages' };\n                        this.pageRequestHandler = new AjaxHandler(this.pdfViewer);\n                        this.pageRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderPages;\n                        this.pageRequestHandler.responseType = 'json';\n                        this.pageRequestHandler.send(jsonObject);\n                        // tslint:disable-next-line                      \n                        this.pageRequestHandler.onSuccess = function (result) {\n                            // tslint:disable-next-line\n                            var data = result.data;\n                            if (typeof data !== 'object') {\n                                data = JSON.parse(data);\n                            }\n                            if (data) {\n                                if (data.image) {\n                                    proxy.storeWinData(data, pageIndex);\n                                    proxy.renderPage(data, pageIndex);\n                                }\n                            }\n                        };\n                        // tslint:disable-next-line\n                        this.pageRequestHandler.onFailure = function (result) {\n                            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n                        };\n                        // tslint:disable-next-line\n                        this.pageRequestHandler.onError = function (result) {\n                            proxy.openNotificationPopup();\n                            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n                        };\n                    }\n                }\n            }\n            proxy.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobObj = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        var blobUrl = URL.createObjectURL(blobObj);\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText'], rotation: data['rotation']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.setCustomAjaxHeaders = function (request) {\n        for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            request.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n        this.sessionStorage.push(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        // tslint:disable-next-line\n        var blob = new Blob(byteArrays, { type: contentType });\n        return blob;\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    PdfViewerBase.prototype.isAnnotationToolbarHidden = function () {\n        if (this.pdfViewer.toolbarModule.annotationToolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;\n        }\n        else {\n            return true;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getTextMarkupAnnotationMode = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;\n        }\n        else {\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getCurrentTextMarkupAnnotation = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getSelectTextMarkupCurrentPage = function () {\n        if (this.isTextMarkupAnnotationModule()) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getAnnotationToolStatus = function () {\n        if (this.pdfViewer.toolbarModule) {\n            return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPopupNoteVisibleStatus = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.isPopupNoteVisible;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.isTextMarkupAnnotationModule = function () {\n        if (this.pdfViewer.annotationModule) {\n            return this.pdfViewer.annotationModule.textMarkupAnnotationModule;\n        }\n        else {\n            return null;\n        }\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var textLayer;\n        if (!textDiv) {\n            textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n        return textLayer;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text', attrs: { 'tabindex': '0' } });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds, rotation) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                this.applyTextRotation(scale, textDiv, rotation, bounds.Rotation);\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.applyTextRotation = function (scale, textDiv, rotation, textRotation) {\n        var scaleString = 'scale(' + scale + ')';\n        if (rotation === 0) {\n            if (textRotation === 0) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 1) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(90deg) ' + scaleString;\n            }\n            else if (textRotation === -90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 2) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(180deg) ' + scaleString;\n            }\n            else if (textRotation === 180) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n        else if (rotation === 3) {\n            if (textRotation === 0) {\n                textDiv.style.transform = 'rotate(-90deg) ' + scaleString;\n            }\n            else if (textRotation === 90) {\n                textDiv.style.transform = scaleString;\n            }\n            else {\n                textDiv.style.transform = 'rotate(' + textRotation + 'deg) ' + scaleString;\n            }\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        // tslint:disable-next-line\n        var rotation;\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n            // tslint:disable-next-line\n            rotation = data['rotation'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds, rotation);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds, rotation);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getPageIndex = function (element) {\n        var pageId;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(element.id.split('_text_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            pageId = parseInt(parentElement.id.split('_text_')[1]);\n        }\n        return pageId;\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextIndex = function (element, pageIndex) {\n        var textIndex;\n        // tslint:disable-next-line\n        var parentElement = element.parentElement;\n        if (!parentElement) {\n            parentElement = element.parentNode;\n        }\n        if (parentElement.className === 'e-pv-text-layer') {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(element.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        else {\n            // tslint:disable-next-line:radix\n            textIndex = parseInt(parentElement.id.split('_text_' + pageIndex + '_')[1]);\n        }\n        return textIndex;\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\" tabindex = \"0\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n                if (_this.pdfViewer.textSearchModule) {\n                    _this.pdfViewer.textSearch.isMessagePopupOpened = false;\n                }\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.notifyDialog.enableRtl = true;\n        }\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy'), iconCss: 'e-pv-copy-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Highlight context'), iconCss: 'e-pv-highlight-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Underline context'), iconCss: 'e-pv-underline-icon' },\n            { text: this.pdfViewer.localeObj.getConstant('Strikethrough context'), iconCss: 'e-pv-strikethrough-icon' }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            created: this.contextMenuOnCreated.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.contextMenuObj.enableRtl = true;\n        }\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnCreated = function (args) {\n        // tslint:disable-next-line:max-line-length\n        var items = [this.pdfViewer.localeObj.getConstant('Highlight context'), this.pdfViewer.localeObj.getConstant('Underline context'),\n            this.pdfViewer.localeObj.getConstant('Strikethrough context')];\n        if (this.pdfViewer.annotationModule) {\n            if (!this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n                this.contextMenuObj.enableItems(items, false);\n            }\n        }\n        else {\n            this.contextMenuObj.enableItems(items, false);\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    // tslint:disable-next-line:max-line-length\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if ((Browser.isIE || Browser.info.name === 'edge') && args.event.target.classList.contains('e-pv-page-container')) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            var currentBound = bounds;\n            if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                isWithin = true;\n            }\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && bounds) {\n            isWithin = true;\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case this.pdfViewer.localeObj.getConstant('Copy'):\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Highlight context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Underline context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            case this.pdfViewer.localeObj.getConstant('Strikethrough context'):\n                if (this.pdfViewer.annotation.textMarkupAnnotationModule) {\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n                    this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    ContextMenu.prototype.destroy = function () {\n        this.contextMenuObj.destroy();\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","/**\n * @private\n */\nvar AjaxHandler = /** @class */ (function () {\n    /**\n     * Constructor for Ajax class\n     * @param  {PdfViewer} pdfviewer\n     * @returns defaultType\n     */\n    function AjaxHandler(pdfviewer) {\n        /**\n         * Specifies the URL to which request to be sent.\n         * @default 'POST'\n         */\n        this.type = 'POST';\n        /**\n         * A boolean value indicating whether the request should be sent asynchronous or not.\n         * @default true\n         */\n        this.mode = true;\n        /**\n         * Specifies the ContentType to which request to be sent\n         * @default null\n         */\n        this.contentType = 'application/json;charset=UTF-8';\n        this.pdfViewer = pdfviewer;\n    }\n    /**\n     * Send the request to server\n     * @param  {object} jsonObj - To send to service\n     */\n    AjaxHandler.prototype.send = function (jsonObj) {\n        var _this = this;\n        this.httpRequest = new XMLHttpRequest();\n        if (!this.mode) {\n            setTimeout(function () { _this.sendRequest(jsonObj); });\n        }\n        else {\n            this.sendRequest(jsonObj);\n        }\n        this.httpRequest.onreadystatechange = function () { _this.stateChange(_this); };\n        this.httpRequest.onerror = function () { _this.error(_this); };\n    };\n    AjaxHandler.prototype.sendRequest = function (jsonObj) {\n        this.httpRequest.open(this.type, this.url, this.mode);\n        this.httpRequest.setRequestHeader('Content-Type', this.contentType);\n        this.setCustomAjaxHeaders();\n        if (this.responseType !== null) {\n            this.httpRequest.responseType = this.responseType;\n        }\n        this.httpRequest.send(JSON.stringify(jsonObj)); // jshint ignore:line\n    };\n    AjaxHandler.prototype.stateChange = function (proxy) {\n        if (proxy.httpRequest.readyState === 4 && proxy.httpRequest.status === 200) {\n            // tslint:disable-next-line\n            var data = void 0;\n            if (this.responseType !== null) {\n                data = proxy.httpRequest.response;\n            }\n            else {\n                data = proxy.httpRequest.responseText;\n            }\n            // tslint:disable-next-line\n            var result = {\n                name: 'onSuccess',\n                data: data,\n                readyState: proxy.httpRequest.readyState,\n                status: proxy.httpRequest.status\n            };\n            proxy.successHandler(result);\n        }\n        else if (proxy.httpRequest.readyState === 4 && proxy.httpRequest.status === 400) { // jshint ignore:line)\n            // tslint:disable-next-line\n            var result = {\n                name: 'onFailure',\n                status: proxy.httpRequest.status,\n                statusText: proxy.httpRequest.statusText\n            };\n            proxy.failureHandler(result);\n        }\n    };\n    AjaxHandler.prototype.error = function (proxy) {\n        // tslint:disable-next-line\n        var result = {\n            name: 'onError',\n            status: this.httpRequest.status,\n            statusText: this.httpRequest.statusText\n        };\n        proxy.errorHandler(result);\n    };\n    // tslint:disable-next-line\n    AjaxHandler.prototype.successHandler = function (response) {\n        if (this.onSuccess) {\n            this.onSuccess(response);\n        }\n        return response;\n    };\n    // tslint:disable-next-line\n    AjaxHandler.prototype.failureHandler = function (response) {\n        if (this.onFailure) {\n            this.onFailure(response);\n        }\n        return response;\n    };\n    // tslint:disable-next-line\n    AjaxHandler.prototype.errorHandler = function (response) {\n        if (this.onError) {\n            this.onError(response);\n        }\n        return response;\n    };\n    AjaxHandler.prototype.setCustomAjaxHeaders = function () {\n        for (var i = 0; i < this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            this.httpRequest.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName, this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);\n        }\n    };\n    return AjaxHandler;\n}());\nexport { AjaxHandler };\n","import { Browser } from '@syncfusion/ej2-base';\n/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        this.isTapToFitZoom = false;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            // tslint:disable-next-line:radix\n            return parseInt((scaleX * 100).toString());\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            // tslint:disable-next-line:radix\n            return parseInt(((viewerHeight / highestHeight) * 100).toString());\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        if (this.pdfViewer.annotationModule) {\n            this.pdfViewer.annotationModule.closePopupMenu();\n        }\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        }\n        else {\n            this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        }\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    if (Browser.isDevice) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewerBase.mobilePageNoContainer.style.left = (this.pdfViewer.element.clientWidth / 2) - (parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width) / 2) + 'px';\n                    }\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n        if (Browser.isDevice && this.isPinchZoomed) {\n            // tslint:disable-next-line:radix\n            var zoomPercentage = parseInt((this.zoomFactor * 100).toString()) + '%';\n            this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        if (this.pdfViewerBase.isInitialLoaded) {\n            this.renderInSeparateThread(this.reRenderPageNumber);\n            this.isPagesZoomed = false;\n        }\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            this.calculateScrollValues(scrollValue);\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.calculateScrollValues = function (scrollValue) {\n        var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n        if (currentPageCanvas) {\n            var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n            // update scroll top for the viewer container based on pinch zoom factor\n            var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n            var previousY = scrollValue + this.touchCenterY;\n            // tslint:disable-next-line:max-line-length\n            var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                // tslint:disable-next-line:max-line-length\n                previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n            this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n            // update scroll left for the viewer container based on pinch zoom factor\n            var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n            var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n            var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n            this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n        }\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                var annotationLayers = document.querySelectorAll('canvas[id*=\"_annotationCanvas_\"]');\n                for (var j = 0; j < annotationLayers.length; j++) {\n                    var pageNumber = annotationLayers[j].id.split('_annotationCanvas_')[1];\n                    // tslint:disable-next-line:radix\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                    var annotationCanvas = this.pdfViewerBase.getElement('_annotationCanvas_' + i);\n                    annotationCanvas.id = this.pdfViewer.element.id + '_old_annotationCanvas_' + i;\n                }\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i, 'none');\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        if (this.pdfViewer.enableRtl) {\n                            pageDiv.style.right = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        else {\n                            pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        }\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                            if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                                this.pdfViewer.annotationModule.textMarkupAnnotationModule.resizeAnnotations(width, height, i);\n                            }\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            this.isMagnified = false;\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.onDoubleTapMagnification = function () {\n        this.pdfViewer.toolbarModule.showToolbar(false);\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (!this.isTapToFitZoom) {\n            if (this.zoomFactor < 2) {\n                this.zoomTo(200);\n            }\n            else {\n                this.fitToWidth();\n            }\n        }\n        else {\n            this.zoomTo(this.previousZoomFactor * 100);\n        }\n        this.calculateScrollValues(scrollValue);\n        this.isTapToFitZoom = !this.isTapToFitZoom;\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber - Defines the page number to navigate\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { AjaxHandler } from '../index';\nimport { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @public\n     */\n    ThumbnailView.prototype.openThumbnailPane = function () {\n        this.pdfViewerBase.navigationPane.openThumbnailPane();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (!isIE) {\n            // tslint:disable-next-line\n            return new Promise(\n            // tslint:disable-next-line\n            function (renderThumbnailImage, reject) {\n                proxy.requestCreation(proxy);\n            });\n        }\n        else {\n            this.requestCreation(proxy);\n            return null;\n        }\n    };\n    ThumbnailView.prototype.requestCreation = function (proxy) {\n        if (!proxy.isThumbnailCompleted) {\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n            if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                proxy.isThumbnailCompleted = false;\n                proxy.startIndex = 0;\n            }\n        }\n        else {\n            proxy.startIndex = proxy.thumbnailLimit;\n            // tslint:disable-next-line:max-line-length\n            proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n        }\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId, action: 'RenderThumbnailImages' };\n        this.thumbnailRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.thumbnailRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail;\n        this.thumbnailRequestHandler.responseType = 'json';\n        this.thumbnailRequestHandler.send(jsonObject);\n        // tslint:disable-next-line\n        this.thumbnailRequestHandler.onSuccess = function (result) {\n            // tslint:disable-next-line    \n            var data = result.data;\n            if (typeof data !== 'object') {\n                data = JSON.parse(data);\n            }\n            proxy.renderThumbnailImage(data);\n            if (!proxy.isThumbnailCompleted) {\n                proxy.startIndex = proxy.thumbnailLimit;\n                proxy.isThumbnailCompleted = true;\n            }\n        };\n        // tslint:disable-next-line\n        this.thumbnailRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // tslint:disable-next-line\n        this.thumbnailRequestHandler.onError = function (result) {\n            proxy.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (!this.isThumbnailClicked) {\n                    if (this.previousElement) {\n                        this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                        this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                        this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                        this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                    }\n                    this.setFocusStyle(thumbnailDiv, pageNumber);\n                }\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                // tslint:disable-next-line:max-line-length\n                var pageLink = createElement('a', { id: 'page_' + i, attrs: { 'aria-label': 'Thumbnail of Page' + (i + 1), 'tabindex': '-1', 'role': 'link' } });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            // tslint:disable-next-line\n            var isIE = !!document.documentMode;\n            if (!isIE) {\n                Promise.all([this.createRequestForThumbnails()]);\n            }\n            else {\n                this.createRequestForThumbnails();\n            }\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n        else {\n            this.isThumbnailClicked = false;\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n                thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n                thumbnailElement.classList.add('e-pv-thumbnail-focus');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane) {\n            if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n                this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n            }\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.resetThumbnailView();\n        }\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { AnnotationToolbar } from '../index';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.isUndoRedoBtnsVisible = true;\n        this.isAnnotationEditBtnVisible = true;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                    args.cancel = true;\n                }\n                else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                    var tooltipData = args.originalEvent.target.parentElement.dataset;\n                    if (tooltipData && tooltipData.tooltipId) {\n                        var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                        if (tooltipElement) {\n                            tooltipElement.style.display = 'none';\n                        }\n                    }\n                }\n            }\n            _this.handleToolbarButtonClick(args);\n            // tslint:disable-next-line:max-line-length\n            if (!Browser.isDevice) {\n                if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                    args.originalEvent.target.blur();\n                    _this.pdfViewerBase.focusViewerContainer();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        // tslint:disable-next-line\n        var isIE = !!document.documentMode;\n        if (isIE) {\n            this.totalPageItem.classList.add('e-pv-total-page-ms');\n        }\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        if (!Browser.isDevice) {\n            this.applyToolbarSettings();\n            this.initialEnableItems();\n            this.pdfViewerBase.navigationPane.adjustPane();\n        }\n        if (this.pdfViewer.annotationModule) {\n            this.annotationToolbarModule = new AnnotationToolbar(this.pdfViewer, this.pdfViewerBase, this);\n            if (!Browser.isDevice) {\n                this.annotationToolbarModule.initializeAnnotationToolbar();\n            }\n        }\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar - If set true , its show the Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n            if (Browser.isDevice) {\n                this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();\n            }\n        }\n        else {\n            toolbar.style.display = 'none';\n        }\n    };\n    /**\n     * Shows/hides the Navigation toolbar in the PdfViewer\n     * @param  {boolean} enableNavigationToolbar - If set true , its show the Navigation Toolbar\n     * @returns void\n     */\n    Toolbar.prototype.showNavigationToolbar = function (enableNavigationToolbar) {\n        if (!Browser.isDevice) {\n            var navigationToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n            var navigationToolbarSplitter = this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;\n            if (enableNavigationToolbar) {\n                navigationToolbar.style.display = 'block';\n                navigationToolbarSplitter.style.display = 'block';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.clear();\n                }\n            }\n            else {\n                navigationToolbar.style.display = 'none';\n                navigationToolbarSplitter.style.display = 'none';\n                if (this.pdfViewerBase.navigationPane.isBookmarkOpen || this.pdfViewerBase.navigationPane.isThumbnailOpen) {\n                    this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n                }\n            }\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isVisible - If set true, then its show the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n                case 'UndoRedoTool':\n                    this.showUndoRedoTool(isVisible);\n                    break;\n                case 'AnnotationEditTool':\n                    this.showAnnotationEditTool(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.applyHideToToolbar(true, 15, 15);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items - Defines the toolbar items in the toolbar\n     * @param  {boolean} isEnable - If set true, then its Enable the toolbar Items\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n                case 'UndoRedoTool':\n                    this.enableUndoRedoTool(isEnable);\n                    break;\n                case 'AnnotationEditTool':\n                    this.enableAnnotationEditTool(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 21, 21);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 20, 20);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 18, 18);\n    };\n    Toolbar.prototype.showUndoRedoTool = function (isEnable) {\n        this.isUndoRedoBtnsVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 16, 17);\n    };\n    Toolbar.prototype.showAnnotationEditTool = function (isEnable) {\n        this.isAnnotationEditBtnVisible = isEnable;\n        this.applyHideToToolbar(isEnable, 19, 19);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem.parentElement, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem.parentElement, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem.parentElement, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem.parentElement, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem.parentElement, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem.parentElement, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem.parentElement, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem.parentElement, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem.parentElement, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem.parentElement, enableSearchOption);\n    };\n    Toolbar.prototype.enableUndoRedoTool = function (isEnable) {\n        this.toolbar.enableItems(this.undoItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.redoItem.parentElement, isEnable);\n    };\n    Toolbar.prototype.enableAnnotationEditTool = function (isEnable) {\n        this.toolbar.enableItems(this.annotationItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        if (!Browser.isDevice) {\n            this.currentPageBox.min = 0;\n            this.currentPageBox.value = 0;\n            this.updateTotalPage();\n            this.updateToolbarItems();\n            if (this.annotationToolbarModule) {\n                this.annotationToolbarModule.clear();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, false);\n                this.toolbar.enableItems(this.printItem.parentElement, false);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = true;\n                }\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), false);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), false);\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n                this.toolbar.enableItems(this.annotationItem.parentElement, false);\n                this.toolbar.enableItems(this.panItem.parentElement, false);\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.deSelectItem(this.annotationItem);\n                if (this.annotationToolbarModule) {\n                    this.annotationToolbarModule.resetToolbar();\n                }\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.downloadItem.parentElement, true);\n                this.toolbar.enableItems(this.printItem.parentElement, true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'), true);\n                this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'), true);\n                this.updateUndoRedoButtons();\n                this.updateNavigationButtons();\n                this.updateZoomButtons();\n                if (this.pdfViewer.magnificationModule) {\n                    this.zoomDropDown.readonly = false;\n                }\n                this.updateInteractionItems();\n                // modify this condition if new annotation types are added.\n                if (this.pdfViewer.annotationModule && this.pdfViewer.enableAnnotation) {\n                    this.toolbar.enableItems(this.annotationItem.parentElement, true);\n                }\n                if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                    this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                }\n            }\n            if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.length === 0 || !this.pdfViewer.annotationModule) {\n                this.enableToolbarItem(['AnnotationEditTool'], false);\n            }\n        }\n        else {\n            if (this.pdfViewerBase.pageCount === 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, false);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.textSearchItem.parentElement, true);\n                this.toolbar.enableItems(this.moreOptionItem.parentElement, true);\n                this.updateUndoRedoButtons();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem.parentElement, true);\n                this.toolbar.enableItems(this.previousPageItem.parentElement, true);\n                this.toolbar.enableItems(this.nextPageItem.parentElement, true);\n                this.toolbar.enableItems(this.lastPageItem.parentElement, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem.parentElement, false);\n            this.toolbar.enableItems(this.previousPageItem.parentElement, false);\n            this.toolbar.enableItems(this.nextPageItem.parentElement, false);\n            this.toolbar.enableItems(this.lastPageItem.parentElement, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled && !Browser.isDevice) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, false);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem.parentElement, true);\n                this.toolbar.enableItems(this.zoomOutItem.parentElement, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateUndoRedoButtons = function () {\n        if (this.pdfViewer.annotationModule) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection, this.undoItem.parentElement);\n                this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection, this.redoItem.parentElement);\n            }\n            else {\n                this.disableUndoRedoButtons();\n            }\n        }\n        else {\n            this.disableUndoRedoButtons();\n        }\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.enableCollectionAvailable = function (collection, item) {\n        if (collection.length > 0) {\n            this.toolbar.enableItems(item, true);\n        }\n        else {\n            this.toolbar.enableItems(item, false);\n        }\n    };\n    Toolbar.prototype.disableUndoRedoButtons = function () {\n        this.toolbar.enableItems(this.undoItem.parentElement, false);\n        this.toolbar.enableItems(this.redoItem.parentElement, false);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        if (this.moreDropDown) {\n            this.moreDropDown.destroy();\n        }\n        if (this.annotationToolbarModule) {\n            this.annotationToolbarModule.destroy();\n        }\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (!Browser.isDevice) {\n            if (this.currentPageBox.value === pageIndex) {\n                this.currentPageBoxElement.value = pageIndex.toString();\n            }\n            this.currentPageBox.value = pageIndex;\n        }\n        else {\n            this.pdfViewerBase.mobileSpanContainer.innerHTML = pageIndex.toString();\n            this.pdfViewerBase.mobilecurrentPageContainer.innerHTML = pageIndex.toString();\n        }\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewerBase.pageCount > 0) {\n                this.currentPageBox.min = 1;\n            }\n            this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        if (!Browser.isDevice) {\n            this.toolbar = new tool({\n                clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup',\n                items: this.createToolbarItems(), created: function () {\n                    _this.createZoomDropdown();\n                    _this.createNumericTextBox();\n                    _this.toolbar.refreshOverflow();\n                }\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.toolbar.appendTo(this.toolbarElement);\n            this.afterToolbarCreation();\n            this.updateTotalPage();\n            this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        }\n        else {\n            this.createToolbarItemsForMobile();\n            if (this.pdfViewer.enableRtl) {\n                this.toolbar.enableRtl = true;\n            }\n            this.disableUndoRedoButtons();\n        }\n        return this.toolbarElement;\n    };\n    // tslint:disable-next-line\n    Toolbar.prototype.createToolbarItems = function () {\n        var currentPageInputTemplate = this.createCurrentPageInputTemplate();\n        var totalPageTemplate = this.createTotalPageTemplate();\n        var zoomDropDownTemplateString = this.createZoomDropdownElement();\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-open-document-icon e-pv-icon', cssClass: 'e-pv-open-document-container', id: this.pdfViewer.element.id + '_open', text: this.pdfViewer.localeObj.getConstant('Open text'), align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-last-page-navigation-icon e-pv-icon', cssClass: 'e-pv-last-page-navigation-container', id: this.pdfViewer.element.id + '_firstPage', text: this.pdfViewer.localeObj.getConstant('First text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-next-page-navigation-icon e-pv-icon', cssClass: 'e-pv-next-page-navigation-container', id: this.pdfViewer.element.id + '_previousPage', text: this.pdfViewer.localeObj.getConstant('Previous text'), align: 'Left' });\n            // tslint:disable-next-line:max-line-length\n            items.push({ prefixIcon: 'e-pv-previous-page-navigation-icon e-pv-icon', cssClass: 'e-pv-previous-page-navigation-container', id: this.pdfViewer.element.id + '_nextPage', text: this.pdfViewer.localeObj.getConstant('Next text'), align: 'Left' });\n            items.push({ prefixIcon: 'e-pv-first-page-navigation-icon e-pv-icon', cssClass: 'e-pv-first-page-navigation-container', id: this.pdfViewer.element.id + '_lastPage', text: this.pdfViewer.localeObj.getConstant('Last text'), align: 'Left' });\n            items.push({ template: totalPageTemplate, align: 'Left' });\n            items.push({ template: currentPageInputTemplate, align: 'Left' });\n        }\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-zoom-out-icon e-pv-icon', cssClass: 'e-pv-zoom-out-container', id: this.pdfViewer.element.id + '_zoomOut', text: this.pdfViewer.localeObj.getConstant('Zoom out text'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-zoom-in-icon e-pv-icon', cssClass: 'e-pv-zoom-in-container', id: this.pdfViewer.element.id + '_zoomIn', text: this.pdfViewer.localeObj.getConstant('Zoom in text'), align: 'Left' });\n        items.push({ template: zoomDropDownTemplateString, cssClass: 'e-pv-zoom-drop-down-container', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-select-tool-icon e-pv-icon', cssClass: 'e-pv-text-select-tool-container', id: this.pdfViewer.element.id + '_selectTool', text: this.pdfViewer.localeObj.getConstant('Selection text') });\n        items.push({ prefixIcon: 'e-pv-pan-tool-icon e-pv-icon', cssClass: 'e-pv-pan-tool-container', id: this.pdfViewer.element.id + '_handTool', text: this.pdfViewer.localeObj.getConstant('Pan text') });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-undo-icon e-pv-icon', cssClass: 'e-pv-undo-container', id: this.pdfViewer.element.id + '_undo', text: this.pdfViewer.localeObj.getConstant('Undo'), align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-redo-icon e-pv-icon', cssClass: 'e-pv-redo-container', id: this.pdfViewer.element.id + '_redo', text: this.pdfViewer.localeObj.getConstant('Redo'), align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-text-search-icon e-pv-icon', cssClass: 'e-pv-text-search-container', id: this.pdfViewer.element.id + '_search', text: this.pdfViewer.localeObj.getConstant('Search text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-annotation-icon e-pv-icon', cssClass: 'e-pv-annotation-container', id: this.pdfViewer.element.id + '_annotation', text: this.pdfViewer.localeObj.getConstant('Annotation Edit text'), align: 'Right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-print-document-icon e-pv-icon', cssClass: 'e-pv-print-document-container', id: this.pdfViewer.element.id + '_print', text: this.pdfViewer.localeObj.getConstant('Print text'), align: 'Right' });\n        items.push({ prefixIcon: 'e-pv-download-document-icon e-pv-icon', cssClass: 'e-pv-download-document-container', id: this.pdfViewer.element.id + '_download', text: this.pdfViewer.localeObj.getConstant('Download'), align: 'Right' });\n        return items;\n    };\n    Toolbar.prototype.afterToolbarCreation = function () {\n        this.itemsContainer = this.toolbar.element.childNodes[0];\n        this.itemsContainer.id = this.pdfViewer.element.id + '_toolbarItemsContainer';\n        this.openDocumentItem = this.addClassToolbarItem('_open', 'e-pv-open-document', this.pdfViewer.localeObj.getConstant('Open'));\n        this.undoItem = this.addClassToolbarItem('_undo', 'e-pv-undo', this.pdfViewer.localeObj.getConstant('Undo'));\n        this.redoItem = this.addClassToolbarItem('_redo', 'e-pv-redo', this.pdfViewer.localeObj.getConstant('Redo'));\n        if (!this.pdfViewer.enableRtl) {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.firstPageItem = this.addClassToolbarItem('_firstPage', 'e-pv-last-page-navigation', this.pdfViewer.localeObj.getConstant('Go To First Page'));\n            this.previousPageItem = this.addClassToolbarItem('_previousPage', 'e-pv-next-page-navigation', this.pdfViewer.localeObj.getConstant('Previous Page'));\n            // tslint:disable-next-line:max-line-length\n            this.nextPageItem = this.addClassToolbarItem('_nextPage', 'e-pv-previous-page-navigation', this.pdfViewer.localeObj.getConstant('Next Page'));\n            this.lastPageItem = this.addClassToolbarItem('_lastPage', 'e-pv-first-page-navigation', this.pdfViewer.localeObj.getConstant('Go To Last Page'));\n        }\n        this.zoomOutItem = this.addClassToolbarItem('_zoomOut', 'e-pv-zoom-out', this.pdfViewer.localeObj.getConstant('Zoom Out'));\n        this.zoomInItem = this.addClassToolbarItem('_zoomIn', 'e-pv-zoom-in', this.pdfViewer.localeObj.getConstant('Zoom In'));\n        // tslint:disable-next-line:max-line-length\n        this.textSelectItem = this.addClassToolbarItem('_selectTool', 'e-pv-text-select-tool', this.pdfViewer.localeObj.getConstant('Text Selection'));\n        this.panItem = this.addClassToolbarItem('_handTool', 'e-pv-pan-tool', this.pdfViewer.localeObj.getConstant('Panning'));\n        // tslint:disable-next-line:max-line-length\n        this.textSearchItem = this.addClassToolbarItem('_search', 'e-pv-text-search', this.pdfViewer.localeObj.getConstant('Text Search'));\n        this.annotationItem = this.addClassToolbarItem('_annotation', 'e-pv-annotation', this.pdfViewer.localeObj.getConstant('Annotation'));\n        // tslint:disable-next-line:max-line-length\n        this.printItem = this.addClassToolbarItem('_print', 'e-pv-print-document', this.pdfViewer.localeObj.getConstant('Print'));\n        this.downloadItem = this.addClassToolbarItem('_download', 'e-pv-download-document', this.pdfViewer.localeObj.getConstant('Download file'));\n        this.zoomDropdownItem = this.pdfViewerBase.getElement('_zoomDropDown');\n        this.createTooltip(this.zoomDropdownItem, this.pdfViewer.localeObj.getConstant('Zoom'));\n        this.zoomDropdownItem.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Zoom'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement, null, '_zoomDropDownContainer');\n        this.pdfViewerBase.getElement('_zoomDropDownContainer').style.minWidth = '';\n        this.createTooltip(this.currentPageBoxElement, this.pdfViewer.localeObj.getConstant('Page Number'));\n        this.currentPageBoxElement.setAttribute('aria-label', this.pdfViewer.localeObj.getConstant('Page Number'));\n        // tslint:disable-next-line:max-line-length\n        this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement, 'e-pv-current-page-container', '_currentPageInputContainer');\n        this.pdfViewerBase.getElement('_currentPageInputContainer').style.minWidth = '20px';\n        this.totalPageItem = this.pdfViewerBase.getElement('_totalPage');\n        this.addPropertiesToolItemContainer(this.totalPageItem.parentElement, 'e-pv-total-page-container', '_totalPageContainer');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.addClassToolbarItem = function (idString, className, tooltipText) {\n        var element = this.pdfViewerBase.getElement(idString);\n        element.classList.add(className);\n        element.classList.add('e-pv-tbar-btn');\n        element.setAttribute('aria-label', tooltipText);\n        element.parentElement.classList.add(className + '-container');\n        element.parentElement.classList.add('e-popup-text');\n        element.parentElement.id = this.pdfViewer.element.id + idString + 'Container';\n        if (element.childNodes.length > 0) {\n            var spanElement = element.childNodes[0];\n            spanElement.id = this.pdfViewer.element.id + idString + 'Icon';\n            spanElement.classList.remove('e-icons');\n            spanElement.classList.remove('e-btn-icon');\n            if (this.pdfViewer.enableRtl) {\n                spanElement.classList.add('e-right');\n            }\n            var textElement = element.childNodes[1];\n            if (textElement) {\n                if (textElement.classList.contains('e-tbar-btn-text')) {\n                    textElement.id = this.pdfViewer.element.id + idString + 'Text';\n                }\n            }\n        }\n        element.style.width = '';\n        this.createTooltip(element, tooltipText);\n        return element;\n    };\n    Toolbar.prototype.addPropertiesToolItemContainer = function (element, className, idString) {\n        if (className !== null) {\n            element.classList.add(className);\n        }\n        element.classList.add('e-popup-text');\n        element.id = this.pdfViewer.element.id + idString;\n    };\n    Toolbar.prototype.createZoomDropdownElement = function () {\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', null);\n        return zoomDropdownElement.outerHTML;\n    };\n    Toolbar.prototype.createZoomDropdown = function () {\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.pdfViewerBase.getElement('_zoomDropDown'));\n    };\n    Toolbar.prototype.createCurrentPageInputTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var goToPageElement = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', null);\n        return goToPageElement.outerHTML;\n    };\n    Toolbar.prototype.createTotalPageTemplate = function () {\n        // tslint:disable-next-line:max-line-length\n        var totalPageElement = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', 'e-pv-total-page');\n        return totalPageElement.outerHTML;\n    };\n    Toolbar.prototype.createNumericTextBox = function () {\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = this.pdfViewerBase.getElement('_currentPageInput');\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n    };\n    Toolbar.prototype.createToolbarItemsForMobile = function () {\n        this.toolbarElement.classList.add('e-pv-mobile-toolbar');\n        var template = '<button id=\"' + this.pdfViewer.element.id + '_more_option\" class=\"e-tbar-btn\"></button>';\n        this.toolbar = new tool({\n            // tslint:disable-next-line:max-line-length\n            items: [{ prefixIcon: 'e-pv-open-document-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Open'), id: this.pdfViewer.element.id + '_open' },\n                { type: 'Separator', align: 'Left' },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-undo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Undo'), id: this.pdfViewer.element.id + '_undo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-redo-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Redo'), id: this.pdfViewer.element.id + '_redo', },\n                // tslint:disable-next-line:max-line-length\n                { prefixIcon: 'e-pv-text-search-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Text Search'), id: this.pdfViewer.element.id + '_search', align: 'Right' },\n                { template: template, align: 'Right' }\n            ], clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup'\n        });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.openDocumentItem = this.pdfViewerBase.getElement('_open');\n        this.openDocumentItem.classList.add('e-pv-open-document');\n        this.openDocumentItem.firstElementChild.id = this.pdfViewer.element.id + '_openIcon';\n        this.textSearchItem = this.pdfViewerBase.getElement('_search');\n        this.textSearchItem.classList.add('e-pv-text-search');\n        this.textSearchItem.firstElementChild.id = this.pdfViewer.element.id + '_searchIcon';\n        this.undoItem = this.pdfViewerBase.getElement('_undo');\n        this.undoItem.classList.add('e-pv-undo');\n        this.redoItem = this.pdfViewerBase.getElement('_redo');\n        this.redoItem.classList.add('e-pv-redo');\n        this.redoItem.firstElementChild.id = this.pdfViewer.element.id + '_redoIcon';\n        this.undoItem.firstElementChild.id = this.pdfViewer.element.id + '_undoIcon';\n        this.createMoreOption(this.pdfViewer.element.id + '_more_option');\n    };\n    Toolbar.prototype.createMoreOption = function (idString) {\n        var _this = this;\n        this.moreOptionItem = document.getElementById(idString);\n        var items = [\n            {\n                text: this.pdfViewer.localeObj.getConstant('Download'), id: this.pdfViewer.element.id + '_menu_download',\n                iconCss: 'e-icons e-pv-download-document-icon e-pv-icon'\n            },\n            {\n                text: this.pdfViewer.localeObj.getConstant('Bookmarks'), id: this.pdfViewer.element.id + '_menu_bookmarks',\n                iconCss: 'e-icons e-pv-bookmark-icon e-pv-icon'\n            }\n        ];\n        this.moreDropDown = new DropDownButton({\n            items: items, iconCss: 'e-pv-more-icon e-pv-icon', cssClass: 'e-caret-hide',\n            open: function (args) {\n                var dropdownButtonPosition = _this.moreDropDown.element.getBoundingClientRect();\n                // tslint:disable-next-line:max-line-length\n                if (!_this.pdfViewer.enableRtl) {\n                    args.element.parentElement.style.left = dropdownButtonPosition.left + dropdownButtonPosition.width - args.element.parentElement.offsetWidth + 'px';\n                }\n            }, select: function (args) {\n                switch (args.item.id) {\n                    case _this.pdfViewer.element.id + '_menu_download':\n                        _this.pdfViewerBase.download();\n                        break;\n                    case _this.pdfViewer.element.id + '_menu_bookmarks':\n                        _this.showToolbar(false);\n                        _this.pdfViewerBase.navigationPane.createNavigationPaneMobile('bookmarks');\n                        break;\n                    default:\n                        break;\n                }\n            }, beforeItemRender: function (args) {\n                if (args.item.id === _this.pdfViewer.element.id + '_menu_bookmarks') {\n                    if (!_this.pdfViewer.bookmarkViewModule || !_this.pdfViewer.bookmarkViewModule.bookmarks) {\n                        args.element.classList.add('e-disabled');\n                    }\n                    else {\n                        args.element.classList.remove('e-disabled');\n                    }\n                }\n            }, close: function (args) {\n                _this.moreOptionItem.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        });\n        this.moreDropDown.appendTo('#' + idString);\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, className) {\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            toolbarItem.className = className;\n        }\n        if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        return toolbarItem;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.createTooltip = function (toolbarItem, tooltipText) {\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip && this.toolbarElement.contains(args.target)) {\n            args.cancel = true;\n        }\n        if (this.annotationToolbarModule) {\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.annotationToolbarSettings.showTooltip && this.annotationToolbarModule.toolbarElement.contains(args.target)) {\n                args.cancel = true;\n            }\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n            this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n            this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        if (!Browser.isDevice) {\n            this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n            this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n            this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n            this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n            this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n            this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        if (Browser.isDevice) {\n            this.pdfViewerBase.navigationPane.toolbarResize();\n        }\n        else {\n            this.toolbar.refreshOverflow();\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.handleToolbarButtonClick = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_open':\n            case this.pdfViewer.element.id + '_openIcon':\n            case this.pdfViewer.element.id + '_openText':\n                this.fileInputElement.click();\n                if (Browser.isDevice) {\n                    args.originalEvent.target.blur();\n                    this.pdfViewerBase.focusViewerContainer();\n                }\n                break;\n            case this.pdfViewer.element.id + '_download':\n            case this.pdfViewer.element.id + '_downloadIcon':\n            case this.pdfViewer.element.id + '_downloadText':\n                this.pdfViewerBase.download();\n                break;\n            case this.pdfViewer.element.id + '_print':\n            case this.pdfViewer.element.id + '_printIcon':\n            case this.pdfViewer.element.id + '_printText':\n                if (this.pdfViewer.printModule) {\n                    this.pdfViewer.printModule.print();\n                }\n                break;\n            case this.pdfViewer.element.id + '_undo':\n            case this.pdfViewer.element.id + '_undoIcon':\n            case this.pdfViewer.element.id + '_undoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.undo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_redo':\n            case this.pdfViewer.element.id + '_redoIcon':\n            case this.pdfViewer.element.id + '_redoText':\n                if (this.pdfViewer.annotationModule) {\n                    this.pdfViewer.annotationModule.redo();\n                }\n                break;\n            case this.pdfViewer.element.id + '_firstPage':\n            case this.pdfViewer.element.id + '_firstPageIcon':\n            case this.pdfViewer.element.id + '_firstPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToFirstPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_previousPage':\n            case this.pdfViewer.element.id + '_previousPageIcon':\n            case this.pdfViewer.element.id + '_previousPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToPreviousPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_nextPage':\n            case this.pdfViewer.element.id + '_nextPageIcon':\n            case this.pdfViewer.element.id + '_nextPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToNextPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_lastPage':\n            case this.pdfViewer.element.id + '_lastPageIcon':\n            case this.pdfViewer.element.id + '_lastPageText':\n                if (this.pdfViewer.navigationModule) {\n                    this.pdfViewer.navigationModule.goToLastPage();\n                }\n                break;\n            case this.pdfViewer.element.id + '_zoomIn':\n            case this.pdfViewer.element.id + '_zoomInIcon':\n            case this.pdfViewer.element.id + '_zoomInText':\n                this.pdfViewer.magnificationModule.zoomIn();\n                break;\n            case this.pdfViewer.element.id + '_zoomOut':\n            case this.pdfViewer.element.id + '_zoomOutIcon':\n            case this.pdfViewer.element.id + '_zoomOutText':\n                this.pdfViewer.magnificationModule.zoomOut();\n                break;\n            case this.pdfViewer.element.id + '_selectTool':\n            case this.pdfViewer.element.id + '_selectToolIcon':\n            case this.pdfViewer.element.id + '_selectToolText':\n                if (!this.isSelectionToolDisabled) {\n                    this.pdfViewerBase.initiateTextSelectMode();\n                    this.updateInteractionTools(true);\n                }\n                break;\n            case this.pdfViewer.element.id + '_handTool':\n            case this.pdfViewer.element.id + '_handToolIcon':\n            case this.pdfViewer.element.id + '_handToolText':\n                if (!this.isScrollingToolDisabled) {\n                    this.pdfViewerBase.initiatePanning();\n                    this.updateInteractionTools(false);\n                }\n                break;\n            case this.pdfViewer.element.id + '_search':\n            case this.pdfViewer.element.id + '_searchIcon':\n            case this.pdfViewer.element.id + '_searchText':\n                this.textSearchButtonHandler();\n                break;\n            case this.pdfViewer.element.id + '_annotation':\n            case this.pdfViewer.element.id + '_annotationIcon':\n            case this.pdfViewer.element.id + '_annotationText':\n                this.initiateAnnotationMode();\n                break;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:radix\n            var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n            if (this.zoomDropDown.text === currentPercent) {\n                this.zoomDropDown.element.value = currentPercent;\n            }\n            if (this.zoomDropDown.index === 9) {\n                this.zoomDropDown.value = 2;\n            }\n            // tslint:disable-next-line\n            this.zoomDropDown.text = currentPercent;\n        }\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem.parentElement, false);\n        }\n        this.toolbar.enableItems(this.panItem.parentElement, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (!Browser.isDevice) {\n            if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n                this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n                this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n                if (this.isTextSearchBoxDisplayed) {\n                    this.selectItem(this.textSearchItem);\n                    // tslint:disable-next-line:max-line-length\n                    var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                    searchInputElement.select();\n                    searchInputElement.focus();\n                }\n                else {\n                    this.deSelectItem(this.textSearchItem);\n                }\n            }\n        }\n        else {\n            this.showToolbar(false);\n            this.pdfViewerBase.navigationPane.createNavigationPaneMobile('search');\n        }\n    };\n    Toolbar.prototype.initiateAnnotationMode = function () {\n        if (this.annotationToolbarModule) {\n            if (this.pdfViewerBase.isPanMode && this.annotationToolbarModule.isToolbarHidden) {\n                this.pdfViewerBase.initiateTextSelectMode();\n            }\n            this.DisableInteractionTools();\n            this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.DisableInteractionTools = function () {\n        this.deSelectItem(this.textSelectItem);\n        this.deSelectItem(this.panItem);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.pdfViewer.enableNavigationToolbar) {\n            this.showNavigationToolbar(true);\n        }\n        else {\n            this.showNavigationToolbar(false);\n        }\n        if (this.isPrintBtnVisible) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.isDownloadBtnVisible) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.isSearchBtnVisible) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (this.isOpenBtnVisible && toolbarItems.length === 1) ||\n            // tslint:disable-next-line:max-line-length\n            (!this.isNavigationToolVisible && !this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible && !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if (((!this.isNavigationToolVisible && !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) ||\n            (this.isOpenBtnVisible && !this.isNavigationToolVisible) ||\n            // tslint:disable-next-line:max-line-length\n            ((!this.isOpenBtnVisible && !this.isNavigationToolVisible) || (!this.isMagnificationToolVisible && !this.isScrollingBtnVisible && !this.isSelectionBtnVisible))) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible || this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n        if (((!this.isMagnificationToolVisible && !this.isNavigationToolVisible && !this.isScrollingBtnVisible\n            && !this.isSelectionBtnVisible) && this.isUndoRedoBtnsVisible || !this.isUndoRedoBtnsVisible)) {\n            this.applyHideToToolbar(false, 15, 15);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems) {\n            if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n                this.showOpenOption(true);\n            }\n            else {\n                this.showOpenOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n                this.showPageNavigationTool(true);\n            }\n            else {\n                this.showPageNavigationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n                this.showMagnificationTool(true);\n            }\n            else {\n                this.showMagnificationTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n                this.showSelectionTool(true);\n            }\n            else {\n                this.showSelectionTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n                this.showScrollingTool(true);\n            }\n            else {\n                this.showScrollingTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n                this.showPrintOption(true);\n            }\n            else {\n                this.showPrintOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n                this.showDownloadOption(true);\n            }\n            else {\n                this.showDownloadOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n                this.showSearchOption(true);\n            }\n            else {\n                this.showSearchOption(false);\n            }\n            if (toolbarSettingsItems.indexOf('UndoRedoTool') !== -1) {\n                this.showUndoRedoTool(true);\n            }\n            else {\n                this.showUndoRedoTool(false);\n            }\n            if (toolbarSettingsItems.indexOf('AnnotationEditTool') !== -1) {\n                this.showAnnotationEditTool(true);\n            }\n            else {\n                this.showAnnotationEditTool(false);\n            }\n            this.showSeparator(toolbarSettingsItems);\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { Toolbar as Tool } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Slider } from '@syncfusion/ej2-inputs';\n/**\n * @hidden\n */\nvar AnnotationToolbar = /** @class */ (function () {\n    function AnnotationToolbar(viewer, viewerBase, toolbar) {\n        this.toolbarBorderHeight = 1;\n        /**\n         * @private\n         */\n        this.isToolbarHidden = false;\n        /**\n         * @private\n         */\n        this.isMobileAnnotEnabled = false;\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        this.isHighlightBtnVisible = true;\n        this.isUnderlineBtnVisible = true;\n        this.isStrikethroughBtnVisible = true;\n        this.isColorToolVisible = true;\n        this.isOpacityToolVisible = true;\n        this.isDeleteAnnotationToolVisible = true;\n        this.isCurrentAnnotationOpacitySet = false;\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n        this.primaryToolbar = toolbar;\n    }\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.initializeAnnotationToolbar = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.toolbar = new Tool({\n            width: '', height: '', overflowMode: 'Popup',\n            items: this.createToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n            created: function () {\n                _this.createDropDowns();\n            }\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.toolbar.enableRtl = true;\n        }\n        this.toolbar.appendTo(this.toolbarElement);\n        this.afterToolbarCreation();\n        this.showAnnotationToolbar(null);\n        this.applyAnnotationToolbarSettings();\n        this.updateToolbarItems();\n    };\n    AnnotationToolbar.prototype.createMobileAnnotationToolbar = function (isEnable) {\n        var _this = this;\n        if (Browser.isDevice) {\n            if (this.toolbarElement == null && isEnable) {\n                this.isMobileAnnotEnabled = true;\n                // tslint:disable-next-line:max-line-length\n                this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_annotation_toolbar', className: 'e-pv-annotation-toolbar' });\n                this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement, this.pdfViewerBase.viewerContainer);\n                this.toolbar = new Tool({\n                    width: '', height: '', overflowMode: 'Popup',\n                    items: this.createMobileToolbarItems(), clicked: this.onToolbarClicked.bind(this),\n                    created: function () {\n                        _this.createDropDowns();\n                    }\n                });\n                if (this.pdfViewer.enableRtl) {\n                    this.toolbar.enableRtl = true;\n                }\n                this.pdfViewerBase.navigationPane.goBackToToolbar();\n                this.pdfViewer.toolbarModule.showToolbar(false);\n                this.toolbar.appendTo(this.toolbarElement);\n                this.deleteItem = this.pdfViewerBase.getElement('_annotation_delete');\n                this.deleteItem.firstElementChild.id = this.pdfViewer.element.id + '_annotation_delete';\n            }\n            else if (this.toolbarElement != null) {\n                if (isEnable) {\n                    this.isMobileAnnotEnabled = true;\n                    this.pdfViewerBase.navigationPane.goBackToToolbar();\n                    this.pdfViewer.toolbarModule.showToolbar(false);\n                    this.toolbarElement.style.display = 'block';\n                }\n                else if (!isEnable) {\n                    this.isMobileAnnotEnabled = false;\n                    this.pdfViewer.toolbarModule.showToolbar(true);\n                    this.hideMobileAnnotationToolbar();\n                }\n            }\n        }\n        else {\n            this.isMobileAnnotEnabled = true;\n        }\n    };\n    AnnotationToolbar.prototype.hideMobileAnnotationToolbar = function () {\n        if (this.toolbarElement != null) {\n            this.toolbarElement.style.display = 'none';\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createMobileToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        items.push({ prefixIcon: 'e-pv-backward-icon e-pv-icon', tooltipText: this.pdfViewer.localeObj.getConstant('Go Back'), id: this.pdfViewer.element.id + '_backward', click: this.goBackToToolbar.bind(this) });\n        // tslint:disable-next-line:max-line-length\n        items.push({ template: colorTemplate, align: 'right' });\n        items.push({ template: opacityTemplate, align: 'right' });\n        items.push({ type: 'Separator', align: 'right' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.goBackToToolbar = function () {\n        this.isMobileAnnotEnabled = false;\n        this.hideMobileAnnotationToolbar();\n        this.pdfViewer.toolbarModule.showToolbar(true);\n        var page = this.pdfViewerBase.getSelectTextMarkupCurrentPage();\n        if (page) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage = null;\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(page);\n        }\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.createToolbarItems = function () {\n        var colorTemplate = this.getTemplate('span', '_annotation_color', 'e-pv-annotation-color-container');\n        var opacityTemplate = this.getTemplate('span', '_annotation_opacity', 'e-pv-annotation-opacity-container');\n        // tslint:disable-next-line\n        var items = [];\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-highlight-icon e-pv-icon', className: 'e-pv-highlight-container', id: this.pdfViewer.element.id + '_highlight', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-underline-icon e-pv-icon', className: 'e-pv-underline-container', id: this.pdfViewer.element.id + '_underline', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-strikethrough-icon e-pv-icon', className: 'e-pv-strikethrough-container', id: this.pdfViewer.element.id + '_strikethrough', align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        items.push({ template: colorTemplate, align: 'Left' });\n        items.push({ template: opacityTemplate, align: 'Left' });\n        items.push({ type: 'Separator', align: 'Left' });\n        // tslint:disable-next-line:max-line-length\n        items.push({ prefixIcon: 'e-pv-annotation-delete-icon e-pv-icon', className: 'e-pv-annotation-delete-container', id: this.pdfViewer.element.id + '_annotation_delete', align: 'Left' });\n        items.push({ prefixIcon: 'e-pv-annotation-tools-close-icon e-pv-icon', className: 'e-pv-annotation-tools-close-container', id: this.pdfViewer.element.id + '_annotation_close', align: 'Right' });\n        return items;\n    };\n    AnnotationToolbar.prototype.getTemplate = function (elementName, id, className) {\n        var element = createElement(elementName, { id: this.pdfViewer.element.id + id });\n        if (className) {\n            element.className = className;\n        }\n        return element.outerHTML;\n    };\n    AnnotationToolbar.prototype.createDropDowns = function () {\n        this.colorDropDownElement = this.pdfViewerBase.getElement('_annotation_color');\n        this.colorPalette = this.createColorPicker(this.colorDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.colorDropDown = this.createDropDownButton(this.colorDropDownElement, 'e-pv-annotation-color-icon', this.colorPalette.element.parentElement, this.pdfViewer.localeObj.getConstant('Color edit'));\n        this.colorDropDown.beforeOpen = this.colorDropDownBeforeOpen.bind(this);\n        this.colorDropDown.open = this.colorDropDownOpen.bind(this);\n        this.pdfViewerBase.getElement('_annotation_color-popup').addEventListener('click', this.onColorPickerCancelClick.bind(this));\n        this.opacityDropDownElement = this.pdfViewerBase.getElement('_annotation_opacity');\n        var sliderContainer = this.createSlider(this.opacityDropDownElement.id);\n        // tslint:disable-next-line:max-line-length\n        this.opacityDropDown = this.createDropDownButton(this.opacityDropDownElement, 'e-pv-annotation-opacity-icon', sliderContainer, this.pdfViewer.localeObj.getConstant('Opacity edit'));\n        this.opacityDropDown.beforeOpen = this.opacityDropDownBeforeOpen.bind(this);\n        this.opacitySlider.change = this.opacityChange.bind(this);\n        this.opacitySlider.changed = this.opacityChange.bind(this);\n        this.opacityDropDown.open = this.opacityDropDownOpen.bind(this);\n    };\n    AnnotationToolbar.prototype.opacityDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            var opacityElement = this.pdfViewerBase.getElement('_annotation_opacity-popup');\n            opacityElement.style.left = '0px';\n        }\n    };\n    AnnotationToolbar.prototype.onColorPickerCancelClick = function (event) {\n        if (event.target.classList.contains('e-cancel')) {\n            this.colorDropDown.toggle();\n        }\n    };\n    AnnotationToolbar.prototype.colorDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.colorPalette.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color;\n            }\n            else {\n                this.setCurrentColorInPicker();\n            }\n        }\n        this.colorPalette.refresh();\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.setCurrentColorInPicker = function () {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                case 'Highlight':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor }, true);\n                    break;\n                case 'Underline':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor }, true);\n                    break;\n                case 'Strikethrough':\n                    // tslint:disable-next-line:max-line-length\n                    this.colorPalette.setProperties({ 'value': this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor }, true);\n                    break;\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, this.colorPalette.value);\n    };\n    AnnotationToolbar.prototype.colorDropDownOpen = function () {\n        if (Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.getElement('_annotation_color-popup').style.left = '0px';\n        }\n        this.colorPalette.refresh();\n    };\n    AnnotationToolbar.prototype.opacityChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                if (this.isCurrentAnnotationOpacitySet && args.name === 'changed') {\n                    this.isCurrentAnnotationOpacitySet = false;\n                }\n                else {\n                    this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(args);\n                }\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity = args.value / 100;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity = args.value / 100;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity = args.value / 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.opacityDropDownBeforeOpen = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.isCurrentAnnotationOpacitySet = true;\n                // tslint:disable-next-line:max-line-length\n                this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity * 100;\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity * 100;\n                        break;\n                    case 'Underline':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity * 100;\n                        break;\n                    case 'Strikethrough':\n                        this.opacitySlider.value = this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity * 100;\n                        break;\n                }\n            }\n        }\n        this.updateOpacityIndicator();\n    };\n    AnnotationToolbar.prototype.createDropDownButton = function (element, iconClass, target, tooltipText) {\n        // tslint:disable-next-line:max-line-length\n        var dropDownButton = new DropDownButton({ iconCss: iconClass + ' e-pv-icon', target: target });\n        if (this.pdfViewer.enableRtl) {\n            dropDownButton.enableRtl = true;\n        }\n        dropDownButton.appendTo(element);\n        this.primaryToolbar.createTooltip(element, tooltipText);\n        return dropDownButton;\n    };\n    AnnotationToolbar.prototype.createColorPicker = function (idString) {\n        var inputElement = createElement('input', { id: idString + '_target' });\n        document.body.appendChild(inputElement);\n        var colorPicker = new ColorPicker({\n            inline: true, mode: 'Palette', cssClass: 'e-show-value', enableOpacity: false,\n            change: this.onColorPickerChange.bind(this), value: '#000000', showButtons: false,\n        });\n        if (this.pdfViewer.enableRtl) {\n            colorPicker.enableRtl = true;\n        }\n        colorPicker.appendTo(inputElement);\n        return colorPicker;\n    };\n    AnnotationToolbar.prototype.onColorPickerChange = function (args) {\n        if (this.pdfViewer.annotationModule.textMarkupAnnotationModule) {\n            if (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(args.currentValue.hex);\n            }\n            else {\n                switch (this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode) {\n                    case 'Highlight':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor = args.currentValue.hex;\n                        break;\n                    case 'Underline':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor = args.currentValue.hex;\n                        break;\n                    case 'Strikethrough':\n                        this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor = args.currentValue.hex;\n                        break;\n                }\n            }\n        }\n        this.updateColorInIcon(this.colorDropDownElement, args.currentValue.hex);\n        this.colorDropDown.toggle();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.updateColorInIcon = function (element, color) {\n        element.childNodes[0].style.borderBottomColor = color;\n    };\n    AnnotationToolbar.prototype.updateOpacityIndicator = function () {\n        this.opacityIndicator.textContent = this.opacitySlider.value + '%';\n    };\n    AnnotationToolbar.prototype.createSlider = function (idString) {\n        var outerContainer = createElement('div', { className: 'e-pv-annotation-opacity-popup-container' });\n        document.body.appendChild(outerContainer);\n        var label = createElement('span', { id: idString + '_label', className: 'e-pv-annotation-opacity-label' });\n        label.textContent = this.pdfViewer.localeObj.getConstant('Opacity');\n        var sliderElement = createElement('div', { id: idString + '_slider' });\n        this.opacitySlider = new Slider({ type: 'MinRange', cssClass: 'e-pv-annotation-opacity-slider', max: 100, min: 0 });\n        // tslint:disable-next-line:max-line-length\n        this.opacityIndicator = createElement('div', { id: idString + '_opacity_indicator', className: 'e-pv-annotation-opacity-indicator' });\n        this.opacityIndicator.textContent = '100%';\n        if (!this.pdfViewer.enableRtl) {\n            outerContainer.appendChild(label);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(this.opacityIndicator);\n        }\n        else {\n            outerContainer.appendChild(this.opacityIndicator);\n            outerContainer.appendChild(sliderElement);\n            this.opacitySlider.enableRtl = true;\n            this.opacitySlider.appendTo(sliderElement);\n            this.opacitySlider.element.parentElement.classList.add('e-pv-annotation-opacity-slider-container');\n            outerContainer.appendChild(label);\n        }\n        return outerContainer;\n    };\n    AnnotationToolbar.prototype.afterToolbarCreation = function () {\n        // tslint:disable-next-line:max-line-length\n        this.highlightItem = this.primaryToolbar.addClassToolbarItem('_highlight', 'e-pv-highlight', this.pdfViewer.localeObj.getConstant('Highlight'));\n        this.underlineItem = this.primaryToolbar.addClassToolbarItem('_underline', 'e-pv-underline', this.pdfViewer.localeObj.getConstant('Underline'));\n        // tslint:disable-next-line:max-line-length\n        this.strikethroughItem = this.primaryToolbar.addClassToolbarItem('_strikethrough', 'e-pv-strikethrough', this.pdfViewer.localeObj.getConstant('Strikethrough'));\n        this.deleteItem = this.primaryToolbar.addClassToolbarItem('_annotation_delete', 'e-pv-annotation-delete', this.pdfViewer.localeObj.getConstant('Delete'));\n        this.closeItem = this.primaryToolbar.addClassToolbarItem('_annotation_close', 'e-pv-annotation-tools-close', null);\n        this.selectAnnotationDeleteItem(false);\n        this.enableAnnotationPropertiesTools(false);\n    };\n    AnnotationToolbar.prototype.onToolbarClicked = function (args) {\n        switch (args.originalEvent.target.id) {\n            case this.pdfViewer.element.id + '_highlight':\n            case this.pdfViewer.element.id + '_highlightIcon':\n                this.handleHighlight();\n                break;\n            case this.pdfViewer.element.id + '_underline':\n            case this.pdfViewer.element.id + '_underlineIcon':\n                this.handleUnderline();\n                break;\n            case this.pdfViewer.element.id + '_strikethrough':\n            case this.pdfViewer.element.id + '_strikethroughIcon':\n                this.handleStrikethrough();\n                break;\n            case this.pdfViewer.element.id + '_annotation_delete':\n            case this.pdfViewer.element.id + '_annotation_deleteIcon':\n                this.pdfViewer.annotationModule.deleteAnnotation();\n                break;\n            case this.pdfViewer.element.id + '_annotation_close':\n            case this.pdfViewer.element.id + '_annotation_closeIcon':\n                this.showAnnotationToolbar(this.primaryToolbar.annotationItem);\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.showAnnotationToolbar = function (element) {\n        if (!this.isToolbarHidden) {\n            // tslint:disable-next-line\n            var annotationModule = this.pdfViewer.annotationModule;\n            if (element) {\n                this.adjustViewer(false);\n                this.primaryToolbar.deSelectItem(element);\n            }\n            // tslint:disable-next-line:max-line-length           \n            if (annotationModule && annotationModule.textMarkupAnnotationModule && annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation) {\n                this.enablePropertiesTool(annotationModule);\n            }\n            else {\n                this.deselectAllItems();\n            }\n            this.toolbarElement.style.display = 'none';\n            this.primaryToolbar.updateInteractionTools(true);\n        }\n        else {\n            var toolBarInitialStatus = this.toolbarElement.style.display;\n            this.toolbarElement.style.display = 'block';\n            if (element) {\n                this.primaryToolbar.selectItem(element);\n                if (toolBarInitialStatus === 'none') {\n                    this.primaryToolbar.DisableInteractionTools();\n                    this.adjustViewer(true);\n                }\n            }\n        }\n        // tslint:disable-next-line:max-line-length           \n        if (this.pdfViewer.magnification && this.pdfViewer.magnification.fitType === 'fitToPage') {\n            this.pdfViewer.magnification.fitToPage();\n        }\n        if (this.pdfViewerBase.isPanMode) {\n            this.enableAnnotationAddTools(false);\n        }\n        else {\n            this.enableAnnotationAddTools(true);\n        }\n        this.isToolbarHidden = !this.isToolbarHidden;\n    };\n    // tslint:disable-next-line\n    AnnotationToolbar.prototype.enablePropertiesTool = function (annotationModule) {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(true);\n        // tslint:disable-next-line:max-line-length  \n        this.updateColorInIcon(this.colorDropDownElement, annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);\n        this.selectAnnotationDeleteItem(true);\n    };\n    AnnotationToolbar.prototype.applyAnnotationToolbarSettings = function () {\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('HighlightTool') !== -1) {\n            this.showHighlightTool(true);\n        }\n        else {\n            this.showHighlightTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('UnderlineTool') !== -1) {\n            this.showUnderlineTool(true);\n        }\n        else {\n            this.showUnderlineTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('StrikethroughTool') !== -1) {\n            this.showStrikethroughTool(true);\n        }\n        else {\n            this.showStrikethroughTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('ColorEditTool') !== -1) {\n            this.showColorEditTool(true);\n        }\n        else {\n            this.showColorEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('OpacityEditTool') !== -1) {\n            this.showOpacityEditTool(true);\n        }\n        else {\n            this.showOpacityEditTool(false);\n        }\n        if (this.pdfViewer.annotationToolbarSettings.annotationToolbarItem.indexOf('AnnotationDeleteTool') !== -1) {\n            this.showAnnotationDeleteTool(true);\n        }\n        else {\n            this.showAnnotationDeleteTool(false);\n        }\n        this.showSeparator();\n    };\n    AnnotationToolbar.prototype.showSeparator = function () {\n        if ((!this.isHighlightBtnVisible && !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible)\n            || (!this.isColorToolVisible && !this.isOpacityToolVisible)) {\n            this.applyHideToToolbar(false, 3, 3);\n        }\n        if ((!this.isColorToolVisible && !this.isOpacityToolVisible) && (!this.isHighlightBtnVisible &&\n            !this.isUnderlineBtnVisible && !this.isStrikethroughBtnVisible) || !this.isDeleteAnnotationToolVisible) {\n            this.applyHideToToolbar(false, 6, 6);\n        }\n    };\n    AnnotationToolbar.prototype.showHighlightTool = function (isShow) {\n        this.isHighlightBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 0, 0);\n    };\n    AnnotationToolbar.prototype.showUnderlineTool = function (isShow) {\n        this.isUnderlineBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 1, 1);\n    };\n    AnnotationToolbar.prototype.showStrikethroughTool = function (isShow) {\n        this.isStrikethroughBtnVisible = isShow;\n        this.applyHideToToolbar(isShow, 2, 2);\n    };\n    AnnotationToolbar.prototype.showColorEditTool = function (isShow) {\n        this.isColorToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 4, 4);\n    };\n    AnnotationToolbar.prototype.showOpacityEditTool = function (isShow) {\n        this.isOpacityToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 5, 5);\n    };\n    AnnotationToolbar.prototype.showAnnotationDeleteTool = function (isShow) {\n        this.isDeleteAnnotationToolVisible = isShow;\n        this.applyHideToToolbar(isShow, 7, 7);\n    };\n    AnnotationToolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    AnnotationToolbar.prototype.adjustViewer = function (isAdjust) {\n        var splitterElement = this.pdfViewerBase.getElement('_sideBarToolbarSplitter');\n        var toolbarContainer = this.pdfViewerBase.getElement('_toolbarContainer');\n        var toolbarHeight = this.getToolbarHeight(toolbarContainer);\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarToolbar = this.pdfViewerBase.navigationPane.sideBarToolbar;\n        var sideBarContentContainer = this.pdfViewerBase.navigationPane.sideBarContentContainer;\n        if (isAdjust) {\n            if (this.pdfViewer.enableToolbar) {\n                sideBarToolbar.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (toolbarHeight + annotationToolbarHeight) + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = (annotationToolbarHeight) + 'px';\n                sideBarContentContainer.style.top = (annotationToolbarHeight) + 'px';\n                splitterElement.style.top = (annotationToolbarHeight) + 'px';\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), (annotationToolbarHeight)) + 'px';\n            sideBarToolbar.style.height = sideBarToolbar.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n            splitterElement.style.height = splitterElement.getBoundingClientRect().height - annotationToolbarHeight + 'px';\n        }\n        else {\n            if (this.pdfViewer.enableToolbar) {\n                // tslint:disable-next-line:max-line-length\n                sideBarToolbar.style.top = toolbarHeight + 'px';\n                sideBarContentContainer.style.top = toolbarHeight + 'px';\n                splitterElement.style.top = toolbarHeight + 'px';\n            }\n            else {\n                sideBarToolbar.style.top = 1 + 'px';\n                sideBarToolbar.style.height = '100%';\n                sideBarContentContainer.style.top = 1 + 'px';\n                sideBarContentContainer.style.height = '100%';\n                splitterElement.style.top = 1 + 'px';\n                splitterElement.style.height = '100%';\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.viewerContainer.style.height = this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer), annotationToolbarHeight) + 'px';\n            sideBarToolbar.style.height = this.getHeight(sideBarToolbar, annotationToolbarHeight);\n            splitterElement.style.height = this.getHeight(splitterElement, annotationToolbarHeight);\n        }\n        this.updateContentContainerHeight(isAdjust);\n    };\n    AnnotationToolbar.prototype.updateContentContainerHeight = function (isAdjust) {\n        var annotationToolbarHeight = this.getToolbarHeight(this.toolbarElement);\n        var sideBarClientRect = this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();\n        if (sideBarClientRect.height !== 0) {\n            if (isAdjust) {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height - annotationToolbarHeight + 'px';\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height = sideBarClientRect.height + annotationToolbarHeight + 'px';\n            }\n        }\n    };\n    AnnotationToolbar.prototype.getToolbarHeight = function (element) {\n        var toolbarHeight = element.getBoundingClientRect().height;\n        if (toolbarHeight === 0 && element === this.pdfViewerBase.getElement('_toolbarContainer')) {\n            // getComputedStyle gets the value from style and toolbar border height is added to it.\n            // tslint:disable-next-line\n            toolbarHeight = parseFloat(window.getComputedStyle(element)['height']) + this.toolbarBorderHeight;\n        }\n        return toolbarHeight;\n    };\n    AnnotationToolbar.prototype.getHeight = function (element, toolbarHeight) {\n        var height = element.getBoundingClientRect().height;\n        return (height !== 0) ? height + toolbarHeight + 'px' : '';\n    };\n    AnnotationToolbar.prototype.handleHighlight = function () {\n        if (!this.isHighlightEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Highlight');\n            this.primaryToolbar.selectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);\n            this.isHighlightEnabled = true;\n            this.isUnderlineEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleUnderline = function () {\n        if (!this.isUnderlineEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Underline');\n            this.primaryToolbar.selectItem(this.underlineItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.strikethroughItem);\n            this.enableAnnotationPropertiesTools(true);\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);\n            this.isUnderlineEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isStrikethroughEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.handleStrikethrough = function () {\n        if (!this.isStrikethroughEnabled) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations('Strikethrough');\n            this.primaryToolbar.selectItem(this.strikethroughItem);\n            this.primaryToolbar.deSelectItem(this.highlightItem);\n            this.primaryToolbar.deSelectItem(this.underlineItem);\n            this.enableAnnotationPropertiesTools(true);\n            // tslint:disable-next-line:max-line-length\n            this.updateColorInIcon(this.colorDropDownElement, this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor);\n            this.isStrikethroughEnabled = true;\n            this.isHighlightEnabled = false;\n            this.isUnderlineEnabled = false;\n        }\n        else {\n            this.deselectAllItems();\n        }\n    };\n    AnnotationToolbar.prototype.deselectAllItems = function () {\n        this.isHighlightEnabled = false;\n        this.isUnderlineEnabled = false;\n        this.isStrikethroughEnabled = false;\n        if (this.pdfViewerBase.isTextMarkupAnnotationModule()) {\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode = false;\n        }\n        this.primaryToolbar.deSelectItem(this.highlightItem);\n        this.primaryToolbar.deSelectItem(this.underlineItem);\n        this.primaryToolbar.deSelectItem(this.strikethroughItem);\n        this.enableAnnotationPropertiesTools(false);\n        this.updateColorInIcon(this.colorDropDownElement, '#000000');\n        this.selectAnnotationDeleteItem(false);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.selectAnnotationDeleteItem = function (isEnable) {\n        this.toolbar.enableItems(this.deleteItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationPropertiesTools = function (isEnable) {\n        this.toolbar.enableItems(this.colorDropDownElement.parentElement, isEnable);\n        this.toolbar.enableItems(this.opacityDropDownElement.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.enableAnnotationAddTools = function (isEnable) {\n        this.toolbar.enableItems(this.highlightItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.underlineItem.parentElement, isEnable);\n        this.toolbar.enableItems(this.strikethroughItem.parentElement, isEnable);\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.isAnnotationButtonsEnabled = function () {\n        var isButtonsEnabled = false;\n        if (this.isHighlightEnabled || this.isUnderlineEnabled || this.isStrikethroughEnabled) {\n            isButtonsEnabled = true;\n        }\n        return isButtonsEnabled;\n    };\n    AnnotationToolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewer.enableTextMarkupAnnotation) {\n            this.enableAnnotationAddTools(true);\n        }\n        else {\n            this.enableAnnotationAddTools(false);\n        }\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.resetToolbar = function () {\n        this.adjustViewer(false);\n        this.updateToolbarItems();\n        this.toolbarElement.style.display = 'none';\n        this.isToolbarHidden = true;\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.clear = function () {\n        this.deselectAllItems();\n    };\n    /**\n     * @private\n     */\n    AnnotationToolbar.prototype.destroy = function () {\n        this.colorDropDown.destroy();\n        this.opacityDropDown.destroy();\n        this.toolbar.destroy();\n    };\n    AnnotationToolbar.prototype.getElementHeight = function (element) {\n        return element.getBoundingClientRect().height;\n    };\n    AnnotationToolbar.prototype.updateViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight - toolbarHeight;\n    };\n    AnnotationToolbar.prototype.resetViewerHeight = function (viewerHeight, toolbarHeight) {\n        return viewerHeight + toolbarHeight;\n    };\n    return AnnotationToolbar;\n}());\nexport { AnnotationToolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `AjaxRequestSettings` module is used to set the ajax Request Headers of PDF viewer.\n */\nvar AjaxRequestSettings = /** @class */ (function (_super) {\n    __extends(AjaxRequestSettings, _super);\n    function AjaxRequestSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], AjaxRequestSettings.prototype, \"ajaxHeaders\", void 0);\n    return AjaxRequestSettings;\n}(ChildProperty));\nexport { AjaxRequestSettings };\n/**\n * The `AnnotationToolbarSettings` module is used to provide the annotation toolbar settings of the PDF viewer.\n */\nvar AnnotationToolbarSettings = /** @class */ (function (_super) {\n    __extends(AnnotationToolbarSettings, _super);\n    function AnnotationToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], AnnotationToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], AnnotationToolbarSettings.prototype, \"annotationToolbarItem\", void 0);\n    return AnnotationToolbarSettings;\n}(ChildProperty));\nexport { AnnotationToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * The `StrikethroughSettings` module is used to provide the properties to Strikethrough annotation.\n */\nvar StrikethroughSettings = /** @class */ (function (_super) {\n    __extends(StrikethroughSettings, _super);\n    function StrikethroughSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], StrikethroughSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ff0000')\n    ], StrikethroughSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], StrikethroughSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('strikethrough')\n    ], StrikethroughSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], StrikethroughSettings.prototype, \"modifiedDate\", void 0);\n    return StrikethroughSettings;\n}(ChildProperty));\nexport { StrikethroughSettings };\n/**\n * The `UnderlineSettings` module is used to provide the properties to Underline annotation.\n */\nvar UnderlineSettings = /** @class */ (function (_super) {\n    __extends(UnderlineSettings, _super);\n    function UnderlineSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], UnderlineSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#00ff00')\n    ], UnderlineSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], UnderlineSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('underline')\n    ], UnderlineSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], UnderlineSettings.prototype, \"modifiedDate\", void 0);\n    return UnderlineSettings;\n}(ChildProperty));\nexport { UnderlineSettings };\n/**\n * The `HighlightSettings` module is used to provide the properties to Highlight annotation.\n */\nvar HighlightSettings = /** @class */ (function (_super) {\n    __extends(HighlightSettings, _super);\n    function HighlightSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(1)\n    ], HighlightSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property('#ffff00')\n    ], HighlightSettings.prototype, \"color\", void 0);\n    __decorate([\n        Property('Guest')\n    ], HighlightSettings.prototype, \"author\", void 0);\n    __decorate([\n        Property('highlight')\n    ], HighlightSettings.prototype, \"subject\", void 0);\n    __decorate([\n        Property('')\n    ], HighlightSettings.prototype, \"modifiedDate\", void 0);\n    return HighlightSettings;\n}(ChildProperty));\nexport { HighlightSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download file': 'Download file',\n            'Download': 'Download',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            'Apply': 'Apply',\n            'GoToPage': 'Go to Page',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document. No more matches were found',\n            'No Text Found': 'No Text Found',\n            'Undo': 'Undo',\n            'Redo': 'Redo',\n            'Annotation': 'Add or Edit annotations',\n            'Highlight': 'Highlight Text',\n            'Underline': 'Underline Text',\n            'Strikethrough': 'Strikethrough Text',\n            'Delete': 'Delete annotation',\n            'Opacity': 'Opacity',\n            'Color edit': 'Change Color',\n            'Opacity edit': 'Change Opacity',\n            'Highlight context': 'Highlight',\n            'Underline context': 'Underline',\n            'Strikethrough context': 'Strike through',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.',\n            'Open text': 'Open',\n            'First text': 'First Page',\n            'Previous text': 'Previous Page',\n            'Next text': 'Next Page',\n            'Last text': 'Last Page',\n            'Zoom in text': 'Zoom In',\n            'Zoom out text': 'Zoom Out',\n            'Selection text': 'Selection',\n            'Pan text': 'Pan',\n            'Print text': 'Print',\n            'Search text': 'Search',\n            'Annotation Edit text': 'Edit Annotation'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"isDocumentEdited\", {\n        /**\n         * Checks whether the PDF document is edited.\n         */\n        get: function () {\n            return this.viewerBase.isDocumentEdited;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"thumbnailView\", {\n        /**\n         * Gets the thumbnail-view object of the pdf viewer.\n         * @returns { ThumbnailView }\n         */\n        get: function () {\n            return this.thumbnailViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"annotation\", {\n        /**\n         * Gets the annotation object of the pdf viewer.\n         * @returns { Annotation }\n         */\n        get: function () {\n            return this.annotationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar || this.enableNavigationToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableAnnotation) {\n            modules.push({\n                member: 'Annotation', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document - Specifies the document name for load\n     * @param  {string} password - Specifies the Given document password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    /**\n     * Perform undo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.undo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.undo();\n        }\n    };\n    /**\n     * Perform redo action for the edited annotations\n     * @returns void\n     */\n    PdfViewer.prototype.redo = function () {\n        if (this.annotationModule) {\n            this.annotationModule.redo();\n        }\n    };\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        if (!isNullOrUndefined(this.element)) {\n            this.element.classList.remove('e-pdfviewer');\n            this.element.innerHTML = '';\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewer.prototype.fireAnnotationAdd = function (pageNumber, index, type, bounds, settings) {\n        var eventArgs = { name: 'annotationAdd', pageIndex: pageNumber, annotationId: index, annotationType: type, annotationBound: bounds, annotationSettings: settings };\n        this.trigger('annotationAdd', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAnnotationRemove = function (pageNumber, index, type) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'annotationRemove', pageIndex: pageNumber, annotationId: index, annotationType: type };\n        this.trigger('annotationRemove', eventArgs);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    PdfViewer.prototype.fireAnnotationPropertiesChange = function (pageNumber, index, type, isColorChanged, isOpacityChanged) {\n        var eventArgs = { name: 'annotationPropertiesChange', pageIndex: pageNumber, annotationId: index, annotationType: type, isColorChanged: isColorChanged, isOpacityChanged: isOpacityChanged };\n        this.trigger('annotationPropertiesChange', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigationToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableAnnotation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextMarkupAnnotation\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'AnnotationEditTool', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ ajaxHeaders: [] })\n    ], PdfViewer.prototype, \"ajaxRequestSettings\", void 0);\n    __decorate([\n        Property({ showTooltip: true, annotationToolbarItem: ['HighlightTool', 'UnderlineTool', 'StrikethroughTool', 'ColorEditTool', 'OpacityEditTool', 'AnnotationDeleteTool'] })\n    ], PdfViewer.prototype, \"annotationToolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages', print: 'PrintImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#FFDF56', author: 'Guest', subject: 'Highlight', modifiedDate: '' })\n    ], PdfViewer.prototype, \"highlightSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#ff0000', author: 'Guest', subject: 'Strikethrough', modifiedDate: '' })\n    ], PdfViewer.prototype, \"strikethroughSettings\", void 0);\n    __decorate([\n        Property({ opacity: 1, color: '#00ff00', author: 'Guest', subject: 'Underline', modifiedDate: '' })\n    ], PdfViewer.prototype, \"underlineSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationAdd\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationRemove\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"annotationPropertiesChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { ListView } from '@syncfusion/ej2-lists';\nimport { AjaxHandler } from '../index';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.childNavigateCount = 0;\n        // tslint:disable-next-line\n        this.bookmarkClick = function (args) {\n            // tslint:disable-next-line\n            if (!args.event.target.classList.contains('e-icons')) {\n                var bookid = args.data.Id;\n                _this.childNavigateCount = 0;\n                _this.pdfViewerBase.navigationPane.goBackToToolbar();\n                _this.navigateToBookmark(bookid);\n            }\n            else {\n                _this.childNavigateCount++;\n            }\n            return false;\n        };\n        this.nodeClick = function (args) {\n            _this.setHeight(args.node);\n            var bookid = Number(args.nodeData.id);\n            _this.navigateToBookmark(bookid);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var proxy = this;\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId, action: 'Bookmarks' };\n        this.bookmarkRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.bookmarkRequestHandler.url = proxy.pdfViewer.serviceUrl + '/Bookmarks';\n        this.bookmarkRequestHandler.responseType = 'json';\n        this.bookmarkRequestHandler.send(jsonObject);\n        // tslint:disable-next-line\n        this.bookmarkRequestHandler.onSuccess = function (result) {\n            if (proxy.pdfViewerBase.navigationPane) {\n                proxy.pdfViewerBase.navigationPane.disableBookmarkButton();\n            }\n            // tslint:disable-next-line\n            var data = result.data;\n            if (data) {\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                proxy.bookmarks = { bookMark: data.Bookmarks };\n                proxy.bookmarksDestination = { bookMarkDestination: data.BookmarksDestination };\n            }\n            if (proxy.pdfViewerBase.navigationPane) {\n                if (proxy.bookmarks == null) {\n                    proxy.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                else {\n                    proxy.pdfViewerBase.navigationPane.enableBookmarkButton();\n                    proxy.isBookmarkViewDiv = false;\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.bookmarkRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // tslint:disable-next-line\n        this.bookmarkRequestHandler.onError = function (result) {\n            proxy.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        var _this = this;\n        if (!this.isBookmarkViewDiv) {\n            this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n            this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n            // tslint:disable-next-line:max-line-length\n            var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n            // tslint:disable-next-line:max-line-length\n            if (!this.pdfViewer.enableRtl) {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon e-right' });\n                bookmarkIconView.appendChild(bookmarkIcon);\n            }\n            // tslint:disable-next-line:max-line-length\n            var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n            if (this.pdfViewer.enableRtl) {\n                bookmarkTitle.style.paddingRight = 26 + 'px';\n            }\n            else {\n                bookmarkTitle.style.paddingLeft = 40 + 'px';\n            }\n            bookmarkTitle.innerText = '${Title}';\n            bookmarkIconView.appendChild(bookmarkTitle);\n            // tslint:disable-next-line:max-line-length\n            this.treeObj = new TreeView({\n                fields: {\n                    dataSource: this.bookmarks.bookMark,\n                    id: 'Id',\n                    text: 'Title',\n                    child: 'Child',\n                    hasChildren: 'HasChild',\n                },\n                nodeTemplate: bookmarkIconView.outerHTML,\n                nodeSelected: this.nodeClick.bind(this),\n            });\n            if (this.pdfViewer.enableRtl) {\n                this.treeObj.enableRtl = true;\n            }\n            this.treeObj.appendTo(this.bookmarkView);\n            ['mouseover', 'keydown'].forEach(function (evt) { return _this.bookmarkView.addEventListener(evt, function (event) {\n                _this.setHeight(event.target);\n            }); });\n            this.isBookmarkViewDiv = true;\n        }\n        this.bookmarkView.style.display = 'block';\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkContentMobile = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.remove();\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.getElement('_bookmarks_container').appendChild(this.bookmarkView);\n        this.bookmarkList = new ListView({\n            dataSource: this.bookmarks.bookMark,\n            fields: {\n                id: 'Id',\n                text: 'Title',\n                child: 'Child'\n            },\n            showHeader: false,\n            select: this.bookmarkClick.bind(this)\n        });\n        if (this.pdfViewer.enableRtl) {\n            this.bookmarkList.enableRtl = true;\n        }\n        this.bookmarkList.appendTo(this.bookmarkView);\n    };\n    // tslint:disable-next-line\n    BookmarkView.prototype.setHeight = function (element) {\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            else if (element.classList.contains('e-list-parent')) {\n                element = element.querySelector('.e-fullrow');\n            }\n            else if (element.classList.value !== ('e-fullrow') && element.closest('.e-list-item')) {\n                element = element.closest('.e-list-item').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.setBookmarkContentHeight = function () {\n        // tslint:disable-next-line\n        var element = this.treeObj.element;\n        if (this.treeObj.fullRowSelect) {\n            if (element.classList.contains('e-treeview')) {\n                element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\n            }\n            if (element.nextElementSibling) {\n                element.style.height = element.nextElementSibling.offsetHeight + 'px';\n            }\n        }\n    };\n    BookmarkView.prototype.navigateToBookmark = function (bookid) {\n        var pageIndex = this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n        var Y = this.bookmarksDestination.bookMarkDestination[bookid].Y;\n        this.goToBookmark(pageIndex, Y);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @param  {number} pageIndex - Specifies the pageIndex for Navigate\n     * @param  {number} y - Specifies the Y coordinates value of the Page\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        if (Browser.isDevice) {\n            this.pdfViewerBase.mobileScrollerContainer.style.display = '';\n            this.pdfViewerBase.updateMobileScrollerPosition();\n        }\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        if (this.pdfViewerBase.navigationPane) {\n            this.pdfViewerBase.navigationPane.disableBookmarkButton();\n            this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        }\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            if (this.bookmarkView.parentElement !== null) {\n                this.bookmarkView.parentElement.removeChild(this.bookmarkView);\n            }\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.contextMenuHeight = 144;\n        /**\n         * @private\n         */\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, xTouch, yTouch, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                nodeElement = _this.getNodeElement(range, touchX, touchY, event, nodeElement);\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range' || (!selection.type && !selection.isCollapsed)) {\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && (selection.type === 'Range' || (!selection.type && !selection.isCollapsed))) {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                var selectionRectBounds = this.getSelectionRectangleBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (this.getNodeElementFromNode(selection.anchorNode).childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (this.getNodeElementFromNode(selection.focusNode).childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: this.getNodeElementFromNode(selection.anchorNode).id,\n                    startOffset: anchorOffsetValue, endNode: this.getNodeElementFromNode(selection.focusNode).id,\n                    // tslint:disable-next-line:max-line-length\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bound: selectionBounds, rectangleBounds: selectionRectBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = this.getNodeElementFromNode(node);\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            if (lastElement.childNodes[0]) {\n                                this.extendSelectionStich(lastElement.childNodes[0], this.getTextLastLength(lastElement), selection);\n                            }\n                            else {\n                                this.extendSelectionStich(lastElement, this.getTextLastLength(lastElement), selection);\n                            }\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            this.extendSelectionStich(lastElement_1.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            this.extendSelectionStich(lastElement.childNodes[0], 0, selection);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    TextSelection.prototype.extendSelectionStich = function (node, offset, selection) {\n        if (selection.extend) {\n            selection.extend(node, offset);\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = this.getNodeElementFromNode(selection.focusNode);\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.anchorNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = this.getNodeElementFromNode(selection.focusNode);\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBound = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    var selectionRectBounds = this.getSelectionRectangleBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bound: selectionBound, rectangleBounds: selectionRectBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode);\n        var endElement = document.getElementById(endNode);\n        if (startElement.childNodes[0]) {\n            startElement = startElement.childNodes[0];\n        }\n        if (endElement.childNodes[0]) {\n            endElement = endElement.childNodes[0];\n        }\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds = this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber);\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getSelectionRectangleBounds = function (range, pageNumber) {\n        var selectionBounds = [];\n        var startElement = this.getNodeElementFromNode(range.startContainer);\n        var endElement = this.getNodeElementFromNode(range.endContainer);\n        var bounds = null;\n        if (startElement !== endElement) {\n            var startOffset = 0;\n            var endOffset = 0;\n            var currentId = 0;\n            var anchorPageId = this.pdfViewerBase.textLayer.getPageIndex(range.startContainer);\n            var anchorTextId = this.pdfViewerBase.textLayer.getTextIndex(range.startContainer, anchorPageId);\n            var focusPageId = this.pdfViewerBase.textLayer.getPageIndex(range.endContainer);\n            var focusTextId = this.pdfViewerBase.textLayer.getTextIndex(range.endContainer, focusPageId);\n            var textDivs = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).childNodes;\n            if (pageNumber === anchorPageId) {\n                currentId = anchorTextId;\n            }\n            else {\n                currentId = 0;\n            }\n            for (var j = currentId; j < textDivs.length; j++) {\n                var textElement = textDivs[j];\n                if (j === anchorTextId) {\n                    startOffset = range.startOffset;\n                }\n                else {\n                    startOffset = 0;\n                }\n                if (j === focusTextId) {\n                    endOffset = range.endOffset;\n                }\n                else {\n                    endOffset = textElement.textContent.length;\n                }\n                var newRange = document.createRange();\n                for (var k = 0; k < textElement.childNodes.length; k++) {\n                    var node = textElement.childNodes[k];\n                    newRange.setStart(node, startOffset);\n                    newRange.setEnd(node, endOffset);\n                }\n                var boundingRect = this.normalizeBounds(newRange.getBoundingClientRect(), pageNumber);\n                selectionBounds.push(boundingRect);\n                newRange.detach();\n                if (j === focusTextId) {\n                    break;\n                }\n            }\n        }\n        else {\n            bounds = this.normalizeBounds(range.getBoundingClientRect(), pageNumber);\n            selectionBounds.push(bounds);\n        }\n        return selectionBounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.width)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bound = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bound = ranges[i].bound;\n                }\n            }\n        }\n        return bound;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        // tslint:disable-next-line:max-line-length\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))) {\n            var isBackWardSelection = this.pdfViewerBase.textLayer.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = this.getNodeElementFromNode(selection.anchorNode);\n                var focusElement = this.getNodeElementFromNode(selection.focusNode);\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = this.getNodeElementFromNode(anchorElement);\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = this.getNodeElementFromNode(focusElement);\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.calculateContextMenuPosition(event.touches[0].clientY, event.touches[0].clientX);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.calculateContextMenuPosition = function (top, left) {\n        top = top - this.pdfViewerBase.toolbarHeight;\n        if (Browser.isDevice) {\n            // tslint:disable-next-line\n            var contextTop = top - this.contextMenuHeight;\n            if (contextTop < this.pdfViewerBase.toolbarHeight) {\n                top = top + this.contextMenuHeight;\n            }\n            else {\n                top = contextTop;\n            }\n        }\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(top, left - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        if (this.pdfViewerBase.getTextMarkupAnnotationMode()) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.getNodeElement = function (range, touchX, touchY, event, nodeElement) {\n        if (document.caretRangeFromPoint) {\n            range = document.caretRangeFromPoint(touchX, touchY);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n            // tslint:disable-next-line\n        }\n        else if (document.caretPositionFromPoint) {\n            // tslint:disable-next-line\n            var start = document.caretPositionFromPoint(touchX, touchY);\n            // tslint:disable-next-line\n            var end = document.caretPositionFromPoint(touchX, touchY);\n            range = document.createRange();\n            range.setStart(start.offsetNode, start.offset);\n            range.setEnd(end.offsetNode, end.offset);\n            nodeElement = this.onTouchElementScroll(range, nodeElement, touchY, event);\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    TextSelection.prototype.getNodeElementFromNode = function (node) {\n        if (node.parentElement) {\n            return node.parentElement;\n        }\n        else {\n            return node.parentNode;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { AjaxHandler } from '../index';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        this.searchRequestHandler = null;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        /**\n         * @private\n         */\n        this.isMessagePopupOpened = false;\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch(_this.searchInput);\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            _this.searchButtonClick(_this.searchBtn, _this.searchInput);\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-input-search-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        if (this.pdfViewer.enableRtl) {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-next-search');\n        }\n        else {\n            this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        }\n        this.prevSearchBtn.setAttribute('aria-label', 'Previous Search text');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        if (this.pdfViewer.enableRtl) {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-prev-search');\n        }\n        else {\n            this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        }\n        this.nextSearchBtn.setAttribute('aria-label', 'Next Search text');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        if (this.pdfViewer.enableRtl) {\n            this.searchBox.classList.add('e-rtl');\n            this.searchBox.style.left = '88.3px';\n        }\n        else {\n            this.searchBox.classList.remove('e-rtl');\n            this.searchBox.style.right = '88.3px';\n        }\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        if (this.pdfViewer.toolbarModule && this.pdfViewer.enableToolbar) {\n            var secondaryToolbar = this.pdfViewerBase.getElement('_toolbarContainer_popup');\n            if (secondaryToolbar) {\n                if (secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)) {\n                    this.searchBox.style.right = '0px';\n                }\n            }\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n                this.searchBox.style.right = '0px';\n                // tslint:disable-next-line\n                this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n                // tslint:disable-next-line\n                this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            }\n            else {\n                this.searchBox.style.right = '88.3px';\n                this.searchBox.style.width = '';\n                this.searchInput.style.width = '';\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function (searchElement) {\n        var inputString = searchElement.value;\n        this.initiateSearch(inputString);\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.initiateSearch = function (inputString) {\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch(this.searchInput);\n            }\n        }\n        else {\n            this.initiateTextSearch(this.searchInput);\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    // tslint:disable-next-line:max-line-length\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0 && this.searchedPages.length === this.pdfViewerBase.pageCount) {\n                        // tslint:disable-next-line:max-line-length\n                        if (!this.isMessagePopupOpened) {\n                            this.onMessageBoxOpen();\n                        }\n                        // tslint:disable-next-line:max-line-length\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            if (!this.isMessagePopupOpened) {\n                                this.onMessageBoxOpen();\n                            }\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -100 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                var targetScrollElement = this.getScrollElement(element);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                var targetScrollElement = this.getScrollElement(element_1);\n                this.scrollToSearchStr(targetScrollElement, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    TextSearch.prototype.getScrollElement = function (element) {\n        var targetElement = element;\n        if (element.childNodes.length > 0) {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                if (element.childNodes[i].classList) {\n                    if (element.childNodes[i].classList.contains('e-pv-search-text-highlight')) {\n                        targetElement = element.childNodes[i];\n                    }\n                }\n            }\n        }\n        return targetElement;\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (Browser.isDevice) {\n                parent.scrollLeft = offsetX;\n            }\n            else {\n                if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                    parent.scrollLeft = offsetX;\n                }\n            }\n        }\n        parent.scrollTop = offsetY;\n        this.pdfViewerBase.updateMobileScrollerPosition();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var proxy = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: proxy.pdfViewerBase.getDocumentId(), hashId: proxy.pdfViewerBase.hashId, zoomFactor: proxy.pdfViewerBase.getZoomFactor(), action: 'RenderPdfPages' };\n        this.searchRequestHandler = new AjaxHandler(this.pdfViewer);\n        this.searchRequestHandler.url = this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages;\n        this.searchRequestHandler.responseType = 'json';\n        this.searchRequestHandler.send(jsonObject);\n        // tslint:disable-next-line\n        this.searchRequestHandler.onSuccess = function (result) {\n            // tslint:disable-next-line\n            var data = result.data;\n            if (typeof data !== 'object') {\n                data = JSON.parse(data);\n            }\n            if (data) {\n                if (data.pageText) {\n                    proxy.pdfViewerBase.storeWinData(data, pageIndex);\n                    proxy.initSearch(pageIndex, false);\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.searchRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // tslint:disable-next-line\n        this.searchRequestHandler.onError = function (result) {\n            proxy.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.prevSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.prevSearchBtn.disabled = true;\n            }\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (!Browser.isDevice) {\n            if (isEnable) {\n                this.nextSearchBtn.removeAttribute('disabled');\n            }\n            else {\n                this.nextSearchBtn.disabled = true;\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchButtonClick = function (element, inputElement) {\n        if (element.classList.contains('e-pv-search-icon')) {\n            this.initiateTextSearch(inputElement);\n        }\n        else if (element.classList.contains('e-pv-search-close')) {\n            inputElement.value = '';\n            this.resetTextSearch();\n            inputElement.focus();\n        }\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (this.searchBtn) {\n            if (isEnable) {\n                this.searchBtn.classList.remove('e-pv-search-close');\n                this.searchBtn.classList.add('e-pv-search-icon');\n            }\n            else {\n                this.searchBtn.classList.remove('e-pv-search-icon');\n                this.searchBtn.classList.add('e-pv-search-close');\n            }\n        }\n    };\n    TextSearch.prototype.onMessageBoxOpen = function () {\n        this.pdfViewerBase.getElement('_search_input').blur();\n        this.isMessagePopupOpened = true;\n        if (!Browser.isDevice) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n        }\n        else {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant('No Text Found'));\n        }\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText - Specifies the searchText content\n     * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { AjaxHandler } from '../index';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', {\n                id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container'\n            });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex < _this.pdfViewerBase.pageCount; pageIndex++) {\n                    var pageWidth = _this.pdfViewerBase.pageSize[pageIndex].width;\n                    var pageHeight = _this.pdfViewerBase.pageSize[pageIndex].height;\n                    _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        // tslint: disable-next-line:max-line-length\n        // set default zoomFactor value.  \n        var jsonObject = {\n            pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: 1,\n            action: 'PrintImages'\n        };\n        proxy.printRequestHandler = new AjaxHandler(proxy.pdfViewer);\n        proxy.printRequestHandler.url = proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.print;\n        proxy.printRequestHandler.responseType = null;\n        proxy.printRequestHandler.mode = false;\n        proxy.printRequestHandler.send(jsonObject);\n        // tslint:disable-next-line\n        proxy.printRequestHandler.onSuccess = function (result) {\n            // tslint:disable-next-line\n            var printImage = result.data;\n            if (typeof printImage !== 'object') {\n                printImage = JSON.parse(printImage);\n            }\n            var annotationSource = '';\n            if (printImage.textMarkupAnnotation && proxy.pdfViewerBase.isTextMarkupAnnotationModule()) {\n                // tslint:disable-next-line:max-line-length\n                annotationSource = proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printImage.textMarkupAnnotation, pageIndex);\n            }\n            // tslint:disable-next-line:max-line-length\n            proxy.printCanvas = createElement('canvas', { id: proxy.pdfViewer.element.id + '_printCanvas_' + pageIndex, className: 'e-pv-print-canvas' });\n            proxy.printCanvas.style.width = pageWidth + 'px';\n            proxy.printCanvas.style.height = pageHeight + 'px';\n            proxy.printCanvas.height = 1056 * window.devicePixelRatio;\n            proxy.printCanvas.width = 816 * window.devicePixelRatio;\n            var context = proxy.printCanvas.getContext('2d');\n            var pageImage = new Image();\n            var annotationImage = new Image();\n            pageImage.onload = function () {\n                if (pageHeight > pageWidth) {\n                    context.drawImage(pageImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                    if (annotationSource) {\n                        context.drawImage(annotationImage, 0, 0, proxy.printCanvas.width, proxy.printCanvas.height);\n                    }\n                }\n                else {\n                    // translate to center canvas\n                    context.translate(proxy.printCanvas.width * 0.5, proxy.printCanvas.height * 0.5);\n                    // rotate the canvas to - 90 degree \n                    context.rotate(-0.5 * Math.PI);\n                    // un translate the canvas back to origin\n                    context.translate(-proxy.printCanvas.height * 0.5, -proxy.printCanvas.width * 0.5);\n                    // draw the image\n                    context.drawImage(pageImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                    if (annotationSource) {\n                        context.drawImage(annotationImage, 0, 0, proxy.printCanvas.height, proxy.printCanvas.width);\n                    }\n                }\n                if (pageIndex === (proxy.pdfViewerBase.pageCount - 1)) {\n                    proxy.printWindowOpen();\n                }\n            };\n            pageImage.src = printImage.image;\n            annotationImage.src = annotationSource;\n            proxy.printViewerContainer.appendChild(proxy.printCanvas);\n        };\n        // tslint:disable-next-line\n        this.printRequestHandler.onFailure = function (result) {\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n        // tslint:disable-next-line\n        this.printRequestHandler.onError = function (result) {\n            proxy.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(result.status, result.statusText);\n        };\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'\n                + ' img { width:100%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; }'\n                // set default page Height and page Width for A4 size.\n                + ' div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { width:98%; max-width: 1048px; box-sizing: border-box; }br, button { display: none; } '\n                // set default page Height and page Width for A4 size.\n                + 'div{ page-break-inside: avoid; }} @page{margin:0mm; size: 816px 1056px;}</style></head><body><center>');\n        }\n        for (var i = 0; i < this.printViewerContainer.children.length; i++) {\n            // tslint:disable-next-line:max-line-length\n            var canvasUrl = this.printViewerContainer.children[i].toDataURL();\n            this.frameDoc.document.write('<div style=\"margin:0mm;width:816px;height:1056px;position:relative\"><img src=\"' + canvasUrl + '\" id=\"' + 'image_' + i + '\" /></div>');\n        }\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        if (Browser.isIE || Browser.info.name === 'edge') {\n            try {\n                this.iframe.contentWindow.document.execCommand('print', false, null);\n            }\n            catch (e) {\n                this.iframe.contentWindow.print();\n            }\n        }\n        else {\n            setTimeout(function () {\n                _this.iframe.contentWindow.print();\n                _this.iframe.contentWindow.focus();\n                document.body.removeChild(_this.iframe);\n            }, 200);\n        }\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n"],"names":["Annotation","pdfViewer","viewerBase","this","actionCollection","redoCollection","isPopupNoteVisible","pdfViewerBase","enableTextMarkupAnnotation","textMarkupAnnotationModule","TextMarkupAnnotation","prototype","setAnnotationMode","type","clearAnnotationMode","drawTextMarkupAnnotations","toString","isTextMarkupAnnotationMode","deleteAnnotation","deleteTextMarkupAnnotation","toolbarModule","annotationToolbarModule","selectAnnotationDeleteItem","enableAnnotationPropertiesTools","initializeCollection","popupNote","createNote","addAction","pageNumber","index","annotation","actionString","property","action","pageIndex","modifiedProperty","push","updateToolbar","undo","actionObject","pop","undoTextMarkupAction","undoRedoPropertyChange","redo","redoTextMarkupAction","updateUndoRedoButtons","createElement","id","element","className","styles","popupNoteAuthor","appendChild","popupNoteContent","mainContainer","showPopupNote","event","color","author","note","mainContainerPosition","getBoundingClientRect","popupNoteClientRect","textContent","style","backgroundColor","display","topPosition","pageY","top","leftPosition","pageX","left","width","height","hidePopupNote","createTextMarkupPopup","_this","elementId","popupElement","headerElement","authorPopupElement","closeBtn","modifiedDateElement","contentContainer","noteContentElement","contentEditable","viewerContainer","addEventListener","saveClosePopupMenu","bind","onPopupElementMoveStart","onPopupElementMove","window","onPopupElementMoveEnd","focus","changedTouches","target","contains","childNodes","isPopupMenuMoved","popupElementClientRect","clientX","clientY","pageSize","currentAnnotPageNumber","getZoomFactor","parseFloat","top_1","clientPosition","pageDiv","document","getElementById","saveNoteContent","innerText","closePopupMenu","parentElement","removeChild","showAnnotationPopup","getEventPageNumber","currentTextMarkupAnnotation","getProperDate","modifiedDate","canvasPosition","date","dateObject","Date","isNaN","getFullYear","dateString","slice","getMonth","getDate","getHours","getMinutes","getSeconds","eventTarget","pageString","split","parseInt","clear","destroy","getModuleName","LinkAnnotation","renderHyperlinkContent","data","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","_loop_1","i","aTag","rect","this_1","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","onclick","fireHyperlinkClick","open","_loop_2","this_2","undefined","destPageHeight","destLocation","scrollValue","name","scrollTop","background","position","Left","Top","Width","Height","modifyZindexForTextSelection","isAdd","pageCount","getElement","pageChildNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","aElement","getElementsByTagName","parentNode","currentTextMarkupAddMode","selectTextMarkupCurrentPage","currentAnnotationIndex","highlightColor","highlightSettings","underlineColor","underlineSettings","strikethroughColor","strikethroughSettings","highlightOpacity","opacity","underlineOpacity","strikethroughOpacity","createAnnotationLayer","pageWidth","pageHeight","displayMode","annotationCanvas","renderTextMarkupAnnotationsInPage","textMarkupAnnotations","canvas","renderTextMarkupAnnotations","factor","getMagnifiedValue","context","getContext","setLineDash","annotations","getAnnotations","annotationObject","TextMarkupAnnotationType","textMarkupAnnotationType","Color","Opacity","bounds","Bounds","Author","subject","Subject","ModifiedDate","Note","Rect","storeAnnotations","annotBounds","renderHighlightAnnotation","renderStrikeoutAnnotation","renderUnderlineAnnotation","maintainAnnotationSelection","selectionObject","textSelectionModule","selectionRangeArray","convertSelectionToTextMarkup","getSelection","pageBounds","getDrawnBounds","drawTextMarkups","clearTextSelection","rectangleBounds","bound","getPageContext","getAddedAnnotation","isDocumentEdited","settings","annotationModule","fireAnnotationAdd","beginPath","x","X","y","Y","globalAlpha","closePath","fillStyle","msFillRule","fill","save","getProperBounds","drawLine","boundValues","moveTo","lineTo","lineWidth","strokeStyle","stroke","printTextMarkupAnnotations","toDataURL","saveTextMarkupAnnotations","storeObject","sessionStorage","getItem","documentId","Array","colorpick","ColorPicker","j","annotationCollection","JSON","parse","newArray","pageAnnotationObject","z","stringify","getBoundsForSave","colorString","getValue","getRgbCode","pageAnnotations","deletedAnnotation","splice","manageAnnotations","fireAnnotationRemove","Browser","isDevice","hideMobileAnnotationToolbar","showToolbar","modifyColorProperty","modifyAnnotationProperty","fireAnnotationPropertiesChange","modifyOpacityProperty","args","value","status","toLocaleString","clearCurrentAnnotation","tempColor","tempOpacity","enableAnnotationPropertiesTool","clearCurrentAnnotationSelection","lowerPageIndex","higherPageIndex","k","clearAnnotationSelection","stringArray","r","g","b","selection","anchorNode","range","createRange","isBackWardSelection","textLayer","focusNode","pageId","getPageIndex","pageRect","setStart","focusOffset","setEnd","anchorOffset","boundingRect","rectangle","getDefaultValue","right","bottom","rectangleArray","startNode","endNode","selectionStartOffset","selectionEndOffset","anchorPageId","anchorTextId","getTextIndex","focusPageId","focusTextId","startOffset","endOffset","currentId","selectionRects","pageStartId","pageEndId","pageStartOffset","pageEndOffset","textDivs","textElement","node","detach","startElementNode","endElementNode","pageRange","pageRectBounds","pageRectangle","removeAllRanges","rerenderAnnotationsPinch","annotCanvas","oldAnnotCanvas","rerenderAnnotations","oldCanvas","newCanvas","resizeAnnotations","onTextMarkupAnnotationMouseUp","isNullOrUndefined","isClickedOnScrollBar","currentAnnot","getCurrentMarkupAnnotation","selectAnnotation","isToolbarHidden","showAnnotationToolbar","annotationItem","onTextMarkupAnnotationTouchEnd","number","touchCanvas","touches","onTextMarkupAnnotationMouseMove","cursor","isPanMode","getAnnotationToolStatus","currentTextMarkupAnnotations","canvasParentPosition","leftClickPosition","topClickPosition","annotationList","isAnnotationGot","top_2","compareCurrentAnnotations","previousX","currentAnnotation","firstAnnotBounds","firstXposition","firstYposition","secondAnnotBounds","secondXposition","secondYposition","drawAnnotationSelectRect","isEnable","createMobileAnnotationToolbar","isMobileAnnotEnabled","enable","updateColorInIcon","colorDropDownElement","setCurrentColorInPicker","annotObject","removeItem","getPageCollection","indexOf","markupAnnotation","annotationStringified","setItem","predefinedDate","storedIndex","NavigationPane","viewer","base","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isTooltipCreated","isThumbnail","isNavigationToolbarVisible","isBookmarkListOpen","isNavigationPaneResized","isBookmarkOpen","isThumbnailOpen","resizeIconMouseOver","srcElement","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","offsetTop","offsetParent","clientWidth","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","getPopupNoteVisibleStatus","preventDefault","enableRtl","maxWidth","Math","floor","outerContainerWidth","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","closeDiv","viewerWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","bookmarkButton","children","bookmarkViewModule","setBookmarkContentHeight","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","localeObj","getConstant","bookmarkPane","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","openThumbnailPane","bookmarkButtonOnClick","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","createNavigationPane","sideBarToolbar","attrs","role","aria-orientation","tabindex","cssFloat","sideBarToolbarSplitter","direction","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","sideBarTitleOnMouseup","adjustPane","splitterElement","toolbarContainer","toolbarHeight","getComputedStyle","createNavigationPaneMobile","option","toolbarElement","viewerMainContainer","insertBefore","items","searchTemplate","prefixIcon","tooltipText","click","goBackToToolbar","template","iconElement","firstElementChild","enableSearchItems","textSearchModule","searchButtonClick","searchInput","searchPrevious","searchNext","text","toolbar","Tool","overflowMode","appendTo","initiateSearchBox","initiateBookmarks","searchBtn","which","initiateTextSearch","resetVariables","setSearchInputWidth","enableItems","mobileScrollerContainer","bookmarkContainer","renderBookmarkContentMobile","inputString","initiateSearch","cancelTextSearch","childNavigateCount","bookmarkList","back","onWindowResize","searchInputParent","padding","getPropertyValue","getParentElementSearchBox","idString","createTooltipMobile","toastObject","tooltipChild","tooltipDiv","Toast","close","onTooltipClose","animation","hide","duration","effect","clientHeight","show","tooltipElement","isMessagePopupOpened","toolbarResize","thumbnailButton","disabled","aria-label","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","buttonSpan","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","enableBookmarkButton","resizeIcon","setResizeIconTop","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","t","call","label","ops","trys","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","previousTime","currentTime","isTouchScrolled","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","dragX","dragY","isScrollbarMouseDown","scrollX","scrollY","ispageMoved","isThumb","isTapHidden","singleTapTimer","tapCount","isInitialLoaded","navigationPane","isAnnotationToolbarHidden","updatePageHeight","annotationToolbarHeight","onToolbarResize","enableToolbar","textSearchBoxOnResize","mobilePageNoContainer","updateMobileScrollerPosition","viewerContainerOnMousedown","button","detail","isIE","documentMode","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","idStringArray","firePageClick","offsetX","offsetY","isTextMarkupAnnotationModule","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","isCollapsed","isTextSelection","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","getTextMarkupAnnotationMode","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","getCurrentTextMarkupAnnotation","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","textSelectionOnMouseup","applySpanForSelection","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","setTouchPoints","preventTouchEvent","getTime","handleTaps","contextMenuObj","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","difference","speed","abs","viewerContainerOnPointerEnd","viewerContainerOnScroll","scrollposX","scrollposY","ratio","scrollHeight","containerValue","verticalScrollValue","getPageHeight","getPageTop","fitType","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","TextLayer","initializeComponent","toolbarDiv","createMobilePageNumberContainer","tabIndex","touchAction","setMaximumHeight","intializeToolbar","mobilecurrentPageContainer","mobilenumberContainer","mobiletotalPageContainer","mobileSpanContainer","createThumbnailContainer","createPrintPopup","createGoToPagePopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","innerHTML","zIndex","mobileScrollContainerDown","mobileScrollContainerEnd","initiatePageRender","documentData","password","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","interactionMode","initiatePanning","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","minHeight","goToPagePopup","removeEventListener","loadRequestHandler","AjaxHandler","url","serviceUrl","serverActionSettings","responseType","mode","send","onSuccess","requestSuccess","onFailure","fireAjaxRequestFailed","statusText","onError","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","initPageDiv","isAutoZoom","isInitialLoading","createRequestForRender","pageTop","viewerHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","unload","updateWaitingPopup","pageCurrentRect","firstChild","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","windowSessionStorageClear","fireDocumentUnload","unWireEvents","unloadRequestHandler","forEach","getScrollParent","scrollNodeX","scrollNodeY","userAgent","appVersion","scrollTo","nodeName","overflowY","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","closeCorruptPopup","beforeClose","goToPageElement","inputContainer","goToPageInput","pageNoContainer","GoToPageCancelClick","GoToPageApplyClick","closeGoToPagePopUp","NumericTextBox","format","showSpinButton","inputValue","EnableApplyButton","DisableApplyButton","getElementsByClassName","navigation","goToPage","differenceRatio","passwordInput","passwordCancel","passwordCancelClick","applyPassword","isInteraction","fitToAuto","fitToWidth","applyLeftPosition","modifyTextCursor","disableTextSelectionMode","enableAnnotationAddTools","enableTextSelectionMode","onSingleTap","onDoubleTap","moreDropDown","dropDown","getSelectTextMarkupCurrentPage","magnification","onDoubleTapMagnification","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","pageCanvas","maintainSelectionOnScroll","indexInArray","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","virtualLoadRequestHandler","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","imageData","matrix_1","image_1","Image","onload","devicePixelRatio","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","renderTextContent","linkAnnotationModule","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","rotation","addTextLayer","renderTextContents","resizeTextContents","orderPageDivElements","renderPageCanvas","nextElement","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","URL","createObjectURL","anchorElement","href","documentElement","location","padCharacter","replace","textMarkupAnnotationCollection","dowonloadRequestHandler","createBlobUrl","info","msSaveOrOpenBlob","getStoredData","xCoordinate","yCoordinate","pageRequestHandler","renderPages","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","blobObj","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","setCustomAjaxHeaders","request","ajaxRequestSettings","ajaxHeaders","setRequestHeader","headerName","headerValue","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","byteNumbers","charCodeAt","byteArray","Uint8Array","Blob","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","isAnnotationButtonsEnabled","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","whiteSpace","setStyleToTextDiv","Bottom","setTextElementProperties","font","fontSize","fontFamily","contextWidth","measureText","scale","applyTextRotation","Rotation","resizeExcessDiv","textRotation","scaleString","transform","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","startId","endId","initId","lastId","length_1","clearDivSelection","textHeight","textLayerList","compareDocumentPosition","backward","Node","DOCUMENT_POSITION_PRECEDING","previousZoomFactor","textSearch","copyContextMenu","iconCss","Context","contextMenuOnBeforeOpen","select","onMenuItemSelect","created","contextMenuOnCreated","animationSettings","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","item","pdfviewer","jsonObj","httpRequest","XMLHttpRequest","sendRequest","onreadystatechange","stateChange","onerror","error","readyState","response","responseText","successHandler","failureHandler","errorHandler","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","isTapToFitZoom","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","zoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","calculateScrollValues","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","annotationLayers","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","requestCreation","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","thumbnailRequestHandler","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","thumbnailViewChildrenElement","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","isUndoRedoBtnsVisible","isAnnotationEditBtnVisible","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","handleToolbarButtonClick","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","currentTarget","navigateToPage","enteredValue","navigationModule","textBoxFocusOut","currentPageBox","createToolbar","totalPageItem","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","AnnotationToolbar","initializeAnnotationToolbar","showNavigationToolbar","enableNavigationToolbar","navigationToolbar","navigationToolbarSplitter","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","showUndoRedoTool","showAnnotationEditTool","applyHideToToolbar","showSeparator","enableToolbarItem","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableUndoRedoTool","enableAnnotationEditTool","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","undoItem","redoItem","resetToolbar","moreOptionItem","deSelectItem","updateInteractionItems","enableAnnotation","annotationToolbarSettings","annotationToolbarItem","enableCollectionAvailable","disableUndoRedoButtons","collection","unWireEvent","fileInputElement","controlWidth","createToolbarItemsForMobile","tool","clicked","createToolbarItems","createZoomDropdown","createNumericTextBox","refreshOverflow","afterToolbarCreation","currentPageInputTemplate","createCurrentPageInputTemplate","totalPageTemplate","createTotalPageTemplate","zoomDropDownTemplateString","createZoomDropdownElement","align","itemsContainer","addClassToolbarItem","createTooltip","addPropertiesToolItemContainer","minWidth","createToolbarItem","outerHTML","ComboBox","dataSource","fields","popupHeight","showClearButton","createMoreOption","DropDownButton","dropdownButtonPosition","beforeItemRender","bookmarks","elementName","toolbarItem","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","endIndex","isHide","hideItem","printModule","print","updateInteractionTools","initiateAnnotationMode","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","selectItem","showSearchBox","searchInputElement","DisableInteractionTools","isTextSelect","toolbarItems","toolbarSettingsItems","toolbarBorderHeight","isHighlightEnabled","isUnderlineEnabled","isStrikethroughEnabled","isHighlightBtnVisible","isUnderlineBtnVisible","isStrikethroughBtnVisible","isColorToolVisible","isOpacityToolVisible","isDeleteAnnotationToolVisible","isCurrentAnnotationOpacitySet","primaryToolbar","onToolbarClicked","createDropDowns","applyAnnotationToolbarSettings","createMobileToolbarItems","deleteItem","colorTemplate","getTemplate","opacityTemplate","page","colorPalette","createColorPicker","colorDropDown","createDropDownButton","colorDropDownBeforeOpen","colorDropDownOpen","onColorPickerCancelClick","opacityDropDownElement","sliderContainer","createSlider","opacityDropDown","opacityDropDownBeforeOpen","opacitySlider","opacityChange","changed","opacityDropDownOpen","toggle","refresh","setProperties","updateOpacityIndicator","iconClass","dropDownButton","inputElement","colorPicker","inline","enableOpacity","onColorPickerChange","showButtons","currentValue","hex","borderBottomColor","opacityIndicator","outerContainer","sliderElement","Slider","highlightItem","underlineItem","strikethroughItem","closeItem","handleHighlight","handleUnderline","handleStrikethrough","toolBarInitialStatus","adjustViewer","enablePropertiesTool","deselectAllItems","showHighlightTool","showUnderlineTool","showStrikethroughTool","showColorEditTool","showOpacityEditTool","showAnnotationDeleteTool","isAdjust","getToolbarHeight","updateViewerHeight","getElementHeight","resetViewerHeight","getHeight","updateContentContainerHeight","sideBarClientRect","isButtonsEnabled","__extends","extendStatics","d","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","AjaxRequestSettings","AnnotationToolbarSettings","ServerActionSettings","StrikethroughSettings","UnderlineSettings","HighlightSettings","PdfViewer","options","defaultLocale","Cancel","Download file","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","Apply","GoToPage","No matches","No Text Found","Undo","Redo","Highlight","Underline","Strikethrough","Delete","Color edit","Opacity edit","Highlight context","Underline context","Strikethrough context","Server error","Open text","First text","Previous text","Next text","Last text","Zoom in text","Zoom out text","Selection text","Pan text","Print text","Search text","Annotation Edit text","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","enablePrint","enableDownload","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","annotationId","annotationType","annotationBound","annotationSettings","isColorChanged","isOpacityChanged","Event","NotifyPropertyChanges","Component","BookmarkView","bookmarkClick","bookid","Id","navigateToBookmark","nodeClick","setHeight","Number","nodeData","bookmarkRequestHandler","bookMark","bookmarksDestination","bookMarkDestination","BookmarksDestination","isBookmarkViewDiv","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","paddingRight","paddingLeft","treeObj","TreeView","child","hasChildren","nodeTemplate","nodeSelected","evt","ListView","showHeader","fullRowSelect","querySelector","closest","nextElementSibling","PageIndex","goToBookmark","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","contextMenuHeight","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","nodeElement","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","yTouch","getNodeElement","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","selectNodeContents","currentPosition","endPosition","rangeBounds","addRange","extend","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","getNodeElementFromNode","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","selectionBounds","getSelectionBounds","getRangeAt","selectionRectBounds","getSelectionRectangleBounds","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","extendSelectionStich","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","selectionBound","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","newRange","getTextId","lastIndexOf","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","calculateContextMenuPosition","contextTop","caretRangeFromPoint","onTouchElementScroll","caretPositionFromPoint","offsetNode","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchRequestHandler","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","clearAllOccurrences","searchKeypressHandler","enableNextButton","enablePrevButton","updateSearchInputIcon","searchClickHandler","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","secondaryToolbar","onTextSearchClose","initSearch","highlightOthers","searchElement","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","searchText","queryLength","toLowerCase","matches","matchIndex","onMessageBoxOpen","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","targetScrollElement","getScrollElement","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","applyTextSelection","iconSpan","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printRequestHandler","printImage","annotationSource","textMarkupAnnotation","printCanvas","pageImage","annotationImage","translate","rotate","PI","printWindowOpen","browserUserAgent","write","canvasUrl"],"mappings":"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"}