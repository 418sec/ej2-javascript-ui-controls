{"version":3,"file":"ej2-pdfviewer.umd.min.js","sources":["../src/pdfviewer/annotation/link-annotation.js","../src/pdfviewer/base/navigation-pane.js","../src/pdfviewer/base/pdfviewer-base.js","../src/pdfviewer/base/text-layer.js","../src/pdfviewer/base/context-menu.js","../src/pdfviewer/magnification/magnification.js","../src/pdfviewer/navigation/page-navigation.js","../src/pdfviewer/thumbnail-view/thumbnail-view.js","../src/pdfviewer/toolbar/toolbar.js","../src/pdfviewer/pdfviewer.js","../src/pdfviewer/bookmark-view/bookmark-view.js","../src/pdfviewer/text-selection/text-selection.js","../src/pdfviewer/text-search/text-search.js","../src/pdfviewer/print/print.js"],"sourcesContent":["import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.\n * @hidden\n */\nvar LinkAnnotation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function LinkAnnotation(pdfViewer, viewerBase) {\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    // tslint:disable-next-line    \n    LinkAnnotation.prototype.renderHyperlinkContent = function (data, pageIndex) {\n        if (this.pdfViewer.enableHyperlink) {\n            var hyperlinks = data.hyperlinks;\n            var hyperlinksBounds = data.hyperlinkBounds;\n            var linkAnnotation = data.linkAnnotation;\n            var linkPage = data.linkPage;\n            var annotationY = data.annotationLocation;\n            if (hyperlinks.length > 0 && hyperlinksBounds.length > 0) {\n                this.renderWebLink(hyperlinks, hyperlinksBounds, pageIndex);\n            }\n            if (linkAnnotation.length > 0 && linkPage.length > 0) {\n                this.renderDocumentLink(linkAnnotation, linkPage, annotationY, pageIndex);\n            }\n        }\n    };\n    LinkAnnotation.prototype.renderWebLink = function (hyperlinks, hyperlinksBounds, pageIndex) {\n        var proxy = this;\n        var _loop_1 = function (i) {\n            var aTag = createElement('a', { id: 'weblinkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = hyperlinksBounds[i];\n            aTag = this_1.setHyperlinkProperties(aTag, rect);\n            aTag.title = hyperlinks[i];\n            aTag.setAttribute('href', hyperlinks[i]);\n            if (this_1.pdfViewer.hyperlinkOpenState === 'CurrentTab') {\n                aTag.target = '_self';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewTab') {\n                aTag.target = '_blank';\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                };\n            }\n            else if (this_1.pdfViewer.hyperlinkOpenState === 'NewWindow') {\n                aTag.onclick = function () {\n                    proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i]);\n                    window.open(hyperlinks[i], '_blank', 'scrollbars=yes,resizable=yes');\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_1.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_1 = this;\n        for (var i = 0; i < hyperlinks.length; i++) {\n            _loop_1(i);\n        }\n    };\n    LinkAnnotation.prototype.renderDocumentLink = function (linkAnnotation, linkPage, annotationY, pageIndex) {\n        var proxy = this;\n        var _loop_2 = function (i) {\n            var aTag = createElement('a', { id: 'linkdiv_' + i });\n            // tslint:disable-next-line\n            var rect = linkAnnotation[i];\n            aTag = this_2.setHyperlinkProperties(aTag, rect);\n            aTag.setAttribute('href', '');\n            if (linkPage[i] !== undefined) {\n                var destPageHeight = (this_2.pdfViewerBase.pageSize[pageIndex - 1].height);\n                var destLocation = void 0;\n                var scrollValue = void 0;\n                if (annotationY.length !== 0) {\n                    destLocation = (annotationY[i]);\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor() + ((destPageHeight - destLocation) * this_2.pdfViewerBase.getZoomFactor());\n                }\n                else {\n                    // tslint:disable-next-line:max-line-length\n                    scrollValue = this_2.pdfViewerBase.pageSize[linkPage[i]].top * this_2.pdfViewerBase.getZoomFactor();\n                }\n                aTag.name = scrollValue.toString();\n                aTag.onclick = function () {\n                    // tslint:disable-next-line:radix\n                    proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(aTag.name);\n                    return false;\n                };\n            }\n            var pageDiv = document.getElementById(this_2.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            pageDiv.appendChild(aTag);\n        };\n        var this_2 = this;\n        for (var i = 0; i < linkAnnotation.length; i++) {\n            _loop_2(i);\n        }\n    };\n    // tslint:disable-next-line\n    LinkAnnotation.prototype.setHyperlinkProperties = function (aTag, rect) {\n        aTag.className = 'e-pv-hyperlink';\n        aTag.style.background = 'transparent';\n        aTag.style.position = 'absolute';\n        aTag.style.left = (rect.Left * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.top = (rect.Top * this.pdfViewerBase.getZoomFactor()) + 'px';\n        aTag.style.width = (rect.Width * this.pdfViewerBase.getZoomFactor()) + 'px';\n        if (rect.Height < 0) {\n            aTag.style.height = (-rect.Height * this.pdfViewerBase.getZoomFactor()) + 'px';\n            aTag.style.top = ((rect.Top + rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        else {\n            aTag.style.height = ((rect.Height < 0 ? -rect.Height : rect.Height) * this.pdfViewerBase.getZoomFactor()) + 'px';\n        }\n        aTag.style.color = 'transparent';\n        return aTag;\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForTextSelection = function (pageNumber, isAdd) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            var pageChildNodes = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).childNodes;\n            for (var i = 0; i < pageChildNodes.length; i++) {\n                var childElement = pageChildNodes[i];\n                if (childElement.tagName === 'A') {\n                    if (isAdd) {\n                        childElement.classList.add('e-pv-onselection');\n                    }\n                    else {\n                        childElement.classList.remove('e-pv-onselection');\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.modifyZindexForHyperlink = function (element, isAdd) {\n        if (isAdd) {\n            element.classList.add('e-pv-onselection');\n        }\n        else {\n            element.classList.remove('e-pv-onselection');\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.destroy = function () {\n        for (var i = 0; i < this.pdfViewerBase.pageCount - 1; i++) {\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + i);\n            if (pageDiv) {\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    LinkAnnotation.prototype.getModuleName = function () {\n        return 'LinkAnnotation';\n    };\n    return LinkAnnotation;\n}());\nexport { LinkAnnotation };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.\n * @hidden\n */\nvar NavigationPane = /** @class */ (function () {\n    function NavigationPane(viewer, base) {\n        var _this = this;\n        this.thumbnailWidthMin = 200;\n        this.contentContainerScrollWidth = 33;\n        this.closeButtonLeft = 170;\n        this.isBookmarkOpen = false;\n        this.isThumbnailOpen = false;\n        /**\n         * @private\n         */\n        this.isNavigationPaneResized = false;\n        this.resizeIconMouseOver = function (event) {\n            event.srcElement.style.cursor = 'default';\n        };\n        this.resizePanelMouseDown = function (event) {\n            var proxy = _this;\n            proxy.offset = [\n                proxy.sideBarResizer.offsetLeft - event.clientX,\n                proxy.sideBarResizer.offsetTop - event.clientY\n            ];\n            proxy.isDown = true;\n            proxy.isNavigationPaneResized = true;\n            proxy.pdfViewerBase.viewerContainer.style.cursor = 'e-resize';\n            if (proxy.sideBarContentContainer) {\n                proxy.sideBarContentContainer.style.cursor = 'e-resize';\n            }\n        };\n        this.resizeViewerMouseLeave = function (event) {\n            var proxy = _this;\n            proxy.isDown = false;\n            if (proxy.isNavigationPaneResized && proxy.sideBarContentContainer) {\n                proxy.pdfViewerBase.viewerContainer.style.cursor = 'default';\n                proxy.sideBarContentContainer.style.cursor = 'default';\n                proxy.isNavigationPaneResized = false;\n            }\n        };\n        this.resizePanelMouseMove = function (event) {\n            var proxy = _this;\n            event.preventDefault();\n            if (proxy.isDown && _this.sideBarContentContainer) {\n                // prevent the sidebar from becoming too narrow, or from occupying more\n                // than half of the available viewer width.\n                var width = event.clientX + proxy.offset[0];\n                var maxWidth = Math.floor(_this.outerContainerWidth / 2);\n                if (width > maxWidth) {\n                    width = maxWidth;\n                }\n                if (width < _this.thumbnailWidthMin) {\n                    width = _this.thumbnailWidthMin;\n                }\n                proxy.sideBarResizer.style.left = width + 'px';\n                proxy.closeDiv.style.left = width - proxy.contentContainerScrollWidth + 'px';\n                proxy.sideBarContentContainer.style.width = width + 'px';\n                proxy.sideBarContent.style.width = width + 'px';\n                proxy.sideBarContentSplitter.style.width = width + 'px';\n                proxy.sideBarTitleContainer.style.width = width + 'px';\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n                // tslint:disable-next-line:max-line-length\n                var viewerWidth = (proxy.pdfViewer.element.clientWidth - proxy.getViewerContainerLeft());\n                proxy.pdfViewerBase.viewerContainer.style.width = viewerWidth + 'px';\n                proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n                proxy.pdfViewerBase.updateZoomValue();\n            }\n        };\n        this.sideToolbarOnClose = function (event) {\n            var proxy = _this;\n            proxy.removeThumbnailSelectionIconTheme();\n            proxy.removeBookmarkSelectionIconTheme();\n            proxy.updateViewerContainerOnClose();\n        };\n        this.sideToolbarOnClick = function (event) {\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Page Thumbnails');\n            var proxy = _this;\n            var bookmarkPane = document.getElementById(_this.pdfViewer.element.id + '_bookmark_view');\n            if (bookmarkPane) {\n                proxy.removeBookmarkSelectionIconTheme();\n                bookmarkPane.style.display = 'none';\n            }\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'flex';\n            if (proxy.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (proxy.isBookmarkOpen) {\n                        proxy.isThumbnailOpen = true;\n                        proxy.setThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        proxy.isThumbnailOpen = false;\n                        proxy.removeThumbnailSelectionIconTheme();\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    proxy.isThumbnailOpen = true;\n                    proxy.setThumbnailSelectionIconTheme();\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            proxy.isBookmarkOpen = false;\n        };\n        this.bookmarkButtonOnClick = function (event) {\n            var proxy = _this;\n            document.getElementById(_this.pdfViewer.element.id + '_thumbnail_view').style.display = 'none';\n            _this.removeThumbnailSelectionIconTheme();\n            _this.sideBarTitle.textContent = _this.pdfViewer.localeObj.getConstant('Bookmarks');\n            _this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();\n            if (_this.sideBarContentContainer) {\n                if (proxy.sideBarContentContainer.style.display !== 'none') {\n                    if (_this.isThumbnailOpen) {\n                        _this.setBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = true;\n                        _this.updateViewerContainerOnExpand();\n                    }\n                    else {\n                        _this.removeBookmarkSelectionIconTheme();\n                        _this.isBookmarkOpen = false;\n                        _this.updateViewerContainerOnClose();\n                    }\n                }\n                else {\n                    _this.setBookmarkSelectionIconTheme();\n                    _this.isBookmarkOpen = true;\n                    _this.updateViewerContainerOnExpand();\n                }\n            }\n            _this.isThumbnailOpen = false;\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @private\n     */\n    NavigationPane.prototype.initializeNavigationPane = function () {\n        // tslint:disable-next-line:max-line-length\n        this.sideBarToolbar = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbar', className: 'e-pv-sidebar-toolbar' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);\n        // tslint:disable-next-line:max-line-length\n        var sideBarToolbarSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarToolbarSplitter', className: 'e-pv-sidebar-toolbar-splitter' });\n        this.pdfViewerBase.mainContainer.appendChild(sideBarToolbarSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentContainer', className: 'e-pv-sidebar-content-container' });\n        this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContentSplitter = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContentSplitter', className: 'e-pv-sidebar-content-splitter' });\n        this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarContent = createElement('div', { id: this.pdfViewer.element.id + '_sideBarContent', className: 'e-pv-sidebar-content' });\n        this.sideBarContentContainer.appendChild(this.sideBarContent);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarTitleContainer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitleContainer', className: 'e-pv-sidebar-title-container' });\n        this.sideBarTitle = createElement('div', { id: this.pdfViewer.element.id + '_sideBarTitle', className: 'e-pv-sidebar-title' });\n        this.sideBarTitleContainer.appendChild(this.sideBarTitle);\n        this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);\n        // tslint:disable-next-line:max-line-length\n        this.sideBarResizer = createElement('div', { id: this.pdfViewer.element.id + '_sideBarResizer', className: 'e-pv-sidebar-resizer' });\n        this.sideBarResizer.addEventListener('mousedown', this.resizePanelMouseDown);\n        this.pdfViewerBase.mainContainer.addEventListener('mousemove', this.resizePanelMouseMove);\n        this.pdfViewerBase.mainContainer.addEventListener('mouseup', this.resizeViewerMouseLeave);\n        this.sideBarContentContainer.appendChild(this.sideBarResizer);\n        // tslint:disable-next-line:max-line-length\n        var controlLeft = this.getViewerContainerLeft();\n        this.pdfViewerBase.viewerContainer.style.left = controlLeft + 'px';\n        this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - controlLeft) + 'px';\n        this.sideBarContentContainer.style.display = 'none';\n        this.createSidebarToolBar();\n        this.createSidebarTitleCloseButton();\n        this.createResizeIcon();\n        this.sideBarToolbar.addEventListener('mouseup', this.sideToolbarOnMouseup.bind(this));\n        this.sideBarContentContainer.addEventListener('mouseup', this.sideBarTitleOnMouseup.bind(this));\n    };\n    NavigationPane.prototype.createSidebarToolBar = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailButton = createElement('button', { id: this.pdfViewer.element.id + '_thumbnail-view', attrs: { 'disabled': 'disabled' } });\n        this.thumbnailButton.className = 'e-pv-tbar-btn e-pv-thumbnail-view-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var thumbnailButtonSpan = createElement('span', { id: this.pdfViewer.element.id + '_thumbnail-view' + '_icon', className: 'e-pv-thumbnail-view-disable-icon e-pv-icon' });\n        this.thumbnailButton.appendChild(thumbnailButtonSpan);\n        // tslint:disable-next-line:max-line-length\n        var thumbnailTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Page Thumbnails'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        thumbnailTooltip.appendTo(this.thumbnailButton);\n        // tslint:disable-next-line:max-line-length\n        this.bookmarkButton = createElement('button', { id: this.pdfViewer.element.id + '_bookmark', attrs: { 'disabled': 'disabled' } });\n        this.bookmarkButton.className = 'e-pv-tbar-btn e-pv-bookmark-button e-btn';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_bookmark' + '_icon', className: 'e-pv-bookmark-disable-icon e-pv-icon' });\n        this.bookmarkButton.appendChild(buttonSpan);\n        // tslint:disable-next-line:max-line-length\n        var bookMarkTooltip = new Tooltip({ content: this.pdfViewer.localeObj.getConstant('Bookmarks'), opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n        bookMarkTooltip.appendTo(this.bookmarkButton);\n        this.sideBarToolbar.appendChild(this.thumbnailButton);\n        this.sideBarToolbar.appendChild(this.bookmarkButton);\n        this.thumbnailButton.addEventListener('click', this.sideToolbarOnClick);\n        this.bookmarkButton.addEventListener('click', this.bookmarkButtonOnClick);\n    };\n    NavigationPane.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableThumbnailButton = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.removeAttribute('disabled');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.enableBookmarkButton = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.removeAttribute('disabled');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n        }\n    };\n    NavigationPane.prototype.createSidebarTitleCloseButton = function () {\n        this.closeDiv = createElement('button', { id: this.pdfViewer.element.id + '_close_btn' });\n        this.closeDiv.className = 'e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';\n        this.closeDiv.style.left = this.closeButtonLeft + 'px';\n        // tslint:disable-next-line:max-line-length\n        var buttonSpan = createElement('span', { id: this.pdfViewer.element.id + '_close' + '_icon', className: 'e-pv-title-close-icon e-pv-icon' });\n        this.closeDiv.appendChild(buttonSpan);\n        this.sideBarTitleContainer.appendChild(this.closeDiv);\n        this.closeDiv.addEventListener('click', this.sideToolbarOnClose);\n    };\n    NavigationPane.prototype.createResizeIcon = function () {\n        // tslint:disable-next-line:max-line-length\n        var resizeIcon = createElement('div', { id: this.pdfViewer.element.id + '_resize', className: 'e-pv-resize-icon e-pv-icon' });\n        resizeIcon.style.top = (this.sideBarToolbar.clientHeight) / 2 + 'px';\n        resizeIcon.style.position = 'absolute';\n        resizeIcon.addEventListener('click', this.sideToolbarOnClose);\n        resizeIcon.addEventListener('mouseover', this.resizeIconMouseOver);\n        this.sideBarResizer.appendChild(resizeIcon);\n    };\n    Object.defineProperty(NavigationPane.prototype, \"outerContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (!this.mainContainerWidth) {\n                this.mainContainerWidth = this.pdfViewerBase.mainContainer.clientWidth;\n            }\n            return this.mainContainerWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideToolbarWidth\", {\n        /**\n         *  @private\n         */\n        get: function () {\n            if (this.sideBarToolbar) {\n                return this.sideBarToolbar.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigationPane.prototype, \"sideBarContentContainerWidth\", {\n        /**\n         * @private\n         */\n        get: function () {\n            if (this.sideBarContentContainer) {\n                return this.sideBarContentContainer.clientWidth;\n            }\n            else {\n                return 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    NavigationPane.prototype.updateViewerContainerOnClose = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'none';\n            proxy.pdfViewerBase.viewerContainer.style.left = (proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - proxy.sideToolbarWidth) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n        }\n    };\n    NavigationPane.prototype.updateViewerContainerOnExpand = function () {\n        var proxy = this;\n        if (proxy.sideBarContentContainer) {\n            proxy.sideBarContentContainer.style.display = 'block';\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.left = proxy.getViewerContainerLeft() + 'px';\n            // tslint:disable-next-line:max-line-length\n            proxy.pdfViewerBase.viewerContainer.style.width = (proxy.pdfViewer.element.clientWidth - this.getViewerContainerLeft()) + 'px';\n            proxy.pdfViewerBase.pageContainer.style.width = proxy.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            proxy.pdfViewerBase.updateZoomValue();\n            proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber - 1);\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerContainerLeft = function () {\n        return (this.sideToolbarWidth + this.sideBarContentContainerWidth);\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.getViewerMainContainerWidth = function () {\n        return this.pdfViewer.element.clientWidth - this.sideToolbarWidth;\n    };\n    NavigationPane.prototype.setThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeThumbnailSelectionIconTheme = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');\n            this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');\n        }\n    };\n    NavigationPane.prototype.resetThumbnailIcon = function () {\n        if (this.thumbnailButton) {\n            this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');\n            this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.resetThumbnailView = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.pdfViewerBase.viewerContainer.style.left = (this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.viewerContainer.style.width = (this.pdfViewer.element.clientWidth - this.sideToolbarWidth) + 'px';\n            this.pdfViewerBase.pageContainer.style.width = this.pdfViewerBase.viewerContainer.clientWidth + 'px';\n            this.thumbnailButton.setAttribute('disabled', 'disabled');\n            this.removeThumbnailSelectionIconTheme();\n            this.resetThumbnailIcon();\n        }\n    };\n    NavigationPane.prototype.setBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.removeBookmarkSelectionIconTheme = function () {\n        if (this.bookmarkButton) {\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');\n            this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');\n            this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');\n        }\n    };\n    NavigationPane.prototype.sideToolbarOnMouseup = function (event) {\n        if (event.target === this.sideBarToolbar) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    NavigationPane.prototype.sideBarTitleOnMouseup = function (event) {\n        this.pdfViewerBase.focusViewerContainer();\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.disableBookmarkButton = function () {\n        if (this.sideBarContentContainer) {\n            this.sideBarContentContainer.style.display = 'none';\n            this.bookmarkButton.setAttribute('disabled', 'disabled');\n            this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');\n        }\n    };\n    /**\n     * @private\n     */\n    NavigationPane.prototype.clear = function () {\n        this.removeBookmarkSelectionIconTheme();\n        this.removeThumbnailSelectionIconTheme();\n    };\n    NavigationPane.prototype.getModuleName = function () {\n        return 'NavigationPane';\n    };\n    return NavigationPane;\n}());\nexport { NavigationPane };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createElement } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { TextLayer, ContextMenu } from '../index';\nimport { NavigationPane } from './navigation-pane';\n/**\n * The `PdfViewerBase` module is used to handle base methods of PDF viewer.\n * @hidden\n */\nvar PdfViewerBase = /** @class */ (function () {\n    function PdfViewerBase(viewer) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.pageSize = [];\n        /**\n         * @private\n         */\n        this.pageCount = 0;\n        /**\n         * @private\n         */\n        this.currentPageNumber = 0;\n        this.isDocumentLoaded = false;\n        /**\n         * @private\n         */\n        this.renderedPagesList = [];\n        /**\n         * @private\n         */\n        this.pageGap = 8;\n        this.pageLeft = 5;\n        this.sessionLimit = 1000;\n        this.pageStopValue = 300;\n        this.toolbarHeight = 56;\n        this.pageLimit = 0;\n        this.previousPage = 0;\n        this.isViewerMouseDown = false;\n        this.isViewerMouseWheel = false;\n        this.scrollPosition = 0;\n        this.pointerCount = 0;\n        this.pointersForTouch = [];\n        this.isPasswordAvailable = false;\n        /**\n         * @private\n         */\n        this.reRenderedCount = 0;\n        this.mouseX = 0;\n        this.mouseY = 0;\n        this.touchClientX = 0;\n        this.touchClientY = 0;\n        this.isLongTouchPropagated = false;\n        // tslint:disable-next-line\n        this.longTouchTimer = null;\n        this.isViewerContainerDoubleClick = false;\n        // tslint:disable-next-line\n        this.dblClickTimer = null;\n        /**\n         * @private\n         */\n        this.pinchZoomStorage = [];\n        /**\n         * @private\n         */\n        this.isTextSelectionDisabled = false;\n        this.isPanMode = false;\n        this.dragX = 0;\n        this.dragY = 0;\n        this.isScrollbarMouseDown = false;\n        /**\n         * @private\n         */\n        this.onWindowResize = function () {\n            var proxy = _this;\n            // tslint:disable-next-line:max-line-length\n            proxy.viewerContainer.style.left = (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0) + 'px';\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (proxy.pdfViewer.element.clientWidth - (proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerContainerLeft() : 0));\n            proxy.viewerContainer.style.width = viewerWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                proxy.viewerContainer.style.height = proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            proxy.pageContainer.style.width = proxy.viewerContainer.clientWidth + 'px';\n            if (proxy.pdfViewer.toolbarModule) {\n                // tslint:disable-next-line:max-line-length\n                proxy.pdfViewer.toolbarModule.onToolbarResize((proxy.navigationPane.sideBarToolbar ? proxy.navigationPane.getViewerMainContainerWidth() : proxy.pdfViewer.element.clientWidth));\n            }\n            if (_this.pdfViewer.enableToolbar && _this.pdfViewer.thumbnailViewModule) {\n                proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n            }\n            if (proxy.pdfViewer.textSearchModule) {\n                proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();\n            }\n            proxy.updateZoomValue();\n        };\n        this.viewerContainerOnMousedown = function (event) {\n            if (event.button === 0) {\n                _this.isViewerMouseDown = true;\n                if (event.detail === 1) {\n                    _this.focusViewerContainer();\n                }\n                _this.scrollPosition = _this.viewerContainer.scrollTop / _this.getZoomFactor();\n                _this.mouseX = event.clientX;\n                _this.mouseY = event.clientY;\n                if (_this.pdfViewer.textSelectionModule && !_this.isClickedOnScrollBar(event) && !_this.isTextSelectionDisabled) {\n                    event.preventDefault();\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n            if (_this.isPanMode) {\n                _this.dragX = event.pageX;\n                _this.dragY = event.pageY;\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                }\n            }\n        };\n        this.viewerContainerOnMouseup = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.scrollHoldTimer) {\n                    clearTimeout(_this.scrollHoldTimer);\n                    _this.scrollHoldTimer = null;\n                }\n                if ((_this.scrollPosition * _this.getZoomFactor()) !== _this.viewerContainer.scrollTop) {\n                    _this.pageViewScrollChanged(_this.currentPageNumber);\n                }\n            }\n            if (event.button === 0) {\n                // 0 is for left button.\n                var eventTarget = event.target;\n                if (eventTarget.classList.contains('e-pv-page-canvas')) {\n                    var idStringArray = eventTarget.id.split('_');\n                    // tslint:disable-next-line\n                    _this.pdfViewer.firePageClick(event.offsetX, event.offsetY, parseInt(idStringArray[idStringArray.length - 1]) + 1);\n                }\n                // tslint:disable-next-line:max-line-length\n                if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer) && _this.isPanMode) {\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grab';\n                    _this.viewerContainer.style.cursor = '-moz-grab';\n                    _this.viewerContainer.style.cursor = 'grab';\n                }\n            }\n            _this.isViewerMouseDown = false;\n        };\n        this.viewerContainerOnMouseWheel = function (event) {\n            _this.isViewerMouseWheel = true;\n            if (_this.getRerenderCanvasCreated()) {\n                event.preventDefault();\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                }\n                _this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);\n            }\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                if (_this.isViewerMouseDown) {\n                    if (!event.target.classList.contains('e-pv-text')) {\n                        _this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this.currentPageNumber - 1);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnKeyDown = function (event) {\n            var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n            var isCommandKey = isMac ? event.metaKey : false;\n            if (event.ctrlKey || isCommandKey) {\n                // add keycodes if shift key is used.\n                if ((event.shiftKey && !isMac) || (isMac && !event.shiftKey)) {\n                    switch (event.keyCode) {\n                        case 38: // up arrow\n                        case 33: // page up\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== 1) {\n                                _this.updateScrollTop(0);\n                            }\n                            break;\n                        case 40: // down arrow\n                        case 34: // page down\n                            event.preventDefault();\n                            if (_this.currentPageNumber !== _this.pageCount) {\n                                _this.updateScrollTop(_this.pageCount - 1);\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (event.keyCode) {\n                    case 79: // o key\n                        if (_this.pdfViewer.toolbarModule && _this.pdfViewer.enableToolbar) {\n                            _this.pdfViewer.toolbarModule.openFileDialogBox(event);\n                        }\n                        break;\n                    case 67: // c key\n                        if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                            event.preventDefault();\n                            _this.pdfViewer.textSelectionModule.copyText();\n                        }\n                        break;\n                    case 70: // f key\n                        if (_this.pdfViewer.textSearchModule && _this.pdfViewer.enableTextSearch) {\n                            event.preventDefault();\n                            _this.pdfViewer.toolbarModule.textSearchButtonHandler();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);\n            }\n        };\n        this.viewerContainerOnMousemove = function (event) {\n            _this.mouseX = event.clientX;\n            _this.mouseY = event.clientY;\n            if (_this.isViewerMouseDown) {\n                event.preventDefault();\n                // tslint:disable-next-line:max-line-length\n                if (_this.pdfViewer.textSelectionModule && _this.pdfViewer.enableTextSelection && !_this.isTextSelectionDisabled) {\n                    // text selection won't perform if we start the selection from hyperlink content by commenting this line.\n                    // this region block the toc/hyperlink navigation on sometimes.\n                    // if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {\n                    // this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);\n                    // }\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target, _this.mouseX, _this.mouseY);\n                }\n            }\n            if (_this.isPanMode) {\n                _this.panOnMouseMove(event);\n            }\n        };\n        this.panOnMouseMove = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (_this.viewerContainer.contains(event.target) && (event.target !== _this.viewerContainer) && (event.target !== _this.pageContainer)) {\n                if (_this.isViewerMouseDown) {\n                    var deltaX = _this.dragX - event.pageX;\n                    var deltaY = _this.dragY - event.pageY;\n                    _this.viewerContainer.scrollTop = _this.viewerContainer.scrollTop + deltaY;\n                    _this.viewerContainer.scrollLeft = _this.viewerContainer.scrollLeft + deltaX;\n                    _this.viewerContainer.style.cursor = 'move';\n                    _this.viewerContainer.style.cursor = '-webkit-grabbing';\n                    _this.viewerContainer.style.cursor = '-moz-grabbing';\n                    _this.viewerContainer.style.cursor = 'grabbing';\n                    _this.dragX = event.pageX;\n                    _this.dragY = event.pageY;\n                }\n                else {\n                    if (!_this.navigationPane.isNavigationPaneResized) {\n                        _this.viewerContainer.style.cursor = 'move';\n                        _this.viewerContainer.style.cursor = '-webkit-grab';\n                        _this.viewerContainer.style.cursor = '-moz-grab';\n                        _this.viewerContainer.style.cursor = 'grab';\n                    }\n                }\n            }\n            else {\n                if (!_this.navigationPane.isNavigationPaneResized) {\n                    _this.viewerContainer.style.cursor = 'auto';\n                }\n            }\n        };\n        this.viewerContainerOnMouseLeave = function (event) {\n            if (_this.isViewerMouseDown) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);\n                }\n            }\n        };\n        this.viewerContainerOnMouseEnter = function (event) {\n            if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                _this.pdfViewer.textSelectionModule.clear();\n            }\n        };\n        this.viewerContainerOnMouseOver = function (event) {\n            if (_this.isViewerMouseDown) {\n                event.preventDefault();\n            }\n        };\n        this.viewerContainerOnClick = function (event) {\n            if (event.type === 'dblclick') {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    if (event.target.classList.contains('e-pv-text')) {\n                        _this.isViewerContainerDoubleClick = true;\n                        _this.pdfViewer.textSelectionModule.selectAWord(event.target, event.clientX, event.clientY, false);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.dblClickTimer = setTimeout(function () { _this.applySelection(); }, 100);\n                    }\n                }\n            }\n            else {\n                if (event.detail === 3) {\n                    if (_this.isViewerContainerDoubleClick) {\n                        clearTimeout(_this.dblClickTimer);\n                        _this.isViewerContainerDoubleClick = false;\n                    }\n                    if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                        _this.pdfViewer.textSelectionModule.selectEntireLine(event);\n                        _this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true, false);\n                        _this.applySelection();\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnDragStart = function (event) {\n            event.preventDefault();\n        };\n        // tslint:disable-next-line\n        this.viewerContainerOnContextMenuClick = function (event) {\n            _this.isViewerMouseDown = false;\n        };\n        this.onWindowMouseUp = function (event) {\n            if (event.button === 0) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    // tslint:disable-next-line:max-line-length\n                    if (event.detail === 1 && !_this.viewerContainer.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                        if (window.getSelection().anchorNode !== null) {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                        }\n                    }\n                    if (_this.viewerContainer.contains(event.target)) {\n                        if (!_this.isClickedOnScrollBar(event) && !_this.isScrollbarMouseDown) {\n                            _this.pdfViewer.textSelectionModule.textSelectionOnMouseup();\n                        }\n                        else {\n                            if (window.getSelection().anchorNode !== null) {\n                                _this.pdfViewer.textSelectionModule.applySpanForSelection();\n                            }\n                        }\n                    }\n                }\n            }\n            else if (event.button === 2) {\n                if (_this.viewerContainer.contains(event.target)) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (_this.isViewerMouseDown) {\n                _this.isViewerMouseDown = false;\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clear();\n                    _this.pdfViewer.textSelectionModule.selectionStartPage = null;\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                return false;\n            }\n            else {\n                return true;\n            }\n        };\n        this.onWindowTouchEnd = function (event) {\n            // tslint:disable-next-line:max-line-length\n            if (!_this.pdfViewer.element.contains(event.target) && !_this.contextMenuModule.contextMenuElement.contains(event.target)) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                }\n            }\n        };\n        this.viewerContainerOnTouchStart = function (event) {\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX, touchPoints[0].clientY);\n            }\n            if (touchPoints.length === 1) {\n                _this.preventTouchEvent(event);\n            }\n            _this.touchClientX = touchPoints[0].clientX;\n            _this.touchClientY = touchPoints[0].clientY;\n            // tslint:disable-next-line:max-line-length\n            if (touchPoints.length === 1 && !(event.target.classList.contains('e-pv-touch-select-drop') || event.target.classList.contains('e-pv-touch-ellipse'))) {\n                if (_this.pdfViewer.textSelectionModule && !_this.isTextSelectionDisabled) {\n                    _this.pdfViewer.textSelectionModule.clearTextSelection();\n                    _this.contextMenuModule.contextMenuObj.close();\n                    // event.preventDefault();\n                    if (!_this.isLongTouchPropagated) {\n                        _this.longTouchTimer = setTimeout(function () { _this.viewerContainerOnLongTouch(event); }, 1000);\n                    }\n                    _this.isLongTouchPropagated = true;\n                }\n            }\n        };\n        this.viewerContainerOnLongTouch = function (event) {\n            _this.touchClientX = event.touches[0].clientX;\n            _this.touchClientY = event.touches[0].clientY;\n            event.preventDefault();\n            if (_this.pdfViewer.textSelectionModule) {\n                _this.pdfViewer.textSelectionModule.initiateTouchSelection(event, _this.touchClientX, _this.touchClientY);\n            }\n        };\n        this.viewerContainerOnPointerDown = function (event) {\n            if (event.pointerType === 'touch') {\n                _this.pointerCount++;\n                if (_this.pointerCount <= 2) {\n                    event.preventDefault();\n                    _this.pointersForTouch.push(event);\n                    if (_this.pointerCount === 2) {\n                        _this.pointerCount = 0;\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        _this.pdfViewer.magnificationModule.setTouchPoints(event.clientX, event.clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchMove = function (event) {\n            _this.preventTouchEvent(event);\n            var touchPoints = event.touches;\n            if (_this.pdfViewer.magnificationModule) {\n                if (touchPoints.length > 1 && _this.pageCount > 0) {\n                    // tslint:disable-next-line:max-line-length\n                    _this.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX, touchPoints[0].clientY, touchPoints[1].clientX, touchPoints[1].clientY);\n                }\n                else if (touchPoints.length === 1 && _this.getPagesPinchZoomed()) {\n                    _this.pdfViewer.magnificationModule.pinchMoveScroll();\n                }\n            }\n            touchPoints = null;\n        };\n        this.viewerContainerOnPointerMove = function (event) {\n            if (event.pointerType === 'touch' && _this.pageCount > 0) {\n                event.preventDefault();\n                if (_this.pointersForTouch.length === 2) {\n                    for (var i = 0; i < _this.pointersForTouch.length; i++) {\n                        if (event.pointerId === _this.pointersForTouch[i].pointerId) {\n                            _this.pointersForTouch[i] = event;\n                            break;\n                        }\n                    }\n                    if (_this.pdfViewer.magnificationModule) {\n                        // tslint:disable-next-line:max-line-length\n                        _this.pdfViewer.magnificationModule.initiatePinchMove(_this.pointersForTouch[0].clientX, _this.pointersForTouch[0].clientY, _this.pointersForTouch[1].clientX, _this.pointersForTouch[1].clientY);\n                    }\n                }\n            }\n        };\n        this.viewerContainerOnTouchEnd = function (event) {\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.pinchMoveEnd();\n            }\n            _this.isLongTouchPropagated = false;\n            clearInterval(_this.longTouchTimer);\n            _this.longTouchTimer = null;\n        };\n        this.viewerContainerOnPointerEnd = function (event) {\n            if (event.pointerType === 'touch') {\n                event.preventDefault();\n                if (_this.pdfViewer.magnificationModule) {\n                    _this.pdfViewer.magnificationModule.pinchMoveEnd();\n                }\n                _this.pointersForTouch = [];\n                _this.pointerCount = 0;\n            }\n        };\n        this.viewerContainerOnScroll = function () {\n            var proxy = _this;\n            if (_this.scrollHoldTimer) {\n                clearTimeout(_this.scrollHoldTimer);\n            }\n            var pageIndex = _this.currentPageNumber;\n            _this.scrollHoldTimer = null;\n            _this.contextMenuModule.contextMenuObj.close();\n            var verticalScrollValue = _this.viewerContainer.scrollTop;\n            // tslint:disable-next-line:max-line-length\n            for (var i = 0; i < _this.pageCount; i++) {\n                if (_this.pageSize[i] != null) {\n                    var pageHeight = _this.getPageHeight(i);\n                    // tslint:disable-next-line:max-line-length\n                    if ((verticalScrollValue + _this.pageStopValue) <= (_this.getPageTop(i) + pageHeight)) {\n                        _this.currentPageNumber = i + 1;\n                        break;\n                    }\n                }\n            }\n            _this.renderElementsVirtualScroll(_this.currentPageNumber);\n            // tslint:disable-next-line:max-line-length\n            if (!_this.isViewerMouseDown && !_this.getPinchZoomed() && !_this.getPinchScrolled() && !_this.getPagesPinchZoomed() || _this.isViewerMouseWheel) {\n                _this.pageViewScrollChanged(_this.currentPageNumber);\n                _this.isViewerMouseWheel = false;\n            }\n            else {\n                _this.showPageLoadingIndicator(_this.currentPageNumber - 1, false);\n            }\n            if (_this.pdfViewer.toolbarModule) {\n                _this.pdfViewer.toolbarModule.updateCurrentPage(_this.currentPageNumber);\n                _this.pdfViewer.toolbarModule.updateNavigationButtons();\n            }\n            if (pageIndex !== _this.currentPageNumber) {\n                if (proxy.pdfViewer.thumbnailViewModule) {\n                    if (!proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked) {\n                        proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber - 1);\n                    }\n                    proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked = false;\n                }\n                _this.pdfViewer.firePageChange(pageIndex);\n            }\n            if (_this.pdfViewer.magnificationModule) {\n                _this.pdfViewer.magnificationModule.updatePagesForFitPage(_this.currentPageNumber - 1);\n            }\n            var currentPage = _this.getElement('_pageDiv_' + (_this.currentPageNumber - 1));\n            if (currentPage) {\n                currentPage.style.visibility = 'visible';\n            }\n            if (_this.isViewerMouseDown) {\n                if (_this.getRerenderCanvasCreated()) {\n                    _this.pdfViewer.magnificationModule.clearIntervalTimer();\n                }\n                _this.scrollHoldTimer = setTimeout(function () { _this.initiatePageViewScrollChanged(); }, 100);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.navigationPane = new NavigationPane(this.pdfViewer, this);\n        this.textLayer = new TextLayer(this.pdfViewer, this);\n    }\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initializeComponent = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        if (element) {\n            var controlWidth = '100%';\n            var toolbarDiv = void 0;\n            // tslint:disable-next-line:max-line-length\n            this.viewerMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerMainContainer', className: 'e-pv-viewer-main-container' });\n            // tslint:disable-next-line:max-line-length\n            this.viewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_viewerContainer', className: 'e-pv-viewer-container' });\n            this.viewerContainer.tabIndex = 0;\n            element.style.touchAction = 'pan-x pan-y';\n            element.style.minHeight = '500px';\n            // tslint:disable-next-line:max-line-length\n            this.mainContainer = createElement('div', { id: this.pdfViewer.element.id + '_mainContainer', className: 'e-pv-main-container' });\n            this.mainContainer.appendChild(this.viewerMainContainer);\n            element.appendChild(this.mainContainer);\n            if (this.pdfViewer.toolbarModule) {\n                this.navigationPane.initializeNavigationPane();\n                toolbarDiv = this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);\n            }\n            if (toolbarDiv) {\n                // tslint:disable-next-line:max-line-length\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 56);\n            }\n            else {\n                this.viewerContainer.style.height = this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height, 0);\n            }\n            // tslint:disable-next-line:max-line-length\n            var viewerWidth = (this.pdfViewer.element.clientWidth - (this.navigationPane.sideBarToolbar ? this.navigationPane.getViewerContainerLeft() : 0));\n            this.viewerContainer.style.width = viewerWidth + 'px';\n            this.viewerMainContainer.appendChild(this.viewerContainer);\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer = createElement('div', { id: this.pdfViewer.element.id + '_pageViewContainer', className: 'e-pv-page-container' });\n            this.viewerContainer.appendChild(this.pageContainer);\n            this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n            if (toolbarDiv && this.pdfViewer.thumbnailViewModule) {\n                this.pdfViewer.thumbnailViewModule.createThumbnailContainer();\n            }\n            // this.createPasswordPopup();\n            this.createPrintPopup();\n            this.waitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_loadingIndicator' });\n            this.viewerContainer.appendChild(this.waitingPopup);\n            createSpinner({ target: this.waitingPopup, cssClass: 'e-spin-center' });\n            this.setLoaderProperties(this.waitingPopup);\n            this.contextMenuModule = new ContextMenu(this.pdfViewer, this);\n            this.contextMenuModule.createContextMenu();\n            this.wireEvents();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.createTextSearchBox();\n            }\n            if (this.pdfViewer.documentPath) {\n                this.pdfViewer.load(this.pdfViewer.documentPath, null);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePageRender = function (documentData, password) {\n        this.documentId = this.createGUID();\n        this.viewerContainer.scrollTop = 0;\n        this.showLoadingIndicator(true);\n        this.hashId = ' ';\n        this.isFileName = false;\n        this.saveDocumentInfo();\n        documentData = this.checkDocumentData(documentData);\n        this.setFileName();\n        var jsonObject = this.constructJsonObject(documentData, password);\n        this.createAjaxRequest(jsonObject, documentData, password);\n    };\n    PdfViewerBase.prototype.createAjaxRequest = function (jsonObject, documentData, password) {\n        var _this = this;\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject)); // jshint ignore:line\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response; // jshint ignore:line\n                // tslint:disable-next-line:max-line-length\n                if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1 || typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                _this.requestSuccess(data, documentData, password);\n            }\n            else if (request.readyState === 4 && request.status === 400) { // jshint ignore:line\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.showLoadingIndicator(false);\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n        };\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.openNotificationPopup = function () {\n        this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('Server error'));\n        this.getElement('_notify').classList.add('e-pv-notification-large-content');\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.requestSuccess = function (data, documentData, password) {\n        if (data && data.pageCount !== undefined) {\n            this.pageCount = data.pageCount;\n            this.hashId = data.hashId;\n            this.documentLiveCount = data.documentLiveCount;\n            this.saveDocumentHashData();\n            this.pageRender(data);\n        }\n        else {\n            this.pageCount = 0;\n            this.currentPageNumber = 0;\n            if (data === 4) {\n                // 4 is error code for encrypted document.\n                this.renderPasswordPopup(documentData, password);\n            }\n            else if (data === 3) {\n                // 3 is error code for corrupted document.\n                this.renderCorruptPopup();\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateToolbarItems();\n            }\n        }\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.pageRender = function (data) {\n        this.document = null;\n        this.passwordDialogReset();\n        if (this.passwordPopup) {\n            this.passwordPopup.hide();\n        }\n        var pageIndex = 0;\n        this.initPageDiv(data);\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.isInitialLoading = true;\n            this.onWindowResize();\n            this.pdfViewer.magnificationModule.isInitialLoading = false;\n        }\n        this.isDocumentLoaded = true;\n        if (this.renderedPagesList.indexOf(pageIndex) === -1) {\n            this.createRequestForRender(pageIndex);\n            var pageNumber = pageIndex + 1;\n            if (this.pageSize[pageNumber]) {\n                var pageTop = this.getPageTop(pageNumber);\n                var viewerHeight = this.viewerContainer.clientHeight;\n                while (viewerHeight > pageTop) {\n                    if (this.pageSize[pageNumber]) {\n                        this.renderPageElement(pageNumber);\n                        this.createRequestForRender(pageNumber);\n                        pageTop = this.getPageTop(pageNumber);\n                        pageNumber = pageNumber + 1;\n                    }\n                }\n            }\n        }\n        this.showLoadingIndicator(false);\n        this.currentPageNumber = pageIndex + 1;\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.uploadedDocumentName = null;\n            this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber);\n            this.pdfViewer.toolbarModule.updateToolbarItems();\n        }\n    };\n    PdfViewerBase.prototype.renderPasswordPopup = function (documentData, password) {\n        if (!this.isPasswordAvailable) {\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.createPasswordPopup();\n            this.pdfViewer.fireDocumentLoadFailed(true, null);\n            this.passwordPopup.show();\n        }\n        else {\n            this.pdfViewer.fireDocumentLoadFailed(true, password);\n            this.promptElement.classList.add('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Invalid Password');\n            if (this.isFileName) {\n                this.document = documentData;\n            }\n            else {\n                this.document = 'data:application/pdf;base64,' + documentData;\n            }\n            this.passwordPopup.show();\n        }\n    };\n    PdfViewerBase.prototype.renderCorruptPopup = function () {\n        this.pdfViewer.fireDocumentLoadFailed(false, null);\n        this.createCorruptedPopup();\n        this.documentId = null;\n        this.corruptPopup.show();\n    };\n    PdfViewerBase.prototype.constructJsonObject = function (documentData, password) {\n        var jsonObject;\n        if (password) {\n            this.isPasswordAvailable = true;\n            // tslint:disable-next-line:max-line-length\n            jsonObject = { document: documentData, password: password, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        else {\n            this.isPasswordAvailable = false;\n            jsonObject = { document: documentData, zoomFactor: 1, isFileName: this.isFileName };\n        }\n        return jsonObject;\n    };\n    PdfViewerBase.prototype.checkDocumentData = function (documentData) {\n        var base64String = documentData.split('base64,')[1];\n        if (base64String === undefined) {\n            this.isFileName = true;\n            if (this.pdfViewer.fileName === null) {\n                // tslint:disable-next-line:max-line-length\n                var documentStringArray = (documentData.indexOf('\\\\') !== -1) ? documentData.split('\\\\') : documentData.split('/');\n                this.pdfViewer.fileName = documentStringArray[documentStringArray.length - 1];\n                base64String = documentData;\n            }\n        }\n        return base64String;\n    };\n    PdfViewerBase.prototype.setFileName = function () {\n        if (this.pdfViewer.fileName === null) {\n            if (this.pdfViewer.toolbarModule && this.pdfViewer.toolbarModule.uploadedDocumentName !== null) {\n                this.pdfViewer.fileName = this.pdfViewer.toolbarModule.uploadedDocumentName;\n            }\n            else {\n                this.pdfViewer.fileName = 'undefined.pdf';\n            }\n        }\n    };\n    PdfViewerBase.prototype.saveDocumentInfo = function () {\n        window.sessionStorage.setItem('currentDocument', this.documentId);\n        window.sessionStorage.setItem('serviceURL', this.pdfViewer.serviceUrl);\n        window.sessionStorage.setItem('unload', this.pdfViewer.serverActionSettings.unload);\n    };\n    PdfViewerBase.prototype.saveDocumentHashData = function () {\n        window.sessionStorage.setItem('hashId', this.hashId);\n        window.sessionStorage.setItem('documentLiveCount', this.documentLiveCount.toString());\n    };\n    PdfViewerBase.prototype.updateWaitingPopup = function (pageNumber) {\n        if (this.pageSize[pageNumber].top != null) {\n            // tslint:disable-next-line:max-line-length\n            var pageCurrentRect = this.getElement('_pageDiv_' + pageNumber).getBoundingClientRect();\n            var waitingPopup = this.getElement('_pageDiv_' + pageNumber).firstChild.firstChild;\n            if (pageCurrentRect.top < 0) {\n                if (this.toolbarHeight + (this.viewerContainer.clientHeight / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                    waitingPopup.style.top = ((this.viewerContainer.clientHeight / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                }\n                else {\n                    if (this.toolbarHeight + (pageCurrentRect.bottom / 2) - pageCurrentRect.top < pageCurrentRect.height) {\n                        waitingPopup.style.top = ((pageCurrentRect.bottom / 2) - pageCurrentRect.top) - this.toolbarHeight + 'px';\n                    }\n                }\n            }\n            else {\n                waitingPopup.style.top = this.viewerContainer.clientHeight / 2 + 'px';\n            }\n            if (this.getZoomFactor() > 1.25 && pageCurrentRect.width > this.viewerContainer.clientWidth) {\n                waitingPopup.style.left = this.viewerContainer.clientWidth / 2 + 'px';\n            }\n            else {\n                waitingPopup.style.left = pageCurrentRect.width / 2 + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.createWaitingPopup = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        this.waitingPopup = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageNumber);\n        if (this.waitingPopup) {\n            createSpinner({ target: this.waitingPopup });\n            this.setLoaderProperties(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.showLoadingIndicator = function (isShow) {\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.showPageLoadingIndicator = function (pageIndex, isShow) {\n        this.waitingPopup = this.getElement('_pageDiv_' + pageIndex);\n        if (this.waitingPopup != null) {\n            if (isShow) {\n                showSpinner(this.waitingPopup);\n            }\n            else {\n                hideSpinner(this.waitingPopup);\n            }\n            this.updateWaitingPopup(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.showPrintLoadingIndicator = function (isShow) {\n        this.printWaitingPopup = this.getElement('_printLoadingIndicator');\n        if (this.printWaitingPopup != null) {\n            if (isShow) {\n                this.printMainContainer.style.display = 'block';\n                showSpinner(this.printWaitingPopup);\n            }\n            else {\n                this.printMainContainer.style.display = 'none';\n                hideSpinner(this.printWaitingPopup);\n            }\n        }\n    };\n    PdfViewerBase.prototype.setLoaderProperties = function (element) {\n        var spinnerElement = element.firstChild.firstChild.firstChild;\n        spinnerElement.style.height = '48px';\n        spinnerElement.style.width = '48px';\n        spinnerElement.style.transformOrigin = '24px 24px 24px';\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateScrollTop = function (pageNumber) {\n        // tslint:disable-next-line\n        if (this.pageSize[pageNumber] != null) {\n            this.viewerContainer.scrollTop = this.getPageTop(pageNumber);\n            this.renderElementsVirtualScroll(pageNumber);\n            if (this.renderedPagesList.indexOf(pageNumber) === -1) {\n                this.createRequestForRender(pageNumber);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.zoomFactor;\n        }\n        else {\n            // default value\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getMagnified = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isMagnified;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPinchScrolled = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPinchScrolled;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesPinchZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagePinchZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getPagesZoomed = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isPagesZoomed;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    PdfViewerBase.prototype.getRerenderCanvasCreated = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;\n        }\n        else {\n            // default value\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getDocumentId = function () {\n        return this.documentId;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.download = function () {\n        if (this.pageCount > 0) {\n            this.createRequestForDownload();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.clear = function (isTriggerEvent) {\n        this.isPasswordAvailable = false;\n        this.isDocumentLoaded = false;\n        this.initiateTextSelectMode();\n        if (this.navigationPane.sideBarToolbar) {\n            this.navigationPane.clear();\n        }\n        if (this.pdfViewer.enableToolbar && this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.enableToolbar && this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.clearIntervalTimer();\n        }\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        if (this.pdfViewer.textSearchModule) {\n            this.pdfViewer.textSearchModule.resetTextSearch();\n        }\n        if (this.pageSize) {\n            this.pageSize = [];\n        }\n        if (this.renderedPagesList) {\n            this.renderedPagesList = [];\n        }\n        while (this.pageContainer.hasChildNodes()) {\n            this.pageContainer.removeChild(this.pageContainer.lastChild);\n        }\n        if (this.pageCount > 0) {\n            this.unloadDocument(null);\n        }\n        window.sessionStorage.clear();\n        if (this.pinchZoomStorage) {\n            this.pinchZoomStorage = [];\n        }\n        if (isTriggerEvent && this.pageCount > 0) {\n            this.pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);\n        }\n        this.pdfViewer.fileName = null;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.destroy = function () {\n        this.unWireEvents();\n        this.clear(false);\n        this.pageContainer.parentNode.removeChild(this.pageContainer);\n        this.viewerContainer.parentNode.removeChild(this.viewerContainer);\n        if (this.pdfViewer.thumbnailViewModule) {\n            this.pdfViewer.thumbnailViewModule.clear();\n        }\n        if (this.pdfViewer.bookmarkViewModule) {\n            this.pdfViewer.bookmarkViewModule.clear();\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.unloadDocument = function (e) {\n        var _this = this;\n        var documentId = window.sessionStorage.getItem('hashId');\n        var documentLiveCount = window.sessionStorage.getItem('documentLiveCount');\n        if (documentId !== null) {\n            var jsonObject = { hashId: documentId, documentLiveCount: documentLiveCount };\n            var request_1 = new XMLHttpRequest();\n            request_1.open('POST', window.sessionStorage.getItem('serviceURL') + '/' + window.sessionStorage.getItem('unload'), false);\n            request_1.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            request_1.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request_1.onreadystatechange = function (event) {\n                if (request_1.readyState === 4 && request_1.status === 400) {\n                    // error message\n                    _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n                }\n            };\n            // tslint:disable-next-line\n            request_1.onerror = function (event) {\n                _this.pdfViewer.fireAjaxRequestFailed(request_1.status, request_1.statusText);\n            };\n        }\n        window.sessionStorage.removeItem('hashId');\n        window.sessionStorage.removeItem('documentLiveCount');\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.focusViewerContainer = function () {\n        var scrollX = window.scrollX;\n        var scrollY = window.scrollY;\n        this.viewerContainer.focus();\n        window.scrollTo(scrollX, scrollY);\n    };\n    PdfViewerBase.prototype.createCorruptedPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_corrupted_popup', className: 'e-pv-corrupted-popup' });\n        this.pageContainer.appendChild(popupElement);\n        this.corruptPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: true, isModal: true,\n            // tslint:disable-next-line:max-line-length\n            header: '<div class=\"e-pv-corrupted-popup-header\"> ' + this.pdfViewer.localeObj.getConstant('File Corrupted') + '</div>', content: '<div id=\"template\" class=\"e-pv-notification-icon\"> <div class=\"e-pv-corrupted-popup-content\">' + this.pdfViewer.localeObj.getConstant('File Corrupted Content') + '</div></div>', visible: false,\n            // tslint:disable-next-line:max-line-length\n            buttons: [{ buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true }, click: this.closeCorruptPopup.bind(this) }],\n            target: this.pdfViewer.element, beforeClose: function () {\n                _this.corruptPopup.destroy();\n                _this.getElement('_corrupted_popup').remove();\n                _this.corruptPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        this.corruptPopup.appendTo(popupElement);\n    };\n    PdfViewerBase.prototype.closeCorruptPopup = function () {\n        this.corruptPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.createPrintPopup = function () {\n        var element = document.getElementById(this.pdfViewer.element.id);\n        this.printMainContainer = createElement('div', { id: this.pdfViewer.element.id + '_printcontainer',\n            className: 'e-pv-print-popup-container' });\n        element.appendChild(this.printMainContainer);\n        this.printMainContainer.style.display = 'none';\n        this.printWaitingPopup = createElement('div', { id: this.pdfViewer.element.id + '_printLoadingIndicator',\n            className: 'e-pv-print-loading-container' });\n        this.printMainContainer.appendChild(this.printWaitingPopup);\n        createSpinner({ target: this.printWaitingPopup, cssClass: 'e-spin-center' });\n        this.setLoaderProperties(this.printWaitingPopup);\n    };\n    PdfViewerBase.prototype.createPasswordPopup = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_password_popup', className: 'e-pv-password-popup' });\n        this.promptElement = createElement('span', { id: this.pdfViewer.element.id + '_prompt' });\n        this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n        popupElement.appendChild(this.promptElement);\n        var inputContainer = createElement('span', { className: 'e-input-group e-pv-password-input' });\n        // tslint:disable-next-line:max-line-length\n        this.passwordInput = createElement('input', { id: this.pdfViewer.element.id + '_password_input', className: 'e-input' });\n        this.passwordInput.type = 'password';\n        this.passwordInput.name = 'Required';\n        inputContainer.appendChild(this.passwordInput);\n        popupElement.appendChild(inputContainer);\n        this.pageContainer.appendChild(popupElement);\n        this.passwordPopup = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true,\n            header: this.pdfViewer.localeObj.getConstant('Password Protected'), visible: false, buttons: [\n                {\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.applyPassword.bind(this)\n                },\n                { buttonModel: { content: this.pdfViewer.localeObj.getConstant('Cancel') }, click: this.passwordCancelClick.bind(this) }\n            ], close: this.passwordCancel.bind(this), target: this.pdfViewer.element, beforeClose: function () {\n                _this.passwordPopup.destroy();\n                _this.getElement('_password_popup').remove();\n                _this.passwordPopup = null;\n                _this.waitingPopup = _this.getElement('_loadingIndicator');\n                if (_this.waitingPopup != null) {\n                    hideSpinner(_this.waitingPopup);\n                }\n            }\n        });\n        this.passwordPopup.appendTo(popupElement);\n        this.passwordInput.addEventListener('keyup', function () {\n            if (_this.passwordInput.value === '') {\n                _this.passwordDialogReset();\n            }\n        });\n        this.passwordInput.addEventListener('focus', function () {\n            _this.passwordInput.parentElement.classList.add('e-input-focus');\n        });\n        this.passwordInput.addEventListener('blur', function () {\n            _this.passwordInput.parentElement.classList.remove('e-input-focus');\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.passwordCancel = function (args) {\n        if (args.isInteraction) {\n            this.clear(false);\n            this.passwordDialogReset();\n            this.passwordInput.value = '';\n        }\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordCancelClick = function () {\n        this.clear(false);\n        this.passwordDialogReset();\n        this.passwordPopup.hide();\n        this.waitingPopup = this.getElement('_loadingIndicator');\n        if (this.waitingPopup !== null) {\n            hideSpinner(this.waitingPopup);\n        }\n    };\n    PdfViewerBase.prototype.passwordDialogReset = function () {\n        if (this.promptElement) {\n            this.promptElement.classList.remove('e-pv-password-error');\n            this.promptElement.textContent = this.pdfViewer.localeObj.getConstant('Enter Password');\n            this.passwordInput.value = '';\n        }\n    };\n    PdfViewerBase.prototype.applyPassword = function () {\n        var password = this.passwordInput.value;\n        if (password !== '') {\n            this.pdfViewer.load(this.document, password);\n        }\n        this.focusViewerContainer();\n    };\n    PdfViewerBase.prototype.wireEvents = function () {\n        this.viewerContainer.addEventListener('scroll', this.viewerContainerOnScroll, true);\n        this.viewerContainer.addEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.addEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.addEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.addEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.addEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.addEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.addEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.addEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dblclick', this.viewerContainerOnClick);\n        this.viewerContainer.addEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.pdfViewer.element.addEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.addEventListener('mouseup', this.onWindowMouseUp);\n        window.addEventListener('touchend', this.onWindowTouchEnd);\n        window.addEventListener('unload', this.unloadDocument);\n        window.addEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.addEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.addEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.addEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.addEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.addEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.addEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.addEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.addEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    PdfViewerBase.prototype.unWireEvents = function () {\n        this.viewerContainer.removeEventListener('scroll', this.viewerContainerOnScroll, true);\n        this.viewerContainer.removeEventListener('mousedown', this.viewerContainerOnMousedown);\n        this.viewerContainer.removeEventListener('mouseup', this.viewerContainerOnMouseup);\n        this.viewerContainer.removeEventListener('wheel', this.viewerContainerOnMouseWheel);\n        this.viewerContainer.removeEventListener('mousemove', this.viewerContainerOnMousemove);\n        this.viewerContainer.removeEventListener('mouseleave', this.viewerContainerOnMouseLeave);\n        this.viewerContainer.removeEventListener('mouseenter', this.viewerContainerOnMouseEnter);\n        this.viewerContainer.removeEventListener('mouseover', this.viewerContainerOnMouseOver);\n        this.viewerContainer.removeEventListener('click', this.viewerContainerOnClick);\n        this.viewerContainer.removeEventListener('dragstart', this.viewerContainerOnDragStart);\n        this.viewerContainer.removeEventListener('contextmenu', this.viewerContainerOnContextMenuClick);\n        this.pdfViewer.element.removeEventListener('keydown', this.viewerContainerOnKeyDown);\n        window.removeEventListener('mouseup', this.onWindowMouseUp);\n        window.removeEventListener('unload', this.unloadDocument);\n        window.removeEventListener('resize', this.onWindowResize);\n        // tslint:disable-next-line:max-line-length\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n            this.viewerContainer.removeEventListener('pointerdown', this.viewerContainerOnPointerDown);\n            this.viewerContainer.removeEventListener('pointermove', this.viewerContainerOnPointerMove);\n            this.viewerContainer.removeEventListener('pointerup', this.viewerContainerOnPointerEnd);\n            this.viewerContainer.removeEventListener('pointerleave', this.viewerContainerOnPointerEnd);\n        }\n        else {\n            this.viewerContainer.removeEventListener('touchstart', this.viewerContainerOnTouchStart);\n            this.viewerContainer.removeEventListener('touchmove', this.viewerContainerOnTouchMove);\n            this.viewerContainer.removeEventListener('touchend', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchleave', this.viewerContainerOnTouchEnd);\n            this.viewerContainer.removeEventListener('touchcancel', this.viewerContainerOnTouchEnd);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateZoomValue = function () {\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.isAutoZoom) {\n                this.pdfViewer.magnificationModule.fitToAuto();\n            }\n            else if (this.pdfViewer.magnificationModule.fitType === 'fitToWidth') {\n                this.pdfViewer.magnificationModule.fitToWidth();\n            }\n        }\n        for (var i = 0; i < this.pageCount; i++) {\n            this.applyLeftPosition(i);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiatePanning = function () {\n        this.isPanMode = true;\n        this.textLayer.modifyTextCursor(false);\n        this.disableTextSelectionMode();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.initiateTextSelectMode = function () {\n        this.isPanMode = false;\n        this.viewerContainer.style.cursor = 'auto';\n        if (this.pdfViewer.textSelectionModule) {\n            this.textLayer.modifyTextCursor(true);\n            this.pdfViewer.textSelectionModule.enableTextSelectionMode();\n        }\n    };\n    PdfViewerBase.prototype.applySelection = function () {\n        if (window.getSelection().anchorNode !== null) {\n            this.pdfViewer.textSelectionModule.applySpanForSelection();\n        }\n        this.isViewerContainerDoubleClick = false;\n    };\n    PdfViewerBase.prototype.preventTouchEvent = function (event) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (!this.isPanMode && this.pdfViewer.enableTextSelection && !this.isTextSelectionDisabled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initPageDiv = function (pageValues) {\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateTotalPage();\n        }\n        if (this.pageCount > 0) {\n            var topValue = 0;\n            var pageLimit = 0;\n            if (this.pageCount > 100) {\n                // to render 100 pages intially.\n                pageLimit = 100;\n                this.pageLimit = pageLimit;\n            }\n            else {\n                pageLimit = this.pageCount;\n            }\n            for (var i = 0; i < pageLimit; i++) {\n                var pageSize = pageValues.pageSizes[i].split(',');\n                if (pageValues.pageSizes[i - 1] !== null && i !== 0) {\n                    var previousPageHeight = pageValues.pageSizes[i - 1].split(',');\n                    topValue = this.pageGap + parseFloat(previousPageHeight[1]) + topValue;\n                }\n                else {\n                    topValue = this.pageGap;\n                }\n                var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                this.pageSize.push(size);\n            }\n            var limit = this.pageCount < 10 ? this.pageCount : 10;\n            for (var i = 0; i < limit; i++) {\n                this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n            }\n            // tslint:disable-next-line:max-line-length\n            this.pageContainer.style.height = this.getPageTop(this.pageSize.length - 1) + this.getPageHeight(this.pageSize.length - 1) + 'px';\n            this.pageContainer.style.position = 'relative';\n            if (this.pageLimit === 100) {\n                var pageDiv = this.getElement('_pageDiv_' + this.pageLimit);\n                if (pageDiv === null && this.pageLimit < this.pageCount) {\n                    Promise.all([this.renderPagesVirtually()]);\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderElementsVirtualScroll = function (pageNumber) {\n        var pageValue = pageNumber + 1;\n        if (pageValue > this.pageCount) {\n            pageValue = this.pageCount;\n        }\n        for (var i = pageNumber - 1; i <= pageValue; i++) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        var lowerPageValue = pageNumber - 3;\n        if (lowerPageValue < 0) {\n            lowerPageValue = 0;\n        }\n        for (var i = pageNumber - 1; i >= lowerPageValue; i--) {\n            if (i !== -1) {\n                this.renderPageElement(i);\n            }\n        }\n        for (var j = 0; j < this.pageCount; j++) {\n            if (!((lowerPageValue <= j) && (j <= pageValue))) {\n                var pageDiv = this.getElement('_pageDiv_' + j);\n                var pageCanvas = this.getElement('_pageCanvas_' + j);\n                var textLayer = this.getElement('_textLayer_' + j);\n                if (pageCanvas) {\n                    pageCanvas.parentNode.removeChild(pageCanvas);\n                    if (textLayer) {\n                        if (this.pdfViewer.textSelectionModule && textLayer.childNodes.length !== 0 && !this.isTextSelectionDisabled) {\n                            this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j, true);\n                        }\n                        textLayer.parentNode.removeChild(textLayer);\n                    }\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n                if (pageDiv) {\n                    pageDiv.parentNode.removeChild(pageDiv);\n                    var indexInArray = this.renderedPagesList.indexOf(j);\n                    if (indexInArray !== -1) {\n                        this.renderedPagesList.splice(indexInArray, 1);\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageElement = function (i) {\n        var pageDiv = this.getElement('_pageDiv_' + i);\n        var canvas = this.getElement('_pageCanvas_' + i);\n        if (canvas == null && pageDiv == null && i < this.pageSize.length) {\n            // tslint:disable-next-line\n            this.renderPageContainer(i, this.getPageWidth(i), this.getPageHeight(i), this.getPageTop(i));\n        }\n    };\n    PdfViewerBase.prototype.renderPagesVirtually = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var proxy;\n            var _this = this;\n            return __generator(this, function (_a) {\n                proxy = this;\n                setTimeout(function () { _this.initiateRenderPagesVirtually(proxy); }, 500);\n                return [2 /*return*/];\n            });\n        });\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.initiateRenderPagesVirtually = function (proxy) {\n        var _this = this;\n        var jsonObject = { hashId: proxy.hashId, isCompletePageSizeNotReceived: true };\n        var request = new XMLHttpRequest();\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.load);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1 || typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    // tslint:disable-next-line\n                    var pageValues = data;\n                    var topValue = proxy.pageSize[proxy.pageLimit - 1].top;\n                    for (var i = proxy.pageLimit; i < proxy.pageCount; i++) {\n                        var pageSize = pageValues.pageSizes[i].split(',');\n                        if (proxy.pageSize[i - 1] !== null && i !== 0) {\n                            var previousPageHeight = proxy.pageSize[i - 1].height;\n                            topValue = _this.pageGap + parseFloat(previousPageHeight) + topValue;\n                        }\n                        var size = { width: parseFloat(pageSize[0]), height: parseFloat(pageSize[1]), top: topValue };\n                        _this.pageSize.push(size);\n                    }\n                    // tslint:disable-next-line:max-line-length\n                    _this.pageContainer.style.height = _this.getPageTop(_this.pageSize.length - 1) + _this.getPageHeight(_this.pageSize.length - 1) + 'px';\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText); // jshint ignore:line\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderPage = function (data, pageIndex) {\n        var _this = this;\n        if (data) {\n            var pageWidth_1 = this.getPageWidth(pageIndex);\n            var pageHeight_1 = this.getPageHeight(pageIndex);\n            // tslint:disable-next-line:max-line-length\n            var canvas_1 = this.getElement('_pageCanvas_' + pageIndex);\n            var pageDiv = this.getElement('_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.width = pageWidth_1 + 'px';\n                pageDiv.style.height = pageHeight_1 + 'px';\n                pageDiv.style.top = this.getPageTop(pageIndex) + 'px';\n                pageDiv.style.left = this.updateLeftPosition(pageIndex) + 'px';\n            }\n            if (canvas_1) {\n                canvas_1.style.width = pageWidth_1 + 'px';\n                canvas_1.style.height = pageHeight_1 + 'px';\n                var context_1 = canvas_1.getContext('2d');\n                // tslint:disable-next-line\n                var imageData = data['image'];\n                // tslint:disable-next-line\n                var matrix_1 = data['transformationMatrix'];\n                if (imageData) {\n                    var image_1 = new Image();\n                    image_1.onload = function () {\n                        // tslint:disable-next-line\n                        if (parseInt((pageWidth_1 * 1.5).toString()) === image_1.width) {\n                            if (!isNaN(parseFloat(canvas_1.style.width))) {\n                                canvas_1.style.width = pageWidth_1 + 'px';\n                                canvas_1.style.height = pageHeight_1 + 'px';\n                                canvas_1.height = pageHeight_1 * 2;\n                                canvas_1.width = pageWidth_1 * 2;\n                            }\n                            // tslint:disable-next-line\n                            context_1.setTransform(matrix_1.Elements[0], matrix_1.Elements[1], matrix_1.Elements[2], matrix_1.Elements[3], matrix_1.Elements[4], matrix_1.Elements[5]);\n                            context_1.drawImage(image_1, 0, 0, canvas_1.width, canvas_1.height);\n                            _this.showPageLoadingIndicator(pageIndex, false);\n                            if (pageIndex === 0 && _this.getZoomFactor() === 1 && _this.isDocumentLoaded) {\n                                _this.pdfViewer.fireDocumentLoad();\n                                _this.isDocumentLoaded = false;\n                            }\n                            if (_this.pdfViewer.magnificationModule) {\n                                _this.pdfViewer.magnificationModule.rerenderCountIncrement();\n                            }\n                        }\n                    };\n                    image_1.src = imageData;\n                    if (this.pdfViewer.magnificationModule) {\n                        this.pdfViewer.magnificationModule.pushImageObjects(image_1);\n                    }\n                }\n                var aElement = pageDiv.getElementsByTagName('a');\n                if (aElement.length !== 0) {\n                    for (var index = aElement.length - 1; index >= 0; index--) {\n                        aElement[index].parentNode.removeChild(aElement[index]);\n                    }\n                }\n                if (this.pdfViewer.enableHyperlink && this.pdfViewer.linkAnnotationModule) {\n                    this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data, pageIndex);\n                }\n                this.renderTextContent(data, pageIndex);\n                if (this.pdfViewer.textSelectionModule && !this.isTextSelectionDisabled) {\n                    this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);\n                }\n                if (this.pdfViewer.textSearchModule) {\n                    if (this.pdfViewer.textSearchModule.isTextSearch) {\n                        this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);\n                    }\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.renderTextContent = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var texts = data['textContent'];\n        // tslint:disable-next-line\n        var bounds = data['textBounds'];\n        var textLayer = this.getElement('_textLayer_' + pageIndex);\n        if (textLayer) {\n            if (textLayer.childNodes.length === 0) {\n                this.textLayer.renderTextContents(pageIndex, texts, bounds);\n            }\n            else {\n                this.textLayer.resizeTextContents(pageIndex, texts, bounds);\n            }\n        }\n    };\n    PdfViewerBase.prototype.renderPageContainer = function (pageNumber, pageWidth, pageHeight, topValue) {\n        // tslint:disable-next-line:max-line-length\n        var pageDiv = createElement('div', { id: this.pdfViewer.element.id + '_pageDiv_' + pageNumber, className: 'e-pv-page-div' });\n        pageDiv.style.width = pageWidth + 'px';\n        pageDiv.style.height = pageHeight + 'px';\n        pageDiv.style.left = this.updateLeftPosition(pageNumber) + 'px';\n        pageDiv.style.top = topValue + 'px';\n        this.pageContainer.appendChild(pageDiv);\n        this.pageContainer.style.width = this.viewerContainer.clientWidth + 'px';\n        this.createWaitingPopup(pageNumber);\n        this.orderPageDivElements(pageDiv, pageNumber);\n        this.renderPageCanvas(pageDiv, pageWidth, pageHeight, pageNumber);\n    };\n    PdfViewerBase.prototype.orderPageDivElements = function (pageDiv, pageIndex) {\n        var nextElement = this.getElement('_pageDiv_' + (pageIndex + 1));\n        if (nextElement) {\n            this.pageContainer.insertBefore(pageDiv, nextElement);\n        }\n        else {\n            this.pageContainer.appendChild(pageDiv);\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.renderPageCanvas = function (pageDiv, pageWidth, pageHeight, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var pageCanvas = createElement('canvas', { id: this.pdfViewer.element.id + '_pageCanvas_' + pageNumber, className: 'e-pv-page-canvas' });\n        pageCanvas.width = pageWidth;\n        pageCanvas.height = pageHeight;\n        pageDiv.appendChild(pageCanvas);\n        this.textLayer.addTextLayer(pageNumber, pageWidth, pageHeight, pageDiv);\n        return pageCanvas;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.updateLeftPosition = function (pageIndex) {\n        var leftPosition;\n        // tslint:disable-next-line:max-line-length\n        leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.getPageWidth(pageIndex)) / 2;\n        // tslint:disable-next-line:max-line-length\n        if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n            leftPosition = this.pageLeft;\n        }\n        return leftPosition;\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.applyLeftPosition = function (pageIndex) {\n        var leftPosition;\n        if (this.pageSize[pageIndex]) {\n            // tslint:disable-next-line:max-line-length\n            leftPosition = (this.viewerContainer.getBoundingClientRect().width - this.pageSize[pageIndex].width * this.getZoomFactor()) / 2;\n            // tslint:disable-next-line:max-line-length\n            if (leftPosition < 0 || (this.pdfViewer.magnificationModule ? ((this.pdfViewer.magnificationModule.isAutoZoom && this.getZoomFactor() < 1) || this.pdfViewer.magnificationModule.fitType === 'fitToWidth') : false)) {\n                leftPosition = this.pageLeft;\n            }\n            // tslint:disable-next-line:max-line-length\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            if (pageDiv) {\n                pageDiv.style.left = leftPosition + 'px';\n            }\n        }\n    };\n    PdfViewerBase.prototype.updatePageHeight = function (viewerHeight, toolbarHeight) {\n        return ((viewerHeight - toolbarHeight) / viewerHeight) * 100 + '%';\n    };\n    PdfViewerBase.prototype.initiatePageViewScrollChanged = function () {\n        if ((this.scrollPosition * this.getZoomFactor()) !== this.viewerContainer.scrollTop) {\n            this.scrollPosition = this.viewerContainer.scrollTop;\n            this.pageViewScrollChanged(this.currentPageNumber);\n        }\n    };\n    PdfViewerBase.prototype.renderCountIncrement = function () {\n        if (this.pdfViewer.magnificationModule) {\n            this.pdfViewer.magnificationModule.renderCountIncrement();\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.pageViewScrollChanged = function (currentPageNumber) {\n        this.reRenderedCount = 0;\n        var currentPageIndex = currentPageNumber - 1;\n        if (currentPageNumber !== this.previousPage && currentPageNumber <= this.pageCount) {\n            if (this.renderedPagesList.indexOf(currentPageIndex) === -1 && !this.getMagnified()) {\n                this.createRequestForRender(currentPageIndex);\n                this.renderCountIncrement();\n            }\n        }\n        if (!(this.getMagnified() || this.getPagesPinchZoomed())) {\n            var previous = currentPageIndex - 1;\n            var canvas = this.getElement('_pageCanvas_' + previous);\n            if (canvas !== null) {\n                if (this.renderedPagesList.indexOf(previous) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(previous);\n                    this.renderCountIncrement();\n                }\n            }\n            var next = currentPageIndex + 1;\n            if (next < this.pageCount) {\n                if (this.renderedPagesList.indexOf(next) === -1 && !this.getMagnified()) {\n                    this.createRequestForRender(next);\n                    var pageHeight = this.getPageHeight(next);\n                    while (this.viewerContainer.clientHeight > pageHeight) {\n                        next = next + 1;\n                        if (next < this.pageCount) {\n                            this.renderPageElement(next);\n                            this.createRequestForRender(next);\n                            pageHeight += this.getPageHeight(next);\n                            this.renderCountIncrement();\n                        }\n                    }\n                }\n            }\n        }\n    };\n    PdfViewerBase.prototype.downloadDocument = function (blobUrl) {\n        var anchorElement = createElement('a');\n        if (anchorElement.click) {\n            anchorElement.href = blobUrl;\n            anchorElement.target = '_parent';\n            if ('download' in anchorElement) {\n                anchorElement.download = this.pdfViewer.fileName;\n            }\n            (document.body || document.documentElement).appendChild(anchorElement);\n            anchorElement.click();\n            anchorElement.parentNode.removeChild(anchorElement);\n        }\n        else {\n            if (window.top === window &&\n                blobUrl.split('#')[0] === window.location.href.split('#')[0]) {\n                var padCharacter = blobUrl.indexOf('?') === -1 ? '?' : '&';\n                blobUrl = blobUrl.replace(/#|$/, padCharacter + '$&');\n            }\n            window.open(blobUrl, '_parent');\n        }\n    };\n    PdfViewerBase.prototype.createRequestForDownload = function () {\n        var _this = this;\n        var jsonObject;\n        jsonObject = { hashId: this.hashId };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.download);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8'); // jshint ignore:line\n        request.responseType = 'text';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) { // jshint ignore:line\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1) {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    var blobUrl = _this.createBlobUrl(data.split('base64,')[1], 'application/pdf');\n                    _this.downloadDocument(blobUrl);\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    PdfViewerBase.prototype.createRequestForRender = function (pageIndex) {\n        var _this = this;\n        var canvas = this.getElement('_pageCanvas_' + pageIndex);\n        var oldCanvas = this.getElement('_oldCanvas_' + pageIndex);\n        if (!this.getPagesZoomed()) {\n            this.showPageLoadingIndicator(pageIndex, true);\n        }\n        else {\n            this.showPageLoadingIndicator(pageIndex, false);\n        }\n        if (canvas) {\n            if (!isNaN(parseFloat(canvas.style.width)) || oldCanvas) {\n                this.showPageLoadingIndicator(pageIndex, false);\n            }\n            // tslint:disable-next-line\n            var data = this.getStoredData(pageIndex);\n            if (data) {\n                this.renderPage(data, pageIndex);\n            }\n            else {\n                var noTileX = 1;\n                var noTileY = 1;\n                for (var x = 0; x < noTileX; x++) {\n                    var _loop_1 = function (y) {\n                        var jsonObject = void 0;\n                        // tslint:disable-next-line:max-line-length\n                        jsonObject = { xCoordinate: x, yCoordinate: y, pageNumber: pageIndex, documentId: this_1.documentId, hashId: this_1.hashId, zoomFactor: this_1.getZoomFactor() };\n                        var request = new XMLHttpRequest();\n                        request.open('POST', this_1.pdfViewer.serviceUrl + '/' + this_1.pdfViewer.serverActionSettings.renderPages);\n                        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n                        request.responseType = 'json';\n                        request.send(JSON.stringify(jsonObject));\n                        // tslint:disable-next-line\n                        request.onreadystatechange = function (event) {\n                            var proxy = _this;\n                            if (request.readyState === 4 && request.status === 200) {\n                                // tslint:disable-next-line\n                                var data_1 = event.currentTarget.response;\n                                // tslint:disable-next-line:max-line-length\n                                if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1 || navigator.userAgent.indexOf('Trident') !== -1 || typeof data_1 !== 'object') {\n                                    data_1 = JSON.parse(data_1);\n                                }\n                                if (data_1) {\n                                    if (data_1.image) {\n                                        proxy.storeWinData(data_1, pageIndex);\n                                        proxy.renderPage(data_1, pageIndex);\n                                    }\n                                }\n                            }\n                            else if (request.readyState === 4 && request.status === 400) {\n                                // error\n                                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                            }\n                        };\n                        // tslint:disable-next-line\n                        request.onerror = function (event) {\n                            _this.openNotificationPopup();\n                            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n                        };\n                    };\n                    var this_1 = this;\n                    for (var y = 0; y < noTileY; y++) {\n                        _loop_1(y);\n                    }\n                }\n            }\n            this.renderedPagesList.push(pageIndex);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.getStoredData = function (pageIndex) {\n        // tslint:disable-next-line\n        var storedData = this.getWindowSessionStorage(pageIndex) ? this.getWindowSessionStorage(pageIndex) : this.getPinchZoomPage(pageIndex);\n        // tslint:disable-next-line\n        var data = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            data = storedData;\n            if (!this.isPinchZoomStorage) {\n                data = JSON.parse(storedData);\n            }\n            this.isPinchZoomStorage = false;\n        }\n        return data;\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.storeWinData = function (data, pageIndex) {\n        // tslint:disable-next-line\n        var blobUrl = this.createBlobUrl(data['image'].split('base64,')[1], 'image/png');\n        // tslint:disable-next-line\n        var storeObject = {\n            // tslint:disable-next-line\n            image: blobUrl, transformationMatrix: data['transformationMatrix'], hyperlinks: data['hyperlinks'], hyperlinkBounds: data['hyperlinkBounds'], linkAnnotation: data['linkAnnotation'], linkPage: data['linkPage'], annotationLocation: data['annotationLocation'],\n            // tslint:disable-next-line\n            textContent: data['textContent'], textBounds: data['textBounds'], pageText: data['pageText']\n        };\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewer.magnificationModule ? this.pdfViewer.magnificationModule.checkZoomFactor() : true) {\n            this.manageSessionStorage(pageIndex, storeObject);\n        }\n        else {\n            this.pinchZoomStorage.push({ index: pageIndex, pinchZoomStorage: storeObject });\n        }\n    };\n    PdfViewerBase.prototype.getPinchZoomPage = function (pageIndex) {\n        // tslint:disable-next-line\n        for (var key in this.pinchZoomStorage) {\n            if (this.pinchZoomStorage.hasOwnProperty(key)) {\n                if (this.pinchZoomStorage[key].index === pageIndex) {\n                    this.isPinchZoomStorage = true;\n                    return this.pinchZoomStorage[key].pinchZoomStorage;\n                }\n            }\n        }\n        return null;\n    };\n    PdfViewerBase.prototype.getWindowSessionStorage = function (pageIndex) {\n        return window.sessionStorage.getItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor());\n    };\n    // tslint:disable-next-line\n    PdfViewerBase.prototype.manageSessionStorage = function (pageIndex, storeObject) {\n        if (this.pageCount > this.sessionLimit && window.sessionStorage.length > this.sessionLimit) {\n            var lowerPageValue = this.currentPageNumber - this.sessionLimit;\n            if (lowerPageValue < 0) {\n                lowerPageValue = 0;\n            }\n            var higherPageValue = this.currentPageNumber + this.sessionLimit;\n            if (higherPageValue > this.pageCount) {\n                higherPageValue = this.pageCount;\n            }\n            for (var i = 0; i <= this.pageCount; i++) {\n                if (!((lowerPageValue <= i) && (i < higherPageValue))) {\n                    window.sessionStorage.removeItem(this.documentId + '_' + i + '_' + this.getZoomFactor());\n                }\n            }\n        }\n        window.sessionStorage.setItem(this.documentId + '_' + pageIndex + '_' + this.getZoomFactor(), JSON.stringify(storeObject));\n    };\n    PdfViewerBase.prototype.createBlobUrl = function (base64String, contentType) {\n        var sliceSize = 512;\n        var byteCharacters = atob(base64String);\n        // tslint:disable-next-line\n        var byteArrays = [];\n        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            var slice = byteCharacters.slice(offset, offset + sliceSize);\n            // tslint:disable-next-line\n            var byteNumbers = new Array(slice.length);\n            for (var i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            // tslint:disable-next-line\n            var byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        var blob = new Blob(byteArrays, { type: contentType });\n        return URL.createObjectURL(blob);\n    };\n    PdfViewerBase.prototype.getRandomNumber = function () {\n        // tslint:disable-next-line\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            // tslint:disable-next-line\n            var random = Math.random() * 16 | 0, v = c == 'x' ? random : (random & 0x3 | 0x8);\n            return random.toString(16);\n        });\n    };\n    PdfViewerBase.prototype.createGUID = function () {\n        // tslint:disable-next-line:max-line-length\n        return 'Sync_PdfViewer_' + this.getRandomNumber();\n    };\n    PdfViewerBase.prototype.isClickedOnScrollBar = function (event) {\n        var isScrollBar = false;\n        this.setScrollDownValue(event.type, false);\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientWidth + this.viewerContainer.offsetLeft) < event.clientX && event.clientX < (this.viewerContainer.offsetWidth + this.viewerContainer.offsetLeft)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        // tslint:disable-next-line:max-line-length\n        if ((this.viewerContainer.clientHeight + this.viewerContainer.offsetTop) < event.clientY && event.clientY < (this.viewerContainer.offsetHeight + this.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n            this.setScrollDownValue(event.type, true);\n        }\n        return isScrollBar;\n    };\n    PdfViewerBase.prototype.setScrollDownValue = function (eventType, boolValue) {\n        if (eventType === 'mousedown') {\n            this.isScrollbarMouseDown = boolValue;\n        }\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.disableTextSelectionMode = function () {\n        this.isTextSelectionDisabled = true;\n        this.viewerContainer.classList.remove('e-enable-text-selection');\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        this.viewerContainer.classList.add('e-disable-text-selection');\n        this.viewerContainer.addEventListener('selectstart', function () { return false; });\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getElement = function (idString) {\n        return document.getElementById(this.pdfViewer.element.id + idString);\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageWidth = function (pageIndex) {\n        return this.pageSize[pageIndex].width * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageHeight = function (pageIndex) {\n        return this.pageSize[pageIndex].height * this.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    PdfViewerBase.prototype.getPageTop = function (pageIndex) {\n        return this.pageSize[pageIndex].top * this.getZoomFactor();\n    };\n    return PdfViewerBase;\n}());\nexport { PdfViewerBase };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\n/**\n * TextLayer module is used to handle the text content on the control.\n * @hidden\n */\nvar TextLayer = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextLayer(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        // tslint:disable-next-line\n        this.textBoundsArray = [];\n        this.closeNotification = function () {\n            _this.notifyDialog.hide();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextLayer.prototype.addTextLayer = function (pageNumber, pageWidth, pageHeight, pageDiv) {\n        var textDiv = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (!textDiv) {\n            // tslint:disable-next-line:max-line-length\n            var textLayer = createElement('div', { id: this.pdfViewer.element.id + '_textLayer_' + pageNumber, className: 'e-pv-text-layer' });\n            textLayer.style.width = pageWidth + 'px';\n            textLayer.style.height = pageHeight + 'px';\n            pageDiv.appendChild(textLayer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.renderTextContents = function (pageNumber, textContents, textBounds) {\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageNumber);\n        if (canvasElement && textLayer.childNodes.length === 0) {\n            for (var i = 0; i < textContents.length; i++) {\n                // tslint:disable-next-line\n                var bounds = textBounds[i];\n                // tslint:disable-next-line:max-line-length\n                var textDiv = createElement('div', { id: this.pdfViewer.element.id + '_text_' + pageNumber + '_' + i, className: 'e-pv-text' });\n                var textContent = textContents[i];\n                textContent = textContent.replace(/</g, '&lt;');\n                textContent = textContent.replace(/>/g, '&gt;');\n                textDiv.innerHTML = textContent.replace(/&nbsp;/g, ' ');\n                // tslint:disable-next-line\n                var newLine = textContents[i].replace(/  +/g, ' ');\n                if (newLine !== ' ') {\n                    textDiv.style.whiteSpace = 'pre';\n                }\n                this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, bounds);\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                textDiv.style.transform = 'scaleX(' + scale + ')';\n                textLayer.appendChild(textDiv);\n                this.resizeExcessDiv(textLayer, textDiv);\n                // tslint:disable-next-line:max-line-length\n                if (this.pdfViewer.textSelectionModule && this.pdfViewer.enableTextSelection && !this.pdfViewerBase.isTextSelectionDisabled) {\n                    textDiv.classList.add('e-pv-cursor');\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextLayer.prototype.resizeTextContents = function (pageNumber, textContents, textBounds) {\n        var textLayer = this.pdfViewerBase.getElement('_textLayer_' + pageNumber);\n        var canvasElement = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n        if (canvasElement) {\n            for (var i = 0; i < textLayer.childNodes.length; i++) {\n                // tslint:disable-next-line\n                var bounds = void 0;\n                var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + i);\n                if (textBounds) {\n                    bounds = textBounds[i];\n                    this.setStyleToTextDiv(textDiv, bounds.X, bounds.Y, bounds.Bottom, bounds.Width, bounds.Height, textBounds);\n                }\n                this.setTextElementProperties(textDiv);\n                var context = canvasElement.getContext('2d');\n                context.font = textDiv.style.fontSize + ' ' + textDiv.style.fontFamily;\n                var contextWidth = void 0;\n                if (textContents) {\n                    contextWidth = context.measureText(textContents[i].replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                else {\n                    contextWidth = context.measureText(textDiv.textContent.replace(/(\\r\\n|\\n|\\r)/gm, '')).width;\n                }\n                var scale = bounds.Width * this.pdfViewerBase.getZoomFactor() / contextWidth;\n                textDiv.style.transform = 'scaleX(' + scale + ')';\n                this.resizeExcessDiv(textLayer, textDiv);\n            }\n        }\n        else {\n            textLayer.parentElement.removeChild(textLayer);\n        }\n    };\n    TextLayer.prototype.setTextElementProperties = function (textDiv) {\n        textDiv.style.fontFamily = 'sans-serif';\n        textDiv.style.transformOrigin = '0%';\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.resizeTextContentsOnZoom = function (pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var renderObject = window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId() + '_' + pageNumber + '_' + this.getPreviousZoomFactor());\n        // tslint:disable-next-line\n        var textBounds = [];\n        var textContents = [];\n        if (renderObject) {\n            // tslint:disable-next-line\n            var data = JSON.parse(renderObject);\n            // tslint:disable-next-line\n            textBounds = data['textBounds'];\n            // tslint:disable-next-line\n            textContents = data['textContent'];\n        }\n        if (textBounds.length !== 0) {\n            this.textBoundsArray.push({ pageNumber: pageNumber, textBounds: textBounds });\n            this.resizeTextContents(pageNumber, textContents, textBounds);\n        }\n        else {\n            // tslint:disable-next-line\n            var textElements = this.textBoundsArray.filter(function (obj) {\n                return obj.pageNumber === pageNumber;\n            });\n            if (textElements) {\n                if (textElements.length !== 0) {\n                    // tslint:disable-next-line\n                    textBounds = textElements[0]['textBounds'];\n                    this.resizeTextContents(pageNumber, null, textBounds);\n                }\n            }\n        }\n    };\n    TextLayer.prototype.resizeExcessDiv = function (textLayer, textDiv) {\n        var textLayerPosition = textLayer.getBoundingClientRect();\n        var textDivPosition = textDiv.getBoundingClientRect();\n        // tslint:disable-next-line:max-line-length\n        if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {\n            // 'auto' width is set to reset the size of the div to its contents.\n            textDiv.style.width = 'auto';\n            // Client width gets reset by 'auto' width property which has the width of the content.\n            textDiv.style.width = textDiv.clientWidth + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearTextLayers = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            textLayers[i].style.display = 'block';\n            if (this.pdfViewerBase.getMagnified() && (this.getTextSelectionStatus() || this.getTextSearchStatus())) {\n                // tslint:disable-next-line:radix\n                var pageNumber = parseInt(textLayers[i].id.split('_textLayer_')[1]);\n                if (!(((lowerPageValue + 1) <= pageNumber) && (pageNumber <= (higherPageValue - 1)))) {\n                    textLayers[i].remove();\n                }\n            }\n            else if (this.pdfViewerBase.getPinchZoomed()) {\n                textLayers[i].remove();\n            }\n            else {\n                textLayers[i].remove();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.convertToSpan = function (pageNumber, divId, fromOffset, toOffset, textString, className) {\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageNumber + '_' + divId);\n        var textContent = textString.substring(fromOffset, toOffset);\n        var node = document.createTextNode(textContent);\n        if (className) {\n            var spanElement = createElement('span');\n            spanElement.className = className + ' e-pv-text';\n            spanElement.appendChild(node);\n            textDiv.appendChild(spanElement);\n        }\n        else {\n            textDiv.appendChild(node);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line:max-line-length\n    TextLayer.prototype.applySpanForSelection = function (startPage, endPage, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset) {\n        if (this.pdfViewer.textSelectionModule) {\n            for (var i = startPage; i <= endPage; i++) {\n                var startId = void 0;\n                var endId = void 0;\n                // tslint:disable-next-line\n                var textDivs = this.pdfViewerBase.getElement('_textLayer_' + i).childNodes;\n                if (i === startPage) {\n                    startId = anchorOffsetDiv;\n                    endId = textDivs.length - 1;\n                }\n                else if (i === endPage) {\n                    startId = 0;\n                    endId = focusOffsetDiv;\n                }\n                else {\n                    startId = 0;\n                    endId = textDivs.length - 1;\n                }\n                if (startPage === endPage) {\n                    startId = anchorOffsetDiv;\n                    endId = focusOffsetDiv;\n                }\n                for (var j = startId; j <= endId; j++) {\n                    var textDiv = this.pdfViewerBase.getElement('_text_' + i + '_' + j);\n                    var initId = void 0;\n                    var lastId = void 0;\n                    var length_1 = void 0;\n                    length_1 = textDiv.textContent.length;\n                    var textContent = textDiv.textContent;\n                    textDiv.textContent = '';\n                    if (j === startId) {\n                        if (i === startPage) {\n                            initId = anchorOffset;\n                        }\n                        else {\n                            initId = 0;\n                        }\n                        lastId = length_1;\n                        this.convertToSpan(i, j, 0, initId, textContent, null);\n                    }\n                    else if (j === endId && i === endPage) {\n                        initId = 0;\n                        lastId = focusOffset;\n                    }\n                    else {\n                        initId = 0;\n                        lastId = length_1;\n                    }\n                    if (startId === endId) {\n                        initId = anchorOffset;\n                        lastId = focusOffset;\n                    }\n                    this.convertToSpan(i, j, initId, lastId, textContent, 'e-pv-maintaincontent');\n                    if (j === endId && i === endPage) {\n                        this.convertToSpan(i, j, lastId, textContent.length, textContent, null);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.clearDivSelection = function () {\n        var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayers.length; i++) {\n            var childNodes = textLayers[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textDiv = childNodes[j];\n                var textContent = textDiv.textContent;\n                // tslint:disable-next-line:max-line-length\n                if (textDiv.childNodes.length > 1 || textDiv.childNodes.length === 1 && (textDiv.childNodes[0].tagName === 'SPAN')) {\n                    textDiv.textContent = '';\n                    textDiv.textContent = textContent;\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextLayer.prototype.setStyleToTextDiv = function (textDiv, left, top, bottom, width, height, textBounds) {\n        textDiv.style.left = left * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.top = top * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.bottom = bottom * this.pdfViewerBase.getZoomFactor() + 'px';\n        textDiv.style.width = width * this.pdfViewerBase.getZoomFactor() + 'px';\n        var textHeight = height * this.pdfViewerBase.getZoomFactor();\n        textDiv.style.height = textHeight + 'px';\n        if (textHeight > 11 && textBounds) {\n            textDiv.style.top = (parseFloat(textDiv.style.top) + 2) + 'px';\n            // tslint:disable-next-line:radix\n            textDiv.style.fontSize = (parseInt(height.toString()) * this.pdfViewerBase.getZoomFactor() - 2.6) + 'px';\n        }\n        else {\n            textDiv.style.fontSize = height * this.pdfViewerBase.getZoomFactor() + 'px';\n        }\n    };\n    TextLayer.prototype.getTextSelectionStatus = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            return this.pdfViewer.textSelectionModule.isTextSelection;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.modifyTextCursor = function (isAdd) {\n        var textLayerList = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n        for (var i = 0; i < textLayerList.length; i++) {\n            var childNodes = textLayerList[i].childNodes;\n            for (var j = 0; j < childNodes.length; j++) {\n                var textElement = childNodes[j];\n                if (isAdd) {\n                    textElement.classList.add('e-pv-cursor');\n                }\n                else {\n                    textElement.classList.remove('e-pv-cursor');\n                }\n            }\n        }\n    };\n    TextLayer.prototype.getPreviousZoomFactor = function () {\n        if (this.pdfViewer.magnificationModule) {\n            return this.pdfViewer.magnificationModule.previousZoomFactor;\n        }\n        else {\n            return 1;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.getTextSearchStatus = function () {\n        if (this.pdfViewer.textSearchModule) {\n            return this.pdfViewer.textSearchModule.isTextSearch;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * @private\n     */\n    TextLayer.prototype.createNotificationPopup = function (text) {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        var popupElement = createElement('div', { id: this.pdfViewer.element.id + '_notify', className: 'e-pv-notification-popup' });\n        this.pdfViewerBase.viewerContainer.appendChild(popupElement);\n        this.notifyDialog = new Dialog({\n            showCloseIcon: true, closeOnEscape: false, isModal: true, header: this.pdfViewer.localeObj.getConstant('PdfViewer'),\n            buttons: [{\n                    buttonModel: { content: this.pdfViewer.localeObj.getConstant('OK'), isPrimary: true },\n                    click: this.closeNotification.bind(this)\n                }],\n            content: '<div class=\"e-pv-notification-popup-content\">' + text + '</div>', target: this.pdfViewer.element,\n            beforeClose: function () {\n                _this.notifyDialog.destroy();\n                _this.pdfViewer.element.removeChild(popupElement);\n            }\n        });\n        this.notifyDialog.appendTo(popupElement);\n    };\n    return TextLayer;\n}());\nexport { TextLayer };\n","import { createElement, Browser } from '@syncfusion/ej2-base';\nimport { ContextMenu as Context } from '@syncfusion/ej2-navigations';\n/**\n * ContextMenu module is used to handle the context menus used in the control.\n * @hidden\n */\nvar ContextMenu = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ContextMenu(pdfViewer, pdfViewerBase) {\n        this.copyContextMenu = [];\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n        this.copyContextMenu = [{ text: this.pdfViewer.localeObj.getConstant('Copy') }];\n    }\n    /**\n     * @private\n     */\n    ContextMenu.prototype.createContextMenu = function () {\n        this.contextMenuElement = createElement('ul', { id: this.pdfViewer.element.id + '_context_menu' });\n        this.pdfViewer.element.appendChild(this.contextMenuElement);\n        this.contextMenuObj = new Context({\n            target: '#' + this.pdfViewerBase.viewerContainer.id, items: this.copyContextMenu,\n            beforeOpen: this.contextMenuOnBeforeOpen.bind(this), select: this.onMenuItemSelect.bind(this),\n            cssClass: 'e-pv-context-menu'\n        });\n        this.contextMenuObj.appendTo(this.contextMenuElement);\n        if (Browser.isDevice) {\n            this.contextMenuObj.animationSettings.effect = 'ZoomIn';\n        }\n        else {\n            this.contextMenuObj.animationSettings.effect = 'SlideDown';\n        }\n    };\n    ContextMenu.prototype.contextMenuOnBeforeOpen = function (args) {\n        if (this.pdfViewer.textSelectionModule) {\n            if (args.event) {\n                var isClickWithinSelectionBounds = this.isClickWithinSelectionBounds(args.event);\n                // tslint:disable-next-line:max-line-length\n                if (isClickWithinSelectionBounds) {\n                    if ((!args.event.target.classList.contains('e-pv-maintaincontent') && args.event.target.classList.contains('e-pv-text') || args.event.target.classList.contains('e-pv-text-layer'))) {\n                        args.cancel = true;\n                    }\n                }\n                else {\n                    args.cancel = true;\n                }\n            }\n        }\n        else {\n            args.cancel = true;\n        }\n    };\n    // tslint:disable-next-line\n    ContextMenu.prototype.isClickWithinSelectionBounds = function (event) {\n        var isWithin = false;\n        var bounds = this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.pdfViewerBase.currentPageNumber - 1);\n        if (bounds) {\n            for (var i = 0; i < bounds.length; i++) {\n                var currentBound = bounds[i];\n                if (this.getHorizontalValue(currentBound.left) < event.clientX && this.getHorizontalValue(currentBound.right) >\n                    event.clientX && this.getVerticalValue(currentBound.top) < event.clientY &&\n                    this.getVerticalValue(currentBound.bottom) > event.clientY) {\n                    isWithin = true;\n                    break;\n                }\n            }\n        }\n        return isWithin;\n    };\n    ContextMenu.prototype.getHorizontalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.left);\n    };\n    ContextMenu.prototype.getVerticalClientValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value - pageBounds.top);\n    };\n    ContextMenu.prototype.getHorizontalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.left;\n    };\n    ContextMenu.prototype.getVerticalValue = function (value) {\n        var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1));\n        var pageBounds = pageDiv.getBoundingClientRect();\n        return (value * this.pdfViewerBase.getZoomFactor()) + pageBounds.top;\n    };\n    ContextMenu.prototype.onMenuItemSelect = function (args) {\n        switch (args.item.text) {\n            case 'Copy':\n                if (this.pdfViewer.textSelectionModule) {\n                    this.pdfViewer.textSelectionModule.copyText();\n                    this.contextMenuObj.close();\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","/**\n * Magnification module\n */\nvar Magnification = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Magnification(pdfViewer, viewerBase) {\n        /**\n         * @private\n         */\n        this.zoomFactor = 1;\n        /**\n         * @private\n         */\n        this.previousZoomFactor = 1;\n        this.scrollWidth = 25;\n        this.zoomPercentages = [50, 75, 100, 125, 150, 200, 400];\n        this.isNotPredefinedZoom = false;\n        this.pinchStep = 0.02;\n        this.reRenderPageNumber = 0;\n        // tslint:disable-next-line\n        this.magnifyPageRerenderTimer = null;\n        // tslint:disable-next-line\n        this.rerenderOnScrollTimer = null;\n        // tslint:disable-next-line\n        this.rerenderInterval = null;\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.pageRerenderCount = 0;\n        this.imageObjects = [];\n        this.topValue = 0;\n        /**\n         * @private\n         */\n        this.fitType = null;\n        /**\n         * @private\n         */\n        this.isPinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isPagePinchZoomed = false;\n        /**\n         * @private\n         */\n        this.isRerenderCanvasCreated = false;\n        /**\n         * @private\n         */\n        this.isMagnified = false;\n        /**\n         * @private\n         */\n        this.isPagesZoomed = false;\n        /**\n         * @private\n         */\n        this.isPinchScrolled = false;\n        /**\n         * @private\n         */\n        this.isAutoZoom = false;\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = viewerBase;\n        this.zoomLevel = 2;\n    }\n    /**\n     * Zoom the PDF document to the given zoom value\n     * @param  {number} zoomValue\n     * @returns void\n     */\n    Magnification.prototype.zoomTo = function (zoomValue) {\n        if (zoomValue < 50) {\n            zoomValue = 50;\n        }\n        else if (zoomValue > 400) {\n            zoomValue = 400;\n        }\n        this.fitType = null;\n        this.isNotPredefinedZoom = false;\n        if (this.isAutoZoom && this.isInitialLoading) {\n            this.pdfViewerBase.onWindowResize();\n        }\n        else {\n            this.isAutoZoom = false;\n            this.onZoomChanged(zoomValue);\n        }\n        this.isInitialLoading = false;\n    };\n    /**\n     * Magnifies the page to the next value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomIn = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.lowerZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel >= 6) {\n            this.zoomLevel = 6;\n        }\n        else {\n            this.zoomLevel++;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Magnifies the page to the previous value in the zoom drop down list.\n     * @returns void\n     */\n    Magnification.prototype.zoomOut = function () {\n        if (this.fitType || this.isNotPredefinedZoom) {\n            this.zoomLevel = this.higherZoomLevel;\n            this.fitType = null;\n        }\n        this.isNotPredefinedZoom = false;\n        if (this.zoomLevel <= 0) {\n            this.zoomLevel = 0;\n        }\n        else {\n            this.zoomLevel--;\n        }\n        this.isAutoZoom = false;\n        this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);\n    };\n    /**\n     * Scales the page to fit the page width to the width of the container in the control.\n     * @returns void\n     */\n    Magnification.prototype.fitToWidth = function () {\n        this.isAutoZoom = false;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitToAuto = function () {\n        this.isAutoZoom = true;\n        var zoomValue = this.calculateFitZoomFactor('fitToWidth');\n        this.onZoomChanged(zoomValue);\n    };\n    /**\n     * Scales the page to fit the page in the container in the control.\n     * @param  {number} zoomValue\n     * @returns void\n     */\n    Magnification.prototype.fitToPage = function () {\n        var zoomValue = this.calculateFitZoomFactor('fitToPage');\n        this.isAutoZoom = false;\n        this.onZoomChanged(zoomValue);\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'hidden';\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top * this.zoomFactor;\n    };\n    /**\n     * Returns zoom factor for the fit zooms.\n     */\n    Magnification.prototype.calculateFitZoomFactor = function (type) {\n        var viewerWidth = this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;\n        var viewerHeight = this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;\n        var highestWidth = 0;\n        var highestHeight = 0;\n        this.fitType = type;\n        if (this.fitType === 'fitToWidth') {\n            var pageWidth = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageWidth = this.pdfViewerBase.pageSize[i].width;\n                if (pageWidth > highestWidth) {\n                    highestWidth = pageWidth;\n                }\n            }\n            var scaleX = ((viewerWidth - this.scrollWidth) / highestWidth);\n            if (this.isAutoZoom) {\n                this.fitType = null;\n                scaleX = Math.min(1, scaleX);\n                if (scaleX === 1) {\n                    this.zoomLevel = 2;\n                }\n            }\n            return scaleX * 100;\n        }\n        else {\n            var pageHeight = 0;\n            for (var i = 0; i < this.pdfViewerBase.pageSize.length; i++) {\n                pageHeight = this.pdfViewerBase.pageSize[i].height;\n                if (pageHeight > highestHeight) {\n                    highestHeight = pageHeight;\n                }\n            }\n            if (this.pdfViewerBase.pageCount === 1) {\n                return ((viewerHeight - this.pdfViewerBase.pageSize[0].top) / highestHeight) * 100;\n            }\n            else {\n                return (viewerHeight / highestHeight) * 100;\n            }\n        }\n    };\n    /**\n     * Performs pinch in operation\n     */\n    Magnification.prototype.pinchIn = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        if (temporaryZoomFactor < 4 && temporaryZoomFactor > 2) {\n            temporaryZoomFactor = this.zoomFactor - this.pinchStep;\n        }\n        if (temporaryZoomFactor < 0.5) {\n            temporaryZoomFactor = 0.5;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * Performs pinch out operation\n     */\n    Magnification.prototype.pinchOut = function () {\n        this.fitType = null;\n        var temporaryZoomFactor = this.zoomFactor + this.pinchStep;\n        if (temporaryZoomFactor > 2) {\n            temporaryZoomFactor = temporaryZoomFactor + this.pinchStep;\n        }\n        if (temporaryZoomFactor > 4) {\n            temporaryZoomFactor = 4;\n        }\n        this.isPinchZoomed = true;\n        this.onZoomChanged(temporaryZoomFactor * 100);\n    };\n    /**\n     * returns zoom level for the zoom factor.\n     */\n    Magnification.prototype.getZoomLevel = function (zoomFactor) {\n        var min = 0;\n        var max = this.zoomPercentages.length - 1;\n        while ((min <= max) && !(min === 0 && max === 0)) {\n            var mid = Math.round((min + max) / 2);\n            if (this.zoomPercentages[mid] <= zoomFactor) {\n                min = mid + 1;\n            }\n            else if (this.zoomPercentages[mid] >= zoomFactor) {\n                max = mid - 1;\n            }\n        }\n        this.higherZoomLevel = min;\n        this.lowerZoomLevel = max;\n        return max;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.checkZoomFactor = function () {\n        return this.zoomPercentages.indexOf(this.zoomFactor * 100) > -1;\n    };\n    /**\n     * Executes when the zoom or pinch operation is performed\n     */\n    Magnification.prototype.onZoomChanged = function (zoomValue) {\n        this.previousZoomFactor = this.zoomFactor;\n        this.zoomLevel = this.getZoomLevel(zoomValue);\n        this.zoomFactor = this.getZoomFactor(zoomValue);\n        this.pdfViewerBase.viewerContainer.style.overflowY = 'auto';\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (this.previousZoomFactor !== this.zoomFactor) {\n                if (!this.isPinchZoomed) {\n                    this.magnifyPages();\n                }\n                else {\n                    this.responsivePages();\n                }\n            }\n            if (this.pdfViewer.toolbarModule) {\n                this.pdfViewer.toolbarModule.updateZoomButtons();\n            }\n            this.pdfViewer.fireZoomChange();\n        }\n        if (this.pdfViewer.toolbarModule) {\n            this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.setTouchPoints = function (clientX, clientY) {\n        this.touchCenterX = clientX;\n        this.touchCenterY = clientY;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.initiatePinchMove = function (pointX1, pointY1, pointX2, pointY2) {\n        this.isPinchScrolled = false;\n        this.isMagnified = false;\n        this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        this.touchCenterX = (pointX1 + pointX2) / 2;\n        this.touchCenterY = (pointY1 + pointY2) / 2;\n        this.zoomOverPages(pointX1, pointY1, pointX2, pointY2);\n    };\n    Magnification.prototype.magnifyPages = function () {\n        this.clearRerenderTimer();\n        if (!this.isPagesZoomed) {\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n        }\n        this.isPagesZoomed = true;\n        var scrollValue = this.getMagnifiedValue(this.pdfViewerBase.viewerContainer.scrollTop);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false, true);\n        }\n        this.isMagnified = true;\n        this.updatePageLocation();\n        this.resizeCanvas(this.reRenderPageNumber);\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.resizeTouchElements();\n        }\n        if (this.pdfViewerBase.pageSize.length > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length - 1) + 'px';\n            // tslint:disable-next-line \n            var proxy_1 = this;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            this.pdfViewerBase.viewerContainer.scrollTop = scrollValue;\n            this.magnifyPageRerenderTimer = setTimeout(function () { proxy_1.rerenderMagnifiedPages(); }, 800);\n        }\n    };\n    Magnification.prototype.updatePageLocation = function () {\n        this.topValue = 0;\n        for (var i = 1; i < this.pdfViewerBase.pageSize.length; i++) {\n            this.topValue += (this.pdfViewerBase.pageSize[i].height + this.pdfViewerBase.pageGap) * this.zoomFactor;\n        }\n    };\n    Magnification.prototype.clearRerenderTimer = function () {\n        clearTimeout(this.rerenderOnScrollTimer);\n        clearTimeout(this.magnifyPageRerenderTimer);\n        this.clearIntervalTimer();\n        this.isPinchScrolled = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.clearIntervalTimer = function () {\n        clearInterval(this.rerenderInterval);\n        this.rerenderInterval = null;\n        this.clearRendering();\n        var oldCanvases = document.querySelectorAll('canvas[id*=\"oldCanvas\"]');\n        for (var i = 0; i < oldCanvases.length; i++) {\n            // tslint:disable-next-line\n            var pageNumber = parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + pageNumber);\n            if (pageCanvas) {\n                oldCanvases[i].id = pageCanvas.id;\n                pageCanvas.parentElement.removeChild(pageCanvas);\n            }\n            else {\n                oldCanvases[i].id = this.pdfViewer.element.id + '_pageCanvas_' + pageNumber;\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pushImageObjects = function (image) {\n        this.imageObjects.push(image);\n    };\n    Magnification.prototype.clearRendering = function () {\n        if (this.imageObjects) {\n            for (var j = 0; j < this.imageObjects.length; j++) {\n                if (this.imageObjects[j]) {\n                    this.imageObjects[j].onload = null;\n                }\n            }\n            this.imageObjects = [];\n        }\n    };\n    Magnification.prototype.rerenderMagnifiedPages = function () {\n        this.renderInSeparateThread(this.reRenderPageNumber);\n        this.isPagesZoomed = false;\n    };\n    Magnification.prototype.renderInSeparateThread = function (pageNumber) {\n        var _this = this;\n        this.designNewCanvas(pageNumber);\n        this.pageRerenderCount = 0;\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n        this.isMagnified = false;\n        this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n        // tslint:disable-next-line\n        var proxy = this;\n        this.rerenderInterval = setInterval(function () { _this.initiateRerender(proxy); }, 1);\n    };\n    Magnification.prototype.responsivePages = function () {\n        this.isPagesZoomed = true;\n        this.clearRerenderTimer();\n        if (this.pdfViewer.textSelectionModule) {\n            this.pdfViewer.textSelectionModule.clearTextSelection();\n        }\n        var scrollValue = this.pdfViewerBase.viewerContainer.scrollTop;\n        this.isAutoZoom = false;\n        this.updatePageLocation();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.pageContainer.style.height = this.topValue + this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length - 1].height * this.zoomFactor + 'px';\n        this.resizeCanvas(this.pdfViewerBase.currentPageNumber);\n        if (this.isPinchZoomed) {\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var currentPageCanvas = this.pdfViewerBase.getElement('_pageDiv_' + pageIndex);\n            if (currentPageCanvas) {\n                var currentPageBounds = currentPageCanvas.getBoundingClientRect();\n                // update scroll top for the viewer container based on pinch zoom factor\n                var previousPageTop = (currentPageBounds.top) * this.previousZoomFactor;\n                var previousY = scrollValue + this.touchCenterY;\n                // tslint:disable-next-line:max-line-length\n                var currentY = (currentPageBounds.top) * this.zoomFactor + ((previousY - previousPageTop) < 0 ? previousY - previousPageTop : (previousY -\n                    // tslint:disable-next-line:max-line-length\n                    previousPageTop) * (this.zoomFactor / this.previousZoomFactor));\n                this.pdfViewerBase.viewerContainer.scrollTop = currentY - this.touchCenterY;\n                // update scroll left for the viewer container based on pinch zoom factor\n                var prevValue = (currentPageBounds.width * this.previousZoomFactor) / currentPageBounds.width;\n                var scaleCorrectionFactor = this.zoomFactor / prevValue - 1;\n                var scrollX_1 = this.touchCenterX - currentPageBounds.left;\n                this.pdfViewerBase.viewerContainer.scrollLeft += scrollX_1 * scaleCorrectionFactor;\n            }\n        }\n        this.pdfViewerBase.renderedPagesList = [];\n        this.pdfViewerBase.pinchZoomStorage = [];\n    };\n    Magnification.prototype.rerenderOnScroll = function () {\n        var _this = this;\n        this.isPinchZoomed = false;\n        if (this.isPinchScrolled) {\n            this.rerenderOnScrollTimer = null;\n            this.isPinchScrolled = false;\n            this.reRenderPageNumber = this.pdfViewerBase.currentPageNumber;\n            this.pdfViewerBase.renderedPagesList = [];\n            this.pdfViewerBase.pinchZoomStorage = [];\n            if (this.pdfViewerBase.textLayer) {\n                var textLayers = document.querySelectorAll('div[id*=\"_textLayer_\"]');\n                for (var i = 0; i < textLayers.length; i++) {\n                    textLayers[i].style.display = 'block';\n                }\n            }\n            this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);\n            this.isPagePinchZoomed = false;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber); }, 300);\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveScroll = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n        }\n        if (this.isPagesZoomed || (!this.isRerenderCanvasCreated && this.isPagePinchZoomed)) {\n            this.clearRendering();\n            this.isPagesZoomed = false;\n            clearTimeout(this.magnifyPageRerenderTimer);\n            this.isPinchScrolled = true;\n            this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n        }\n    };\n    // tslint:disable-next-line\n    Magnification.prototype.initiateRerender = function (proxy) {\n        if (proxy.pageRerenderCount === proxy.pdfViewerBase.reRenderedCount && proxy.pageRerenderCount !== 0 && proxy.pdfViewerBase.reRenderedCount !== 0) {\n            proxy.reRenderAfterPinch(this.reRenderPageNumber);\n        }\n    };\n    Magnification.prototype.reRenderAfterPinch = function (currentPageIndex) {\n        this.pageRerenderCount = 0;\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var pageCanvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (pageCanvas) {\n                pageCanvas.style.display = 'block';\n            }\n            var oldCanvas = this.pdfViewerBase.getElement('_oldCanvas_' + i);\n            if (oldCanvas) {\n                oldCanvas.parentNode.removeChild(oldCanvas);\n            }\n            if (pageDiv) {\n                pageDiv.style.visibility = 'visible';\n            }\n        }\n        this.isRerenderCanvasCreated = false;\n        this.isPagePinchZoomed = false;\n        if (this.pdfViewerBase.reRenderedCount !== 0) {\n            this.pdfViewerBase.reRenderedCount = 0;\n            this.pageRerenderCount = 0;\n            clearInterval(this.rerenderInterval);\n            this.rerenderInterval = null;\n        }\n        this.imageObjects = [];\n    };\n    Magnification.prototype.designNewCanvas = function (currentPageIndex) {\n        if (this.pdfViewerBase.textLayer) {\n            this.pdfViewerBase.textLayer.clearTextLayers();\n        }\n        var lowerPageValue = currentPageIndex - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = currentPageIndex + 1; // jshint ignore:line\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n            if (canvas) {\n                canvas.id = this.pdfViewer.element.id + '_oldCanvas_' + i;\n                // tslint:disable-next-line:max-line-length\n                var newCanvas = this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_' + i), this.pdfViewerBase.pageSize[i].width * this.zoomFactor, this.pdfViewerBase.pageSize[i].height * this.zoomFactor, i);\n                newCanvas.style.display = 'none';\n            }\n        }\n        this.isRerenderCanvasCreated = true;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pageRerenderOnMouseWheel = function () {\n        var _this = this;\n        if (this.isRerenderCanvasCreated) {\n            this.clearIntervalTimer();\n            clearTimeout(this.magnifyPageRerenderTimer);\n            if (!this.isPinchScrolled) {\n                this.isPinchScrolled = true;\n                this.rerenderOnScrollTimer = setTimeout(function () { _this.rerenderOnScroll(); }, 100);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.renderCountIncrement = function () {\n        if (this.isRerenderCanvasCreated) {\n            this.pageRerenderCount++;\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.rerenderCountIncrement = function () {\n        if (this.pageRerenderCount > 0) {\n            this.pdfViewerBase.reRenderedCount++;\n        }\n    };\n    Magnification.prototype.resizeCanvas = function (pageNumber) {\n        var lowerPageValue = pageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = pageNumber + 3;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            var pageDiv = this.pdfViewerBase.getElement('_pageDiv_' + i);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + i);\n            if (pageDiv) {\n                if ((lowerPageValue <= i) && (i <= higherPageValue)) {\n                    var isSelectionAvailable = false;\n                    if (this.pdfViewer.textSelectionModule) {\n                        isSelectionAvailable = this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);\n                    }\n                    if (this.pdfViewerBase.pageSize[i] != null) {\n                        var width = this.pdfViewerBase.pageSize[i].width * this.zoomFactor;\n                        var height = this.pdfViewerBase.pageSize[i].height * this.zoomFactor;\n                        pageDiv.style.width = width + 'px';\n                        pageDiv.style.height = height + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        pageDiv.style.top = ((this.pdfViewerBase.pageSize[i].top) * this.zoomFactor) + 'px';\n                        pageDiv.style.left = this.pdfViewerBase.updateLeftPosition(i) + 'px';\n                        var canvas = this.pdfViewerBase.getElement('_pageCanvas_' + i);\n                        if (canvas) {\n                            canvas.style.width = width + 'px';\n                            canvas.style.height = height + 'px';\n                        }\n                        if (textLayer) {\n                            textLayer.style.width = width + 'px';\n                            textLayer.style.height = height + 'px';\n                            if (this.pdfViewer.textSelectionModule) {\n                                if (this.isPinchZoomed) {\n                                    textLayer.style.display = 'none';\n                                }\n                                else if (this.isMagnified) {\n                                    var lowerValue = ((pageNumber - 2) === 0) ? 0 : (pageNumber - 2);\n                                    // tslint:disable-next-line:max-line-length\n                                    var higherValue = ((pageNumber) === (this.pdfViewerBase.pageCount)) ? (this.pdfViewerBase.pageCount - 1) : pageNumber;\n                                    if ((lowerValue <= i) && (i <= higherValue) && ((this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) || this.pdfViewerBase.textLayer.getTextSearchStatus())) {\n                                        this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);\n                                        if (this.pdfViewer.textSelectionModule.isTextSelection && isSelectionAvailable) {\n                                            this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n                                        }\n                                    }\n                                    else {\n                                        textLayer.style.display = 'none';\n                                    }\n                                }\n                                else {\n                                    textLayer.style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Magnification.prototype.zoomOverPages = function (pointX1, pointY1, pointX2, pointY2) {\n        // tslint:disable-next-line\n        var currentDifference = Math.sqrt(Math.pow((pointX1 - pointX2), 2) + Math.pow((pointY1 - pointY2), 2));\n        if (this.previousTouchDifference > -1) {\n            if (currentDifference > this.previousTouchDifference) {\n                this.pinchOut();\n            }\n            else if (currentDifference < this.previousTouchDifference) {\n                this.pinchIn();\n            }\n        }\n        this.previousTouchDifference = currentDifference;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.pinchMoveEnd = function () {\n        this.touchCenterX = 0;\n        this.touchCenterY = 0;\n        this.previousTouchDifference = -1;\n        if (this.isPinchZoomed) {\n            this.isPinchScrolled = false;\n            this.isPagePinchZoomed = true;\n            this.pinchMoveScroll();\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.fitPageScrollMouseWheel = function (event) {\n        if (this.fitType === 'fitToPage') {\n            event.preventDefault();\n            if (event.wheelDelta > 0) {\n                this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n            else {\n                this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.magnifyBehaviorKeyDown = function (event) {\n        var isMac = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n        var isCommandKey = isMac ? event.metaKey : false;\n        switch (event.keyCode) {\n            case 38: // up arrow\n            case 37: // left arrow\n            case 33: // page up\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 40: // down arrow\n            case 39: // right arrow\n            case 34: // page down\n                if (this.fitType === 'fitToPage' && !((event.ctrlKey || isCommandKey) && event.shiftKey)) {\n                    event.preventDefault();\n                    this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber - 1);\n                }\n                break;\n            case 187: // equal key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomIn();\n                }\n                break;\n            case 189: // minus key\n                if (event.ctrlKey || isCommandKey) {\n                    event.preventDefault();\n                    this.zoomOut();\n                }\n                break;\n            case 48: // zero key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.fitToPage();\n                }\n                break;\n            case 49: // one key\n                if ((event.ctrlKey || isCommandKey) && !event.shiftKey) {\n                    event.preventDefault();\n                    this.zoomTo(100);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n    Magnification.prototype.upwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex > 0) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex - 1].top * this.zoomFactor;\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n        }\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.updatePagesForFitPage = function (currentPageIndex) {\n        if (this.fitType === 'fitToPage') {\n            if (currentPageIndex > 0) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex - 1)).style.visibility = 'hidden';\n            }\n            if (currentPageIndex < (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.downwardScrollFitPage = function (currentPageIndex) {\n        if (currentPageIndex !== (this.pdfViewerBase.pageCount - 1)) {\n            this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 1)).style.visibility = 'visible';\n            this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.pageSize[currentPageIndex + 1].top * this.zoomFactor;\n            if (currentPageIndex + 1 === (this.pdfViewerBase.pageCount - 1)) {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex)).style.visibility = 'hidden';\n            }\n            else {\n                this.pdfViewerBase.getElement('_pageDiv_' + (currentPageIndex + 2)).style.visibility = 'hidden';\n            }\n        }\n    };\n    Magnification.prototype.getMagnifiedValue = function (value) {\n        return (value / this.previousZoomFactor) * this.zoomFactor;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.destroy = function () {\n        this.imageObjects = undefined;\n    };\n    /**\n     * returns zoom factor when the zoom percent is passed.\n     */\n    Magnification.prototype.getZoomFactor = function (zoomValue) {\n        return zoomValue / 100;\n    };\n    /**\n     * @private\n     */\n    Magnification.prototype.getModuleName = function () {\n        return 'Magnification';\n    };\n    return Magnification;\n}());\nexport { Magnification };\n","/**\n * Navigation module\n */\nvar Navigation = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Navigation(viewer, viewerBase) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * Navigate to Next page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToNextPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber++;\n        if (this.pageNumber <= this.pdfViewerBase.pageCount) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to Previous page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToPreviousPage = function () {\n        this.pageNumber = this.pdfViewerBase.currentPageNumber;\n        this.pageNumber--;\n        if (this.pageNumber > 0) {\n            this.pdfViewerBase.updateScrollTop(this.pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to given Page number\n     * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n     * @param  {number} pageNumber\n     * @returns void\n     */\n    Navigation.prototype.goToPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    /**\n     * Navigate to First page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToFirstPage = function () {\n        this.pageNumber = 0;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * Navigate to Last page of the PDF document\n     * @returns void\n     */\n    Navigation.prototype.goToLastPage = function () {\n        this.pageNumber = this.pdfViewerBase.pageCount - 1;\n        this.pdfViewerBase.updateScrollTop(this.pageNumber);\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.destroy = function () {\n        this.pageNumber = 0;\n    };\n    /**\n     * @private\n     */\n    Navigation.prototype.getModuleName = function () {\n        return 'Navigation';\n    };\n    return Navigation;\n}());\nexport { Navigation };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.\n * @hidden\n */\nvar ThumbnailView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function ThumbnailView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.thumbnailLimit = 30;\n        this.thumbnailThreshold = 50;\n        this.thumbnailTopMargin = 10;\n        /**\n         * @private\n         */\n        this.isThumbnailClicked = false;\n        /**\n         * @private\n         */\n        this.thumbnailClick = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (proxy.previousElement) {\n                proxy.previousElement.classList.remove('e-pv-thumbnail-selection');\n                proxy.previousElement.classList.remove('e-pv-thumbnail-focus');\n                proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement.parentElement);\n                proxy.previousElement = event.srcElement.parentElement;\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setSelectionStyle(event.srcElement);\n                proxy.previousElement = event.srcElement;\n            }\n            proxy.isThumbnailClicked = true;\n            proxy.goToThumbnailPage(pageNumber + 1);\n            proxy.pdfViewerBase.focusViewerContainer();\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseOver = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement);\n            }\n            else if (event.srcElement.id === proxy.pdfViewer.element.id + '_thumbnail_image_' + pageNumber) {\n                proxy.setMouseOverStyle(event.srcElement.parentElement);\n            }\n        };\n        /**\n         * @private\n         */\n        this.thumbnailMouseLeave = function (event) {\n            var proxy = _this;\n            var pageNumber = proxy.getPageNumberFromID(event.srcElement.id);\n            if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_view') {\n                proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);\n            }\n            else if (event.srcElement.parentElement.id === proxy.pdfViewer.element.id + '_thumbnail_' + pageNumber) {\n                proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.createThumbnailContainer = function () {\n        // tslint:disable-next-line:max-line-length\n        this.thumbnailView = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_view', className: 'e-pv-thumbnail-view e-pv-thumbnail-row' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    ThumbnailView.prototype.createRequestForThumbnails = function () {\n        var proxy = this;\n        // tslint:disable-next-line\n        return new Promise(\n        // tslint:disable-next-line\n        function (renderThumbnailImage, reject) {\n            var _this = this;\n            if (!proxy.isThumbnailCompleted) {\n                // tslint:disable-next-line:max-line-length\n                proxy.thumbnailLimit = proxy.thumbnailLimit < proxy.pdfViewer.pageCount ? proxy.thumbnailLimit : proxy.pdfViewer.pageCount;\n                if (proxy.thumbnailLimit !== proxy.pdfViewer.pageCount) {\n                    proxy.isThumbnailCompleted = false;\n                    proxy.startIndex = 0;\n                }\n            }\n            else {\n                proxy.startIndex = proxy.thumbnailLimit;\n                // tslint:disable-next-line:max-line-length\n                proxy.thumbnailLimit = proxy.startIndex + proxy.thumbnailThreshold < proxy.pdfViewer.pageCount ? proxy.startIndex + proxy.thumbnailThreshold : proxy.pdfViewer.pageCount;\n            }\n            var request = new XMLHttpRequest();\n            // tslint:disable-next-line:max-line-length\n            var jsonObject = { startPage: proxy.startIndex, endPage: proxy.thumbnailLimit, sizeX: 99.7, sizeY: 141, hashId: proxy.pdfViewerBase.hashId };\n            request.open('POST', proxy.pdfViewer.serviceUrl + '/' + proxy.pdfViewer.serverActionSettings.renderThumbnail);\n            request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n            request.responseType = 'json';\n            request.send(JSON.stringify(jsonObject));\n            // tslint:disable-next-line\n            request.onreadystatechange = function (event) {\n                if (request.readyState === 4 && request.status === 200) {\n                    // tslint:disable-next-line\n                    var data = event.currentTarget.response;\n                    proxy.renderThumbnailImage(data);\n                    if (!proxy.isThumbnailCompleted) {\n                        proxy.startIndex = proxy.thumbnailLimit;\n                        proxy.isThumbnailCompleted = true;\n                    }\n                }\n            };\n            // tslint:disable-next-line\n            request.onerror = function (event) {\n                _this.pdfViewerBase.openNotificationPopup();\n                proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            };\n        });\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.gotoThumbnailImage = function (pageNumber) {\n        var shouldScroll = this.checkThumbnailScroll(pageNumber);\n        if (this.thumbnailView) {\n            var thumbnailChild = this.thumbnailView.children[pageNumber];\n            if (thumbnailChild) {\n                var thumbnailDiv = thumbnailChild.children[0];\n                if (shouldScroll) {\n                    var offsetTop = thumbnailDiv.offsetTop + thumbnailDiv.clientTop - this.thumbnailTopMargin;\n                    this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = offsetTop;\n                }\n                if (this.previousElement) {\n                    this.previousElement.classList.remove('e-pv-thumbnail-selection');\n                    this.previousElement.classList.remove('e-pv-thumbnail-focus');\n                    this.previousElement.classList.remove('e-pv-thumbnail-hover');\n                    this.previousElement.classList.add('e-pv-thumbnail-selection-ring');\n                }\n                this.setFocusStyle(thumbnailDiv, pageNumber);\n                this.previousElement = thumbnailDiv.children[0];\n            }\n        }\n    };\n    ThumbnailView.prototype.checkThumbnailScroll = function (pageNumber) {\n        var shouldScroll = false;\n        if (this.thumbnailView) {\n            var visibleThumbs = this.getVisibleThumbs();\n            var numVisibleThumbs = visibleThumbs.views.length;\n            // if the thumbnail isn't currently visible, scroll it into view.\n            if (numVisibleThumbs > 0) {\n                var visibleFirstPageID = this.getPageNumberFromID(visibleThumbs.first.id);\n                // account for only one thumbnail being visible.\n                // tslint:disable-next-line:max-line-length\n                var visibleLastPageID = (numVisibleThumbs > 1 ? this.getPageNumberFromID(visibleThumbs.last.id) : visibleFirstPageID);\n                if (pageNumber <= visibleFirstPageID || pageNumber >= visibleLastPageID) {\n                    shouldScroll = true;\n                }\n                else {\n                    // tslint:disable-next-line\n                    visibleThumbs.views.some(function (view) {\n                        var pageID = view.id.split('_');\n                        var thumbPageNumber = pageID[pageID.length - 1];\n                        // tslint:disable-next-line:radix\n                        if (parseInt(thumbPageNumber) !== pageNumber) {\n                            return false;\n                        }\n                        shouldScroll = view.percent < 100;\n                        return true;\n                    });\n                }\n            }\n        }\n        return shouldScroll;\n    };\n    ThumbnailView.prototype.getPageNumberFromID = function (pageId) {\n        var pageID = pageId.split('_');\n        var pageNumber = pageID[pageID.length - 1];\n        // tslint:disable-next-line:radix\n        return parseInt(pageNumber);\n    };\n    ThumbnailView.prototype.setFocusStyle = function (thumbnail, pageNumber) {\n        if (thumbnail.children[0].id === this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + pageNumber) {\n            this.setMouseFocusStyle(thumbnail.children[0]);\n        }\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.renderThumbnailImage = function (data) {\n        if (this.thumbnailView) {\n            for (var i = this.startIndex; i < this.thumbnailLimit; i++) {\n                var pageLink = createElement('a', { id: 'page_' + i });\n                // tslint:disable-next-line:max-line-length\n                var thumbnail = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_' + i, className: 'e-pv-thumbnail e-pv-thumbnail-column' });\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailSelectionRing = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_Selection_Ring_' + i, className: 'e-pv-thumbnail-selection-ring' });\n                thumbnail.appendChild(this.thumbnailSelectionRing);\n                // tslint:disable-next-line:max-line-length\n                var thumbnailPageNumber = createElement('div', { id: this.pdfViewer.element.id + '_thumbnail_pagenumber_' + i, className: 'e-pv-thumbnail-number' });\n                thumbnailPageNumber.textContent = (i + 1).toString();\n                thumbnail.appendChild(thumbnailPageNumber);\n                // tslint:disable-next-line:max-line-length\n                this.thumbnailImage = createElement('img', { id: this.pdfViewer.element.id + '_thumbnail_image_' + i, className: 'e-pv-thumbnail-image' });\n                this.thumbnailImage.src = data.thumbnailImage[i];\n                this.thumbnailSelectionRing.appendChild(this.thumbnailImage);\n                pageLink.appendChild(thumbnail);\n                this.thumbnailView.appendChild(pageLink);\n                this.wireUpEvents();\n                if (i === 0) {\n                    this.setMouseFocusToFirstPage();\n                }\n            }\n        }\n        this.pdfViewerBase.navigationPane.enableThumbnailButton();\n        if (this.thumbnailLimit !== this.pdfViewerBase.pageCount && this.thumbnailView) {\n            Promise.all([this.createRequestForThumbnails()]);\n        }\n    };\n    ThumbnailView.prototype.wireUpEvents = function () {\n        if (this.thumbnailSelectionRing) {\n            this.thumbnailSelectionRing.addEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.addEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.addEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.unwireUpEvents = function () {\n        if (this.thumbnailSelectionRing && this.thumbnailImage) {\n            this.thumbnailSelectionRing.removeEventListener('click', this.thumbnailClick);\n            this.thumbnailSelectionRing.removeEventListener('mouseover', this.thumbnailMouseOver);\n            this.thumbnailSelectionRing.removeEventListener('mouseleave', this.thumbnailMouseLeave);\n        }\n    };\n    ThumbnailView.prototype.goToThumbnailPage = function (pageNumber) {\n        if (pageNumber > 0 && pageNumber <= this.pdfViewerBase.pageCount && this.pdfViewerBase.currentPageNumber !== pageNumber) {\n            this.pdfViewerBase.updateScrollTop(pageNumber - 1);\n        }\n    };\n    ThumbnailView.prototype.setSelectionStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.remove('e-pv-thumbnail-focus');\n        thumbnailElement.classList.add('e-pv-thumbnail-selection');\n    };\n    ThumbnailView.prototype.setMouseOverStyle = function (thumbnailElement) {\n        // tslint:disable-next-line:max-line-length\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-hover');\n            }\n        }\n    };\n    ThumbnailView.prototype.setMouseLeaveStyle = function (thumbnailElement) {\n        if (!thumbnailElement.classList.contains('e-pv-thumbnail-selection')) {\n            if (!thumbnailElement.classList.contains('e-pv-thumbnail-focus')) {\n                thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');\n            }\n            thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        }\n        else {\n            thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n            thumbnailElement.classList.add('e-pv-thumbnail-focus');\n        }\n    };\n    ThumbnailView.prototype.setMouseFocusStyle = function (thumbnailElement) {\n        thumbnailElement.classList.remove('e-pv-thumbnail-selection');\n        thumbnailElement.classList.remove('e-pv-thumbnail-hover');\n        thumbnailElement.classList.add('e-pv-thumbnail-focus');\n    };\n    ThumbnailView.prototype.setMouseFocusToFirstPage = function () {\n        var thumbnailChild = this.thumbnailView.children[0];\n        if (thumbnailChild) {\n            var thumbnailDiv = thumbnailChild.children[0].children[0];\n            this.setMouseFocusStyle(thumbnailDiv);\n            this.previousElement = thumbnailDiv;\n        }\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.clear = function () {\n        this.startIndex = 0;\n        this.thumbnailLimit = 0;\n        this.isThumbnailCompleted = false;\n        if (this.pdfViewerBase.navigationPane.sideBarContentContainer) {\n            this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'block';\n            this.pdfViewerBase.navigationPane.sideBarContent.scrollTop = 0;\n            this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display = 'none';\n        }\n        if (this.thumbnailView) {\n            while (this.thumbnailView.hasChildNodes()) {\n                this.thumbnailView.removeChild(this.thumbnailView.lastChild);\n            }\n        }\n        this.pdfViewerBase.navigationPane.resetThumbnailView();\n        this.unwireUpEvents();\n    };\n    ThumbnailView.prototype.getVisibleThumbs = function () {\n        return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent, this.thumbnailView.children);\n    };\n    ThumbnailView.prototype.getVisibleElements = function (scrollElement, thumbnailViewChildren) {\n        var top = scrollElement.scrollTop;\n        var bottom = top + scrollElement.clientHeight;\n        var left = scrollElement.scrollLeft;\n        var right = left + scrollElement.clientWidth;\n        function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement) {\n            var elementBottom = thumbnailViewChildrenElement.offsetTop + thumbnailViewChildrenElement.clientTop + thumbnailViewChildrenElement.clientHeight;\n            return elementBottom > top;\n        }\n        // tslint:disable-next-line\n        var visible = [];\n        var thumbnailView;\n        var element;\n        var currentHeight;\n        var viewHeight;\n        var viewBottom;\n        var hiddenHeight;\n        var currentWidth;\n        var viewWidth;\n        var viewRight;\n        var hiddenWidth;\n        var percentVisible;\n        var firstVisibleElementInd = thumbnailViewChildren.length === 0 ? 0 :\n            this.binarySearchFirstItem(thumbnailViewChildren, isThumbnailElementBottomAfterViewTop);\n        if (thumbnailViewChildren.length > 0) {\n            firstVisibleElementInd =\n                this.backtrackBeforeAllVisibleElements(firstVisibleElementInd, thumbnailViewChildren, top);\n        }\n        var lastEdge = -1;\n        for (var i = firstVisibleElementInd, ii = thumbnailViewChildren.length; i < ii; i++) {\n            thumbnailView = this.getThumbnailElement(i);\n            element = thumbnailView;\n            currentWidth = element.offsetLeft + element.clientLeft;\n            currentHeight = element.offsetTop + element.clientTop;\n            viewWidth = element.clientWidth;\n            viewHeight = element.clientHeight;\n            viewRight = currentWidth + viewWidth;\n            viewBottom = currentHeight + viewHeight;\n            if (lastEdge === -1) {\n                if (viewBottom >= bottom) {\n                    lastEdge = viewBottom;\n                }\n            }\n            else if (currentHeight > lastEdge) {\n                break;\n            }\n            if (viewBottom <= top || currentHeight >= bottom ||\n                viewRight <= left || currentWidth >= right) {\n                continue;\n            }\n            hiddenHeight = Math.max(0, top - currentHeight) +\n                Math.max(0, viewBottom - bottom);\n            hiddenWidth = Math.max(0, left - currentWidth) +\n                Math.max(0, viewRight - right);\n            // tslint:disable-next-line:no-bitwise\n            percentVisible = ((viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth) | 0;\n            visible.push({\n                id: thumbnailView.id,\n                x: currentWidth,\n                y: currentHeight,\n                view: thumbnailView,\n                percent: percentVisible,\n            });\n        }\n        var first = visible[0];\n        var last = visible[visible.length - 1];\n        return { first: first, last: last, views: visible, };\n    };\n    // tslint:disable-next-line\n    ThumbnailView.prototype.binarySearchFirstItem = function (items, condition) {\n        var minIndex = 0;\n        var maxIndex = items.length - 1;\n        if (items.length === 0 || !condition(this.getThumbnailElement(maxIndex))) {\n            return items.length - 1;\n        }\n        if (condition(this.getThumbnailElement(minIndex))) {\n            return minIndex;\n        }\n        while (minIndex < maxIndex) {\n            // tslint:disable-next-line:no-bitwise\n            var currentIndex = (minIndex + maxIndex) >> 1;\n            if (condition(this.getThumbnailElement(currentIndex))) {\n                maxIndex = currentIndex;\n            }\n            else {\n                minIndex = currentIndex + 1;\n            }\n        }\n        return minIndex; /* === maxIndex */\n    };\n    ThumbnailView.prototype.backtrackBeforeAllVisibleElements = function (index, views, top) {\n        if (index < 2) {\n            return index;\n        }\n        var thumbnailElement = this.getThumbnailElement(index);\n        var pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        if (pageTop >= top) {\n            thumbnailElement = this.getThumbnailElement(index - 1);\n            pageTop = thumbnailElement.offsetTop + thumbnailElement.clientTop;\n        }\n        for (var i = index - 2; i >= 0; --i) {\n            thumbnailElement = this.getThumbnailElement(i);\n            if (thumbnailElement.offsetTop + thumbnailElement.clientTop + thumbnailElement.clientHeight <= pageTop) {\n                break;\n            }\n            index = i;\n        }\n        return index;\n    };\n    ThumbnailView.prototype.getThumbnailElement = function (index) {\n        var thumbnailChild = this.thumbnailView.children[index];\n        return thumbnailChild.children[0];\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    ThumbnailView.prototype.getModuleName = function () {\n        return 'ThumbnailView';\n    };\n    return ThumbnailView;\n}());\nexport { ThumbnailView };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Tooltip } from '@syncfusion/ej2-popups';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Toolbar(viewer, viewerBase) {\n        var _this = this;\n        this.isPageNavigationToolDisabled = false;\n        this.isMagnificationToolDisabled = false;\n        this.isSelectionToolDisabled = false;\n        this.isScrollingToolDisabled = false;\n        this.isOpenBtnVisible = true;\n        this.isNavigationToolVisible = true;\n        this.isMagnificationToolVisible = true;\n        this.isSelectionBtnVisible = true;\n        this.isScrollingBtnVisible = true;\n        this.isDownloadBtnVisible = true;\n        this.isPrintBtnVisible = true;\n        this.isSearchBtnVisible = true;\n        this.isTextSearchBoxDisplayed = false;\n        this.onToolbarKeydown = function (event) {\n            var targetId = event.target.id;\n            if (!(targetId === _this.pdfViewer.element.id + '_currentPageInput' || targetId === _this.pdfViewer.element.id + '_zoomDropDown')) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        };\n        this.toolbarClickHandler = function (args) {\n            // tslint:disable-next-line:max-line-length\n            if (args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2]) {\n                args.cancel = true;\n            }\n            else if (args.originalEvent.target.id === _this.pdfViewer.element.id + '_openIcon') {\n                var tooltipData = args.originalEvent.target.parentElement.dataset;\n                if (tooltipData && tooltipData.tooltipId) {\n                    var tooltipElement = document.getElementById(tooltipData.tooltipId);\n                    if (tooltipElement) {\n                        tooltipElement.style.display = 'none';\n                    }\n                }\n            }\n            switch (args.originalEvent.target.id) {\n                case _this.pdfViewer.element.id + '_open':\n                case _this.pdfViewer.element.id + '_openIcon':\n                    _this.fileInputElement.click();\n                    break;\n                case _this.pdfViewer.element.id + '_download':\n                case _this.pdfViewer.element.id + '_downloadIcon':\n                    _this.pdfViewerBase.download();\n                    break;\n                case _this.pdfViewer.element.id + '_print':\n                case _this.pdfViewer.element.id + '_printIcon':\n                    if (_this.pdfViewer.printModule) {\n                        _this.pdfViewer.printModule.print();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_firstPage':\n                case _this.pdfViewer.element.id + '_firstPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToFirstPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_previousPage':\n                case _this.pdfViewer.element.id + '_previousPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToPreviousPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_nextPage':\n                case _this.pdfViewer.element.id + '_nextPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToNextPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_lastPage':\n                case _this.pdfViewer.element.id + '_lastPageIcon':\n                    if (_this.pdfViewer.navigationModule) {\n                        _this.pdfViewer.navigationModule.goToLastPage();\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_zoomIn':\n                case _this.pdfViewer.element.id + '_zoomInIcon':\n                    _this.pdfViewer.magnificationModule.zoomIn();\n                    break;\n                case _this.pdfViewer.element.id + '_zoomOut':\n                case _this.pdfViewer.element.id + '_zoomOutIcon':\n                    _this.pdfViewer.magnificationModule.zoomOut();\n                    break;\n                case _this.pdfViewer.element.id + '_selectTool':\n                case _this.pdfViewer.element.id + '_selectToolIcon':\n                    if (!_this.isSelectionToolDisabled) {\n                        _this.pdfViewerBase.initiateTextSelectMode();\n                        _this.updateInteractionTools(true);\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_handTool':\n                case _this.pdfViewer.element.id + '_handToolIcon':\n                    if (!_this.isScrollingToolDisabled) {\n                        _this.pdfViewerBase.initiatePanning();\n                        _this.updateInteractionTools(false);\n                    }\n                    break;\n                case _this.pdfViewer.element.id + '_search':\n                case _this.pdfViewer.element.id + '_searchIcon':\n                    _this.textSearchButtonHandler();\n                    break;\n            }\n            // tslint:disable-next-line:max-line-length\n            if (!(args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[1] || args.originalEvent.target === _this.zoomDropdownItem.parentElement.childNodes[2] || args.originalEvent.target === _this.currentPageBoxElement || args.originalEvent.target === _this.textSearchItem.childNodes[0])) {\n                args.originalEvent.target.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        // tslint:disable-next-line\n        this.loadDocument = function (args) {\n            // tslint:disable-next-line\n            var upoadedFiles = args.target.files;\n            if (args.target.files[0] !== null) {\n                var uploadedFile = upoadedFiles[0];\n                if (uploadedFile) {\n                    _this.uploadedDocumentName = uploadedFile.name;\n                    var reader = new FileReader();\n                    reader.readAsDataURL(uploadedFile);\n                    // tslint:disable-next-line\n                    reader.onload = function (e) {\n                        var uploadedFileUrl = e.currentTarget.result;\n                        _this.pdfViewer.load(uploadedFileUrl, null);\n                    };\n                }\n            }\n        };\n        this.navigateToPage = function (args) {\n            if (args.which === 13) {\n                // tslint:disable-next-line\n                var enteredValue = parseInt(_this.currentPageBoxElement.value);\n                if (enteredValue !== null) {\n                    if (enteredValue > 0 && enteredValue <= _this.pdfViewerBase.pageCount) {\n                        if (_this.pdfViewer.navigationModule) {\n                            _this.pdfViewer.navigationModule.goToPage(enteredValue);\n                        }\n                    }\n                    else {\n                        _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                    }\n                }\n                else {\n                    _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n                }\n                _this.currentPageBoxElement.blur();\n                _this.pdfViewerBase.focusViewerContainer();\n            }\n        };\n        this.textBoxFocusOut = function () {\n            // tslint:disable-next-line\n            if (_this.currentPageBox.value === null || _this.currentPageBox.value >= _this.pdfViewerBase.pageCount || _this.currentPageBox.value !== _this.pdfViewerBase.currentPageNumber) {\n                _this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);\n            }\n        };\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = viewerBase;\n    }\n    /**\n     * @private\n     */\n    Toolbar.prototype.intializeToolbar = function (width) {\n        var toolbarDiv = this.createToolbar(width);\n        this.createFileElement(toolbarDiv);\n        this.wireEvent();\n        this.updateToolbarItems();\n        this.applyToolbarSettings();\n        this.initialEnableItems();\n        return toolbarDiv;\n    };\n    /**\n     * Shows /hides the toolbar in the PdfViewer\n     * @param  {boolean} enableToolbar\n     * @returns void\n     */\n    Toolbar.prototype.showToolbar = function (enableToolbar) {\n        var toolbar = this.toolbarElement;\n        if (enableToolbar) {\n            toolbar.style.display = 'block';\n        }\n        else {\n            toolbar.style.display = 'none';\n            this.pdfViewerBase.navigationPane.sideBarToolbar.style.display = 'none';\n        }\n    };\n    /**\n     * Shows /hides the the toolbar items in the PdfViewer\n     * @param  {string[]} items\n     * @param  {boolean} isVisible\n     * @returns void\n     */\n    Toolbar.prototype.showToolbarItem = function (items, isVisible) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.showOpenOption(isVisible);\n                    break;\n                case 'PageNavigationTool':\n                    this.showPageNavigationTool(isVisible);\n                    break;\n                case 'MagnificationTool':\n                    this.showMagnificationTool(isVisible);\n                    break;\n                case 'SelectionTool':\n                    this.showSelectionTool(isVisible);\n                    break;\n                case 'PanTool':\n                    this.showScrollingTool(isVisible);\n                    break;\n                case 'DownloadOption':\n                    this.showDownloadOption(isVisible);\n                    break;\n                case 'PrintOption':\n                    this.showPrintOption(isVisible);\n                    break;\n                case 'SearchOption':\n                    this.showSearchOption(isVisible);\n                    break;\n            }\n        }\n        this.applyHideToToolbar(true, 1, 1);\n        this.applyHideToToolbar(true, 8, 8);\n        this.applyHideToToolbar(true, 12, 12);\n        this.showSeparator(items);\n    };\n    /**\n     * Enables /disables the the toolbar items in the PdfViewer\n     * @param  {string[]} items\n     * @param  {boolean} isEnable\n     * @returns void\n     */\n    Toolbar.prototype.enableToolbarItem = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            switch (items[i]) {\n                case 'OpenOption':\n                    this.enableOpenOption(isEnable);\n                    break;\n                case 'PageNavigationTool':\n                    this.isPageNavigationToolDisabled = isEnable;\n                    this.enablePageNavigationTool(isEnable);\n                    break;\n                case 'MagnificationTool':\n                    this.isMagnificationToolDisabled = isEnable;\n                    this.enableMagnificationTool(isEnable);\n                    break;\n                case 'SelectionTool':\n                    this.isSelectionToolDisabled = isEnable;\n                    this.enableSelectionTool(isEnable);\n                    break;\n                case 'PanTool':\n                    this.isScrollingToolDisabled = isEnable;\n                    this.enableScrollingTool(isEnable);\n                    break;\n                case 'DownloadOption':\n                    this.enableDownloadOption(isEnable);\n                    break;\n                case 'PrintOption':\n                    this.enablePrintOption(isEnable);\n                    break;\n                case 'SearchOption':\n                    this.enableSearchOption(isEnable);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.showOpenOption = function (enableOpenOption) {\n        this.isOpenBtnVisible = enableOpenOption;\n        this.applyHideToToolbar(enableOpenOption, 0, 0);\n    };\n    Toolbar.prototype.showPageNavigationTool = function (enablePageNavigationTool) {\n        this.isNavigationToolVisible = enablePageNavigationTool;\n        this.applyHideToToolbar(enablePageNavigationTool, 2, 7);\n    };\n    Toolbar.prototype.showMagnificationTool = function (enableMagnificationTool) {\n        this.isMagnificationToolVisible = enableMagnificationTool;\n        this.applyHideToToolbar(enableMagnificationTool, 9, 11);\n    };\n    Toolbar.prototype.showSelectionTool = function (enableSelectionTool) {\n        this.isSelectionBtnVisible = enableSelectionTool;\n        this.applyHideToToolbar(enableSelectionTool, 13, 13);\n    };\n    Toolbar.prototype.showScrollingTool = function (enableScrollingTool) {\n        this.isScrollingBtnVisible = enableScrollingTool;\n        this.applyHideToToolbar(enableScrollingTool, 14, 14);\n    };\n    Toolbar.prototype.showDownloadOption = function (enableDownloadOption) {\n        this.isDownloadBtnVisible = enableDownloadOption;\n        this.applyHideToToolbar(enableDownloadOption, 16, 16);\n    };\n    Toolbar.prototype.showPrintOption = function (enablePrintOption) {\n        this.isPrintBtnVisible = enablePrintOption;\n        this.applyHideToToolbar(enablePrintOption, 17, 17);\n    };\n    Toolbar.prototype.showSearchOption = function (enableSearchOption) {\n        this.isSearchBtnVisible = enableSearchOption;\n        this.applyHideToToolbar(enableSearchOption, 15, 15);\n    };\n    Toolbar.prototype.enableOpenOption = function (enableOpenOption) {\n        this.toolbar.enableItems(this.openDocumentItem, enableOpenOption);\n    };\n    Toolbar.prototype.enablePageNavigationTool = function (enablePageNavigationTool) {\n        this.toolbar.enableItems(this.firstPageItem, enablePageNavigationTool);\n        this.toolbar.enableItems(this.previousPageItem, enablePageNavigationTool);\n        this.toolbar.enableItems(this.nextPageItem, enablePageNavigationTool);\n        this.toolbar.enableItems(this.lastPageItem, enablePageNavigationTool);\n        this.currentPageBox.readonly = !enablePageNavigationTool;\n    };\n    Toolbar.prototype.enableMagnificationTool = function (enableMagnificationTool) {\n        this.toolbar.enableItems(this.zoomInItem, enableMagnificationTool);\n        this.toolbar.enableItems(this.zoomOutItem, enableMagnificationTool);\n        this.zoomDropDown.readonly = !enableMagnificationTool;\n    };\n    Toolbar.prototype.enableSelectionTool = function (enableSelectionTool) {\n        this.toolbar.enableItems(this.textSelectItem, enableSelectionTool);\n    };\n    Toolbar.prototype.enableScrollingTool = function (enableScrollingTool) {\n        this.toolbar.enableItems(this.panItem, enableScrollingTool);\n    };\n    Toolbar.prototype.enableDownloadOption = function (enableDownloadOption) {\n        this.toolbar.enableItems(this.downloadItem, enableDownloadOption);\n    };\n    Toolbar.prototype.enablePrintOption = function (enablePrintOption) {\n        this.toolbar.enableItems(this.printItem, enablePrintOption);\n    };\n    Toolbar.prototype.enableSearchOption = function (enableSearchOption) {\n        this.toolbar.enableItems(this.textSearchItem, enableSearchOption);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.resetToolbar = function () {\n        this.currentPageBox.min = 0;\n        this.currentPageBox.value = 0;\n        this.updateTotalPage();\n        this.updateToolbarItems();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateToolbarItems = function () {\n        if (this.pdfViewerBase.pageCount === 0) {\n            this.toolbar.enableItems(this.downloadItem, false);\n            this.toolbar.enableItems(this.printItem, false);\n            this.updateNavigationButtons();\n            this.toolbar.enableItems(this.zoomInItem, false);\n            this.toolbar.enableItems(this.zoomOutItem, false);\n            if (this.pdfViewer.magnificationModule) {\n                this.zoomDropDown.readonly = true;\n            }\n            this.toolbar.enableItems(this.textSelectItem, false);\n            this.toolbar.enableItems(this.panItem, false);\n            this.toolbar.enableItems(this.textSearchItem, false);\n        }\n        else if (this.pdfViewerBase.pageCount > 0) {\n            this.toolbar.enableItems(this.downloadItem, true);\n            this.toolbar.enableItems(this.printItem, true);\n            this.updateNavigationButtons();\n            this.updateZoomButtons();\n            if (this.pdfViewer.magnificationModule) {\n                this.zoomDropDown.readonly = false;\n            }\n            this.updateInteractionItems();\n            if (this.pdfViewer.textSearchModule && this.pdfViewer.enableTextSearch) {\n                this.toolbar.enableItems(this.textSearchItem, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateNavigationButtons = function () {\n        if (this.pdfViewer.navigationModule && !this.isPageNavigationToolDisabled) {\n            if (this.pdfViewerBase.pageCount === 0 || (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount === 1)) {\n                this.toolbar.enableItems(this.firstPageItem, false);\n                this.toolbar.enableItems(this.previousPageItem, false);\n                this.toolbar.enableItems(this.nextPageItem, false);\n                this.toolbar.enableItems(this.lastPageItem, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === 1 && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem, false);\n                this.toolbar.enableItems(this.previousPageItem, false);\n                this.toolbar.enableItems(this.nextPageItem, true);\n                this.toolbar.enableItems(this.lastPageItem, true);\n            }\n            else if (this.pdfViewerBase.currentPageNumber === this.pdfViewerBase.pageCount && this.pdfViewerBase.pageCount > 0) {\n                this.toolbar.enableItems(this.firstPageItem, true);\n                this.toolbar.enableItems(this.previousPageItem, true);\n                this.toolbar.enableItems(this.nextPageItem, false);\n                this.toolbar.enableItems(this.lastPageItem, false);\n            }\n            else if (this.pdfViewerBase.currentPageNumber > 1 && this.pdfViewerBase.currentPageNumber < this.pdfViewerBase.pageCount) {\n                this.toolbar.enableItems(this.firstPageItem, true);\n                this.toolbar.enableItems(this.previousPageItem, true);\n                this.toolbar.enableItems(this.nextPageItem, true);\n                this.toolbar.enableItems(this.lastPageItem, true);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.firstPageItem, false);\n            this.toolbar.enableItems(this.previousPageItem, false);\n            this.toolbar.enableItems(this.nextPageItem, false);\n            this.toolbar.enableItems(this.lastPageItem, false);\n            this.currentPageBox.readonly = true;\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomButtons = function () {\n        if (this.pdfViewer.magnificationModule && !this.isMagnificationToolDisabled) {\n            if (this.pdfViewer.magnificationModule.zoomFactor <= 0.5) {\n                this.toolbar.enableItems(this.zoomInItem, true);\n                this.toolbar.enableItems(this.zoomOutItem, false);\n            }\n            else if (this.pdfViewer.magnificationModule.zoomFactor >= 4) {\n                this.toolbar.enableItems(this.zoomInItem, false);\n                this.toolbar.enableItems(this.zoomOutItem, true);\n            }\n            else {\n                this.toolbar.enableItems(this.zoomInItem, true);\n                this.toolbar.enableItems(this.zoomOutItem, true);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.destroy = function () {\n        this.unWireEvent();\n        this.toolbar.destroy();\n        this.toolbarElement.remove();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateCurrentPage = function (pageIndex) {\n        if (this.currentPageBox.value === pageIndex) {\n            this.currentPageBoxElement.value = pageIndex.toString();\n        }\n        this.currentPageBox.value = pageIndex;\n        this.pdfViewerBase.currentPageNumber = pageIndex;\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateTotalPage = function () {\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.currentPageBox.min = 1;\n        }\n        this.totalPageItem.textContent = 'of ' + this.pdfViewerBase.pageCount.toString();\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.openFileDialogBox = function (event) {\n        event.preventDefault();\n        this.fileInputElement.click();\n    };\n    Toolbar.prototype.createToolbar = function (controlWidth) {\n        // tslint:disable-next-line:max-line-length\n        this.toolbarElement = createElement('div', { id: this.pdfViewer.element.id + '_toolbarContainer', className: 'e-pv-toolbar' });\n        this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);\n        this.itemsContainer = createElement('div', { id: this.pdfViewer.element.id + '_toolbarItemsContainer' });\n        // tslint:disable-next-line:max-line-length\n        var openButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_open', this.pdfViewer.localeObj.getConstant('Open'), 'e-pv-open-document');\n        this.openDocumentItem = openButtonContainer.firstChild;\n        this.itemsContainer.appendChild(openButtonContainer);\n        this.toolbarElement.appendChild(this.itemsContainer);\n        var seperatorDiv1 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv1);\n        // tslint:disable-next-line:max-line-length\n        var firstPageContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_firstPage', this.pdfViewer.localeObj.getConstant('Go To First Page'), 'e-pv-first-page-navigation');\n        this.firstPageItem = firstPageContainer.firstChild;\n        this.itemsContainer.appendChild(firstPageContainer);\n        // tslint:disable-next-line:max-line-length\n        var previousContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_previousPage', this.pdfViewer.localeObj.getConstant('Previous Page'), 'e-pv-previous-page-navigation');\n        this.previousPageItem = previousContainer.firstChild;\n        this.itemsContainer.appendChild(previousContainer);\n        // tslint:disable-next-line:max-line-length\n        var nextContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_nextPage', this.pdfViewer.localeObj.getConstant('Next Page'), 'e-pv-next-page-navigation');\n        this.nextPageItem = nextContainer.firstChild;\n        this.itemsContainer.appendChild(nextContainer);\n        // tslint:disable-next-line:max-line-length\n        var lastPageContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_lastPage', this.pdfViewer.localeObj.getConstant('Go To Last Page'), 'e-pv-last-page-navigation');\n        this.lastPageItem = lastPageContainer.firstChild;\n        this.itemsContainer.appendChild(lastPageContainer);\n        // tslint:disable-next-line:max-line-length\n        var goToPageContainer = this.createToolbarItem('input', this.pdfViewer.element.id + '_currentPageInput', this.pdfViewer.localeObj.getConstant('Page Number'), null);\n        this.itemsContainer.appendChild(goToPageContainer);\n        this.currentPageBox = new NumericTextBox({ value: 0, format: '##', cssClass: 'e-pv-current-page-box', showSpinButton: false });\n        this.currentPageBoxElement = goToPageContainer.firstChild;\n        this.currentPageBox.appendTo(this.currentPageBoxElement);\n        // tslint:disable-next-line:max-line-length\n        var totalPageContainer = this.createToolbarItem('span', this.pdfViewer.element.id + '_totalPage', null, 'e-pv-total-page');\n        this.totalPageItem = totalPageContainer.firstChild;\n        this.itemsContainer.appendChild(totalPageContainer);\n        this.updateTotalPage();\n        var seperatorDiv2 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv2);\n        // tslint:disable-next-line:max-line-length\n        var zoomOutContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_zoomOut', this.pdfViewer.localeObj.getConstant('Zoom Out'), 'e-pv-zoom-out');\n        this.zoomOutItem = zoomOutContainer.firstChild;\n        this.itemsContainer.appendChild(zoomOutContainer);\n        // tslint:disable-next-line:max-line-length\n        var zoomInContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_zoomIn', this.pdfViewer.localeObj.getConstant('Zoom In'), 'e-pv-zoom-in');\n        this.zoomInItem = zoomInContainer.firstChild;\n        this.itemsContainer.appendChild(zoomInContainer);\n        // tslint:disable-next-line:max-line-length\n        var zoomDropdownContainer = this.createToolbarItem('input', this.pdfViewer.element.id + '_zoomDropDown', this.pdfViewer.localeObj.getConstant('Zoom'), null);\n        zoomDropdownContainer.className = zoomDropdownContainer.className + ' e-pv-zoom-drop-down-container';\n        this.zoomDropdownItem = zoomDropdownContainer.firstChild;\n        this.itemsContainer.appendChild(zoomDropdownContainer);\n        var seperatorDiv3 = createElement('div', { className: 'e-separator' });\n        this.itemsContainer.appendChild(seperatorDiv3);\n        // tslint:disable-next-line:max-line-length\n        var selectToolContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_selectTool', this.pdfViewer.localeObj.getConstant('Text Selection'), 'e-pv-text-select-tool');\n        this.textSelectItem = selectToolContainer.firstChild;\n        this.itemsContainer.appendChild(selectToolContainer);\n        // tslint:disable-next-line:max-line-length\n        var handToolContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_handTool', this.pdfViewer.localeObj.getConstant('Panning'), 'e-pv-pan-tool');\n        this.panItem = handToolContainer.firstChild;\n        this.itemsContainer.appendChild(handToolContainer);\n        // tslint:disable-next-line:max-line-length\n        var searchButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_search', this.pdfViewer.localeObj.getConstant('Text Search'), 'e-pv-text-search');\n        this.textSearchItem = searchButtonContainer.firstChild;\n        this.itemsContainer.appendChild(searchButtonContainer);\n        searchButtonContainer.style.position = 'absolute';\n        // tslint:disable-next-line:max-line-length\n        var downloadButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_download', this.pdfViewer.localeObj.getConstant('Download'), 'e-pv-download-document');\n        this.downloadItem = downloadButtonContainer.firstChild;\n        downloadButtonContainer.style.position = 'absolute';\n        // tslint:disable-next-line:max-line-length\n        downloadButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft()) + 'px';\n        this.itemsContainer.appendChild(downloadButtonContainer);\n        // tslint:disable-next-line:max-line-length\n        var printButtonContainer = this.createToolbarItem('button', this.pdfViewer.element.id + '_print', this.pdfViewer.localeObj.getConstant('Print'), 'e-pv-print-document');\n        this.printItem = printButtonContainer.firstChild;\n        printButtonContainer.style.position = 'absolute';\n        if (downloadButtonContainer !== undefined) { // tslint:disable-next-line:max-line-length\n            printButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - 43) + 'px';\n        }\n        else { // tslint:disable-next-line:max-line-length\n            printButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft()) + 'px';\n        } // tslint:disable-next-line:max-line-length\n        searchButtonContainer.style.left = (this.pdfViewer.element.clientWidth - this.pdfViewerBase.navigationPane.getViewerContainerLeft() - downloadButtonContainer.clientWidth - printButtonContainer.clientWidth - 54) + 'px';\n        this.itemsContainer.appendChild(printButtonContainer);\n        // tslint:disable-next-line:max-line-length\n        var items = [{ percent: '50%', id: '0' }, { percent: '75%', id: '1' }, { percent: '100%', id: '2' }, { percent: '125%', id: '3' },\n            // tslint:disable-next-line:max-line-length\n            { percent: '150%', id: '4' }, { percent: '200%', id: '5' }, { percent: '400%', id: '6' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Page'), id: '7' }, { percent: this.pdfViewer.localeObj.getConstant('Fit Width'), id: '8' }, { percent: this.pdfViewer.localeObj.getConstant('Automatic'), id: '9' }\n        ];\n        // tslint:disable-next-line:max-line-length\n        this.zoomDropDown = new ComboBox({ dataSource: items, text: '100%', fields: { text: 'percent', value: 'id' }, readonly: true, cssClass: 'e-pv-zoom-drop-down', popupHeight: '402px', showClearButton: false });\n        this.zoomDropDown.appendTo(this.zoomDropdownItem);\n        this.toolbar = new tool({ clicked: this.toolbarClickHandler, width: '', height: '', overflowMode: 'Popup' });\n        this.toolbar.appendTo(this.toolbarElement);\n        this.toolbarElement.addEventListener('keydown', this.onToolbarKeydown);\n        return this.toolbarElement;\n    };\n    Toolbar.prototype.createToolbarItem = function (elementName, id, tooltipText, className) {\n        var containerElement = createElement('div', { id: id + 'Container' });\n        var toolbarItem = createElement(elementName, { id: id });\n        if (className !== null) {\n            containerElement.className = className + '-container e-overflow-show e-popup-text';\n            toolbarItem.className = className;\n        }\n        if (elementName === 'button' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.className = 'e-btn e-tbar-btn e-icon-btn e-pv-tbar-btn ' + className;\n            var buttonSpan = createElement('span', { id: id + 'Icon', className: className + '-icon e-pv-icon' });\n            toolbarItem.appendChild(buttonSpan);\n        }\n        else if (elementName === 'input' && id !== this.pdfViewer.element.id + '_zoomDropDown') {\n            toolbarItem.type = 'text';\n        }\n        containerElement.appendChild(toolbarItem);\n        if (tooltipText !== null) {\n            // tslint:disable-next-line\n            var tooltip = new Tooltip({ content: tooltipText, opensOn: 'Hover', beforeOpen: this.onTooltipBeforeOpen.bind(this) });\n            tooltip.appendTo(toolbarItem);\n        }\n        return containerElement;\n    };\n    Toolbar.prototype.onTooltipBeforeOpen = function (args) {\n        if (!this.pdfViewer.toolbarSettings.showTooltip) {\n            args.cancel = true;\n        }\n    };\n    Toolbar.prototype.createFileElement = function (toolbarElement) {\n        // tslint:disable-next-line:max-line-length\n        this.fileInputElement = createElement('input', { id: this.pdfViewer.element.id + '_fileUploadElement', styles: 'position:fixed; left:-100em', attrs: { 'type': 'file' } });\n        this.fileInputElement.setAttribute('accept', '.pdf');\n        toolbarElement.appendChild(this.fileInputElement);\n    };\n    Toolbar.prototype.wireEvent = function () {\n        this.toolbarElement.addEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n        this.fileInputElement.addEventListener('change', this.loadDocument);\n        this.currentPageBoxElement.addEventListener('focusout', this.textBoxFocusOut);\n        this.currentPageBoxElement.addEventListener('keypress', this.navigateToPage);\n        this.zoomDropDown.change = this.zoomPercentSelect.bind(this);\n        this.zoomDropDown.element.addEventListener('keypress', this.onZoomDropDownInput.bind(this));\n        this.zoomDropDown.element.addEventListener('click', this.onZoomDropDownInputClick.bind(this));\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        this.toolbarElement.removeEventListener('mouseup', this.toolbarOnMouseup.bind(this));\n        this.fileInputElement.removeEventListener('change', this.loadDocument);\n        this.currentPageBoxElement.removeEventListener('focusout', this.textBoxFocusOut);\n        this.currentPageBoxElement.removeEventListener('keypress', this.navigateToPage);\n        this.zoomDropDown.removeEventListener('change', this.zoomPercentSelect);\n        this.zoomDropDown.element.removeEventListener('keypress', this.onZoomDropDownInput);\n        this.zoomDropDown.element.removeEventListener('click', this.onZoomDropDownInputClick);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.onToolbarResize = function (viewerWidth) {\n        var navigationToolbar = document.getElementById(this.pdfViewer.element.id + '_toolbarContainer_nav');\n        var downloadButtonElement = document.getElementById(this.pdfViewer.element.id + '_downloadContainer');\n        var printButtonElement = document.getElementById(this.pdfViewer.element.id + '_printContainer');\n        var searchButtonElement = document.getElementById(this.pdfViewer.element.id + '_searchContainer');\n        if (!navigationToolbar) {\n            if (downloadButtonElement) {\n                downloadButtonElement.style.left = viewerWidth + 'px';\n                downloadButtonElement.style.position = 'absolute';\n            }\n            if (printButtonElement) {\n                if (downloadButtonElement !== null) {\n                    // calculate the print Icon left Position value\n                    printButtonElement.style.left = (viewerWidth - downloadButtonElement.clientWidth) + 'px';\n                    printButtonElement.style.position = 'absolute';\n                }\n                else {\n                    printButtonElement.style.left = viewerWidth + 'px';\n                    printButtonElement.style.position = 'absolute';\n                }\n            }\n            if (searchButtonElement) {\n                searchButtonElement.style.position = 'absolute';\n                if (printButtonElement !== null) {\n                    // calculate the search Icon left Position value\n                    searchButtonElement.style.left = (parseFloat(printButtonElement.style.left) - printButtonElement.clientWidth) + 'px';\n                }\n                else if (downloadButtonElement !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    searchButtonElement.style.left = (parseFloat(downloadButtonElement.style.left) - downloadButtonElement.clientWidth) + 'px';\n                }\n                else {\n                    searchButtonElement.style.left = viewerWidth + 'px';\n                }\n            }\n        }\n    };\n    Toolbar.prototype.toolbarOnMouseup = function (event) {\n        if (event.target === this.itemsContainer || event.target === this.toolbarElement) {\n            this.pdfViewerBase.focusViewerContainer();\n        }\n    };\n    Toolbar.prototype.applyHideToToolbar = function (show, startIndex, endIndex) {\n        var isHide = !show;\n        for (var index = startIndex; index <= endIndex; index++) {\n            this.toolbar.hideItem(index, isHide);\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInput = function (event) {\n        if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\n            event.preventDefault();\n            return false;\n        }\n        else {\n            if (event.which === 13) {\n                event.preventDefault();\n                var value = this.zoomDropDown.element.value;\n                this.zoomDropDownChange(value);\n            }\n            return true;\n        }\n    };\n    Toolbar.prototype.onZoomDropDownInputClick = function () {\n        this.zoomDropDown.element.select();\n    };\n    Toolbar.prototype.zoomPercentSelect = function (args) {\n        if (this.pdfViewerBase.pageCount > 0) {\n            if (args.isInteracted) {\n                if (args.itemData) {\n                    // tslint:disable-next-line:no-any\n                    var zoomText = args.itemData.percent;\n                    this.zoomDropDownChange(zoomText);\n                }\n            }\n            else {\n                this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);\n            }\n        }\n    };\n    Toolbar.prototype.zoomDropDownChange = function (zoomText) {\n        // tslint:disable-next-line:max-line-length\n        if (zoomText !== this.pdfViewer.localeObj.getConstant('Fit Width') && zoomText !== this.pdfViewer.localeObj.getConstant('Fit Page') && zoomText !== this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Width')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = false;\n            this.pdfViewer.magnificationModule.fitToWidth();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Fit Page')) {\n            this.pdfViewer.magnificationModule.fitToPage();\n            this.zoomDropDown.focusOut();\n        }\n        else if (zoomText === this.pdfViewer.localeObj.getConstant('Automatic')) {\n            this.pdfViewer.magnificationModule.isAutoZoom = true;\n            this.pdfViewer.magnificationModule.fitToAuto();\n            this.zoomDropDown.focusOut();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.updateZoomPercentage = function (zoomFactor) {\n        // tslint:disable-next-line\n        var currentPercent = parseInt((zoomFactor * 100).toString()) + '%';\n        if (this.zoomDropDown.text === currentPercent) {\n            this.zoomDropDown.element.value = currentPercent;\n        }\n        if (this.zoomDropDown.index === 9) {\n            this.zoomDropDown.value = 2;\n        }\n        // tslint:disable-next-line\n        this.zoomDropDown.text = currentPercent;\n    };\n    Toolbar.prototype.updateInteractionItems = function () {\n        if (this.pdfViewer.textSelectionModule) {\n            if (this.pdfViewer.enableTextSelection) {\n                this.toolbar.enableItems(this.textSelectItem, true);\n            }\n            else {\n                this.toolbar.enableItems(this.textSelectItem, false);\n            }\n        }\n        else {\n            this.toolbar.enableItems(this.textSelectItem, false);\n        }\n        this.toolbar.enableItems(this.panItem, true);\n        if (this.pdfViewer.interactionMode === 'TextSelection') {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n            this.pdfViewerBase.initiatePanning();\n        }\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.textSearchButtonHandler = function () {\n        if (this.pdfViewer.textSearchModule && this.pdfViewerBase.pageCount > 0) {\n            this.isTextSearchBoxDisplayed = !this.isTextSearchBoxDisplayed;\n            this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);\n            if (this.isTextSearchBoxDisplayed) {\n                this.selectItem(this.textSearchItem);\n                // tslint:disable-next-line:max-line-length\n                var searchInputElement = document.getElementById(this.pdfViewer.element.id + '_search_input');\n                searchInputElement.select();\n                searchInputElement.focus();\n            }\n            else {\n                this.deSelectItem(this.textSearchItem);\n            }\n        }\n    };\n    Toolbar.prototype.selectItem = function (element) {\n        element.classList.add('e-pv-select');\n    };\n    Toolbar.prototype.deSelectItem = function (element) {\n        element.classList.remove('e-pv-select');\n    };\n    Toolbar.prototype.updateInteractionTools = function (isTextSelect) {\n        if (isTextSelect) {\n            this.selectItem(this.textSelectItem);\n            this.deSelectItem(this.panItem);\n        }\n        else {\n            this.selectItem(this.panItem);\n            this.deSelectItem(this.textSelectItem);\n        }\n    };\n    Toolbar.prototype.initialEnableItems = function () {\n        if (this.pdfViewer.enableToolbar) {\n            this.showToolbar(true);\n        }\n        else {\n            this.showToolbar(false);\n        }\n        if (this.pdfViewer.enablePrint) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (this.pdfViewer.enableDownload) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (this.pdfViewer.enableTextSearch) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n    };\n    Toolbar.prototype.showSeparator = function (toolbarItems) {\n        if (!this.isOpenBtnVisible || (!this.isNavigationToolVisible && this.isOpenBtnVisible && this.isDownloadBtnVisible\n            && this.isPrintBtnVisible) || (this.isOpenBtnVisible && toolbarItems.length === 1)) {\n            this.applyHideToToolbar(false, 1, 1);\n        }\n        if ((!this.isNavigationToolVisible || !this.isMagnificationToolVisible) && !this.isOpenBtnVisible) {\n            this.applyHideToToolbar(false, 8, 8);\n        }\n        if ((!this.isMagnificationToolVisible && !this.isSelectionBtnVisible && !this.isScrollingBtnVisible) ||\n            (this.isMagnificationToolVisible && (!this.isSelectionBtnVisible && !this.isScrollingBtnVisible)) ||\n            (!this.isMagnificationToolVisible && (this.isSelectionBtnVisible && this.isScrollingBtnVisible))) {\n            this.applyHideToToolbar(false, 12, 12);\n        }\n    };\n    Toolbar.prototype.applyToolbarSettings = function () {\n        var toolbarSettingsItems = this.pdfViewer.toolbarSettings.toolbarItem;\n        if (toolbarSettingsItems.indexOf('OpenOption') !== -1) {\n            this.showOpenOption(true);\n        }\n        else {\n            this.showOpenOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('PageNavigationTool') !== -1) {\n            this.showPageNavigationTool(true);\n        }\n        else {\n            this.showPageNavigationTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('MagnificationTool') !== -1) {\n            this.showMagnificationTool(true);\n        }\n        else {\n            this.showMagnificationTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('SelectionTool') !== -1) {\n            this.showSelectionTool(true);\n        }\n        else {\n            this.showSelectionTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('PanTool') !== -1) {\n            this.showScrollingTool(true);\n        }\n        else {\n            this.showScrollingTool(false);\n        }\n        if (toolbarSettingsItems.indexOf('PrintOption') !== -1) {\n            this.showPrintOption(true);\n        }\n        else {\n            this.showPrintOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('DownloadOption') !== -1) {\n            this.showDownloadOption(true);\n        }\n        else {\n            this.showDownloadOption(false);\n        }\n        if (toolbarSettingsItems.indexOf('SearchOption') !== -1) {\n            this.showSearchOption(true);\n        }\n        else {\n            this.showSearchOption(false);\n        }\n        this.showSeparator(toolbarSettingsItems);\n    };\n    /**\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'Toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, ChildProperty, L10n } from '@syncfusion/ej2-base';\nimport { Property, Event } from '@syncfusion/ej2-base';\nimport { PdfViewerBase } from './index';\n/**\n * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.\n * @hidden\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], ToolbarSettings.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarSettings.prototype, \"toolbarItem\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.\n * @hidden\n */\nvar ServerActionSettings = /** @class */ (function (_super) {\n    __extends(ServerActionSettings, _super);\n    function ServerActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Load')\n    ], ServerActionSettings.prototype, \"load\", void 0);\n    __decorate([\n        Property('Unload')\n    ], ServerActionSettings.prototype, \"unload\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"renderPages\", void 0);\n    __decorate([\n        Property('RenderPdfPages')\n    ], ServerActionSettings.prototype, \"print\", void 0);\n    __decorate([\n        Property('Download')\n    ], ServerActionSettings.prototype, \"download\", void 0);\n    __decorate([\n        Property('RenderThumbnailImages')\n    ], ServerActionSettings.prototype, \"renderThumbnail\", void 0);\n    return ServerActionSettings;\n}(ChildProperty));\nexport { ServerActionSettings };\n/**\n * Represents the PDF viewer component.\n * ```html\n * <div id=\"pdfViewer\"></div>\n * <script>\n *  var pdfViewerObj = new PdfViewer();\n *  pdfViewerObj.appendTo(\"#pdfViewer\");\n * </script>\n * ```\n */\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Gets or sets the document name loaded in the PdfViewer control.\n         */\n        _this.fileName = null;\n        /** @hidden */\n        _this.defaultLocale = {\n            'PdfViewer': 'PDF Viewer',\n            'Cancel': 'Cancel',\n            'Download': 'Download file',\n            'Enter Password': 'This document is password protected. Please enter a password.',\n            'File Corrupted': 'File Corrupted',\n            'File Corrupted Content': 'The file is corrupted and cannot be opened.',\n            'Fit Page': 'Fit Page',\n            'Fit Width': 'Fit Width',\n            'Automatic': 'Automatic',\n            'Go To First Page': 'Show first page',\n            'Invalid Password': 'Incorrect Password. Please try again.',\n            'Next Page': 'Show next page',\n            'OK': 'OK',\n            'Open': 'Open file',\n            'Page Number': 'Current page number',\n            'Previous Page': 'Show previous page',\n            'Go To Last Page': 'Show last page',\n            'Zoom': 'Zoom',\n            'Zoom In': 'Zoom in',\n            'Zoom Out': 'Zoom out',\n            'Page Thumbnails': 'Page thumbnails',\n            'Bookmarks': 'Bookmarks',\n            'Print': 'Print file',\n            'Password Protected': 'Password Required',\n            'Copy': 'Copy',\n            'Text Selection': 'Text selection tool',\n            'Panning': 'Pan mode',\n            'Text Search': 'Find text',\n            'Find in document': 'Find in document',\n            'Match case': 'Match case',\n            // tslint:disable-next-line:max-line-length\n            'No matches': 'Viewer has finished searching the document.No more matches were found',\n            // tslint:disable-next-line:max-line-length\n            'Server error': 'Web-service is not listening. PDF Viewer depends on web-service for all it\\'s features. Please start the web service to continue.'\n        };\n        _this.viewerBase = new PdfViewerBase(_this);\n        return _this;\n    }\n    Object.defineProperty(PdfViewer.prototype, \"pageCount\", {\n        /**\n         * Returns the page count of the document loaded in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.pageCount;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"currentPageNumber\", {\n        /**\n         * Returns the current page number of the document displayed in the PdfViewer control.\n         */\n        get: function () {\n            return this.viewerBase.currentPageNumber;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"zoomPercentage\", {\n        /**\n         * Returns the current zoom percentage of the PdfViewer control.\n         */\n        get: function () {\n            return this.magnificationModule.zoomFactor * 100;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"bookmark\", {\n        /**\n         * Gets the bookmark view object of the pdf viewer.\n         * @returns { BookmarkView }\n         */\n        get: function () {\n            return this.bookmarkViewModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"print\", {\n        /**\n         * Gets the print object of the pdf viewer.\n         * @returns { Print }\n         */\n        get: function () {\n            return this.printModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"magnification\", {\n        /**\n         * Gets the magnification object of the pdf viewer.\n         * @returns { Magnification }\n         */\n        get: function () {\n            return this.magnificationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"navigation\", {\n        /**\n         * Gets the navigation object of the pdf viewer.\n         * @returns { Navigation }\n         */\n        get: function () {\n            return this.navigationModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"textSearch\", {\n        /**\n         * Gets the text search object of the pdf viewer.\n         * @returns { TextSearch }\n         */\n        get: function () {\n            return this.textSearchModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfViewer.prototype, \"toolbar\", {\n        /**\n         * Gets the toolbar object of the pdf viewer.\n         * @returns { Toolbar }\n         */\n        get: function () {\n            return this.toolbarModule;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfViewer.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n    };\n    PdfViewer.prototype.render = function () {\n        this.viewerBase.initializeComponent();\n        if (this.enableTextSelection && this.textSelectionModule) {\n            this.textSelectionModule.enableTextSelectionMode();\n        }\n        else {\n            this.viewerBase.disableTextSelectionMode();\n        }\n    };\n    PdfViewer.prototype.getModuleName = function () {\n        return 'PdfViewer';\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    PdfViewer.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'enableToolbar':\n                    this.notify('', { module: 'toolbar', enable: this.enableToolbar });\n                    requireRefresh = true;\n                    break;\n            }\n        }\n    };\n    PdfViewer.prototype.getPersistData = function () {\n        return 'PdfViewer';\n    };\n    PdfViewer.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableMagnification) {\n            modules.push({\n                member: 'Magnification', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableNavigation) {\n            modules.push({\n                member: 'Navigation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableToolbar) {\n            modules.push({\n                member: 'Toolbar', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableHyperlink) {\n            modules.push({\n                member: 'LinkAnnotation', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableThumbnail) {\n            modules.push({\n                member: 'ThumbnailView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableBookmark) {\n            modules.push({\n                member: 'BookmarkView', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSelection) {\n            modules.push({\n                member: 'TextSelection', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enableTextSearch) {\n            modules.push({\n                member: 'TextSearch', args: [this, this.viewerBase]\n            });\n        }\n        if (this.enablePrint) {\n            modules.push({\n                member: 'Print', args: [this, this.viewerBase]\n            });\n        }\n        return modules;\n    };\n    // /**\n    //  * Shows /hides the toolbar in the PdfViewer\n    //  * @param  {boolean} enableToolbar\n    //  * @returns void\n    //  */\n    // public showToolbar(enableToolbar: boolean): void {\n    //     this.toolbarModule.showToolbar(enableToolbar);\n    // }\n    // /**\n    //  * Shows /hides the the toolbar items in the PdfViewer\n    //  * @param  {string[]} items\n    //  * @param  {boolean} isVisible\n    //  * @returns void\n    //  */\n    // public showToolbarItem(items: ToolbarItem[], isVisible: boolean): void {\n    //     if (this.toolbarModule) {\n    //         this.toolbarModule.showToolbarItem(items, isVisible);\n    //     }\n    // }\n    // /**\n    //  * Enables /disables the the toolbar items in the PdfViewer\n    //  * @param  {string[]} items\n    //  * @param  {boolean} isEnable\n    //  * @returns void\n    //  */\n    // public enableToolbarItem(items: ToolbarItem[], isEnable: boolean): void {\n    //     if (this.toolbarModule) {\n    //         this.toolbarModule.enableToolbarItem(items, isEnable);\n    //     }\n    // }\n    // /**\n    //  * Navigate to given Page number\n    //  * Note : In case if we have provided incorrect page number as argument it will retain the existing page\n    //  * @param  {number} pageNumber\n    //  * @returns void\n    //  */\n    // public goToPage(pageNumber: number): void {\n    //     this.navigationModule.goToPage(pageNumber);\n    // }\n    // /**\n    //  * Navigate to First page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToFirstPage(): void {\n    //     this.navigationModule.goToFirstPage();\n    // }\n    // /**\n    //  * Navigate to Previous page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToPreviousPage(): void {\n    //     this.navigationModule.goToPreviousPage();\n    // }\n    // /**\n    //  * Navigate to Next page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToNextPage(): void {\n    //     this.navigationModule.goToNextPage();\n    // }\n    // /**\n    //  * Navigate to Last page of the PDF document\n    //  * @returns void\n    //  */\n    // public goToLastPage(): void {\n    //     this.navigationModule.goToLastPage();\n    // }\n    // /**\n    //  * Zoom the PDF document to the given zoom value\n    //  * @param  {number} zoomValue\n    //  * @returns void\n    //  */\n    // public zoomTo(zoomValue: number): void {\n    //     if (this.viewerBase.pageCount !== 0) {\n    //         this.magnificationModule.zoomTo(zoomValue);\n    //     }\n    // }\n    // /**\n    //  * Magnifies the page to the next value in the zoom drop down list.\n    //  * @returns void\n    //  */\n    // public zoomIn(): void {\n    //     this.magnificationModule.zoomIn();\n    // }\n    // /**\n    //  * Magnifies the page to the previous value in the zoom drop down list.\n    //  * @returns void\n    //  */\n    // public zoomOut(): void {\n    //     this.magnificationModule.zoomOut();\n    // }\n    // /**\n    //  * Scales the page to fit the page in the container in the control.\n    //  * @param  {number} zoomValue\n    //  * @returns void\n    //  */\n    // public fitToPage(): void {\n    //     this.magnificationModule.fitToPage();\n    // }\n    // /**\n    //  * Scales the page to fit the page width to the width of the container in the control.\n    //  * @returns void\n    //  */\n    // public fitToWidth(): void {\n    //     this.magnificationModule.fitToWidth();\n    // }\n    /**\n     * Loads the given PDF document in the PDF viewer control\n     * @param  {string} document\n     * @param  {string} password\n     * @returns void\n     */\n    PdfViewer.prototype.load = function (document, password) {\n        if (this.viewerBase.pageCount !== 0) {\n            this.viewerBase.clear(true);\n        }\n        else {\n            this.viewerBase.clear(false);\n        }\n        this.viewerBase.pageCount = 0;\n        this.viewerBase.currentPageNumber = 0;\n        if (this.toolbarModule) {\n            this.toolbarModule.resetToolbar();\n        }\n        this.viewerBase.initiatePageRender(document, password);\n    };\n    // /**\n    //  * Display Bookmarks the PDF Document being loaded in the ejPdfViewer control\n    //  * @returns any\n    //  */\n    // // tslint:disable-next-line\n    // public getBookmarks(): any {\n    //     if (this.enableBookmark) {\n    //         // tslint:disable-next-line:max-line-length\n    //         return { bookmarks: this.bookmarkViewModule.bookmarks , bookmarksDestination: this.bookmarkViewModule.bookmarksDestination };\n    //     }\n    // }\n    // /**\n    //  * Navigate To current Bookmark Location the PDF document being loaded in the ejPdfViewer control.\n    //  * @returns void\n    //  */\n    // public navigateBookmark(pageIndex: number, Y: number): void {\n    //     this.bookmarkViewModule.navigateTo(pageIndex, Y);\n    // }\n    /**\n     * Downloads the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    PdfViewer.prototype.download = function () {\n        if (this.enableDownload) {\n            this.viewerBase.download();\n        }\n    };\n    // /**\n    //  * Print the PDF document being loaded in the ejPdfViewer control.\n    //  * @returns void\n    //  */\n    // public print(): void {\n    //     if (this.enablePrint) {\n    //         this.printModule.print();\n    //     }\n    // }\n    // /**\n    //  * Searches the target text in the PDF document and highlights the occurrences in the pages\n    //  * @param  {string} searchText\n    //  * @param  {boolean} isMatchCase\n    //  * @returns void\n    //  */\n    // public searchText(searchText: string, isMatchCase: boolean): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchText(searchText, isMatchCase);\n    //     }\n    // }\n    // /**\n    //  * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public searchNext(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchNext();\n    //     }\n    // }\n    // /**\n    //  * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public searchPrevious(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.searchPrevious();\n    //     }\n    // }\n    // /**\n    //  * Cancels the text search of the PdfViewer. \n    //  * @returns void\n    //  */\n    // public cancelTextSearch(): void {\n    //     if (this.textSearchModule) {\n    //         this.textSearchModule.cancelTextSearch();\n    //     }\n    // }\n    /**\n     * Unloads the PDF document being displayed in the PDF viewer.\n     * @returns void\n     */\n    PdfViewer.prototype.unload = function () {\n        this.viewerBase.clear(true);\n        this.viewerBase.pageCount = 0;\n        this.toolbarModule.resetToolbar();\n        this.magnificationModule.zoomTo(100);\n    };\n    /**\n     * Destroys all managed resources used by this object.\n     */\n    PdfViewer.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.element.classList.remove('e-pdfviewer');\n        if (this.toolbarModule) {\n            this.toolbarModule.destroy();\n        }\n        while (this.element.hasChildNodes()) {\n            this.element.removeChild(this.element.lastChild);\n        }\n        this.viewerBase.destroy();\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoad = function () {\n        var eventArgs = { name: 'documentLoad', documentName: this.fileName };\n        this.trigger('documentLoad', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentUnload = function (fileName) {\n        var eventArgs = { name: 'documentUnload', documentName: fileName };\n        this.trigger('documentUnload', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireDocumentLoadFailed = function (isPasswordRequired, password) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'documentLoadFailed', documentName: this.fileName, isPasswordRequired: isPasswordRequired, password: password };\n        this.trigger('documentLoadFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireAjaxRequestFailed = function (errorStatusCode, errorMessage) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'ajaxRequestFailed', documentName: this.fileName, errorStatusCode: errorStatusCode, errorMessage: errorMessage };\n        this.trigger('ajaxRequestFailed', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageClick = function (x, y, pageNumber) {\n        var eventArgs = { name: 'pageClick', documentName: this.fileName, x: x, y: y, pageNumber: pageNumber };\n        this.trigger('pageClick', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.firePageChange = function (previousPageNumber) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'pageChange', documentName: this.fileName, currentPageNumber: this.viewerBase.currentPageNumber, previousPageNumber: previousPageNumber };\n        this.trigger('pageChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireZoomChange = function () {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'zoomChange', zoomValue: this.magnificationModule.zoomFactor * 100, previousZoomValue: this.magnificationModule.previousZoomFactor * 100 };\n        this.trigger('zoomChange', eventArgs);\n    };\n    /**\n     * @private\n     */\n    PdfViewer.prototype.fireHyperlinkClick = function (hyperlink) {\n        // tslint:disable-next-line:max-line-length\n        var eventArgs = { name: 'hyperlinkClick', hyperlink: hyperlink };\n        this.trigger('hyperlinkClick', eventArgs);\n    };\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"serviceUrl\", void 0);\n    __decorate([\n        Property()\n    ], PdfViewer.prototype, \"documentPath\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], PdfViewer.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableToolbar\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableDownload\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enablePrint\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableThumbnail\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableBookmark\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableHyperlink\", void 0);\n    __decorate([\n        Property('CurrentTab')\n    ], PdfViewer.prototype, \"hyperlinkOpenState\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableNavigation\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableMagnification\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], PdfViewer.prototype, \"enableTextSearch\", void 0);\n    __decorate([\n        Property('TextSelection')\n    ], PdfViewer.prototype, \"interactionMode\", void 0);\n    __decorate([\n        Property({ showTooltip: true, toolbarItem: ['OpenOption', 'UndoRedoTool', 'PageNavigationTool', 'MagnificationTool', 'PanTool', 'SelectionTool', 'CommentOption', 'TextMarkupAnnotationOption', 'FreeTextAnnotationOption', 'InkAnnotationOption', 'ShapeAnnotationOption', 'StampAnnotation', 'SignatureOption', 'SearchOption', 'PrintOption', 'DownloadOption'] })\n    ], PdfViewer.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property({ load: 'Load', renderPages: 'RenderPdfPages', unload: 'Unload', download: 'Download', renderThumbnail: 'RenderThumbnailImages' })\n    ], PdfViewer.prototype, \"serverActionSettings\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoad\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentUnload\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"documentLoadFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"ajaxRequestFailed\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"pageChange\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"hyperlinkClick\", void 0);\n    __decorate([\n        Event()\n    ], PdfViewer.prototype, \"zoomChange\", void 0);\n    PdfViewer = __decorate([\n        NotifyPropertyChanges\n    ], PdfViewer);\n    return PdfViewer;\n}(Component));\nexport { PdfViewer };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n/**\n * BookmarkView module\n */\nvar BookmarkView = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function BookmarkView(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        this.nodeClick = function (args) {\n            var bookid = Number(args.nodeData.id);\n            var proxy = _this;\n            var pageIndex = _this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;\n            var Y = _this.bookmarksDestination.bookMarkDestination[bookid].Y;\n            _this.goToBookmark(pageIndex, Y);\n            return false;\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    BookmarkView.prototype.createRequestForBookmarks = function () {\n        var _this = this;\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint:disable-next-line:max-line-length\n        var jsonObject = { hashId: this.pdfViewerBase.hashId };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/Bookmarks');\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            if (request.readyState === 4 && request.status === 200) {\n                _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                if (event.currentTarget.response) {\n                    _this.bookmarks = { bookMark: event.currentTarget.response.Bookmarks };\n                    _this.bookmarksDestination = { bookMarkDestination: event.currentTarget.response.BookmarksDestination };\n                }\n                if (_this.bookmarks == null) {\n                    _this.pdfViewerBase.navigationPane.disableBookmarkButton();\n                }\n                else {\n                    _this.pdfViewerBase.navigationPane.enableBookmarkButton();\n                }\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            proxy.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.renderBookmarkcontent = function () {\n        if (this.bookmarkView != null) {\n            this.bookmarkView.remove();\n        }\n        this.bookmarkView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_view', className: 'e-pv-bookmark-view' });\n        this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);\n        // tslint:disable-next-line:max-line-length\n        var bookmarkIconView = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_iconview', className: 'e-pv-bookmark-icon-view' });\n        // tslint:disable-next-line:max-line-length\n        var bookmarkIcon = createElement('span', { id: this.pdfViewer.element.id + '_bookmark_icon', className: 'e-pv-bookmark-icon e-pv-icon' });\n        var bookmarkTitle = createElement('div', { id: this.pdfViewer.element.id + '_bookmark_Title', className: 'e-pv-bookmark-Title' });\n        bookmarkTitle.innerText = '${Title}';\n        bookmarkIconView.appendChild(bookmarkIcon);\n        bookmarkIconView.appendChild(bookmarkTitle);\n        // tslint:disable-next-line:max-line-length\n        var treeObj = new TreeView({\n            fields: {\n                dataSource: this.bookmarks.bookMark,\n                id: 'Id',\n                parentID: 'Pid',\n                text: 'Title',\n                hasChildren: 'HasChild',\n            },\n            nodeTemplate: bookmarkIconView.outerHTML,\n            nodeSelected: this.nodeClick.bind(this)\n        });\n        treeObj.appendTo(this.bookmarkView);\n    };\n    /**\n     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control\n     * @returns any\n     */\n    // tslint:disable-next-line\n    BookmarkView.prototype.getBookmarks = function () {\n        if (this.bookmarks && this.bookmarksDestination) {\n            // tslint:disable-next-line:max-line-length\n            return { bookmarks: this.bookmarks, bookmarksDestination: this.bookmarksDestination };\n        }\n    };\n    /**\n     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    BookmarkView.prototype.goToBookmark = function (pageIndex, y) {\n        var proxy = this;\n        var destPage = (this.pdfViewerBase.pageSize[pageIndex - 1].height);\n        // tslint:disable-next-line:max-line-length\n        var scrollValue = this.pdfViewerBase.pageSize[pageIndex].top * this.pdfViewerBase.getZoomFactor() + ((destPage - y) * this.pdfViewerBase.getZoomFactor());\n        var scroll = scrollValue.toString();\n        // tslint:disable-next-line:radix\n        proxy.pdfViewerBase.viewerContainer.scrollTop = parseInt(scroll);\n        proxy.pdfViewerBase.focusViewerContainer();\n        return false;\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.clear = function () {\n        this.pdfViewerBase.navigationPane.disableBookmarkButton();\n        this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();\n        if (this.bookmarks) {\n            this.bookmarks.bookMark = [];\n            this.bookmarks = null;\n        }\n        if (this.bookmarksDestination) {\n            this.bookmarksDestination.bookMarkDestination = [];\n        }\n        if (this.bookmarkView != null) {\n            while (this.bookmarkView.hasChildNodes()) {\n                this.bookmarkView.removeChild(this.bookmarkView.lastChild);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    BookmarkView.prototype.getModuleName = function () {\n        return 'BookmarkView';\n    };\n    return BookmarkView;\n}());\nexport { BookmarkView };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * The `TextSelection` module is used to handle the text selection of PDF viewer.\n * @hidden\n */\nvar TextSelection = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSelection(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSelection = false;\n        /**\n         * @private\n         */\n        this.selectionStartPage = null;\n        this.isBackwardPropagatedSelection = false;\n        this.selectionRangeArray = [];\n        this.selectionAnchorTouch = null;\n        this.selectionFocusTouch = null;\n        // tslint:disable-next-line\n        this.scrollMoveTimer = 0;\n        this.isMouseLeaveSelection = false;\n        this.isTouchSelection = false;\n        this.previousScrollDifference = 0;\n        this.topStoreLeft = null;\n        this.topStoreRight = null;\n        this.onLeftTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onRightTouchSelectElementTouchStart = function (event) {\n            _this.initiateSelectionByTouch();\n        };\n        this.onLeftTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onRightTouchSelectElementTouchEnd = function (event) {\n            _this.terminateSelectionByTouch(event);\n        };\n        this.onLeftTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var rightElement = _this.dropDivElementRight;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (rightElement && isTouchedWithinViewerContainer) {\n                var dropBounds = rightElement.getBoundingClientRect();\n                var xTouch = event.changedTouches[0].clientX;\n                var yTouch = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                if (document.caretRangeFromPoint) {\n                    range = document.caretRangeFromPoint(xTouch, yTouch);\n                    nodeElement = _this.onTouchElementScroll(range, nodeElement, yTouch, event);\n                }\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((yTouch - dropBounds.top) * (yTouch - dropBounds.top) + (xTouch - dropBounds.left) * (xTouch - dropBounds.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (yTouch <= dropBounds.top) {\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, false, 'left', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, xTouch, yTouch, true, 'left', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var elementClientRect = _this.dropDivElementLeft.getBoundingClientRect();\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(yTouch, _this.pdfViewerBase.currentPageNumber - 1);\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = xTouch - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        _this.topStoreLeft = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementLeft.style.left = xTouch - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        // tslint:disable-next-line\n        this.onRightTouchSelectElementTouchMove = function (event) {\n            var range;\n            var nodeElement;\n            event.preventDefault();\n            event.target.style.zIndex = '0';\n            var leftElement = _this.dropDivElementLeft;\n            var isTouchedWithinViewerContainer = _this.isTouchedWithinContainer(event);\n            if (leftElement && isTouchedWithinViewerContainer) {\n                var dropPosition = leftElement.getBoundingClientRect();\n                var touchX = event.changedTouches[0].clientX;\n                var touchY = event.changedTouches[0].clientY;\n                event.target.style.zIndex = '1000';\n                if (document.caretRangeFromPoint) {\n                    range = document.caretRangeFromPoint(touchX, touchY);\n                    nodeElement = _this.onTouchElementScroll(range, nodeElement, touchY, event);\n                }\n                if (nodeElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var currentDifference = Math.sqrt((touchY - dropPosition.top) * (touchY - dropPosition.top) + (touchX - dropPosition.left) * (touchX - dropPosition.left));\n                    var isCloserMovement = _this.isCloserTouchScroll(currentDifference);\n                    var isTextSelected = false;\n                    if (touchY >= dropPosition.top) {\n                        _this.dropElementRight.style.transform = 'rotate(-90deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(0deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, true, 'right', isCloserMovement);\n                    }\n                    else {\n                        _this.dropElementRight.style.transform = 'rotate(0deg)';\n                        _this.dropElementLeft.style.transform = 'rotate(-90deg)';\n                        isTextSelected = _this.selectTextByTouch(nodeElement.parentElement, touchX, touchY, false, 'right', isCloserMovement);\n                    }\n                    if (isTextSelected) {\n                        var pageTopValue = _this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber - 1].top;\n                        var topClientValue = _this.getClientValueTop(touchY, _this.pdfViewerBase.currentPageNumber - 1);\n                        var elementClientRect = _this.dropDivElementRight.getBoundingClientRect();\n                        _this.dropDivElementRight.style.top = pageTopValue * _this.pdfViewerBase.getZoomFactor() + topClientValue + 'px';\n                        // tslint:disable-next-line:max-line-length\n                        var currentPageLeft = _this.pdfViewerBase.getElement('_pageDiv_' + (_this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n                        var currentRangeLeft = touchX - currentPageLeft;\n                        // tslint:disable-next-line:max-line-length\n                        _this.topStoreRight = { pageTop: pageTopValue, topClientValue: _this.getMagnifiedValue(topClientValue), pageNumber: _this.pdfViewerBase.currentPageNumber - 1, left: _this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: false };\n                        // tslint:disable-next-line:max-line-length\n                        _this.dropDivElementRight.style.left = touchX - _this.pdfViewerBase.viewerContainer.getBoundingClientRect().left - (elementClientRect.width / 2) + 'px';\n                        _this.previousScrollDifference = currentDifference;\n                    }\n                }\n            }\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseMove = function (target, x, y) {\n        var targetElement = target;\n        if (targetElement.nodeType === targetElement.TEXT_NODE) {\n            this.isBackwardPropagatedSelection = false;\n            var range = targetElement.ownerDocument.createRange();\n            var selection = window.getSelection();\n            if (selection.anchorNode !== null) {\n                var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n                if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n                    this.isBackwardPropagatedSelection = true;\n                }\n            }\n            range.selectNodeContents(targetElement);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(targetElement, currentPosition);\n                range.setEnd(targetElement, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode !== null && selection.anchorNode.parentNode.classList.contains('e-pv-text')) {\n                        range.setStart(selection.anchorNode, selection.anchorOffset);\n                    }\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    if (!this.isTextSelection) {\n                        this.selectionStartPage = this.pdfViewerBase.currentPageNumber - 1;\n                    }\n                    this.isTextSelection = true;\n                    if (this.isBackwardPropagatedSelection) {\n                        selection.extend(targetElement, currentPosition);\n                    }\n                    else {\n                        selection.extend(targetElement, currentPosition + 1);\n                    }\n                    range.detach();\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < targetElement.childNodes.length; i++) {\n                if (targetElement.childNodes[i].nodeType === targetElement.TEXT_NODE) {\n                    var range = this.getSelectionRange(i, targetElement);\n                    var rangeBounds = range.getBoundingClientRect();\n                    if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                        range.detach();\n                        this.textSelectionOnMouseMove(targetElement.childNodes[i], x, y);\n                    }\n                    else {\n                        range.detach();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseLeave = function (event) {\n        var _this = this;\n        event.preventDefault();\n        var viewerTop = this.pdfViewerBase.viewerContainer.offsetTop;\n        if (this.pdfViewer.magnificationModule) {\n            if (this.pdfViewer.magnificationModule.fitType === 'fitToPage') {\n                return;\n            }\n        }\n        if (event.clientY > viewerTop) {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollForwardOnSelection(); }, 500);\n        }\n        else {\n            this.scrollMoveTimer = setInterval(function () { _this.scrollBackwardOnSelection(); }, 500);\n        }\n    };\n    TextSelection.prototype.scrollForwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop + 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    TextSelection.prototype.scrollBackwardOnSelection = function () {\n        this.isMouseLeaveSelection = true;\n        this.pdfViewerBase.viewerContainer.scrollTop = this.pdfViewerBase.viewerContainer.scrollTop - 200;\n        this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber - 1);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clear = function () {\n        if (this.scrollMoveTimer) {\n            this.isMouseLeaveSelection = false;\n            clearInterval(this.scrollMoveTimer);\n        }\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSelection.prototype.selectAWord = function (element, x, y, isStoreSelection) {\n        if (element.nodeType === element.TEXT_NODE) {\n            var selection = window.getSelection();\n            var range = element.ownerDocument.createRange();\n            range.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = range.endOffset;\n            while (currentPosition < endPosition) {\n                range.setStart(element, currentPosition);\n                range.setEnd(element, currentPosition + 1);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    var textContent = element.textContent;\n                    var indices = [];\n                    var startPosition = void 0;\n                    var endPos = void 0;\n                    for (var i = 0; i < textContent.length; i++) {\n                        if (textContent[i] === ' ') {\n                            indices.push(i);\n                        }\n                    }\n                    for (var j = 0; j < indices.length; j++) {\n                        if (currentPosition === indices[j]) {\n                            startPosition = indices[j];\n                            endPos = indices[j];\n                        }\n                        if (indices[0] > currentPosition) {\n                            startPosition = 0;\n                            endPos = indices[j];\n                            break;\n                        }\n                        if (currentPosition > indices[j] && currentPosition < indices[j + 1]) {\n                            startPosition = indices[j];\n                            endPos = indices[j + 1];\n                        }\n                        else if (currentPosition > indices[j]) {\n                            if (!indices[j + 1]) {\n                                startPosition = indices[j];\n                            }\n                        }\n                    }\n                    if (!endPos) {\n                        endPos = textContent.length;\n                    }\n                    if (startPosition === 0) {\n                        range.setStart(element, startPosition);\n                    }\n                    else {\n                        range.setStart(element, startPosition + 1);\n                    }\n                    range.setEnd(element, endPos);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    this.isTextSelection = true;\n                    // tslint:disable-next-line:radix\n                    this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n                    if (isStoreSelection) {\n                        // tslint:disable-next-line:max-line-length\n                        this.selectionAnchorTouch = { anchorNode: selection.anchorNode.parentElement.id, anchorOffset: selection.anchorOffset };\n                        this.selectionFocusTouch = { focusNode: selection.focusNode.parentElement.id, focusOffset: selection.focusOffset };\n                    }\n                    range.detach();\n                    break;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = this.getSelectionRange(i, element);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    this.selectAWord(element.childNodes[i], x, y, isStoreSelection);\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getSelectionRange = function (index, element) {\n        var range = element.childNodes[index].ownerDocument.createRange();\n        range.selectNodeContents(element.childNodes[index]);\n        return range;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.selectEntireLine = function (event) {\n        var textIds = [];\n        var targetElement = event.target;\n        var targetRect = targetElement.getBoundingClientRect();\n        // tslint:disable-next-line\n        var targetcentre = parseInt((targetRect.top + (targetRect.height / 2)).toString());\n        // tslint:disable-next-line:radix\n        var pageNumber = parseInt(event.target.id.split('_text_')[1]);\n        var textDivs = document.querySelectorAll('div[id*=\"_text_' + pageNumber + '\"]');\n        if (targetElement.classList.contains('e-pv-text')) {\n            for (var i = 0; i < textDivs.length; i++) {\n                var rect = textDivs[i].getBoundingClientRect();\n                // tslint:disable-next-line:radix\n                var topValue = parseInt(rect.top.toString());\n                // tslint:disable-next-line:radix\n                var bottomValue = parseInt(rect.bottom.toString());\n                if ((topValue <= targetcentre && bottomValue > targetcentre) && (targetRect.bottom + 10 > bottomValue)) {\n                    var textId = textDivs[i].id;\n                    if (textId !== '') {\n                        textIds.push(textId);\n                    }\n                }\n            }\n            var selection = window.getSelection();\n            selection.removeAllRanges();\n            var range = document.createRange();\n            var lengths = (textIds.length - 1);\n            var d1 = document.getElementById(textIds[0]);\n            var d2 = document.getElementById(textIds[lengths]);\n            var childNodes = d2.childNodes.length;\n            if (childNodes > 0) {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2.childNodes[0], d2.textContent.length);\n            }\n            else {\n                range.setStart(d1.childNodes[0], 0);\n                range.setEnd(d2, 1);\n            }\n            // tslint:disable-next-line:radix\n            this.selectionStartPage = parseInt(range.startContainer.parentElement.id.split('_text_')[1]);\n            selection.addRange(range);\n            this.isTextSelection = true;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.enableTextSelectionMode = function () {\n        this.pdfViewerBase.isTextSelectionDisabled = false;\n        this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');\n        this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');\n        this.pdfViewerBase.viewerContainer.addEventListener('selectstart', function () { return true; });\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.clearTextSelection = function () {\n        if (this.isTextSelection) {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (window.getSelection) {\n                if (window.getSelection().removeAllRanges) {\n                    window.getSelection().removeAllRanges();\n                }\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n                lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n                var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n                // tslint:disable-next-line:max-line-length\n                higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n                for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n                    this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i, false);\n                }\n            }\n            this.selectionRangeArray = [];\n            this.isTextSelection = false;\n            this.isTouchSelection = false;\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.removeTouchElements = function () {\n        if (this.dropDivElementLeft) {\n            this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);\n            this.dropDivElementLeft = null;\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n        }\n        if (this.dropDivElementRight) {\n            this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);\n            this.dropDivElementRight = null;\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.resizeTouchElements = function () {\n        var viewerContainerLeft = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n        if (this.dropDivElementLeft) {\n            var elementClientRect = this.dropDivElementLeft.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var leftCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreLeft.pageNumber).getBoundingClientRect();\n            this.dropDivElementLeft.style.left = parseFloat(this.topStoreLeft.left.toString()) * this.pdfViewerBase.getZoomFactor() + leftCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreLeft.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft.style.top = parseFloat(this.topStoreLeft.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreLeft.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n        if (this.dropDivElementRight) {\n            var elementClientRect = this.dropDivElementRight.getBoundingClientRect();\n            var dropElementHeight = 0;\n            // tslint:disable-next-line:max-line-length\n            var rightCurrentPagePosition = this.pdfViewerBase.getElement('_pageDiv_' + this.topStoreRight.pageNumber).getBoundingClientRect();\n            this.dropDivElementRight.style.left = parseFloat(this.topStoreRight.left.toString()) * this.pdfViewerBase.getZoomFactor() + rightCurrentPagePosition.left - viewerContainerLeft - (elementClientRect.width / 2) + 'px';\n            if (this.topStoreRight.isHeightNeeded) {\n                dropElementHeight = (elementClientRect.height / 2) * this.pdfViewerBase.getZoomFactor();\n            }\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.top = parseFloat(this.topStoreRight.pageTop.toString()) * this.pdfViewerBase.getZoomFactor() + parseFloat(this.topStoreRight.topClientValue.toString()) * this.pdfViewerBase.getZoomFactor() + dropElementHeight + 'px';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseup = function () {\n        this.clear();\n        if (window.getSelection().anchorNode !== null) {\n            this.isMouseLeaveSelection = false;\n            this.maintainSelectionOnZoom(true, false);\n            var isTextSearch = this.pdfViewerBase.textLayer.getTextSearchStatus();\n            if (isTextSearch) {\n                this.pdfViewerBase.textLayer.clearDivSelection();\n                // tslint:disable-next-line\n                var indexes = this.pdfViewer.textSearchModule.getIndexes();\n                var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n                var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n                for (var i = lowerPageValue; i < higherPageValue; i++) {\n                    this.applySelectionRangeOnScroll(i);\n                }\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            else {\n                this.applySpanForSelection();\n            }\n            if (this.pdfViewer.linkAnnotationModule) {\n                this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber - 1, false);\n            }\n        }\n        else {\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n            this.removeTouchElements();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnZoom = function (isMaintainSelection, isStich) {\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            var isBackward = this.isBackWardSelection(selection);\n            if (selection.anchorNode !== null) {\n                // tslint:disable-next-line:radix\n                var anchorPageId = parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var focusPageId = parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                if (this.isTouchSelection && isNaN(focusPageId)) {\n                    var focusElement = selection.focusNode;\n                    if (focusElement === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                        }\n                    }\n                }\n                if (!isBackward) {\n                    for (var i = anchorPageId; i <= focusPageId; i++) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n                else {\n                    for (var i = anchorPageId; i >= focusPageId; i--) {\n                        this.maintainSelectionOnScroll(i, isStich);\n                    }\n                }\n            }\n            if (!isMaintainSelection) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.isSelectionAvailableOnScroll = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    isSelectionAvailable = true;\n                    if (this.isTouchSelection && !this.pdfViewerBase.getMagnified()) {\n                        isSelectionAvailable = false;\n                    }\n                    break;\n                }\n            }\n        }\n        return isSelectionAvailable;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySelectionRangeOnScroll = function (pageNumber) {\n        if (this.isMouseLeaveSelection) {\n            this.applySelectionMouseScroll(pageNumber);\n        }\n        else {\n            this.applySelectionRange(pageNumber);\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.getSelectionRangeFromArray = function (pageNumber) {\n        var isSelectionAvailable = false;\n        var selectionRange = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    selectionRange = ranges[i];\n                    isSelectionAvailable = true;\n                    break;\n                }\n            }\n        }\n        return { isSelectionAvailable: isSelectionAvailable, selectionRange: selectionRange };\n    };\n    TextSelection.prototype.applySelectionRange = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n        if (textLayer) {\n            if (isSelectionAvailable && textLayer.childNodes.length !== 0) {\n                var selectionRange = selectionObject.selectionRange;\n                var anchorOffsetDiv = void 0;\n                var focusOffsetDiv = void 0;\n                var anchorOffset = void 0;\n                var focusOffset = void 0;\n                if (selectionRange.isBackward) {\n                    // tslint:disable-next-line:radix\n                    var startId = parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    var endId = parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);\n                    if (startId < endId) {\n                        anchorOffsetDiv = startId;\n                        anchorOffset = selectionRange.endOffset;\n                        focusOffset = selectionRange.startOffset;\n                        focusOffsetDiv = endId;\n                    }\n                    else {\n                        anchorOffsetDiv = endId;\n                        anchorOffset = selectionRange.startOffset;\n                        focusOffsetDiv = startId;\n                        focusOffset = selectionRange.endOffset;\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    anchorOffsetDiv = parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);\n                    // tslint:disable-next-line:radix\n                    focusOffsetDiv = parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);\n                    anchorOffset = selectionRange.startOffset;\n                    focusOffset = selectionRange.endOffset;\n                }\n                window.getSelection().removeAllRanges();\n                // tslint:disable-next-line:max-line-length\n                this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber, pageNumber, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n                if (this.pdfViewer.textSearchModule) {\n                    this.pdfViewer.textSearchModule.searchAfterSelection();\n                }\n            }\n        }\n    };\n    TextSelection.prototype.applySelectionMouseScroll = function (pageNumber) {\n        var selectionObject = this.getSelectionRangeFromArray(pageNumber);\n        var isSelectionAvailable = selectionObject.isSelectionAvailable;\n        if (isSelectionAvailable) {\n            var selectionRange = selectionObject.selectionRange;\n            var selection = window.getSelection();\n            var anchorNode = document.getElementById(selectionRange.startNode).childNodes[0];\n            var focusNode = document.getElementById(selectionRange.endNode).childNodes[0];\n            var range = document.createRange();\n            if (selection.anchorNode === null) {\n                if (!selectionRange.isBackward) {\n                    range.setStart(anchorNode, selectionRange.startOffset);\n                    range.setEnd(focusNode, selectionRange.endOffset);\n                }\n                else {\n                    range.setStart(focusNode, selectionRange.endOffset);\n                    range.setEnd(anchorNode, selectionRange.startOffset);\n                }\n            }\n            else {\n                // tslint:disable-next-line\n                var anchorPageIndex = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                if (isNaN(anchorPageIndex)) {\n                    // tslint:disable-next-line:radix\n                    anchorPageIndex = parseInt(selection.anchorNode.id.split('_text_')[1]);\n                }\n                // tslint:disable-next-line\n                var focusPageIndex = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                var currentAnchorIndex = parseInt(selectionRange.startNode.split('_text_')[1]);\n                if ((anchorPageIndex === focusPageIndex) && (anchorPageIndex === currentAnchorIndex)) {\n                    if (!selectionRange.isBackward) {\n                        range.setStart(anchorNode, selectionRange.startOffset);\n                        range.setEnd(focusNode, selectionRange.endOffset);\n                    }\n                    else {\n                        range.setStart(focusNode, selectionRange.endOffset);\n                        range.setEnd(anchorNode, selectionRange.startOffset);\n                    }\n                }\n                else {\n                    if (!selectionRange.isBackward) {\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            range.setStart(selection.anchorNode, selection.anchorOffset);\n                            range.setEnd(focusNode, selectionRange.endOffset);\n                        }\n                        else {\n                            range.setStart(anchorNode, selectionRange.startOffset);\n                            range.setEnd(selection.focusNode, selection.focusOffset);\n                        }\n                    }\n                    else {\n                        var isBackward = this.isBackWardSelection(selection);\n                        // tslint:disable-next-line:max-line-length\n                        if (anchorPageIndex > currentAnchorIndex && currentAnchorIndex > focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            // tslint:disable-next-line:max-line-length\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex && currentAnchorIndex < focusPageIndex && anchorPageIndex !== focusPageIndex) {\n                            if (!isBackward) {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex < currentAnchorIndex) {\n                            if (!isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(focusNode, selectionRange.endOffset);\n                                }\n                                else {\n                                    range.setStart(selection.anchorNode, selection.anchorOffset);\n                                    range.setEnd(anchorNode, selectionRange.startOffset);\n                                }\n                            }\n                            else {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                }\n                            }\n                        }\n                        else if (anchorPageIndex === currentAnchorIndex) {\n                            if (currentAnchorIndex === focusPageIndex) {\n                                range.setStart(anchorNode, selectionRange.startOffset);\n                                range.setEnd(anchorNode, selectionRange.startOffset);\n                                selection.removeAllRanges();\n                                selection.addRange(range);\n                                range = document.createRange();\n                                selection.extend(focusNode, selectionRange.endOffset);\n                            }\n                            else {\n                                if (isBackward) {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                        else if (focusPageIndex === currentAnchorIndex) {\n                            if (isBackward) {\n                                selection.extend(selection.focusNode, selection.focusOffset);\n                            }\n                            else {\n                                range.setStart(selection.anchorNode, selection.anchorOffset);\n                                range.setEnd(selection.focusNode, selection.focusOffset);\n                            }\n                        }\n                        else if (anchorPageIndex > currentAnchorIndex) {\n                            // tslint:disable-next-line:radix\n                            var currentAnchorOffset = parseInt(selectionRange.startNode.split('_' + currentAnchorIndex + '_')[1]);\n                            // tslint:disable-next-line:radix\n                            var currentFocusOffset = parseInt(selectionRange.endNode.split('_' + currentAnchorIndex + '_')[1]);\n                            if (isBackward) {\n                                if (currentAnchorIndex !== this.selectionRangeArray[0].pageNumber) {\n                                    if (currentAnchorOffset < currentFocusOffset) {\n                                        this.extendCurrentSelection(anchorNode.parentElement, selectionRange.startOffset, selection, range);\n                                    }\n                                    else {\n                                        range.setStart(focusNode.parentElement, selectionRange.endOffset);\n                                        range.setEnd(selection.anchorNode, selection.anchorOffset);\n                                    }\n                                }\n                                else {\n                                    this.extendCurrentSelection(focusNode.parentElement, selectionRange.endOffset, selection, range);\n                                }\n                            }\n                            else {\n                                if (currentAnchorOffset < currentFocusOffset) {\n                                    range.setStart(anchorNode, selectionRange.startOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                                else {\n                                    range.setStart(focusNode, selectionRange.endOffset);\n                                    range.setEnd(selection.focusNode, selection.focusOffset);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (range.toString() !== '') {\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.maintainSelectionOnScroll = function (pageNumber, isStich) {\n        var isSelectionAvailable = this.isSelectionAvailableOnScroll(pageNumber);\n        if (this.isTextSelection && !isSelectionAvailable) {\n            this.maintainSelection(pageNumber, isStich);\n        }\n    };\n    TextSelection.prototype.maintainSelection = function (pageNumber, isStich) {\n        var selection = window.getSelection();\n        if (this.isTextSelection && selection.type === 'Range') {\n            // tslint:disable-next-line\n            var anchorPageId = parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            // tslint:disable-next-line\n            var focusPageId = parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPageId) && selection.anchorNode !== null) {\n                var backward_1 = this.isBackWardSelection(selection);\n                if (!backward_1) {\n                    // tslint:disable-next-line:radix\n                    var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                    if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);\n                    }\n                    else {\n                        // tslint:disable-next-line:radix\n                        focusPageId = parseInt(lastChildNode.id.split('_pageDiv_')[1]);\n                    }\n                }\n                else {\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);\n                }\n            }\n            var backward = this.isBackWardSelection(selection);\n            if (this.isTouchSelection && pageNumber > focusPageId && pageNumber > anchorPageId) {\n                return;\n            }\n            if (anchorPageId === focusPageId) {\n                var selectionObject = null;\n                var selectionBounds = this.getSelectionBounds(selection.getRangeAt(0), pageNumber);\n                // tslint:disable-next-line:max-line-length\n                var anchorOffsetValue = (selection.anchorNode.parentElement.childNodes.length === 1) ? selection.anchorOffset : this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                var focusOffsetValue = (selection.focusNode.parentElement.childNodes.length === 1) ? selection.focusOffset : this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                selectionObject = {\n                    isBackward: backward, startNode: selection.anchorNode.parentElement.id,\n                    startOffset: anchorOffsetValue, endNode: selection.focusNode.parentElement.id,\n                    endOffset: focusOffsetValue, textContent: selection.toString(), pageNumber: pageNumber, bounds: selectionBounds\n                };\n                this.pushSelectionRangeObject(selectionObject, pageNumber);\n            }\n            else {\n                var selectionObject = this.createRangeObjectOnScroll(pageNumber, anchorPageId, focusPageId);\n                if (selectionObject) {\n                    this.pushSelectionRangeObject(selectionObject, pageNumber);\n                    if (isStich) {\n                        this.stichSelection(backward, selection, pageNumber);\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.getCorrectOffset = function (node, offset) {\n        var offsetValue = 0;\n        var parentElement = node.parentElement;\n        for (var i = 0; i < parentElement.childNodes.length; i++) {\n            if (parentElement.childNodes[i] === node) {\n                offsetValue = offsetValue + offset;\n                break;\n            }\n            else {\n                offsetValue = offsetValue + parentElement.childNodes[i].textContent.length;\n            }\n        }\n        return offsetValue;\n    };\n    TextSelection.prototype.pushSelectionRangeObject = function (selectionObject, pageNumber) {\n        if (this.isTouchSelection) {\n            var currentObject = this.selectionRangeArray.filter(\n            // tslint:disable-next-line\n            function (obj) {\n                return (obj.pageNumber === pageNumber);\n            });\n            if (currentObject.length > 0) {\n                var currentObjectIndex = this.selectionRangeArray.indexOf(currentObject[0]);\n                this.selectionRangeArray.splice(currentObjectIndex, 1, selectionObject);\n                return;\n            }\n        }\n        var nextPageObject = this.selectionRangeArray.filter(\n        // tslint:disable-next-line\n        function (obj) {\n            return (obj.pageNumber === (pageNumber + 1));\n        });\n        if (nextPageObject.length === 0) {\n            if (this.isTouchSelection && this.selectionRangeArray.length !== 0) {\n                var prevPageObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (obj.pageNumber === (pageNumber - 1));\n                });\n                if (prevPageObject.length !== 0) {\n                    var prevIndex = this.selectionRangeArray.indexOf(prevPageObject[0]);\n                    this.selectionRangeArray.splice(prevIndex + 1, 0, selectionObject);\n                }\n                else {\n                    var firstObject = this.selectionRangeArray[0];\n                    if (pageNumber < firstObject.pageNumber) {\n                        this.selectionRangeArray.splice(0, 0, selectionObject);\n                    }\n                    else {\n                        this.selectionRangeArray.push(selectionObject);\n                    }\n                }\n            }\n            else {\n                this.selectionRangeArray.push(selectionObject);\n            }\n        }\n        else {\n            var index = this.selectionRangeArray.indexOf(nextPageObject[0]);\n            this.selectionRangeArray.splice(index, 0, selectionObject);\n        }\n    };\n    TextSelection.prototype.extendCurrentSelection = function (element, offset, selection, range) {\n        var currentFocusOffset = selection.focusOffset;\n        var currentFocusElement = selection.focusNode.parentElement.id;\n        // tslint:disable-next-line\n        var focusPageId = isNaN(parseInt(currentFocusElement.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(currentFocusElement.split('_text_')[1]);\n        // tslint:disable-next-line:radix\n        if (isNaN(parseInt(currentFocusElement.split('_text_')[1]))) {\n            // tslint:disable-next-line\n            currentFocusElement = this.pdfViewerBase.getElement('_textLayer_' + (focusPageId + 1)).firstChild.id;\n        }\n        range.setStart(element.childNodes[0], offset);\n        range.setEnd(element.childNodes[0], offset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        selection.extend(document.getElementById(currentFocusElement).childNodes[0], currentFocusOffset);\n    };\n    TextSelection.prototype.stichSelection = function (backward, selection, pageNumber) {\n        var range = document.createRange();\n        var nextPageElement;\n        if (backward) {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 1));\n            if (nextPageElement) {\n                var lastElement = nextPageElement.lastChild;\n                if (lastElement) {\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber - 2));\n                    lastElement = nextPageElement.lastChild;\n                    this.extendCurrentSelection(lastElement, this.getTextLastLength(lastElement), selection, range);\n                }\n            }\n            else {\n                nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n                var lastElement = nextPageElement.firstChild;\n                this.extendCurrentSelection(lastElement, 0, selection, range);\n            }\n        }\n        else {\n            nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 1));\n            if (nextPageElement) {\n                var firstElement = nextPageElement.firstChild;\n                if (!firstElement) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (pageNumber + 2));\n                    firstElement = nextPageElement.firstChild;\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                else {\n                    range.setStart(firstElement.childNodes[0], 0);\n                }\n                range.setEnd(selection.focusNode, selection.focusOffset);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.textSelectionOnMouseWheel = function (currentPageNumber) {\n        this.isMouseLeaveSelection = true;\n        this.stichSelectionOnScroll(currentPageNumber);\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.stichSelectionOnScroll = function (currentPageNumber) {\n        var selection = window.getSelection();\n        if (this.isTextSelection) {\n            // tslint:disable-next-line:radix\n            var anchorPageId = parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            // tslint:disable-next-line:radix\n            var focusPageId = parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            var nextPageElement = void 0;\n            if (anchorPageId !== currentPageNumber && focusPageId !== currentPageNumber) {\n                var backward = this.isBackWardSelection(selection);\n                if (!backward) {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.lastChild;\n                        if (lastElement) {\n                            selection.extend(lastElement.childNodes[0], this.getTextLastLength(lastElement));\n                        }\n                        else {\n                            nextPageElement = this.pdfViewerBase.getElement('_textLayer_' + currentPageNumber);\n                            var lastElement_1 = nextPageElement.firstChild;\n                            selection.extend(lastElement_1.childNodes[0], 0);\n                        }\n                    }\n                }\n                else {\n                    nextPageElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (currentPageNumber - 1));\n                    if (nextPageElement) {\n                        var lastElement = nextPageElement.firstChild;\n                        if (lastElement) {\n                            selection.extend(lastElement.childNodes[0], 0);\n                        }\n                    }\n                }\n            }\n            this.maintainSelectionArray();\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.createRangeObjectOnScroll = function (pageNumber, anchorPageId, focusPageId) {\n        var selectionObject = null;\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null) {\n            var backward = this.isBackWardSelection(selection);\n            var firstElement = void 0;\n            var lastElement = void 0;\n            var startOffset = void 0;\n            var endOffset = void 0;\n            var element = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageNumber);\n            if (element.childNodes) {\n                if (!backward) {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = selection.anchorNode.parentElement;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber > anchorPageId && pageNumber < focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        var pageNumberIndex = selection.focusNode.parentElement.id.indexOf(focusPageId.toString());\n                        if (pageNumberIndex !== -1) {\n                            lastElement = selection.focusNode.parentElement;\n                            endOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        }\n                        else {\n                            // tslint:disable-next-line:max-line-length\n                            lastElement = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + focusPageId).lastChild;\n                            endOffset = this.getTextLastLength(lastElement);\n                        }\n                        startOffset = 0;\n                    }\n                }\n                else {\n                    if (pageNumber === anchorPageId) {\n                        firstElement = selection.anchorNode.parentElement;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.firstChild;\n                        startOffset = this.getCorrectOffset(selection.anchorNode, selection.anchorOffset);\n                        endOffset = 0;\n                    }\n                    else if (pageNumber < anchorPageId && pageNumber > focusPageId) {\n                        // tslint:disable-next-line:max-line-length\n                        firstElement = element.firstChild;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = 0;\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                    else if (pageNumber === focusPageId) {\n                        firstElement = selection.focusNode.parentElement;\n                        // tslint:disable-next-line:max-line-length\n                        lastElement = element.lastChild;\n                        startOffset = this.getCorrectOffset(selection.focusNode, selection.focusOffset);\n                        endOffset = this.getTextLastLength(lastElement);\n                    }\n                }\n                if (firstElement && lastElement) {\n                    // tslint:disable-next-line:max-line-length\n                    var selectionRangeObject = this.getSelectionRangeObject(firstElement.id, startOffset, lastElement.id, endOffset, pageNumber);\n                    var selectionString = selectionRangeObject.toString();\n                    var selectionBounds = this.getSelectionBounds(selectionRangeObject, pageNumber);\n                    // tslint:disable-next-line:max-line-length\n                    return selectionObject = { isBackward: backward, startNode: firstElement.id, startOffset: startOffset, endNode: lastElement.id, endOffset: endOffset, textContent: selectionString, pageNumber: pageNumber, bounds: selectionBounds };\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return null;\n    };\n    TextSelection.prototype.getSelectionRangeObject = function (startNode, startOffset, endNode, endOffset, pageNumber) {\n        var startElement = document.getElementById(startNode).childNodes[0];\n        var endElement = document.getElementById(endNode).childNodes[0];\n        // tslint:disable-next-line:radix\n        var currentAnchorOffset = parseInt(startNode.split('_' + pageNumber + '_')[1]);\n        // tslint:disable-next-line:radix\n        var currentFocusOffset = parseInt(endNode.split('_' + pageNumber + '_')[1]);\n        var range = document.createRange();\n        if (currentAnchorOffset < currentFocusOffset) {\n            range.setStart(startElement, startOffset);\n            range.setEnd(endElement, endOffset);\n        }\n        else {\n            range.setStart(endElement, endOffset);\n            range.setEnd(startElement, startOffset);\n        }\n        return range;\n    };\n    TextSelection.prototype.getSelectionBounds = function (range, pageNumber) {\n        var startElement = range.startContainer.parentElement;\n        var endElement = range.endContainer.parentElement;\n        var bounds = [];\n        if (startElement !== endElement) {\n            var newStartRange = document.createRange();\n            // tslint:disable-next-line:max-line-length\n            var startRange = this.createRangeForSelection(range.startContainer, range.endContainer, range.startOffset, range.endOffset, newStartRange);\n            bounds.push(this.normalizeBounds(startRange.getBoundingClientRect(), pageNumber));\n        }\n        else {\n            bounds.push(this.normalizeBounds(range.getBoundingClientRect(), pageNumber));\n        }\n        return bounds;\n    };\n    TextSelection.prototype.getTextId = function (elementId) {\n        var index = elementId.lastIndexOf('_');\n        var divId = elementId.substring(index + 1, elementId.length);\n        // tslint:disable-next-line:radix\n        return parseInt(divId);\n    };\n    TextSelection.prototype.normalizeBounds = function (bound, pageNumber) {\n        var newBounds = null;\n        var currentPageElement = this.pdfViewerBase.getElement('_pageDiv_' + pageNumber);\n        var currentPageRect = currentPageElement.getBoundingClientRect();\n        newBounds = {\n            bottom: this.getMagnifiedValue(bound.bottom - currentPageRect.top), height: this.getMagnifiedValue(bound.height),\n            left: this.getMagnifiedValue(bound.left - currentPageRect.left), top: this.getMagnifiedValue(bound.top - currentPageRect.top),\n            right: this.getMagnifiedValue(bound.right - currentPageRect.left), width: this.getMagnifiedValue(bound.height)\n        };\n        return newBounds;\n    };\n    TextSelection.prototype.getMagnifiedValue = function (value) {\n        return value / this.pdfViewerBase.getZoomFactor();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getCurrentSelectionBounds = function (pageNumber) {\n        var bounds = null;\n        var ranges = this.selectionRangeArray;\n        for (var i = 0; i < ranges.length; i++) {\n            if (ranges[i] !== null) {\n                if (pageNumber === ranges[i].pageNumber) {\n                    bounds = ranges[i].bounds;\n                }\n            }\n        }\n        return bounds;\n    };\n    TextSelection.prototype.createRangeForSelection = function (start, end, startOffset, endOffset, range) {\n        range.setStart(start, startOffset);\n        range.setEnd(end, endOffset);\n        return range;\n    };\n    TextSelection.prototype.maintainSelectionArray = function () {\n        var _this = this;\n        if (this.selectionRangeArray.length !== 0) {\n            var selection = window.getSelection();\n            var isBackward = this.isBackWardSelection(selection);\n            // tslint:disable-next-line\n            var anchorPage = isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.anchorNode.id.split('_pageDiv_')[1]) : parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(anchorPage)) {\n                // tslint:disable-next-line:radix\n                anchorPage = parseInt(selection.anchorNode.id.split('_text_')[1]);\n            }\n            // tslint:disable-next-line\n            var focusPage_1 = isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_pageDiv_')[1]) : parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n            if (isNaN(focusPage_1)) {\n                // tslint:disable-next-line\n                focusPage_1 = isNaN(parseInt(selection.focusNode.id.split('_text_')[1])) ? parseInt(selection.focusNode.id.split('_textLayer_')[1]) : parseInt(selection.focusNode.id.split('_text_')[1]);\n            }\n            var arrayObject = [];\n            if (!isBackward) {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((_this.selectionStartPage <= obj.pageNumber) && (obj.pageNumber < focusPage_1)));\n                });\n            }\n            else {\n                arrayObject = this.selectionRangeArray.filter(\n                // tslint:disable-next-line\n                function (obj) {\n                    return (!((focusPage_1 < obj.pageNumber) && (obj.pageNumber <= _this.selectionStartPage)));\n                });\n            }\n            if (arrayObject.length > 0) {\n                for (var i = 0; i < arrayObject.length; i++) {\n                    var indexInArray = this.selectionRangeArray.indexOf(arrayObject[i]);\n                    if (indexInArray !== -1) {\n                        this.selectionRangeArray.splice(indexInArray, 1);\n                    }\n                }\n                if (this.selectionRangeArray.length === 1) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.selectionRangeArray[0].pageNumber === anchorPage || this.selectionRangeArray[0].pageNumber === focusPage_1) {\n                        arrayObject = [];\n                    }\n                }\n            }\n        }\n    };\n    TextSelection.prototype.isBackWardSelection = function (selection) {\n        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        var backward = false;\n        if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) {\n            backward = true;\n        }\n        return backward;\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.applySpanForSelection = function () {\n        var selection = window.getSelection();\n        if (selection.anchorNode !== null && this.pdfViewerBase.viewerContainer.contains(selection.anchorNode)) {\n            var isBackWardSelection = this.isBackWardSelection(selection);\n            var anchorPageId = void 0;\n            var focusPageId = void 0;\n            var anchorOffsetDiv = void 0;\n            var focusOffsetDiv = void 0;\n            var anchorOffset = void 0;\n            var focusOffset = void 0;\n            if (isBackWardSelection) {\n                // tslint:disable-next-line:radix\n                anchorPageId = parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                focusPageId = parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = parseInt(selection.focusNode.parentElement.id.split('_text_')[1].split('_')[1]);\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = parseInt(selection.anchorNode.parentElement.id.split('_text_')[1].split('_')[1]);\n                anchorOffset = selection.focusOffset;\n                focusOffset = selection.anchorOffset;\n            }\n            else {\n                var anchorElement = selection.anchorNode.parentElement;\n                var focusElement = selection.focusNode.parentElement;\n                // tslint:disable-next-line\n                anchorPageId = (anchorElement.id.indexOf('text_') !== -1) ? parseInt(anchorElement.id.split('text_')[1]) : parseInt(anchorElement.id.split('_textLayer_')[1]);\n                // tslint:disable-next-line\n                focusPageId = (focusElement.id.indexOf('text_') !== -1) ? parseInt(focusElement.id.split('text_')[1]) : parseInt(focusElement.id.split('_textLayer_')[1]);\n                var isFocusChanged = false;\n                if (this.isTouchSelection) {\n                    if (selection.focusNode === this.pdfViewerBase.pageContainer) {\n                        var lastChildNode = this.pdfViewerBase.pageContainer.lastChild;\n                        if (lastChildNode.classList.contains('e-pv-touch-select-drop')) {\n                            var lastPageDiv = lastChildNode.previousSibling.previousSibling;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                        else if (lastChildNode.classList.contains('e-pv-page-div')) {\n                            var lastPageDiv = lastChildNode;\n                            // tslint:disable-next-line:radix\n                            focusPageId = parseInt(lastPageDiv.id.split('_pageDiv_')[1]);\n                            focusElement = this.pdfViewerBase.getElement('_textLayer_' + focusPageId).lastChild;\n                            isFocusChanged = true;\n                        }\n                    }\n                }\n                if (anchorElement.classList.contains('e-pv-maintaincontent')) {\n                    anchorElement = anchorElement.parentElement;\n                    // tslint:disable-next-line:radix\n                    anchorPageId = parseInt(anchorElement.id.split('text_')[1]);\n                }\n                if (focusElement.classList.contains('e-pv-maintaincontent')) {\n                    focusElement = focusElement.parentElement;\n                    // tslint:disable-next-line:radix\n                    focusPageId = parseInt(focusElement.id.split('text_')[1]);\n                }\n                if (anchorPageId === focusPageId) {\n                    if (anchorElement.contains(focusElement)) {\n                        anchorElement = focusElement;\n                    }\n                    if (focusElement.contains(anchorElement)) {\n                        focusElement = anchorElement;\n                    }\n                }\n                // tslint:disable-next-line:radix\n                anchorOffsetDiv = (anchorElement.id.split('text_')[1]) ? parseInt(anchorElement.id.split('text_')[1].split('_')[1]) : null;\n                // tslint:disable-next-line:radix\n                focusOffsetDiv = (focusElement.id.split('text_')[1]) ? parseInt(focusElement.id.split('text_')[1].split('_')[1]) : null;\n                anchorOffsetDiv = isNaN(anchorOffsetDiv) ? focusOffsetDiv : anchorOffsetDiv;\n                focusOffsetDiv = isNaN(focusOffsetDiv) ? anchorOffsetDiv : focusOffsetDiv;\n                anchorOffset = selection.anchorOffset;\n                focusOffset = !isFocusChanged ? selection.focusOffset : focusElement.textContent.length;\n            }\n            selection.removeAllRanges();\n            this.pdfViewerBase.textLayer.clearDivSelection();\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId, focusPageId, anchorOffsetDiv, focusOffsetDiv, anchorOffset, focusOffset);\n            if (this.pdfViewer.textSearchModule) {\n                this.pdfViewer.textSearchModule.searchAfterSelection();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.initiateTouchSelection = function (event, x, y) {\n        // tslint:disable-next-line\n        var element = event.target;\n        var belowElements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        if (belowElements.length !== 0) {\n            if (belowElements[0].classList.contains('e-pv-hyperlink') && belowElements[1].classList.contains('e-pv-text')) {\n                element = belowElements[1];\n            }\n        }\n        this.selectAWord(element, x, y, true);\n        this.createTouchSelectElement(event);\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.selectTextByTouch = function (element, x, y, isForwardSelection, target, isCloserMovement) {\n        var isTextSelected = false;\n        if (element.nodeType === element.TEXT_NODE) {\n            var rangeObject = element.ownerDocument.createRange();\n            var selection = window.getSelection();\n            rangeObject.selectNodeContents(element);\n            var currentPosition = 0;\n            var endPosition = rangeObject.endOffset;\n            while (currentPosition < endPosition) {\n                rangeObject.setStart(element, currentPosition);\n                rangeObject.setEnd(element, currentPosition + 1);\n                var rangeBounds = rangeObject.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    if (selection.anchorNode != null) {\n                        if (isForwardSelection) {\n                            rangeObject.setStart(selection.anchorNode, selection.anchorOffset);\n                        }\n                        // tslint:disable-next-line:max-line-length\n                        rangeObject = this.setTouchSelectionStartPosition(selection, rangeObject, isForwardSelection, target, element, currentPosition, isCloserMovement);\n                        if (isForwardSelection) {\n                            selection.extend(element, currentPosition);\n                        }\n                        isTextSelected = true;\n                    }\n                    rangeObject.detach();\n                    return isTextSelected;\n                }\n                currentPosition += 1;\n            }\n        }\n        else {\n            for (var i = 0; i < element.childNodes.length; i++) {\n                var range = element.childNodes[i].ownerDocument.createRange();\n                range.selectNodeContents(element.childNodes[i]);\n                var rangeBounds = range.getBoundingClientRect();\n                if (rangeBounds.left <= x && rangeBounds.right >= x && rangeBounds.top <= y && rangeBounds.bottom >= y) {\n                    range.detach();\n                    return (this.selectTextByTouch(element.childNodes[i], x, y, isForwardSelection, target, isCloserMovement));\n                }\n                else {\n                    range.detach();\n                }\n            }\n        }\n        return isTextSelected;\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.setTouchSelectionStartPosition = function (selection, range, isForwardSelection, target, element, currentPosition, isCloserMovement) {\n        if (isForwardSelection) {\n            if (target === 'left') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchFocusElement(selection, true);\n                range.setStart(startNode.focusNode, startNode.focusOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionAnchorTouch = { anchorNode: range.endContainer.parentElement.id, anchorOffset: range.endOffset };\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, false);\n                range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                range.setEnd(element, currentPosition);\n                this.selectionFocusTouch = { focusNode: range.endContainer.parentElement.id, focusOffset: range.endOffset };\n            }\n        }\n        else {\n            if (target === 'left') {\n                if (!isCloserMovement) {\n                    // tslint:disable-next-line\n                    var startNode = this.getTouchFocusElement(selection, false);\n                    range.setStart(element, currentPosition);\n                    // tslint:disable-next-line:radix\n                    range.setEnd(startNode.focusNode, startNode.focusOffset);\n                    if (range.toString() === '') {\n                        range.setStart(element, currentPosition);\n                        range.setEnd(selection.focusNode, selection.focusOffset);\n                    }\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n                else {\n                    range.setStart(element, currentPosition);\n                    range.setEnd(selection.focusNode, selection.focusOffset);\n                    this.selectionAnchorTouch = { anchorNode: range.startContainer.parentElement.id, anchorOffset: range.startOffset };\n                }\n            }\n            else if (target === 'right') {\n                // tslint:disable-next-line\n                var startNode = this.getTouchAnchorElement(selection, true);\n                range.setStart(element, currentPosition);\n                range.setEnd(startNode.anchorNode, startNode.anchorOffset);\n                if (range.toString() === '') {\n                    range.setStart(startNode.anchorNode, startNode.anchorOffset);\n                    range.setEnd(element, currentPosition);\n                }\n                this.selectionFocusTouch = { focusNode: range.startContainer.parentElement.id, focusOffset: range.startOffset };\n            }\n        }\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return range;\n    };\n    TextSelection.prototype.getTouchAnchorElement = function (selection, isCurrentFocus) {\n        var element = document.getElementById(this.selectionAnchorTouch.anchorNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionAnchorTouch.anchorOffset.toString());\n        }\n        else {\n            if (isCurrentFocus) {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n            else {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n        }\n        return { anchorNode: startNode, anchorOffset: offset };\n    };\n    TextSelection.prototype.getTouchFocusElement = function (selection, isCurrentAnchor) {\n        var element = document.getElementById(this.selectionFocusTouch.focusNode.toString());\n        var startNode = null;\n        var offset = 0;\n        if (element) {\n            startNode = element.childNodes[0];\n            // tslint:disable-next-line:radix\n            offset = parseInt(this.selectionFocusTouch.focusOffset.toString());\n        }\n        else {\n            if (isCurrentAnchor) {\n                startNode = selection.anchorNode;\n                offset = selection.anchorOffset;\n            }\n            else {\n                startNode = selection.focusNode;\n                offset = selection.focusOffset;\n            }\n        }\n        return { focusNode: startNode, focusOffset: offset };\n    };\n    TextSelection.prototype.createTouchSelectElement = function (event) {\n        this.isTouchSelection = true;\n        var selection = window.getSelection();\n        if (selection.type === 'Range') {\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementLeft = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_left', className: 'e-pv-touch-select-drop' });\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight = createElement('div', { id: this.pdfViewer.element.id + '_touchSelect_droplet_right', className: 'e-pv-touch-select-drop' });\n            this.dropElementLeft = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementLeft.style.transform = 'rotate(0deg)';\n            this.dropDivElementLeft.appendChild(this.dropElementLeft);\n            this.dropElementRight = createElement('div', { className: 'e-pv-touch-ellipse' });\n            this.dropElementRight.style.transform = 'rotate(-90deg)';\n            this.dropDivElementRight.appendChild(this.dropElementRight);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);\n            this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);\n            var range = selection.getRangeAt(0);\n            var rangePosition = range.getBoundingClientRect();\n            var dropElementRect = this.dropDivElementLeft.getBoundingClientRect();\n            // tslint:disable-next-line:max-line-length\n            var pageTopValue = this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber - 1].top;\n            var viewerLeftPosition = this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;\n            var topClientValue = this.getClientValueTop(rangePosition.top, this.pdfViewerBase.currentPageNumber - 1);\n            // tslint:disable-next-line:max-line-length\n            var topPositionValue = topClientValue + pageTopValue * this.pdfViewerBase.getZoomFactor() + (dropElementRect.height / 2) * this.pdfViewerBase.getZoomFactor() + 'px';\n            this.dropDivElementLeft.style.top = topPositionValue;\n            this.dropDivElementLeft.style.left = rangePosition.left - (viewerLeftPosition + (dropElementRect.width)) + 'px';\n            this.dropDivElementRight.style.top = topPositionValue;\n            // tslint:disable-next-line:max-line-length\n            this.dropDivElementRight.style.left = rangePosition.left + rangePosition.width - viewerLeftPosition + 'px';\n            var currentPageLeft = this.pdfViewerBase.getElement('_pageDiv_' + (this.pdfViewerBase.currentPageNumber - 1)).getBoundingClientRect().left;\n            var currentRangeLeft = rangePosition.left - currentPageLeft;\n            // tslint:disable-next-line:max-line-length\n            this.topStoreLeft = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft), isHeightNeeded: true };\n            // tslint:disable-next-line:max-line-length\n            this.topStoreRight = { pageTop: pageTopValue, topClientValue: this.getMagnifiedValue(topClientValue), pageNumber: this.pdfViewerBase.currentPageNumber - 1, left: this.getMagnifiedValue(currentRangeLeft + rangePosition.width), isHeightNeeded: true };\n            this.dropDivElementLeft.addEventListener('touchstart', this.onLeftTouchSelectElementTouchStart);\n            this.dropDivElementLeft.addEventListener('touchmove', this.onLeftTouchSelectElementTouchMove);\n            this.dropDivElementLeft.addEventListener('touchend', this.onLeftTouchSelectElementTouchEnd);\n            this.dropDivElementRight.addEventListener('touchstart', this.onRightTouchSelectElementTouchStart);\n            this.dropDivElementRight.addEventListener('touchmove', this.onRightTouchSelectElementTouchMove);\n            this.dropDivElementRight.addEventListener('touchend', this.onRightTouchSelectElementTouchEnd);\n            // tslint:disable-next-line:max-line-length\n            this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.touches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop, event.touches[0].clientX - this.pdfViewerBase.viewerContainer.clientLeft, this.pdfViewerBase.viewerContainer);\n        }\n    };\n    TextSelection.prototype.initiateSelectionByTouch = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.close();\n        var lowerPageIndex = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageIndex = (lowerPageIndex < 0) ? 0 : lowerPageIndex;\n        var higherPageIndex = this.pdfViewer.currentPageNumber + 1;\n        // tslint:disable-next-line:max-line-length\n        higherPageIndex = (higherPageIndex < (this.pdfViewerBase.pageCount - 1)) ? higherPageIndex : (this.pdfViewerBase.pageCount - 1);\n        for (var i = lowerPageIndex; i <= higherPageIndex; i++) {\n            var textLayer = this.pdfViewerBase.getElement('_textLayer_' + i);\n            if (textLayer) {\n                if (textLayer.childNodes !== null) {\n                    this.applySelectionMouseScroll(i);\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSelection.prototype.terminateSelectionByTouch = function (event) {\n        this.maintainSelectionOnZoom(true, false);\n        this.applySpanForSelection();\n        // tslint:disable-next-line:max-line-length\n        this.pdfViewerBase.contextMenuModule.contextMenuObj.open(event.changedTouches[0].clientY - this.pdfViewerBase.viewerContainer.offsetTop + this.pdfViewerBase.contextMenuModule.contextMenuElement.clientHeight, event.changedTouches[0].clientX - this.pdfViewerBase.viewerContainer.offsetLeft, this.pdfViewerBase.viewerContainer);\n    };\n    TextSelection.prototype.isTouchedWithinContainer = function (event) {\n        var elements = document.elementsFromPoint(event.touches[0].clientX, event.touches[0].clientY);\n        var isTouchedWithinContainer = false;\n        if (elements.length !== 0) {\n            isTouchedWithinContainer = true;\n        }\n        return isTouchedWithinContainer;\n    };\n    TextSelection.prototype.onTouchElementScroll = function (range, nodeElement, touchY, event) {\n        var viewerScrollTop = this.pdfViewerBase.viewerContainer.scrollTop;\n        if (range != null) {\n            nodeElement = range.startContainer;\n            var isScrollBar = this.isScrolledOnScrollBar(event);\n            if (!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement) || isScrollBar) {\n                if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n                }\n                else {\n                    this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n                }\n            }\n        }\n        else {\n            if (touchY < this.pdfViewerBase.viewerContainer.clientHeight) {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop - 30;\n            }\n            else {\n                this.pdfViewerBase.viewerContainer.scrollTop = viewerScrollTop + 30;\n            }\n        }\n        return nodeElement;\n    };\n    TextSelection.prototype.isCloserTouchScroll = function (currentDifference) {\n        var isForwardMovement = false;\n        if (this.previousScrollDifference > currentDifference) {\n            isForwardMovement = true;\n        }\n        return isForwardMovement;\n    };\n    TextSelection.prototype.getClientValueTop = function (clientValue, pageNumber) {\n        // tslint:disable-next-line:max-line-length\n        return clientValue - this.pdfViewerBase.getElement('_pageDiv_' + pageNumber).getBoundingClientRect().top;\n    };\n    TextSelection.prototype.isScrolledOnScrollBar = function (event) {\n        var isScrollBar = false;\n        // tslint:disable-next-line:max-line-length\n        if ((this.pdfViewerBase.viewerContainer.clientHeight + this.pdfViewerBase.viewerContainer.offsetTop) < event.touches[0].clientY && event.touches[0].clientY < (this.pdfViewerBase.viewerContainer.offsetHeight + this.pdfViewerBase.viewerContainer.offsetTop)) {\n            isScrollBar = true;\n        }\n        return isScrollBar;\n    };\n    TextSelection.prototype.getTextLastLength = function (element) {\n        if (element) {\n            return element.textContent.length;\n        }\n        else {\n            return 0;\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.copyText = function () {\n        var selectionText = '';\n        this.maintainSelectionOnZoom(true, false);\n        if (this.selectionRangeArray.length > 0) {\n            for (var i = 0; i < this.selectionRangeArray.length; i++) {\n                selectionText += this.selectionRangeArray[i].textContent;\n            }\n        }\n        if (selectionText.length > 0) {\n            var textArea = document.createElement('textarea');\n            textArea.contentEditable = 'true';\n            textArea.textContent = selectionText;\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n            }\n            catch (ex) {\n                console.warn('Copy to clipboard failed.', ex);\n            }\n            finally {\n                if (textArea) {\n                    document.body.removeChild(textArea);\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.destroy = function () {\n        this.clear();\n    };\n    /**\n     * @private\n     */\n    TextSelection.prototype.getModuleName = function () {\n        return 'TextSelection';\n    };\n    return TextSelection;\n}());\nexport { TextSelection };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n/**\n * TextSearch module\n */\nvar TextSearch = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function TextSearch(pdfViewer, pdfViewerBase) {\n        var _this = this;\n        /**\n         * @private\n         */\n        this.isTextSearch = false;\n        this.searchIndex = 0;\n        this.currentSearchIndex = 0;\n        this.searchPageIndex = null;\n        this.searchString = null;\n        this.isMatchCase = false;\n        // tslint:disable-next-line\n        this.textContents = new Array();\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n        this.searchedPages = [];\n        this.isPrevSearch = false;\n        // tslint:disable-next-line\n        this.tempElementStorage = new Array();\n        this.checkBoxOnChange = function (event) {\n            if (event.checked) {\n                _this.isMatchCase = true;\n            }\n            else {\n                _this.isMatchCase = false;\n            }\n            if (_this.isTextSearch) {\n                _this.resetVariables();\n                _this.clearAllOccurrences();\n                var inputString = _this.searchInput.value;\n                _this.searchIndex = 0;\n                _this.textSearch(inputString);\n            }\n        };\n        this.searchKeypressHandler = function (event) {\n            _this.enableNextButton(true);\n            _this.enablePrevButton(true);\n            if (event.which === 13) {\n                _this.initiateTextSearch();\n                _this.updateSearchInputIcon(false);\n            }\n            else {\n                _this.resetVariables();\n            }\n        };\n        this.searchClickHandler = function (event) {\n            if (_this.searchBtn.classList.contains('e-pv-search-icon')) {\n                _this.initiateTextSearch();\n            }\n            else if (_this.searchBtn.classList.contains('e-pv-search-close')) {\n                _this.searchInput.value = '';\n                _this.resetTextSearch();\n                _this.searchInput.focus();\n            }\n        };\n        this.nextButtonOnClick = function (event) {\n            _this.nextSearch();\n        };\n        this.prevButtonOnClick = function (event) {\n            _this.prevSearch();\n        };\n        this.pdfViewer = pdfViewer;\n        this.pdfViewerBase = pdfViewerBase;\n    }\n    /**\n     * @private\n     */\n    TextSearch.prototype.createTextSearchBox = function () {\n        var _this = this;\n        // tslint:disable-next-line:max-line-length\n        this.searchBox = createElement('div', { id: this.pdfViewer.element.id + '_search_box', className: 'e-pv-search-bar' });\n        var searchElementsContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_box_elements', className: 'e-pv-search-bar-elements' });\n        // tslint:disable-next-line:max-line-length\n        var searchInputContainer = createElement('div', { id: this.pdfViewer.element.id + '_search_input_container', className: 'e-input-group e-pv-search-input' });\n        this.searchInput = createElement('input', { id: this.pdfViewer.element.id + '_search_input', className: 'e-input' });\n        this.searchInput.type = 'text';\n        this.searchInput.placeholder = this.pdfViewer.localeObj.getConstant('Find in document');\n        // tslint:disable-next-line:max-line-length\n        this.searchBtn = createElement('span', { id: this.pdfViewer.element.id + '_search_box-icon', className: 'e-input-group-icon e-pv-search-icon' });\n        searchInputContainer.appendChild(this.searchInput);\n        searchInputContainer.appendChild(this.searchBtn);\n        searchElementsContainer.appendChild(searchInputContainer);\n        this.prevSearchBtn = this.createSearchBoxButtons('prev_occurrence', 'e-pv-prev-search');\n        searchElementsContainer.appendChild(this.prevSearchBtn);\n        this.nextSearchBtn = this.createSearchBoxButtons('next_occurrence', 'e-pv-next-search');\n        searchElementsContainer.appendChild(this.nextSearchBtn);\n        // tslint:disable-next-line:max-line-length\n        var matchCaseContainer = createElement('div', { id: this.pdfViewer.element.id + '_match_case_container', className: 'e-pv-match-case-container' });\n        var matchCaseInput = createElement('input', { id: this.pdfViewer.element.id + '_match_case' });\n        matchCaseInput.type = 'checkbox';\n        matchCaseContainer.appendChild(matchCaseInput);\n        this.searchBox.appendChild(searchElementsContainer);\n        this.searchBox.appendChild(matchCaseContainer);\n        this.pdfViewerBase.mainContainer.appendChild(this.searchBox);\n        // tslint:disable-next-line:max-line-length\n        this.checkBox = new CheckBox({ cssClass: 'e-pv-match-case', label: this.pdfViewer.localeObj.getConstant('Match case'), change: this.checkBoxOnChange.bind(this) });\n        this.checkBox.appendTo(matchCaseInput);\n        this.showSearchBox(false);\n        this.searchBox.style.right = '88.3px';\n        this.searchInput.addEventListener('focus', function () {\n            _this.searchInput.parentElement.classList.add('e-input-focus');\n        });\n        this.searchInput.addEventListener('blur', function () {\n            _this.searchInput.parentElement.classList.remove('e-input-focus');\n        });\n        this.searchInput.addEventListener('keypress', this.searchKeypressHandler.bind(this));\n        this.searchBtn.addEventListener('click', this.searchClickHandler.bind(this));\n        this.nextSearchBtn.addEventListener('click', this.nextButtonOnClick.bind(this));\n        this.prevSearchBtn.addEventListener('click', this.prevButtonOnClick.bind(this));\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.textSearchBoxOnResize = function () {\n        // tslint:disable-next-line:max-line-length\n        if (this.pdfViewerBase.viewerContainer.clientWidth + this.pdfViewerBase.viewerContainer.offsetLeft < this.searchBox.offsetLeft + this.searchBox.clientWidth) {\n            this.searchBox.style.right = '0px';\n            // tslint:disable-next-line\n            this.searchBox.style.width = parseInt(this.searchBox.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n            // tslint:disable-next-line\n            this.searchInput.style.width = parseInt(this.searchInput.style.width) - ((this.searchBox.offsetLeft + this.searchBox.clientWidth) - (this.pdfViewerBase.viewerContainer.clientWidth)) + 'px';\n        }\n        else {\n            this.searchBox.style.right = '88.3px';\n            this.searchBox.style.width = '';\n            this.searchInput.style.width = '';\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.showSearchBox = function (isShow) {\n        if (isShow) {\n            this.searchBox.style.display = 'block';\n        }\n        else {\n            this.searchBox.style.display = 'none';\n        }\n        this.onTextSearchClose();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.searchAfterSelection = function () {\n        if (this.isTextSearch) {\n            this.initSearch(this.searchPageIndex, true);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.initiateTextSearch = function () {\n        var inputString = this.searchInput.value;\n        if (inputString !== this.searchString) {\n            this.isTextSearch = false;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n        }\n        this.clearAllOccurrences();\n        if (inputString !== '') {\n            if (this.searchCollection[this.searchPageIndex] && inputString === this.searchString) {\n                if (this.searchCollection[this.searchPageIndex].length === 0) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.nextSearch();\n                }\n            }\n            else {\n                this.resetVariables();\n                this.searchIndex = 0;\n                this.textSearch(inputString);\n            }\n        }\n    };\n    TextSearch.prototype.textSearch = function (inputString) {\n        if (inputString !== '' || inputString) {\n            this.searchString = inputString;\n            this.isTextSearch = true;\n            this.searchPageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            this.initSearch(this.searchPageIndex, false);\n            this.highlightOthers();\n        }\n    };\n    TextSearch.prototype.nextSearch = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex + 1;\n            if (this.searchCollection[this.searchPageIndex]) {\n                // tslint:disable-next-line:max-line-length\n                if (this.searchIndex >= this.searchCollection[this.searchPageIndex].length || this.searchPageIndex !== this.pdfViewerBase.currentPageNumber - 1) {\n                    this.searchIndex = 0;\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    this.highlightSearchedTexts(this.searchPageIndex, false);\n                }\n                this.highlightOthers();\n            }\n            else {\n                this.initiateTextSearch();\n            }\n        }\n        else {\n            this.initiateTextSearch();\n        }\n    };\n    TextSearch.prototype.prevSearch = function () {\n        this.isPrevSearch = true;\n        this.isTextSearch = true;\n        if (this.searchString) {\n            this.clearAllOccurrences();\n            this.searchIndex = this.searchIndex - 1;\n            if (this.searchIndex < 0) {\n                this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                this.initSearch(this.searchPageIndex, false);\n            }\n            else {\n                this.highlightSearchedTexts(this.searchPageIndex, false);\n            }\n            this.highlightOthers();\n        }\n        else {\n            this.searchIndex = this.searchIndex - 1;\n            this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n            var inputString = this.searchInput.value;\n            this.textSearch(inputString);\n        }\n    };\n    TextSearch.prototype.initSearch = function (pageIndex, isSinglePageSearch) {\n        // tslint:disable-next-line\n        var storedData = this.pdfViewerBase.getStoredData(pageIndex);\n        var pageText = null;\n        var textContents = null;\n        if (storedData) {\n            // tslint:disable-next-line\n            pageText = storedData['pageText'];\n            // tslint:disable-next-line\n            textContents = storedData['textContent'];\n            this.textContents[pageIndex] = textContents;\n            this.getPossibleMatches(pageIndex, this.searchString, pageText, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                this.createRequestForSearch(pageIndex);\n            }\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.getPossibleMatches = function (pageIndex, searchString, pageString, textContents, isSinglePageSearch) {\n        var pageText = pageString;\n        var searchText = searchString;\n        var queryLength = searchString.length;\n        if (!this.isMatchCase) {\n            searchText = searchString.toLowerCase();\n            pageText = pageString.toLowerCase();\n        }\n        var matches = [];\n        var matchIndex = -queryLength;\n        while (matchIndex !== 0) {\n            if (searchText === '' || searchText === ' ' || !searchText) {\n                break;\n            }\n            matchIndex = pageText.indexOf(searchText, matchIndex + queryLength);\n            if (matchIndex === -1) {\n                break;\n            }\n            matches.push(matchIndex);\n        }\n        this.searchMatches[pageIndex] = matches;\n        if (!isSinglePageSearch) {\n            if (this.searchedPages.indexOf(pageIndex) === -1) {\n                this.searchedPages.push(pageIndex);\n            }\n            this.updateSearchInputIcon(false);\n        }\n        if (this.searchMatches[pageIndex].length !== 0) {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchIndex = this.searchMatches[pageIndex].length - 1;\n                }\n                if ((this.pdfViewerBase.currentPageNumber - 1) !== this.searchPageIndex) {\n                    // tslint:disable-next-line:max-line-length\n                    if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (this.searchPageIndex) === this.currentSearchIndex) {\n                        this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                        this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                        this.searchedPages = [];\n                    }\n                    this.pdfViewerBase.updateScrollTop(this.searchPageIndex);\n                }\n            }\n            this.convertMatches(pageIndex, queryLength, textContents, isSinglePageSearch);\n        }\n        else {\n            if (!isSinglePageSearch) {\n                if (this.isPrevSearch) {\n                    this.searchPageIndex = ((this.searchPageIndex - 1) < 0) ? (this.pdfViewerBase.pageCount - 1) : this.searchPageIndex - 1;\n                }\n                else {\n                    this.searchPageIndex = ((this.searchPageIndex + 1) < this.pdfViewerBase.pageCount) ? (this.searchPageIndex + 1) : 0;\n                }\n                if (this.searchedPages.indexOf(this.searchPageIndex) === -1 && this.searchedPages.length !== this.pdfViewerBase.pageCount) {\n                    this.initSearch(this.searchPageIndex, false);\n                }\n                else {\n                    var searchPageIndex = this.getSearchPage(pageIndex);\n                    if (!this.searchCollection[this.searchPageIndex] && this.searchCollection.length === 0) {\n                        // tslint:disable-next-line:max-line-length\n                        this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                    }\n                    else if (this.searchCollection.length > 0 && (this.searchIndex === 0 || this.searchIndex === -1) && (searchPageIndex) === this.currentSearchIndex) {\n                        if (this.isPrevSearch) {\n                            // tslint:disable-next-line:max-line-length\n                            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = -1;\n                        }\n                        else {\n                            this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant('No matches'));\n                            this.searchPageIndex = this.getSearchPage(this.pdfViewerBase.currentPageNumber - 1);\n                            this.searchedPages = [];\n                            this.searchIndex = 0;\n                        }\n                        this.highlightSearchedTexts(this.searchPageIndex, isSinglePageSearch);\n                    }\n                }\n            }\n        }\n    };\n    TextSearch.prototype.getSearchPage = function (pageIndex) {\n        var pageNumber = null;\n        if (this.isPrevSearch) {\n            for (var i = pageIndex; i >= 0; i--) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = this.pdfViewerBase.pageCount - 1; j > pageIndex; j--) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = pageIndex; i < this.pdfViewerBase.pageCount; i++) {\n                if (i !== pageIndex && this.searchCollection[i]) {\n                    pageNumber = i;\n                    break;\n                }\n            }\n            if (!pageNumber) {\n                for (var j = 0; j < pageIndex; j++) {\n                    if (this.searchCollection[j]) {\n                        pageNumber = j;\n                        break;\n                    }\n                }\n            }\n        }\n        return pageNumber;\n    };\n    TextSearch.prototype.convertMatches = function (pageIndex, queryLength, textContents, isSinglePageSearch) {\n        var m = 0;\n        var matches = this.searchMatches[pageIndex];\n        var divIndex = 0;\n        var end = textContents.length - 1;\n        var matchCollection = [];\n        for (var i = 0; i < matches.length; i++) {\n            var matchIndex = matches[i];\n            while (m !== end && matchIndex >= (divIndex + textContents[m].split('\\r\\n')[0].length)) {\n                divIndex += textContents[m].split('\\r\\n')[0].length;\n                m++;\n            }\n            var match = {\n                begin: {\n                    divId: m,\n                    offsetValue: matchIndex - divIndex,\n                }\n            };\n            matchIndex += queryLength;\n            while (m !== end && matchIndex > (divIndex + textContents[m].length)) {\n                divIndex += textContents[m].length;\n                m++;\n            }\n            match.end = {\n                divId: m,\n                offsetValue: matchIndex - divIndex,\n            };\n            matchCollection.push(match);\n        }\n        if (this.searchCollection.length === 0) {\n            this.currentSearchIndex = pageIndex;\n        }\n        this.searchCollection[pageIndex] = matchCollection;\n        this.highlightSearchedTexts(pageIndex, isSinglePageSearch);\n    };\n    TextSearch.prototype.highlightSearchedTexts = function (pageIndex, isSinglePageSearch) {\n        var matches = this.searchCollection[pageIndex];\n        var prevEnd = null;\n        // tslint:disable-next-line\n        var scrollPoint = { y: -100, x: -400 };\n        var startId;\n        var className;\n        for (var i = 0; i < matches.length; i++) {\n            var match = matches[i];\n            // tslint:disable-next-line\n            var start = match.begin;\n            // tslint:disable-next-line\n            var end = match.end;\n            if (i === this.searchIndex && pageIndex === this.searchPageIndex) {\n                className = 'e-pv-search-text-highlight';\n                startId = start.divId;\n            }\n            else {\n                className = 'e-pv-search-text-highlightother';\n            }\n            if (!prevEnd || start.divId !== prevEnd.divId) {\n                if (prevEnd !== null) {\n                    // tslint:disable-next-line:max-line-length\n                    this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n                }\n                this.beginText(start, pageIndex, null);\n            }\n            else {\n                // tslint:disable-next-line:max-line-length\n                this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), parseFloat(start.offsetValue.toString()), null);\n            }\n            if (start.divId === end.divId) {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, end.offsetValue, className);\n            }\n            else {\n                this.addSpanForSearch(pageIndex, start.divId, start.offsetValue, undefined, className);\n                for (var k = start.divId + 1; k < end.divId; k++) {\n                    this.addSpanForSearch(pageIndex, k, 0, undefined, className + ' middle');\n                }\n                this.beginText(end, pageIndex, className);\n            }\n            prevEnd = end;\n        }\n        if (prevEnd) {\n            // tslint:disable-next-line:max-line-length\n            this.addSpanForSearch(pageIndex, parseFloat(prevEnd.divId.toString()), parseFloat(prevEnd.offsetValue.toString()), undefined, null);\n        }\n        if (pageIndex === this.searchPageIndex && !isSinglePageSearch) {\n            var element = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n            if (element) {\n                this.scrollToSearchStr(element, scrollPoint);\n            }\n            else {\n                this.pdfViewerBase.updateScrollTop(pageIndex);\n                var element_1 = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + startId);\n                this.scrollToSearchStr(element_1, scrollPoint);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.beginText = function (start, pageIndex, className) {\n        var divIndex = parseFloat(start.divId);\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            // tslint:disable-next-line\n            this.tempElementStorage = new Array();\n            for (var i = 0; i < textDiv.childNodes.length; i++) {\n                // tslint:disable-next-line:max-line-length\n                var ele = { text: textDiv.childNodes[i].textContent, classString: textDiv.childNodes[i].className };\n                this.tempElementStorage.push(ele);\n            }\n            textDiv.textContent = '';\n            this.addSpanForSearch(pageIndex, divIndex, 0, start.offsetValue, className);\n        }\n    };\n    // tslint:disable-next-line:max-line-length\n    TextSearch.prototype.addSpanForSearch = function (pageIndex, divIndex, fromOffset, toOffset, className) {\n        var divTextContent;\n        var textDiv = this.pdfViewerBase.getElement('_text_' + pageIndex + '_' + divIndex);\n        if (textDiv) {\n            var textContent = this.textContents[pageIndex];\n            divTextContent = textContent[divIndex].substring(fromOffset, toOffset);\n            var node = document.createTextNode(divTextContent);\n            if (className) {\n                var spanElement = document.createElement('span');\n                spanElement.className = className;\n                if (spanElement.classList.contains('middle')) {\n                    textDiv.textContent = '';\n                }\n                spanElement.appendChild(node);\n                textDiv.appendChild(spanElement);\n            }\n            else {\n                if (this.pdfViewer.textSelectionModule.isTextSelection) {\n                    this.searchOnSelection(textDiv, node, divTextContent);\n                }\n                else {\n                    textDiv.appendChild(node);\n                }\n            }\n        }\n    };\n    TextSearch.prototype.isClassAvailable = function () {\n        var isClass = false;\n        for (var j = 0; j < this.tempElementStorage.length; j++) {\n            if (this.tempElementStorage[j].classString) {\n                // tslint:disable-next-line:max-line-length\n                if (this.tempElementStorage[j].classString === 'e-pv-search-text-highlight' || this.tempElementStorage[j].classString === 'e-pv-search-text-highlightother') {\n                    isClass = true;\n                    break;\n                }\n            }\n        }\n        return isClass;\n    };\n    TextSearch.prototype.addSpan = function (text, textDiv) {\n        var newNode = document.createTextNode(text);\n        var spanElement = document.createElement('span');\n        spanElement.className = 'e-pv-maintaincontent';\n        spanElement.appendChild(newNode);\n        textDiv.appendChild(spanElement);\n    };\n    TextSearch.prototype.searchOnSelection = function (textDiv, node, divTextContent) {\n        if (this.tempElementStorage.length === 1) {\n            if (this.tempElementStorage[0].classString) {\n                if (this.tempElementStorage[0].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                    this.addSpan(node.textContent, textDiv);\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n        else {\n            if (this.tempElementStorage.length > 1) {\n                for (var i = 0; i < this.tempElementStorage.length; i++) {\n                    if (this.tempElementStorage[i].classString) {\n                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                            if (this.tempElementStorage[i].text === node.textContent) {\n                                this.addSpan(node.textContent, textDiv);\n                                break;\n                            }\n                            else {\n                                if (this.tempElementStorage[i].text !== node.textContent) {\n                                    var currentString = node.textContent;\n                                    var isClassAvailable = this.isClassAvailable();\n                                    var subString = void 0;\n                                    if (isClassAvailable) {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    }\n                                    else {\n                                        subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                    } // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                        this.addSpan(currentString, textDiv);\n                                        break; // tslint:disable-next-line\n                                    }\n                                    else if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString && subString !== '') {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv); // tslint:disable-next-line\n                                            var nextSubString = divTextContent.substring(this.tempElementStorage[i].text.length, divTextContent.length);\n                                            if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                                if (this.tempElementStorage[i + 1].text.indexOf(nextSubString) !== -1 && !this.tempElementStorage[i + 1].classString && nextSubString !== \"\") {\n                                                    node.textContent = nextSubString;\n                                                    textDiv.appendChild(node);\n                                                }\n                                            }\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) {\n                                        if (divTextContent === (this.tempElementStorage[i].text + this.tempElementStorage[i + 1].text)) {\n                                            this.addSpan(this.tempElementStorage[i].text, textDiv);\n                                            node.textContent = this.tempElementStorage[i + 1].text;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            var subString_1 = this.tempElementStorage[i].text.substring(textDiv.textContent.length, currentString.length);\n                                            if (this.tempElementStorage[i].text.indexOf(subString_1) !== -1 && this.tempElementStorage[i].classString && // tslint:disable-next-line\n                                                subString_1 !== '' && !this.tempElementStorage[i + 1].classString && divTextContent.indexOf(subString_1) !== -1) {\n                                                this.addSpan(subString_1, textDiv);\n                                                continue;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        if (this.tempElementStorage[i].text.indexOf(divTextContent) !== -1) {\n                                            this.addSpan(node.textContent, textDiv);\n                                            break;\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(divTextContent.replace('\\r\\n', '')) !== -1) {\n                                            this.addSpan(divTextContent, textDiv);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        if (this.tempElementStorage[i].text !== node.textContent) {\n                            var currentString = node.textContent;\n                            if (currentString !== '') {\n                                var isClassAvailable = this.isClassAvailable();\n                                var subString = void 0;\n                                if (isClassAvailable) {\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length);\n                                }\n                                else { // tslint:disable-next-line\n                                    subString = divTextContent.substring(0, this.tempElementStorage[i].text.length - textDiv.textContent.length);\n                                } // tslint:disable-next-line\n                                if (subString === currentString && !this.tempElementStorage[i].classString && this.tempElementStorage[i].text.indexOf(subString) !== -1) {\n                                    node.textContent = subString;\n                                    textDiv.appendChild(node);\n                                    break;\n                                }\n                                else { // tslint:disable-next-line\n                                    if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && this.tempElementStorage[i].classString) {\n                                        if (this.tempElementStorage[i].classString.indexOf('e-pv-maintaincontent') !== -1) {\n                                            this.addSpan(subString, textDiv);\n                                            break;\n                                        }\n                                    }\n                                    else if (this.tempElementStorage[i + 1]) { // tslint:disable-next-line\n                                        var balanceString = currentString.substring(this.tempElementStorage[i].text.length, currentString.length);\n                                        var nextString = this.tempElementStorage[i + 1].text.substring(0, balanceString.length);\n                                        if (currentString === (subString + this.tempElementStorage[i + 1].text)) {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(this.tempElementStorage[i + 1].text, textDiv);\n                                            break;\n                                        }\n                                        else if (currentString === (subString + nextString) && nextString !== '') {\n                                            node.textContent = subString;\n                                            textDiv.appendChild(node);\n                                            this.addSpan(balanceString, textDiv);\n                                            break;\n                                        }\n                                        else { // tslint:disable-next-line\n                                            if (this.tempElementStorage[i].text.indexOf(subString) !== -1 && !this.tempElementStorage[i].classString && subString !== '') {\n                                                var newSubString = divTextContent.substring(0, subString.length);\n                                                node.textContent = newSubString;\n                                                textDiv.appendChild(node); // tslint:disable-next-line\n                                                var nextNewSubString = divTextContent.substring(subString.length, divTextContent.length);\n                                                if (nextNewSubString !== '' && this.tempElementStorage[i + 1].text.indexOf(nextNewSubString) !== -1 && this.tempElementStorage[i + 1].classString) {\n                                                    this.addSpan(nextNewSubString, textDiv);\n                                                }\n                                                break;\n                                            }\n                                        }\n                                    }\n                                    else { // tslint:disable-next-line\n                                        if (this.tempElementStorage[i].text.indexOf(currentString) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break; // tslint:disable-next-line\n                                        }\n                                        else if (this.tempElementStorage[i].text.indexOf(currentString.replace('\\r\\n', '')) !== -1 && !this.tempElementStorage[i].classString) {\n                                            node.textContent = currentString;\n                                            textDiv.appendChild(node);\n                                            break;\n                                        }\n                                        else {\n                                            if (divTextContent.indexOf(this.tempElementStorage[i].text) !== -1) {\n                                                node.textContent = this.tempElementStorage[i].text;\n                                                textDiv.appendChild(node);\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            textDiv.appendChild(node);\n                        }\n                    }\n                }\n            }\n            else {\n                textDiv.appendChild(node);\n            }\n        }\n    };\n    // tslint:disable-next-line\n    TextSearch.prototype.scrollToSearchStr = function (element, scrollPoint) {\n        var parent = element.offsetParent;\n        var offsetY = element.offsetTop + element.clientTop;\n        var offsetX = element.offsetLeft + element.clientLeft;\n        while (parent.id !== this.pdfViewerBase.viewerContainer.id) {\n            offsetY += parent.offsetTop;\n            offsetX += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n        if (scrollPoint) {\n            offsetY += scrollPoint.y;\n            offsetX += scrollPoint.x;\n            if (this.pdfViewerBase.getZoomFactor() > 1.5) {\n                parent.scrollLeft = offsetX;\n            }\n        }\n        parent.scrollTop = offsetY;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.highlightOtherOccurrences = function (pageNumber) {\n        this.initSearch(pageNumber, true);\n    };\n    TextSearch.prototype.highlightOthers = function () {\n        var indexes = this.getIndexes();\n        var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n        var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n        for (var i = lowerPageValue; i <= higherPageValue; i++) {\n            this.highlightOtherOccurrences(i);\n        }\n    };\n    TextSearch.prototype.clearAllOccurrences = function () {\n        this.pdfViewerBase.textLayer.clearDivSelection();\n        this.applyTextSelection();\n    };\n    /**\n     * @private\n     */\n    // tslint:disable-next-line\n    TextSearch.prototype.getIndexes = function () {\n        var lowerPageValue = this.pdfViewerBase.currentPageNumber - 3;\n        lowerPageValue = (lowerPageValue > 0) ? lowerPageValue : 0;\n        var higherPageValue = this.pdfViewerBase.currentPageNumber + 1;\n        higherPageValue = (higherPageValue < this.pdfViewerBase.pageCount) ? higherPageValue : (this.pdfViewerBase.pageCount - 1);\n        return { lowerPageValue: lowerPageValue, higherPageValue: higherPageValue };\n    };\n    TextSearch.prototype.applyTextSelection = function () {\n        if (this.pdfViewer.textSelectionModule && !this.pdfViewerBase.isTextSelectionDisabled) {\n            var indexes = this.getIndexes();\n            var lowerPageValue = parseFloat(indexes.lowerPageValue.toString());\n            var higherPageValue = parseFloat(indexes.higherPageValue.toString());\n            for (var i = lowerPageValue; i <= higherPageValue; i++) {\n                this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.resetTextSearch = function () {\n        this.resetVariables();\n        this.onTextSearchClose();\n        this.searchPageIndex = null;\n        this.searchIndex = 0;\n        this.updateSearchInputIcon(true);\n        this.enableNextButton(false);\n        this.enablePrevButton(false);\n    };\n    TextSearch.prototype.onTextSearchClose = function () {\n        this.isPrevSearch = false;\n        this.isTextSearch = false;\n        if (this.pdfViewerBase.pageCount > 0) {\n            this.clearAllOccurrences();\n        }\n    };\n    TextSearch.prototype.createRequestForSearch = function (pageIndex) {\n        var _this = this;\n        var jsonObject;\n        // tslint:disable-next-line:max-line-length\n        jsonObject = { xCoordinate: 0, yCoordinate: 0, pageNumber: pageIndex, documentId: this.pdfViewerBase.getDocumentId(), hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        var request = new XMLHttpRequest();\n        request.open('POST', this.pdfViewer.serviceUrl + '/' + this.pdfViewer.serverActionSettings.renderPages);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.responseType = 'json';\n        request.send(JSON.stringify(jsonObject));\n        // tslint:disable-next-line\n        request.onreadystatechange = function (event) {\n            var proxy = _this.pdfViewerBase;\n            if (request.readyState === 4 && request.status === 200) {\n                // tslint:disable-next-line\n                var data = event.currentTarget.response;\n                // tslint:disable-next-line:max-line-length\n                if (typeof data !== 'object') {\n                    data = JSON.parse(data);\n                }\n                if (data) {\n                    if (data.pageText) {\n                        proxy.storeWinData(data, pageIndex);\n                        _this.initSearch(pageIndex, false);\n                    }\n                }\n            }\n            else if (request.readyState === 4 && request.status === 400) {\n                // error\n                _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n            }\n        };\n        // tslint:disable-next-line\n        request.onerror = function (event) {\n            _this.pdfViewerBase.openNotificationPopup();\n            _this.pdfViewer.fireAjaxRequestFailed(request.status, request.statusText);\n        };\n    };\n    TextSearch.prototype.createSearchBoxButtons = function (id, className) {\n        // tslint:disable-next-line:max-line-length\n        var button = createElement('button', { id: this.pdfViewer.element.id + '_' + id, className: 'e-btn e-icon-btn e-pv-search-btn ' + className });\n        var iconSpan = createElement('span', { id: this.pdfViewer.element.id + '_' + id + 'Icon', className: 'e-pv-icon-search ' + className + '-icon' });\n        button.disabled = true;\n        button.appendChild(iconSpan);\n        return button;\n    };\n    TextSearch.prototype.enablePrevButton = function (isEnable) {\n        if (isEnable) {\n            this.prevSearchBtn.removeAttribute('disabled');\n        }\n        else {\n            this.prevSearchBtn.disabled = true;\n        }\n    };\n    TextSearch.prototype.enableNextButton = function (isEnable) {\n        if (isEnable) {\n            this.nextSearchBtn.removeAttribute('disabled');\n        }\n        else {\n            this.nextSearchBtn.disabled = true;\n        }\n    };\n    TextSearch.prototype.resetVariables = function () {\n        this.searchedPages = [];\n        // tslint:disable-next-line\n        this.searchMatches = new Array();\n        // tslint:disable-next-line\n        this.searchCollection = new Array();\n    };\n    TextSearch.prototype.updateSearchInputIcon = function (isEnable) {\n        if (isEnable) {\n            this.searchBtn.classList.remove('e-pv-search-close');\n            this.searchBtn.classList.add('e-pv-search-icon');\n        }\n        else {\n            this.searchBtn.classList.remove('e-pv-search-icon');\n            this.searchBtn.classList.add('e-pv-search-close');\n        }\n    };\n    /**\n     * Searches the target text in the PDF document and highlights the occurrences in the pages\n     * @param  {string} searchText\n     * @param  {boolean} isMatchCase\n     * @returns void\n     */\n    TextSearch.prototype.searchText = function (searchText, isMatchCase) {\n        this.searchString = searchText;\n        this.isMatchCase = isMatchCase;\n        this.searchIndex = 0;\n        this.textSearch(searchText);\n    };\n    /**\n     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchNext = function () {\n        this.nextSearch();\n    };\n    /**\n     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.searchPrevious = function () {\n        this.prevSearch();\n    };\n    /**\n     * Cancels the text search of the PdfViewer.\n     * @returns void\n     */\n    TextSearch.prototype.cancelTextSearch = function () {\n        this.resetTextSearch();\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.destroy = function () {\n        this.searchCollection = undefined;\n    };\n    /**\n     * @private\n     */\n    TextSearch.prototype.getModuleName = function () {\n        return 'TextSearch';\n    };\n    return TextSearch;\n}());\nexport { TextSearch };\n","import { createElement } from '@syncfusion/ej2-base';\n/**\n * Print module\n */\nvar Print = /** @class */ (function () {\n    /**\n     * @private\n     */\n    function Print(viewer, base) {\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * Print the PDF document being loaded in the ejPdfViewer control.\n     * @returns void\n     */\n    Print.prototype.print = function () {\n        var _this = this;\n        var pageIndex;\n        if (this.pdfViewerBase.pageCount > 0) {\n            // tslint:disable-next-line:max-line-length\n            this.printViewerContainer = createElement('div', { id: this.pdfViewer.element.id + '_print_viewer_container',\n                className: 'e-pv-print-viewer-container' });\n            this.pdfViewerBase.showPrintLoadingIndicator(true);\n            this.iframe = document.createElement('iframe');\n            this.iframe.className = 'iframeprint';\n            this.iframe.id = 'iframePrint';\n            this.iframe.style.position = 'absolute';\n            this.iframe.style.top = '-100000000px';\n            document.body.appendChild(this.iframe);\n            this.frameDoc = this.iframe.contentWindow ? this.iframe.contentWindow : this.iframe.contentDocument;\n            this.frameDoc.document.open();\n            setTimeout(function () {\n                for (pageIndex = 0; pageIndex <= _this.pdfViewerBase.pageCount; pageIndex++) {\n                    if (pageIndex < _this.pdfViewerBase.pageCount) {\n                        var pageWidth = _this.pdfViewerBase.getPageWidth(pageIndex);\n                        var pageHeight = _this.pdfViewerBase.getPageHeight(pageIndex);\n                        _this.pdfViewer.printModule.createRequestForPrint(pageIndex, pageWidth, pageHeight, _this.pdfViewerBase.pageCount);\n                    }\n                    else {\n                        _this.printWindowOpen();\n                    }\n                }\n            }, 100);\n        }\n    };\n    Print.prototype.createRequestForPrint = function (pageIndex, pageWidth, pageHeight, pageCount) {\n        var proxy = this;\n        var request = new XMLHttpRequest();\n        // tslint: disable-next-line:max-line-length\n        var jsonObject = { pageNumber: pageIndex, documentId: this.pdfViewerBase.documentId,\n            hashId: this.pdfViewerBase.hashId, zoomFactor: this.pdfViewerBase.getZoomFactor() };\n        request.open('POST', proxy.pdfViewer.serviceUrl + '/PrintImages', false);\n        request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        request.send(JSON.stringify(jsonObject));\n        var printImage = request.responseText;\n        // tslint:disable-next-line\n        var pageImage = new Image();\n        pageImage.src = printImage;\n        pageImage.height = pageHeight;\n        pageImage.width = pageWidth;\n        this.printViewerContainer.appendChild(pageImage);\n    };\n    Print.prototype.printWindowOpen = function () {\n        var _this = this;\n        var browserUserAgent = navigator.userAgent;\n        // tslint: disable-next-line:max-line-length\n        if ((browserUserAgent.indexOf('Chrome') !== -1) || (browserUserAgent.indexOf('Safari') !== -1) ||\n            (browserUserAgent.indexOf('Firefox')) !== -1) {\n            //chrome and firefox\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; }'\n                + ' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }img { box-sizing: border-box; }br,'\n                + ' button { display: none; }} @page{margin:0mm; size:auto;}</style></head><body><center class=\"loader\">');\n        }\n        else {\n            //ie\n            this.frameDoc.document.write('<!DOCTYPE html>');\n            // tslint: disable-next-line:max-line-length\n            this.frameDoc.document.write('<html><head>'\n                + '<style>html, body { height: 99%; } img { height: 99%; width: 100%; }@media print { body { margin: 0cm; }'\n                + 'img { box-sizing: border-box; }br, button { display: none; }} @page{margin:0mm; size:auto;}</style></head><body><center>');\n        }\n        this.frameDoc.document.write(this.printViewerContainer.outerHTML);\n        this.pdfViewerBase.showPrintLoadingIndicator(false);\n        setTimeout(function () {\n            _this.iframe.contentWindow.print();\n            _this.iframe.contentWindow.focus();\n            document.body.removeChild(_this.iframe);\n        }, 200);\n    };\n    /**\n     * @private\n     */\n    Print.prototype.destroy = function () {\n        this.printViewerContainer = undefined;\n        this.frameDoc = undefined;\n    };\n    /**\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'Print';\n    };\n    return Print;\n}());\nexport { Print };\n"],"names":["LinkAnnotation","pdfViewer","viewerBase","this","pdfViewerBase","prototype","renderHyperlinkContent","data","pageIndex","enableHyperlink","hyperlinks","hyperlinksBounds","hyperlinkBounds","linkAnnotation","linkPage","annotationY","annotationLocation","length","renderWebLink","renderDocumentLink","proxy","_loop_1","i","aTag","createElement","id","rect","this_1","setHyperlinkProperties","title","setAttribute","hyperlinkOpenState","target","onclick","fireHyperlinkClick","window","open","document","getElementById","element","appendChild","_loop_2","this_2","undefined","destPageHeight","pageSize","destLocation","scrollValue","top","getZoomFactor","name","toString","viewerContainer","scrollTop","parseInt","className","style","background","position","left","Left","Top","width","Width","Height","height","color","modifyZindexForTextSelection","pageNumber","isAdd","pageCount","pageChildNodes","getElement","childNodes","childElement","tagName","classList","add","remove","modifyZindexForHyperlink","destroy","pageDiv","aElement","getElementsByTagName","index","parentNode","removeChild","getModuleName","NavigationPane","viewer","base","_this","thumbnailWidthMin","contentContainerScrollWidth","closeButtonLeft","isBookmarkOpen","isThumbnailOpen","isNavigationPaneResized","resizeIconMouseOver","event","srcElement","cursor","resizePanelMouseDown","offset","sideBarResizer","offsetLeft","clientX","offsetTop","clientY","isDown","sideBarContentContainer","resizeViewerMouseLeave","resizePanelMouseMove","preventDefault","maxWidth","Math","floor","outerContainerWidth","closeDiv","sideBarContent","sideBarContentSplitter","sideBarTitleContainer","getViewerContainerLeft","viewerWidth","clientWidth","pageContainer","thumbnailViewModule","gotoThumbnailImage","currentPageNumber","updateZoomValue","sideToolbarOnClose","removeThumbnailSelectionIconTheme","removeBookmarkSelectionIconTheme","updateViewerContainerOnClose","sideToolbarOnClick","sideBarTitle","textContent","localeObj","getConstant","bookmarkPane","display","setThumbnailSelectionIconTheme","updateViewerContainerOnExpand","bookmarkButtonOnClick","bookmarkViewModule","renderBookmarkcontent","setBookmarkSelectionIconTheme","initializeNavigationPane","sideBarToolbar","mainContainer","sideBarToolbarSplitter","addEventListener","controlLeft","createSidebarToolBar","createSidebarTitleCloseButton","createResizeIcon","sideToolbarOnMouseup","bind","sideBarTitleOnMouseup","thumbnailButton","attrs","disabled","thumbnailButtonSpan","Tooltip","content","opensOn","beforeOpen","onTooltipBeforeOpen","appendTo","bookmarkButton","buttonSpan","args","toolbarSettings","showTooltip","cancel","enableThumbnailButton","removeAttribute","children","enableBookmarkButton","resizeIcon","Object","defineProperty","get","mainContainerWidth","enumerable","configurable","sideToolbarWidth","sideBarContentContainerWidth","getViewerMainContainerWidth","resetThumbnailIcon","resetThumbnailView","focusViewerContainer","disableBookmarkButton","clear","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","y","t","call","label","ops","pop","trys","push","g","sent","throw","return","Symbol","iterator","PdfViewerBase","isDocumentLoaded","renderedPagesList","pageGap","pageLeft","sessionLimit","pageStopValue","toolbarHeight","pageLimit","previousPage","isViewerMouseDown","isViewerMouseWheel","scrollPosition","pointerCount","pointersForTouch","isPasswordAvailable","reRenderedCount","mouseX","mouseY","touchClientX","touchClientY","isLongTouchPropagated","longTouchTimer","isViewerContainerDoubleClick","dblClickTimer","pinchZoomStorage","isTextSelectionDisabled","isPanMode","dragX","dragY","isScrollbarMouseDown","onWindowResize","navigationPane","toolbarModule","updatePageHeight","getBoundingClientRect","onToolbarResize","enableToolbar","textSearchModule","textSearchBoxOnResize","viewerContainerOnMousedown","button","detail","textSelectionModule","isClickedOnScrollBar","clearTextSelection","pageX","pageY","contains","viewerContainerOnMouseup","scrollHoldTimer","clearTimeout","pageViewScrollChanged","eventTarget","idStringArray","split","firePageClick","offsetX","offsetY","viewerContainerOnMouseWheel","getRerenderCanvasCreated","magnificationModule","pageRerenderOnMouseWheel","ctrlKey","fitPageScrollMouseWheel","textSelectionOnMouseWheel","viewerContainerOnKeyDown","isMac","navigator","platform","match","isCommandKey","metaKey","shiftKey","keyCode","updateScrollTop","openFileDialogBox","enableTextSelection","copyText","enableTextSearch","textSearchButtonHandler","magnifyBehaviorKeyDown","viewerContainerOnMousemove","textSelectionOnMouseMove","panOnMouseMove","deltaX","deltaY","scrollLeft","viewerContainerOnMouseLeave","textSelectionOnMouseLeave","viewerContainerOnMouseEnter","viewerContainerOnMouseOver","viewerContainerOnClick","type","selectAWord","maintainSelectionOnZoom","setTimeout","applySelection","selectEntireLine","viewerContainerOnDragStart","viewerContainerOnContextMenuClick","onWindowMouseUp","contextMenuModule","contextMenuElement","getSelection","anchorNode","textSelectionOnMouseup","applySpanForSelection","removeAllRanges","selectionStartPage","stopPropagation","onWindowTouchEnd","viewerContainerOnTouchStart","touchPoints","touches","setTouchPoints","preventTouchEvent","contextMenuObj","close","viewerContainerOnLongTouch","initiateTouchSelection","viewerContainerOnPointerDown","pointerType","viewerContainerOnTouchMove","initiatePinchMove","getPagesPinchZoomed","pinchMoveScroll","viewerContainerOnPointerMove","pointerId","viewerContainerOnTouchEnd","pinchMoveEnd","clearInterval","viewerContainerOnPointerEnd","viewerContainerOnScroll","verticalScrollValue","pageHeight","getPageHeight","getPageTop","renderElementsVirtualScroll","getPinchZoomed","getPinchScrolled","showPageLoadingIndicator","updateCurrentPage","updateNavigationButtons","isThumbnailClicked","firePageChange","updatePagesForFitPage","currentPage","visibility","clearIntervalTimer","initiatePageViewScrollChanged","textLayer","TextLayer","initializeComponent","toolbarDiv","viewerMainContainer","tabIndex","touchAction","minHeight","intializeToolbar","createThumbnailContainer","createPrintPopup","waitingPopup","createSpinner","cssClass","setLoaderProperties","ContextMenu","createContextMenu","wireEvents","createTextSearchBox","documentPath","load","initiatePageRender","documentData","password","documentId","createGUID","showLoadingIndicator","hashId","isFileName","saveDocumentInfo","checkDocumentData","setFileName","jsonObject","constructJsonObject","createAjaxRequest","request","XMLHttpRequest","serviceUrl","serverActionSettings","setRequestHeader","responseType","send","JSON","stringify","onreadystatechange","readyState","status","currentTarget","response","userAgent","indexOf","parse","requestSuccess","fireAjaxRequestFailed","statusText","onerror","openNotificationPopup","createNotificationPopup","documentLiveCount","saveDocumentHashData","pageRender","renderPasswordPopup","renderCorruptPopup","updateToolbarItems","createRequestForThumbnails","createRequestForBookmarks","passwordDialogReset","passwordPopup","hide","initPageDiv","isAutoZoom","isInitialLoading","createRequestForRender","pageTop","viewerHeight","clientHeight","renderPageElement","uploadedDocumentName","fireDocumentLoadFailed","promptElement","show","createPasswordPopup","createCorruptedPopup","corruptPopup","zoomFactor","base64String","fileName","documentStringArray","sessionStorage","setItem","unload","updateWaitingPopup","pageCurrentRect","firstChild","bottom","createWaitingPopup","isShow","showSpinner","hideSpinner","showPrintLoadingIndicator","printWaitingPopup","printMainContainer","spinnerElement","transformOrigin","isPinchZoomed","getMagnified","isMagnified","isPinchScrolled","isPagePinchZoomed","getPagesZoomed","isPagesZoomed","isRerenderCanvasCreated","getDocumentId","download","createRequestForDownload","isTriggerEvent","initiateTextSelectMode","resetTextSearch","hasChildNodes","lastChild","unloadDocument","fireDocumentUnload","unWireEvents","getItem","request_1","removeItem","scrollX","scrollY","focus","scrollTo","popupElement","Dialog","showCloseIcon","closeOnEscape","isModal","header","visible","buttons","buttonModel","isPrimary","click","closeCorruptPopup","beforeClose","inputContainer","passwordInput","applyPassword","passwordCancelClick","passwordCancel","parentElement","isInteraction","removeEventListener","fitToAuto","fitType","fitToWidth","applyLeftPosition","initiatePanning","modifyTextCursor","disableTextSelectionMode","enableTextSelectionMode","pageValues","updateTotalPage","topValue","pageSizes","previousPageHeight","parseFloat","size","limit","renderPageContainer","getPageWidth","all","renderPagesVirtually","pageValue","lowerPageValue","j","pageCanvas","maintainSelectionOnScroll","indexInArray","splice","_a","initiateRenderPagesVirtually","isCompletePageSizeNotReceived","renderPage","pageWidth_1","pageHeight_1","canvas_1","updateLeftPosition","context_1","getContext","imageData","matrix_1","image_1","Image","onload","isNaN","setTransform","Elements","drawImage","fireDocumentLoad","rerenderCountIncrement","src","pushImageObjects","linkAnnotationModule","renderTextContent","applySelectionRangeOnScroll","isTextSearch","highlightOtherOccurrences","texts","bounds","renderTextContents","resizeTextContents","pageWidth","orderPageDivElements","renderPageCanvas","nextElement","insertBefore","addTextLayer","leftPosition","renderCountIncrement","currentPageIndex","previous","downloadDocument","blobUrl","anchorElement","href","documentElement","location","padCharacter","replace","createBlobUrl","canvas","oldCanvas","getStoredData","x","xCoordinate","yCoordinate","renderPages","data_1","image","storeWinData","storedData","getWindowSessionStorage","getPinchZoomPage","isPinchZoomStorage","storeObject","transformationMatrix","textBounds","pageText","checkZoomFactor","manageSessionStorage","key","hasOwnProperty","higherPageValue","contentType","byteCharacters","atob","byteArrays","slice","byteNumbers","Array","charCodeAt","byteArray","Uint8Array","blob","Blob","URL","createObjectURL","getRandomNumber","c","random","isScrollBar","setScrollDownValue","offsetWidth","offsetHeight","eventType","boolValue","idString","textBoundsArray","closeNotification","notifyDialog","textContents","canvasElement","textDiv","innerHTML","whiteSpace","setStyleToTextDiv","X","Y","Bottom","setTextElementProperties","context","font","fontSize","fontFamily","contextWidth","measureText","scale","transform","resizeExcessDiv","resizeTextContentsOnZoom","renderObject","getPreviousZoomFactor","textElements","filter","obj","textLayerPosition","textDivPosition","clearTextLayers","textLayers","querySelectorAll","getTextSelectionStatus","getTextSearchStatus","convertToSpan","divId","fromOffset","toOffset","textString","substring","node","createTextNode","spanElement","startPage","endPage","anchorOffsetDiv","focusOffsetDiv","anchorOffset","focusOffset","startId","endId","textDivs","initId","lastId","length_1","clearDivSelection","textHeight","isTextSelection","textLayerList","textElement","previousZoomFactor","text","copyContextMenu","Context","items","contextMenuOnBeforeOpen","select","onMenuItemSelect","Browser","isDevice","animationSettings","effect","isClickWithinSelectionBounds","isWithin","getCurrentSelectionBounds","currentBound","getHorizontalValue","right","getVerticalValue","getHorizontalClientValue","getVerticalClientValue","pageBounds","item","Magnification","scrollWidth","zoomPercentages","isNotPredefinedZoom","pinchStep","reRenderPageNumber","magnifyPageRerenderTimer","rerenderOnScrollTimer","rerenderInterval","touchCenterX","touchCenterY","pageRerenderCount","imageObjects","zoomLevel","zoomTo","zoomValue","onZoomChanged","zoomIn","lowerZoomLevel","zoomOut","higherZoomLevel","calculateFitZoomFactor","fitToPage","overflowY","highestWidth","highestHeight","scaleX","min","pinchIn","temporaryZoomFactor","pinchOut","getZoomLevel","max","mid","round","responsivePages","magnifyPages","updateZoomButtons","fireZoomChange","updateZoomPercentage","pointX1","pointY1","pointX2","pointY2","zoomOverPages","clearRerenderTimer","getMagnifiedValue","updatePageLocation","resizeCanvas","resizeTouchElements","proxy_1","rerenderMagnifiedPages","clearRendering","oldCanvases","renderInSeparateThread","designNewCanvas","setInterval","initiateRerender","currentPageCanvas","currentPageBounds","previousPageTop","previousY","currentY","prevValue","scaleCorrectionFactor","scrollX_1","rerenderOnScroll","reRenderAfterPinch","isSelectionAvailable","isSelectionAvailableOnScroll","lowerValue","higherValue","currentDifference","sqrt","pow","previousTouchDifference","wheelDelta","upwardScrollFitPage","downwardScrollFitPage","Navigation","goToNextPage","goToPreviousPage","goToPage","goToFirstPage","goToLastPage","ThumbnailView","thumbnailLimit","thumbnailThreshold","thumbnailTopMargin","thumbnailClick","getPageNumberFromID","previousElement","setSelectionStyle","goToThumbnailPage","thumbnailMouseOver","setMouseOverStyle","thumbnailMouseLeave","setMouseLeaveStyle","thumbnailView","renderThumbnailImage","isThumbnailCompleted","startIndex","sizeX","sizeY","renderThumbnail","shouldScroll","checkThumbnailScroll","thumbnailChild","thumbnailDiv","clientTop","setFocusStyle","visibleThumbs","getVisibleThumbs","numVisibleThumbs","views","visibleFirstPageID","first","visibleLastPageID","last","some","view","pageID","thumbPageNumber","percent","pageId","thumbnail","setMouseFocusStyle","pageLink","thumbnailSelectionRing","thumbnailPageNumber","thumbnailImage","wireUpEvents","setMouseFocusToFirstPage","unwireUpEvents","thumbnailElement","getVisibleElements","scrollElement","thumbnailViewChildren","currentHeight","viewHeight","viewBottom","currentWidth","viewWidth","viewRight","percentVisible","firstVisibleElementInd","binarySearchFirstItem","thumbnailViewChildrenElement","backtrackBeforeAllVisibleElements","lastEdge","ii","getThumbnailElement","clientLeft","condition","minIndex","maxIndex","currentIndex","Toolbar","isPageNavigationToolDisabled","isMagnificationToolDisabled","isSelectionToolDisabled","isScrollingToolDisabled","isOpenBtnVisible","isNavigationToolVisible","isMagnificationToolVisible","isSelectionBtnVisible","isScrollingBtnVisible","isDownloadBtnVisible","isPrintBtnVisible","isSearchBtnVisible","isTextSearchBoxDisplayed","onToolbarKeydown","targetId","toolbarClickHandler","originalEvent","zoomDropdownItem","tooltipData","dataset","tooltipId","tooltipElement","fileInputElement","printModule","print","navigationModule","updateInteractionTools","currentPageBoxElement","textSearchItem","blur","loadDocument","upoadedFiles","files","uploadedFile","reader","FileReader","readAsDataURL","uploadedFileUrl","navigateToPage","which","enteredValue","textBoxFocusOut","currentPageBox","createToolbar","createFileElement","wireEvent","applyToolbarSettings","initialEnableItems","showToolbar","toolbar","toolbarElement","showToolbarItem","isVisible","showOpenOption","showPageNavigationTool","showMagnificationTool","showSelectionTool","showScrollingTool","showDownloadOption","showPrintOption","showSearchOption","applyHideToToolbar","showSeparator","enableToolbarItem","isEnable","enableOpenOption","enablePageNavigationTool","enableMagnificationTool","enableSelectionTool","enableScrollingTool","enableDownloadOption","enablePrintOption","enableSearchOption","enableItems","openDocumentItem","firstPageItem","previousPageItem","nextPageItem","lastPageItem","readonly","zoomInItem","zoomOutItem","zoomDropDown","textSelectItem","panItem","downloadItem","printItem","resetToolbar","updateInteractionItems","unWireEvent","totalPageItem","controlWidth","itemsContainer","openButtonContainer","createToolbarItem","seperatorDiv1","firstPageContainer","previousContainer","nextContainer","lastPageContainer","goToPageContainer","NumericTextBox","format","showSpinButton","totalPageContainer","seperatorDiv2","zoomOutContainer","zoomInContainer","zoomDropdownContainer","seperatorDiv3","selectToolContainer","handToolContainer","searchButtonContainer","downloadButtonContainer","printButtonContainer","ComboBox","dataSource","fields","popupHeight","showClearButton","tool","clicked","overflowMode","elementName","tooltipText","containerElement","toolbarItem","styles","toolbarOnMouseup","change","zoomPercentSelect","onZoomDropDownInput","onZoomDropDownInputClick","navigationToolbar","downloadButtonElement","printButtonElement","searchButtonElement","endIndex","isHide","hideItem","zoomDropDownChange","isInteracted","itemData","zoomText","focusOut","currentPercent","interactionMode","selectItem","deSelectItem","showSearchBox","searchInputElement","isTextSelect","enablePrint","enableDownload","toolbarItems","toolbarSettingsItems","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","__","constructor","create","__decorate","decorators","desc","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","ToolbarSettings","_super","Property","ChildProperty","ServerActionSettings","PdfViewer","options","defaultLocale","Cancel","Download","Enter Password","File Corrupted","File Corrupted Content","Fit Page","Fit Width","Automatic","Go To First Page","Invalid Password","Next Page","OK","Open","Page Number","Previous Page","Go To Last Page","Zoom","Zoom In","Zoom Out","Page Thumbnails","Bookmarks","Print","Password Protected","Copy","Text Selection","Panning","Text Search","Find in document","Match case","No matches","Server error","preRender","L10n","locale","render","getLocaleConstants","onPropertyChanged","newProp","oldProp","isDestroyed","_i","properties_1","keys","notify","module","enable","getPersistData","requiredModules","modules","enableMagnification","member","enableNavigation","enableThumbnail","enableBookmark","eventArgs","documentName","trigger","isPasswordRequired","errorStatusCode","errorMessage","previousPageNumber","previousZoomValue","hyperlink","Event","NotifyPropertyChanges","Component","BookmarkView","nodeClick","bookid","Number","nodeData","bookmarksDestination","bookMarkDestination","PageIndex","goToBookmark","bookmarks","bookMark","BookmarksDestination","bookmarkView","bookmarkIconView","bookmarkIcon","bookmarkTitle","innerText","TreeView","parentID","hasChildren","nodeTemplate","outerHTML","nodeSelected","getBookmarks","destPage","scroll","TextSelection","isBackwardPropagatedSelection","selectionRangeArray","selectionAnchorTouch","selectionFocusTouch","scrollMoveTimer","isMouseLeaveSelection","isTouchSelection","previousScrollDifference","topStoreLeft","topStoreRight","onLeftTouchSelectElementTouchStart","initiateSelectionByTouch","onRightTouchSelectElementTouchStart","onLeftTouchSelectElementTouchEnd","terminateSelectionByTouch","onRightTouchSelectElementTouchEnd","onLeftTouchSelectElementTouchMove","range","nodeElement","zIndex","rightElement","dropDivElementRight","isTouchedWithinViewerContainer","isTouchedWithinContainer","dropBounds","xTouch","changedTouches","yTouch","caretRangeFromPoint","onTouchElementScroll","isCloserMovement","isCloserTouchScroll","isTextSelected","dropElementLeft","dropElementRight","selectTextByTouch","elementClientRect","dropDivElementLeft","pageTopValue","topClientValue","getClientValueTop","currentRangeLeft","isHeightNeeded","onRightTouchSelectElementTouchMove","leftElement","dropPosition","touchX","touchY","targetElement","nodeType","TEXT_NODE","ownerDocument","createRange","selection","compareDocumentPosition","focusNode","Node","DOCUMENT_POSITION_PRECEDING","selectNodeContents","currentPosition","endPosition","endOffset","setStart","setEnd","rangeBounds","addRange","extend","detach","getSelectionRange","viewerTop","scrollForwardOnSelection","scrollBackwardOnSelection","stichSelectionOnScroll","isStoreSelection","indices","startPosition","endPos","startContainer","textIds","targetRect","targetcentre","bottomValue","textId","lengths","d1","d2","lowerPageIndex","higherPageIndex","searchAfterSelection","removeTouchElements","viewerContainerLeft","dropElementHeight","leftCurrentPagePosition","rightCurrentPagePosition","indexes","getIndexes","isMaintainSelection","isStich","isBackward","isBackWardSelection","anchorPageId","focusPageId","lastChildNode","previousSibling","ranges","applySelectionMouseScroll","applySelectionRange","getSelectionRangeFromArray","selectionRange","selectionObject","endNode","startNode","startOffset","anchorPageIndex","focusPageIndex","currentAnchorIndex","extendCurrentSelection","currentAnchorOffset","currentFocusOffset","maintainSelection","backward","selectionBounds","getSelectionBounds","getRangeAt","anchorOffsetValue","getCorrectOffset","focusOffsetValue","pushSelectionRangeObject","createRangeObjectOnScroll","stichSelection","offsetValue","currentObject","currentObjectIndex","nextPageObject","prevPageObject","prevIndex","firstObject","currentFocusElement","nextPageElement","lastElement","getTextLastLength","firstElement","lastElement_1","maintainSelectionArray","selectionRangeObject","getSelectionRangeObject","selectionString","startElement","endElement","endContainer","newStartRange","startRange","createRangeForSelection","normalizeBounds","getTextId","elementId","lastIndexOf","bound","currentPageRect","start","end","anchorPage","focusPage_1","arrayObject","focusElement","isFocusChanged","lastPageDiv","belowElements","elementsFromPoint","createTouchSelectElement","isForwardSelection","rangeObject","setTouchSelectionStartPosition","getTouchFocusElement","getTouchAnchorElement","isCurrentFocus","isCurrentAnchor","rangePosition","dropElementRect","viewerLeftPosition","topPositionValue","currentPageLeft","viewerScrollTop","isScrolledOnScrollBar","isForwardMovement","clientValue","selectionText","textArea","contentEditable","execCommand","ex","console","warn","TextSearch","searchIndex","currentSearchIndex","searchPageIndex","searchString","isMatchCase","searchMatches","searchCollection","searchedPages","isPrevSearch","tempElementStorage","checkBoxOnChange","checked","resetVariables","clearAllOccurrences","inputString","searchInput","textSearch","searchKeypressHandler","enableNextButton","enablePrevButton","initiateTextSearch","updateSearchInputIcon","searchClickHandler","searchBtn","nextButtonOnClick","nextSearch","prevButtonOnClick","prevSearch","searchBox","searchElementsContainer","searchInputContainer","placeholder","prevSearchBtn","createSearchBoxButtons","nextSearchBtn","matchCaseContainer","matchCaseInput","checkBox","CheckBox","onTextSearchClose","initSearch","highlightOthers","highlightSearchedTexts","isSinglePageSearch","getPossibleMatches","createRequestForSearch","pageString","searchText","queryLength","toLowerCase","matches","matchIndex","getSearchPage","convertMatches","m","divIndex","matchCollection","begin","prevEnd","scrollPoint","addSpanForSearch","beginText","k","scrollToSearchStr","element_1","ele","classString","divTextContent","searchOnSelection","isClassAvailable","isClass","addSpan","newNode","currentString","subString","nextSubString","subString_1","balanceString","nextString","newSubString","nextNewSubString","parent","offsetParent","applyTextSelection","iconSpan","searchNext","searchPrevious","cancelTextSearch","printViewerContainer","iframe","frameDoc","contentWindow","contentDocument","createRequestForPrint","printWindowOpen","printImage","responseText","pageImage","browserUserAgent","write"],"mappings":"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"}