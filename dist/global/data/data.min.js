this.ej=this.ej||{},this.ej.dataModule=webpackJsonpej__name_Module([9],{0:function(e,t,r){var n,o;n=[r,t,r(3)],void 0!==(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r)}.apply(t,n))&&(e.exports=o)},10:function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},108:function(e,t,r){var n,o;n=[r,t,r(20)],void 0!==(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r)}.apply(t,n))&&(e.exports=o)},13:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return a});var n=r(14),o=function(){function e(e){return this.subQuery=null,this.isChild=!1,this.queries=[],this.key="",this.fKey="","string"==typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this}return e.prototype.setKey=function(e){return this.key=e,this},e.prototype.using=function(e){return this.dataManager=e,this},e.prototype.execute=function(e,t,r,o){return e=e||this.dataManager,e?e.executeQuery(this,t,r,o):n.a.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.executeLocal=function(e){return e=e||this.dataManager,e?e.executeLocal(this):n.a.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.clone=function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.requiresCounts=this.requiresCounts,t},e.prototype.from=function(e){return this.fromTable=e,this},e.prototype.addParams=function(e,t){return"function"==typeof t?this.params.push({key:e,fn:t}):this.params.push({key:e,value:t}),this},e.prototype.expand=function(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.where=function(e,t,r,n){t=t?t.toLowerCase():null;var o=null;return"string"==typeof e?o=new a(e,t,r,n):e instanceof a&&(o=e),this.queries.push({fn:"onWhere",e:o}),this},e.prototype.search=function(e,t,r,o){"string"==typeof t&&(t=[t]),r=r||"contains";var a=n.a.fnOperators[r];return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:r,searchKey:e,ignoreCase:o,comparer:a}}),this},e.prototype.sortBy=function(t,r,o){var a,i,s="ascending";if("string"==typeof t&&n.a.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),r="descending"),r&&"string"!=typeof r||(s=r?r.toLowerCase():"ascending",r=n.a.fnSort(r)),o){a=e.filterQueries(this.queries,"onSortBy");for(var u=0;u<a.length;u++)if("string"==typeof(i=a[u].e.fieldName)){if(i===t)return this}else if(i instanceof Array)for(var c=0;c<i.length;c++)if(i[c]===t||t.toLowerCase()===i[c]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:r,direction:s}}),this},e.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},e.prototype.group=function(e){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e}}),this},e.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},e.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},e.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},e.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},e.prototype.select=function(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},e.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},e.prototype.foreignKey=function(e){return this.fKey=e,this},e.prototype.requiresCount=function(){return this.requiresCounts=!0,this},e.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},e.filterQueries=function(e,t){return e.filter(function(e){return e.fn===t})},e.filterQueryLists=function(e,t){for(var r=e.filter(function(e){return-1!==t.indexOf(e.fn)}),n={},o=0;o<r.length;o++)n[r[o].fn]||(n[r[o].fn]=r[o].e);return n},e}(),a=function(){function e(t,r,o,a){return void 0===a&&(a=!1),this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=r.toLowerCase(),this.value=o,this.ignoreCase=a,this.isComplex=!1,this.comparer=n.a.fnOperators.processOperator(this.operator)):(t instanceof e&&o instanceof e||o instanceof Array)&&(this.isComplex=!0,this.condition=r.toLowerCase(),this.predicates=[t],o instanceof Array?[].push.apply(this.predicates,o):this.predicates.push(o)),this}return e.and=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.combinePredicates([].slice.call(t,0),"and")},e.prototype.and=function(t,r,n,o){return e.combine(this,t,r,n,"and",o)},e.or=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.combinePredicates([].slice.call(t,0),"or")},e.prototype.or=function(t,r,n,o){return e.combine(this,t,r,n,"or",o)},e.fromJson=function(e){if(e instanceof Array){for(var t=[],r=0,n=e.length;r<n;r++)t.push(this.fromJSONData(e[r]));return t}var o=e;return this.fromJSONData(o)},e.prototype.validate=function(e){var t,r,o=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,n.a.getObject(this.field,e),this.value,this.ignoreCase);t="and"===this.condition;for(var a=0;a<o.length;a++)if(r=o[a].validate(e),t){if(!r)return!1}else if(r)return!0;return t},e.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var r=0;r<t.length;r++)e.push(t[r].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,condition:this.condition,predicates:e}},e.combinePredicates=function(t,r){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],r,t.slice(1))},e.combine=function(t,r,o,a,i,s){return r instanceof e?e[i](t,r):"string"==typeof r?e[i](t,new e(r,o,a,s)):n.a.throwError("Predicate - "+i+" : invalid arguments")},e.fromJSONData=function(t){for(var r=t.predicates||[],n=r.length,o=[],a=0;a<n;a++)o.push(this.fromJSONData(r[a]));return t.isComplex?new e(o[0],t.condition,o.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase)},e}()},14:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(0),o=(r.n(n),r(18)),a=r(13),i={GroupGuid:"{271bbba0-1ee7}"},s=function(){function e(){}return e.getValue=function(e,t){return"function"==typeof e?e.call(t||{}):e},e.endsWith=function(e,t){return e.slice(-t.length)===t},e.startsWith=function(e,t){return e.slice(0,t.length)===t},e.fnSort=function(e){return e=e?e.toLowerCase():"ascending","ascending"===e?this.fnAscending:this.fnDescending},e.fnAscending=function(e,t){return null===t||void 0===t?-1:"string"==typeof e?e.localeCompare(t):null===e||void 0===e?1:e-t},e.fnDescending=function(e,t){return null===t||void 0===t?1:"string"==typeof e?-1*e.localeCompare(t):null===e||void 0===e?-1:t-e},e.extractFields=function(e,t){var r={};if(1===t.length)return this.getObject(t[0],e);for(var n=0;n<t.length;n++)r[t[n].replace(".","_")]=this.getObject(t[n],e);return r},e.select=function(e,t){for(var r=[],n=0;n<e.length;n++)r.push(this.extractFields(e[n],t));return r},e.group=function(t,o,a,s,u){s=s||1;var c=t;if(c.GroupGuid===i.GroupGuid){for(var l=this,p=0;p<c.length;p++)!function(e){if(r.i(n.isNullOrUndefined)(u))c[e].items=l.group(c[e].items,o,a,c.level+1),c[e].count=c[e].items.length;else{var t=-1,i=u.filter(function(t){return t.key===c[e].key});t=u.indexOf(i[0]),c[e].items=l.group(c[e].items,o,a,c.level+1,u[t].items),c[e].count=u[t].count}}(p);return c.childLevels+=1,c}var f={},d=[];d.GroupGuid=i.GroupGuid,d.level=s,d.childLevels=0,d.records=c;for(var h=this,g=0;g<c.length;g++)!function(e){var t=h.getVal(c,e,o);if(!f[t]&&(f[t]={key:t,count:0,items:[],aggregates:{},field:o},d.push(f[t]),!r.i(n.isNullOrUndefined)(u))){var a=u.filter(function(e){return e.key===f[t].key});f[t].count=a[0].count}f[t].count=r.i(n.isNullOrUndefined)(u)?f[t].count+=1:f[t].count,f[t].items.push(c[e])}(g);if(a&&a.length)for(var g=0;g<d.length;g++)!function(t){for(var o={},i=void 0,s=a,c=0;c<a.length;c++)if(i=e.aggregates[a[c].type],r.i(n.isNullOrUndefined)(u))i&&(o[s[c].field+" - "+s[c].type]=i(d[t].items,s[c].field));else{var l=u.filter(function(e){return e.key===d[t].key});i&&(o[s[c].field+" - "+s[c].type]=i(l[0].items,s[c].field))}d[t].aggregates=o}(g);return d},e.buildHierarchy=function(e,t,r,n,o){var a,i,s={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),a=0;a<n.length;a++){var u=this.getObject(e,n[a]);i=s[u]||(s[u]=[]),i.push(n[a])}for(a=0;a<r.length;a++){var u=this.getObject(o||e,r[a]);r[a][t]=s[u]}},e.getFieldList=function(e,t,r){if(void 0===r&&(r=""),void 0===t||null===t)return this.getFieldList(e,[],r);for(var n=e,o=Object.keys(e),a=0,i=o;a<i.length;a++){var s=i[a];"object"!=typeof n[s]||n[s]instanceof Array?t.push(r+s):this.getFieldList(n[s],t,r+s+".")}return t},e.getObject=function(e,t){if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var r=t,n=e.split("."),o=0;o<n.length&&null!=r;o++)r=r[n[o]];return r},e.sort=function(e,t,r){if(e.length<=1)return e;var n=parseInt((e.length/2).toString(),10),o=e.slice(0,n),a=e.slice(n);return o=this.sort(o,t,r),a=this.sort(a,t,r),this.merge(o,a,t,r)},e.merge=function(e,t,r,n){for(var o,a=[];e.length>0||t.length>0;)o=e.length>0&&t.length>0?n?n(this.getVal(e,0,r),this.getVal(t,0,r))<=0?e:t:e[0][r]<e[0][r]?e:t:e.length>0?e:t,a.push(o.shift());return a},e.getVal=function(e,t,r){return r?this.getObject(r,e[t]):e[t]},e.toLowerCase=function(e){return e?"string"==typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},e.callAdaptorFunction=function(e,t,r,n){if(t in e){var o=e[t](r,n);this.fnOperators.isnull(o)||(r=o)}return r},e.isPlainObject=function(e){return!!e&&e.constructor===Object},e.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch(e){}return!!e&&"withCredentials"in e},e.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,r){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),t=n[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===r?3&t|8:t]})},e.isNull=function(e){return void 0===e||null===e},e.getItemFromComparer=function(t,o,a){var i,s,u,c=0,l="string"==typeof e.getVal(t,0,o);if(t.length)for(;r.i(n.isNullOrUndefined)(i)&&c<t.length;)i=e.getVal(t,c,o),u=t[c++];for(;c<t.length;c++)s=e.getVal(t,c,o),r.i(n.isNullOrUndefined)(s)||(l&&(i=+i,s=+s),a(i,s)>0&&(i=s,u=t[c]));return u},e}();s.serverTimezoneOffset=0,s.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},s.aggregates={sum:function(e,t){for(var r,n=0,o="number"!=typeof s.getVal(e,0,t),a=0;a<e.length;a++)r=s.getVal(e,a,t),isNaN(r)||null===r||(o&&(r=+r),n+=r);return n},average:function(e,t){return s.aggregates.sum(e,t)/e.length},min:function(e,t){var r;return"function"==typeof t&&(r=t,t=null),s.getObject(t,s.getItemFromComparer(e,t,r||s.fnAscending))},max:function(e,t){var r;return"function"==typeof t&&(r=t,t=null),s.getObject(t,s.getItemFromComparer(e,t,r||s.fnDescending))},truecount:function(e,t){return new o.a(e).executeLocal((new a.a).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new o.a(e).executeLocal((new a.a).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},s.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},s.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},s.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},s.fnOperators={equal:function(e,t,r){return r?s.toLowerCase(e)===s.toLowerCase(t):e===t},notequal:function(e,t,r){return!s.fnOperators.equal(e,t,r)},lessthan:function(e,t,r){return r?s.toLowerCase(e)<s.toLowerCase(t):e<t},greaterthan:function(e,t,r){return r?s.toLowerCase(e)>s.toLowerCase(t):e>t},lessthanorequal:function(e,t,r){return r?s.toLowerCase(e)<=s.toLowerCase(t):e<=t},greaterthanorequal:function(e,t,r){return r?s.toLowerCase(e)>=s.toLowerCase(t):e>=t},contains:function(e,t,o){return o?!r.i(n.isNullOrUndefined)(e)&&!r.i(n.isNullOrUndefined)(t)&&-1!==s.toLowerCase(e).indexOf(s.toLowerCase(t)):!r.i(n.isNullOrUndefined)(e)&&!r.i(n.isNullOrUndefined)(t)&&-1!==e.toString().indexOf(t)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,r){return r?e&&t&&s.startsWith(e.toLowerCase(),t.toLowerCase()):e&&t&&s.startsWith(e,t)},endswith:function(e,t,r){return r?e&&t&&s.endsWith(e.toLowerCase(),t.toLowerCase()):e&&t&&s.endsWith(e,t)},processSymbols:function(e){var t=s.operatorSymbols[e];if(t){return s.fnOperators[t]}return s.throwError("Query - Process Operator : Invalid operator")},processOperator:function(e){var t=s.fnOperators[e];return t||s.fnOperators.processSymbols(e)}},s.parse={parseJson:function(e){return"string"==typeof e?e=JSON.parse(e,s.parse.jsonReviver):e instanceof Array?s.parse.iterateAndReviveArray(e):"object"==typeof e&&s.parse.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?s.parse.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=s.parse.parseJson(e[t]):e[t]=s.parse.jsonReviver("",e[t])},iterateAndReviveJson:function(e){for(var t,r=Object.keys(e),n=0,o=r;n<o.length;n++){var a=o[n];s.startsWith(a,"__")||(t=e[a],"object"==typeof t?t instanceof Array?s.parse.iterateAndReviveArray(t):t&&s.parse.iterateAndReviveJson(t):e[a]=s.parse.jsonReviver(e[a],t))}},jsonReviver:function(e,t){var r=t;if("string"==typeof t){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(n)return s.parse.jsonReplacer({value:new Date(parseInt(n[1],10))},!1).value;if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){var o=r.split(/[^0-9]/);t=s.parse.jsonReplacer({value:new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10))},!1).value}}return t},isJson:function(e){return"string"==typeof e[0]?e:s.parse.parseJson(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e){return s.isPlainObject(e)?s.parse.jsonReplacer(e):e instanceof Array?s.parse.arrayReplacer(e):e instanceof Date?s.parse.jsonReplacer({val:e}).val:e},jsonReplacer:function(e,t){void 0===t&&(t=!0);for(var r,n=Object.keys(e),o=0,a=n;o<a.length;o++){var i=a[o];if((r=e[i])instanceof Date){var u=r,c=+u-6e4*u.getTimezoneOffset();e[i]=new Date(c-36e5*s.serverTimezoneOffset),t&&(e[i]=e[i].toJSON())}}return e},arrayReplacer:function(e){for(var t=0;t<e.length;t++)s.isPlainObject(e[t])?e[t]=s.parse.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=s.parse.jsonReplacer({date:e[t]}).date);return e}}},17:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return p}),r.d(t,"f",function(){return f}),r.d(t,"g",function(){return d}),r.d(t,"h",function(){return h}),r.d(t,"i",function(){return g});var n=r(0),o=(r.n(n),r(14)),a=r(13),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s=function(){function e(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates"},this.type=e,this.dataSource=t,this.pvt={}}return e.prototype.processResponse=function(e,t,r,n){return e},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.processQuery=function(e,t){for(var r,n,o=e.dataSource.json.slice(0),a=o.length,i=!0,s={},u=0;u<t.queries.length;u++)n=t.queries[u],r=this[n.fn].call(this,o,n.e,t),"onAggregates"===n.fn?s[n.e.field+" - "+n.e.type]=r:o=void 0!==r?r:o,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(i=!1),i&&(a=o.length);return t.requiresCounts&&(o={result:o,count:a,aggregates:s}),o},t.prototype.batchRequest=function(e,t,r){var n;for(n=0;n<t.addedRecords.length;n++)this.insert(e,t.addedRecords[n]);for(n=0;n<t.changedRecords.length;n++)this.update(e,r.key,t.changedRecords[n]);for(n=0;n<t.deletedRecords.length;n++)this.remove(e,r.key,t.deletedRecords[n]);return t},t.prototype.onWhere=function(e,t){return e&&e.length?e.filter(function(e){if(t)return t.validate(e)}):e},t.prototype.onAggregates=function(e,t){var r=o.a.aggregates[t.type];return e&&r&&0!==e.length?r(e,t.field):null},t.prototype.onSearch=function(e,t){return e&&e.length?(0===t.fieldNames.length&&o.a.getFieldList(e[0],t.fieldNames),e.filter(function(e){for(var r=0;r<t.fieldNames.length;r++)if(t.comparer.call(e,o.a.getObject(t.fieldNames[r],e),t.searchKey,t.ignoreCase))return!0;return!1})):e},t.prototype.onSortBy=function(e,t,r){if(!e||!e.length)return e;var n,a=o.a.getValue(t.fieldName,r);if(!a)return e.sort(t.comparer);if(a instanceof Array){a=a.slice(0);for(var i=a.length-1;i>=0;i--)a[i]&&(n=t.comparer,o.a.endsWith(a[i]," desc")&&(n=o.a.fnSort("descending"),a[i]=a[i].replace(" desc","")),e=o.a.sort(e,a[i],n));return e}return o.a.sort(e,a,t.comparer)},t.prototype.onGroup=function(e,t,r){if(!e||!e.length)return e;var n=a.a.filterQueries(r.queries,"onAggregates"),i=[];if(n.length)for(var s=void 0,u=0;u<n.length;u++)s=n[u].e,i.push({type:s.type,field:o.a.getValue(s.field,r)});return o.a.group(e,o.a.getValue(t.fieldName,r),i)},t.prototype.onPage=function(e,t,r){var n=o.a.getValue(t.pageSize,r),a=(o.a.getValue(t.pageIndex,r)-1)*n,i=a+n;return e&&e.length?e.slice(a,i):e},t.prototype.onRange=function(e,t){return e&&e.length?e.slice(o.a.getValue(t.start),o.a.getValue(t.end)):e},t.prototype.onTake=function(e,t){return e&&e.length?e.slice(0,o.a.getValue(t.nos)):e},t.prototype.onSkip=function(e,t){return e&&e.length?e.slice(o.a.getValue(t.nos)):e},t.prototype.onSelect=function(e,t){return e&&e.length?o.a.select(e,o.a.getValue(t.fieldNames)):e},t.prototype.insert=function(e,t){return e.dataSource.json.push(t)},t.prototype.remove=function(e,t,r,n){var o,a=e.dataSource.json;for("object"==typeof r&&(r=r[t]),o=0;o<a.length&&a[o][t]!==r;o++);return o!==a.length?a.splice(o,1):null},t.prototype.update=function(e,t,o,a){var i,s=e.dataSource.json,u=o[t];for(i=0;i<s.length&&s[i][t]!==u;i++);return i<s.length?r.i(n.merge)(s[i],o):null},t}(s),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.processQuery=function(e,t,r){var n,i,s=this.getQueryRequest(t),u=a.a.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),c=t.params,l=e.dataSource.url,p=null,f=this.options,d={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in u?(n=u.onPage,i=o.a.getValue(n.pageIndex,t),p=o.a.getValue(n.pageSize,t),i=(i-1)*p):"onRange"in u&&(n=u.onRange,i=n.start,p=n.end-n.start);for(var h=0;h<s.sorts.length;h++)n=o.a.getValue(s.sorts[h].e.fieldName,t),d.sorts.push(o.a.callAdaptorFunction(this,"onEachSort",{name:n,direction:s.sorts[h].e.direction},t));r&&(n=this.getFiltersFrom(r,t))&&d.filters.push(o.a.callAdaptorFunction(this,"onEachWhere",n.toJson(),t));for(var h=0;h<s.filters.length;h++){d.filters.push(o.a.callAdaptorFunction(this,"onEachWhere",s.filters[h].e.toJson(),t));for(var g="object"==typeof d.filters[h]?Object.keys(d.filters[h]):[],y=0,v=g;y<v.length;y++){var m=v[y];o.a.isNull(d[m])&&delete d[m]}}for(var h=0;h<s.searches.length;h++)n=s.searches[h].e,d.searches.push(o.a.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},t));for(var h=0;h<s.groups.length;h++)d.groups.push(o.a.getValue(s.groups[h].e.fieldName,t));for(var h=0;h<s.aggregates.length;h++)n=s.aggregates[h].e,d.aggregates.push({type:n.type,field:o.a.getValue(n.field,t)});var b={};this.getRequestQuery(f,t,u,d,b),o.a.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:c,reqParams:b});for(var S=Object.keys(b),w=0,C=S;w<C.length;w++){var m=C[w];(o.a.isNull(b[m])||""===b[m]||0===b[m].length)&&delete b[m]}f.skip in b&&f.take in b||null===p||(b[f.skip]=o.a.callAdaptorFunction(this,"onSkip",i,t),b[f.take]=o.a.callAdaptorFunction(this,"onTake",p,t));var q=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(b),url:l,pvtData:q,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(b,t,e),n=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+n,{type:"GET",url:n.length?l.replace(/\/*$/,n):l,pvtData:q})},t.prototype.getRequestQuery=function(e,t,r,n,a){var i=a;i[e.from]=t.fromTable,e.expand&&(i[e.expand]=t.expands),i[e.select]="onSelect"in r?o.a.callAdaptorFunction(this,"onSelect",o.a.getValue(r.onSelect.fieldNames,t),t):"",i[e.count]=t.requiresCounts?o.a.callAdaptorFunction(this,"onCount",t.requiresCounts,t):"",i[e.search]=n.searches.length?o.a.callAdaptorFunction(this,"onSearch",n.searches,t):"",i[e.skip]="onSkip"in r?o.a.callAdaptorFunction(this,"onSkip",o.a.getValue(r.onSkip.nos,t),t):"",i[e.take]="onTake"in r?o.a.callAdaptorFunction(this,"onTake",o.a.getValue(r.onTake.nos,t),t):"",i[e.where]=n.filters.length||n.searches.length?o.a.callAdaptorFunction(this,"onWhere",n.filters,t):"",i[e.sortBy]=n.sorts.length?o.a.callAdaptorFunction(this,"onSortBy",n.sorts,t):"",i[e.group]=n.groups.length?o.a.callAdaptorFunction(this,"onGroup",n.groups,t):"",i[e.aggregates]=n.aggregates.length?o.a.callAdaptorFunction(this,"onAggregates",n.aggregates,t):"",i.param=[]},t.prototype.convertToQueryString=function(e,t,r){return""},t.prototype.processResponse=function(e,t,r,n,a,i){var s=a,u=s.pvtData||{},c=e.groupDs;if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return r.requiresCounts?{result:[],count:0}:[];var l=JSON.parse(s.data);if(l&&"batch"===l.action&&e.addedRecords)return i.addedRecords=e.addedRecords,i;e.d&&(e=e.d);var p={};return"count"in e&&(p.count=e.count),p.result=e.result?e.result:e,this.getAggregateResult(u,e,p,c),o.a.isNull(p.count)?p.result:{result:p.result,count:p.count,aggregates:p.aggregates}},t.prototype.onGroup=function(e){this.pvt.groups=e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,t,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:r[void 0],key:r[void 0]})}},t.prototype.beforeSend=function(e,t){},t.prototype.insert=function(e,t,r){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:r,action:"insert"})}},t.prototype.remove=function(e,t,r,n){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({key:r,keyColumn:t,table:n,action:"remove"})}},t.prototype.update=function(e,t,r,n){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:r,action:"update",keyColumn:t,key:r[t],table:n})}},t.prototype.getFiltersFrom=function(e,t){var r,n=t.fKey,i=n,s=t.key,u=[];"object"!=typeof e[0]&&(i=null);for(var c=0;c<e.length;c++)r="object"==typeof e[0]?o.a.getObject(s||i,e[c]):e[c],u.push(new a.b(n,"equal",r));return a.b.or(u)},t.prototype.getAggregateResult=function(e,t,a,i){var s=t;if(t&&t.result&&(s=t.result),e&&e.aggregates&&e.aggregates.length){var u=e.aggregates,c=void 0,l=s,p={};t.aggregate&&(l=t.aggregate);for(var f=0;f<u.length;f++)(c=o.a.aggregates[u[f].type])&&(p[u[f].field+" - "+u[f].type]=c(l,u[f].field));a.aggregates=p}if(e&&e.groups&&e.groups.length){for(var d=e.groups,f=0;f<d.length;f++){r.i(n.isNullOrUndefined)(i)||(i=o.a.group(i,d[f])),s=o.a.group(s,d[f],e.aggregates,null,i)}a.result=s}return a},t.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=a.a.filterQueries(e.queries,"onSortBy"),t.groups=a.a.filterQueries(e.queries,"onGroup"),t.filters=a.a.filterQueries(e.queries,"onWhere"),t.searches=a.a.filterQueries(e.queries,"onSearch"),t.aggregates=a.a.filterQueries(e.queries,"onAggregates"),t},t}(s),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=r.i(n.extend)({},t.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "}),t}return i(t,e),t.prototype.onPredicate=function(e,r,n){var a,i,s="",u=e.value,c=typeof u,l=e.field?t.getField(e.field):null;if(u instanceof Date&&(u="datetime'"+o.a.parse.replacer(u)+"'"),"string"===c&&(u="'"+u+"'",n&&(l="cast("+l+", 'Edm.String')"),o.a.parse.isGuid(u)&&(i="guid"),e.ignoreCase&&(i||(l="tolower("+l+")"),u=u.toLowerCase())),a=o.a.odBiOperator[e.operator])return s+=l,s+=a,i&&(s+=i),s+u;if("substringof"===(a=o.a.odUniOperator[e.operator])){var p=u;u=l,l=p}return s+=a+"(",s+=l+",",i&&(s+=i),s+=u+")"},t.prototype.onComplexPredicate=function(e,t,r){for(var n=[],o=0;o<e.predicates.length;o++)n.push("("+this.onEachWhere(e.predicates[o],t,r)+")");return n.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,t,r){return e.isComplex?this.onComplexPredicate(e,t,r):this.onPredicate(e,t,r)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&o.a.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],r=0;r<e.fields.length;r++)t.push(new a.b(e.fields[r],e.operator,e.key,e.ignoreCase));this.pvt.search=t},t.prototype.onSearch=function(e){return this.pvt.search=a.b.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var r=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)r.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else r.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return r.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,""},t.prototype.onSelect=function(e){for(var r=0;r<e.length;r++)e[r]=t.getField(e[r]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,t,r){o.a.endsWith(r.url,this.options.batch)&&"post"===r.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,t,a,i,s,u){if(!r.i(n.isNullOrUndefined)(e.d)){var c=a&&a.requiresCounts?e.d.results:e.d;if(!r.i(n.isNullOrUndefined)(c))for(var l=0;l<c.length;l++)r.i(n.isNullOrUndefined)(c[l].__metadata)||delete c[l].__metadata}var p=s&&s.pvtData,f=this.processBatchResponse(e,a,i,s,u);if(f)return f;var d=i&&s.getResponseHeader("DataServiceVersion"),h=null,g=d&&parseInt(d,10)||2;if(a&&a.requiresCounts){(e.__count||e["odata.count"])&&(h=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(h=e.__count||e["odata.count"])}3===g&&e.value&&(e=e.value),e.d&&(e=e.d),g<3&&e.results&&(e=e.results);var y={};return y.count=h,y.result=e,this.getAggregateResult(p,e,y),o.a.isNull(h)?y.result:{result:y.result,count:y.count,aggregates:y.aggregates}},t.prototype.convertToQueryString=function(e,t,r){var n=[],o=e.table||"";delete e.table,r.dataSource.requiresFormat&&(e.$format="json");for(var a=Object.keys(e),i=0,s=a;i<s.length;i++){var u=s[i];n.push(u+"="+e[u])}return n=n.join("&"),r.dataSource.url&&-1!==r.dataSource.url.indexOf("?")&&!o?n:n.length?o+"?"+n:o||""},t.prototype.insert=function(e,t,r){return{url:e.dataSource.url.replace(/\/*$/,r?"/"+r:""),data:JSON.stringify(t)}},t.prototype.remove=function(e,t,r,n){return{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,n?"/"+n:"")+"("+r+")"}},t.prototype.update=function(e,t,r,n){return{type:"PUT",url:e.dataSource.url.replace(/\/*$/,n?"/"+n:"")+"("+r[t]+")",data:JSON.stringify(r),accept:this.options.accept}},t.prototype.batchRequest=function(e,t,r){var n=r.guid=o.a.getGuid(this.options.batchPre),a=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),i={url:r.url,key:r.key,cid:1,cSet:o.a.getGuid(this.options.changeSet)},s="--"+n+"\n";return s+="Content-Type: multipart/mixed; boundary="+i.cSet.replace("--","")+"\n",this.pvt.changeSet=0,s+=this.generateInsertRequest(t.addedRecords,i),s+=this.generateUpdateRequest(t.changedRecords,i),s+=this.generateDeleteRequest(t.deletedRecords,i),s+=i.cSet+"--\n",s+="--"+n+"--",{type:"POST",url:a,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+n,data:s}},t.prototype.generateDeleteRequest=function(e,t){if(!e)return"";var r={method:"DELETE ",url:function(e,t,r){return"("+e[t][r]+")"},data:function(e,t){return""}};return this.generateBodyContent(e,t,r)+"\n"},t.prototype.generateInsertRequest=function(e,t){if(!e)return"";var r={method:"POST ",url:function(e,t,r){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,r)},t.prototype.generateUpdateRequest=function(e,t){if(!e)return"";var r={method:"PUT ",url:function(e,t,r){return"("+e[t][r]+")"},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,r)},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,t,r){for(var n="",o=0;o<e.length;o++)n+="\n"+t.cSet+"\n",n+=this.options.changeSetContent+"\n\n",n+=r.method,n+=t.url+r.url(e,o,t.key)+" HTTP/1.1\n",n+="Accept: "+this.options.accept+"\n",n+="Content-Id: "+this.pvt.changeSet+++"\n",n+=this.options.batchChangeSetContentType+"\n\n",n+=r.data(e,o);return n},t.prototype.processBatchResponse=function(e,t,a,i,s){if(a&&a.getResponseHeader("Content-Type")&&-1!==a.getResponseHeader("Content-Type").indexOf("xml"))return t.requiresCounts?{result:[],count:0}:[];if(i&&this.options.batch&&o.a.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()){var u=a.getResponseHeader("Content-Type"),c=void 0,l=void 0
;if(u=u.substring(u.indexOf("=batchresponse")+1),e=e.split(u),e.length<2)return{};e=e[1];var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(e);p&&e.replace(p[0],"");var f=p?p[1]:"";e=e.split(f);for(var d=e.length;d>-1;d--)/\bContent-ID:/i.test(e[d])&&/\bHTTP.+201/.test(e[d])&&(c=parseInt(/\bContent-ID: (\d+)/i.exec(e[d])[1],10),s.addedRecords[c]&&(l=o.a.parse.parseJson(/^\{.+\}/m.exec(e[d])[0]),r.i(n.extend)({},s.addedRecords[c],this.processResponse(l))));return s}return null},t}(c),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=r.i(n.extend)({},t.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "}),t}return i(t,e),t.prototype.onCount=function(e){return!0===e?"true":""},t.prototype.onPredicate=function(t,r){var n="",o=t.value,a=o instanceof Date;return n=e.prototype.onPredicate.call(this,t,r),a&&(n=n.replace(/datetime'(.*)'$/,"$1")),n},t.prototype.onEachSearch=function(e){var t=this.pvt.searches||[];t.push(e.key),this.pvt.searches=t},t.prototype.onSearch=function(e){return this.pvt.searches.join(" OR ")},t.prototype.beforeSend=function(e,t,r){t.setRequestHeader("Accept",this.options.accept)},t.prototype.processResponse=function(t,r,n,a,i,s){var u=i&&i.pvtData,c=e.prototype.processBatchResponse.call(this,t,n,a,i,s);if(c)return c;var l=null;n&&n.requiresCounts&&"@odata.count"in t&&(l=t["@odata.count"]),t=t.value;var p={};return p.count=l,p.result=t,this.getAggregateResult(u,t,p),o.a.isNull(l)?p.result:{result:p.result,count:l,aggregates:p.aggregates}},t}(l),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.insert=function(e,t,r){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},t.prototype.remove=function(e,t,r,n){return{type:"DELETE",url:e.dataSource.url+"/"+r,data:JSON.stringify(r)}},t.prototype.update=function(e,t,r,n){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(r)}},t.prototype.beforeSend=function(e,t,r){t.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01")},t.prototype.processResponse=function(e,t,r,n,a,i){var s=a&&a.pvtData,u=null,c={};if(a&&"post"!==a.type.toLowerCase()){var l=n&&a.getResponseHeader("DataServiceVersion"),p=l&&parseInt(l,10)||2;r&&r.requiresCounts&&(o.a.isNull(e.Count)||(u=e.Count)),p<3&&e.Items&&(e=e.Items),c.count=u,c.result=e,this.getAggregateResult(s,e,c)}return c.result=c.result||e,o.a.isNull(u)?c.result:{result:c.result,count:c.count,aggregates:c.aggregates}},t}(l),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.processQuery=function(e,t,r){var n=(new c).processQuery(e,t,r),a=o.a.parse.parseJson(n.data),i={};if(a.param)for(var s=0;s<a.param.length;s++){var u=a.param[s],l=Object.keys(u)[0];i[l]=u[l]}i.value=a;return{data:JSON.stringify(i),url:n.url,pvtData:n.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}},t}(c),h=function(e){function t(){var t=e.call(this)||this;return r.i(n.setValue)("beforeSend",c.prototype.beforeSend,t),r.i(n.setValue)("insert",c.prototype.insert,t),r.i(n.setValue)("update",c.prototype.update,t),r.i(n.setValue)("remove",c.prototype.remove,t),t}return i(t,e),t.prototype.batchRequest=function(e,t,r){var n;for(n=0;n<t.addedRecords.length;n++)u.prototype.insert(e,t.addedRecords[n]);for(n=0;n<t.changedRecords.length;n++)u.prototype.update(e,r.key,t.changedRecords[n]);for(n=0;n<t.deletedRecords.length;n++)u.prototype.remove(e,r.key,t.deletedRecords[n]);return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:r.url,key:r.key})}},t}(u),g=function(e){function t(t,a,i){var s=e.call(this)||this;s.isCrudAction=!1,s.isInsertAction=!1,r.i(n.isNullOrUndefined)(t)||(s.cacheAdaptor=t),s.pageSize=i,s.guidId=o.a.getGuid("cacheAdaptor");var u={keys:[],results:[]};window.localStorage.setItem(s.guidId,JSON.stringify(u));var c=s.guidId;return r.i(n.isNullOrUndefined)(a)||setInterval(function(){var e;e=o.a.parse.parseJson(window.localStorage.getItem(c));for(var t=[],r=0;r<e.results.length;r++){var n=+new Date,i=+new Date(e.results[r].timeStamp);e.results[r].timeStamp=n-i,n-i>a&&t.push(r)}for(var r=0;r<t.length;r++)e.results.splice(t[r],1),e.keys.splice(t[r],1);window.localStorage.removeItem(c),window.localStorage.setItem(c,JSON.stringify(e))},a),s}return i(t,e),t.prototype.generateKey=function(e,t){var r=this.getQueryRequest(t),n=a.a.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=e;"onPage"in n&&(o+=n.onPage.pageIndex),r.sorts.forEach(function(e){o+=e.e.direction+e.e.fieldName}),r.groups.forEach(function(e){o+=e.e.fieldName}),r.searches.forEach(function(e){o+=e.e.searchKey});for(var i=0;i<r.filters.length;i++){var s=r.filters[i];if(s.e.isComplex){var u=t.clone();u.queries=[];for(var c=0;c<s.e.predicates.length;c++)u.queries.push({fn:"onWhere",e:s.e.predicates[c],filter:t.queries.filter});o+=s.e.condition+this.generateKey(e,u)}else o+=s.e.field+s.e.operator+s.e.value}return o},t.prototype.processQuery=function(e,t,r){var n,a=this.generateKey(e.dataSource.url,t);n=o.a.parse.parseJson(window.localStorage.getItem(this.guidId));var i=n?n.results[n.keys.indexOf(a)]:null;return null==i||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):i},t.prototype.processResponse=function(e,t,r,n,a,i){if(this.isInsertAction||a&&this.cacheAdaptor.options.batch&&o.a.endsWith(a.url,this.cacheAdaptor.options.batch)&&"post"===a.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,r,n,a,i);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var s=r?this.generateKey(t.dataSource.url,r):t.dataSource.url,u={};u=o.a.parse.parseJson(window.localStorage.getItem(this.guidId));var c=u.keys.indexOf(s);for(-1!==c&&(u.results.splice(c,1),u.keys.splice(c,1)),u.results[u.keys.push(s)-1]={keys:s,result:e.result,timeStamp:new Date,count:e.count};u.results.length>this.pageSize;)u.results.splice(0,1),u.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(u)),e},t.prototype.beforeSend=function(e,t,r){o.a.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,t,r,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,r,n)},t.prototype.insert=function(e,t,r){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,r)},t.prototype.remove=function(e,t,r,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,r,n)},t.prototype.batchRequest=function(e,t,r){return this.cacheAdaptor.batchRequest(e,t,r)},t}(c)},18:function(e,t,r){"use strict";r.d(t,"a",function(){return u}),r.d(t,"b",function(){return c});var n=r(1),o=r(0),a=(r.n(o),r(14)),i=r(13),s=r(17),u=function(){function e(e,t,n){var u=this;this.dateParse=!0,this.requests=[],e||this.dataSource||(e=[]),n=n||e.adaptor;var c;return e instanceof Array?c={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),c={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof s.h)&&!e.url,requiresFormat:e.requiresFormat}):a.a.throwError("DataManager: Invalid arguments"),void 0!==c.requiresFormat||a.a.isCors()||(c.requiresFormat=!!r.i(o.isNullOrUndefined)(c.crossDomain)||c.crossDomain),void 0===c.dataType&&(c.dataType="json"),this.dataSource=c,this.defaultQuery=t,c.url&&c.offline&&!c.json.length?(this.isDataAvailable=!1,this.adaptor=n||new s.d,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new i.a),this.ready.then(function(e){u.dataSource.offline=!0,u.isDataAvailable=!0,c.json=e.result,u.adaptor=new s.b})):this.adaptor=c.offline?new s.b:new s.d,!c.jsonp&&this.adaptor instanceof s.d&&(c.jsonp="callback"),this.adaptor=n||this.adaptor,c.enableCaching&&(this.adaptor=new s.i(this.adaptor,c.timeTillExpiration,c.cachingPageSize)),this}return e.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},e.prototype.executeLocal=function(t){this.defaultQuery||t instanceof i.a||a.a.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||a.a.throwError("DataManager - executeLocal() : Json data is required to execute"),t=t||this.defaultQuery;var n=this.adaptor.processQuery(this,t);if(t.subQuery){var s=t.subQuery.fromTable,u=t.subQuery.lookups,c=t.requiresCounts?n.result:n;u&&u instanceof Array&&a.a.buildHierarchy(t.subQuery.fKey,s,c,u,t.subQuery.key);for(var l=0;l<c.length;l++)c[l][s]instanceof Array&&(c[l]=r.i(o.extend)({},{},c[l]),c[l][s]=this.adaptor.processResponse(t.subQuery.using(new e(c[l][s].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(n,this,t)},e.prototype.executeQuery=function(t,r,n,o){var s=this;"function"==typeof t&&(n,n=r,r=t,t=null),t||(t=this.defaultQuery),t instanceof i.a||a.a.throwError("DataManager - executeQuery() : A query is required to execute");var u=new c,l={query:t};if(this.dataSource.offline||void 0===this.dataSource.url)e.nextTick(function(){var r=s.executeLocal(t);l=e.getDeferedArgs(t,r,l),u.resolve(l)});else{var p=this.adaptor.processQuery(this,t);this.makeRequest(p,u,l,t)}return u.promise},e.getDeferedArgs=function(e,t,r){return e.requiresCounts?(r.result=t.result,r.count=t.count):r.result=t,r},e.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},e.prototype.extendRequest=function(e,t,n){return r.i(o.extend)({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:n},e)},e.prototype.makeRequest=function(e,t,r,o){var i=this,s=!!o.subQuerySelector,u=function(e){r.error=e,t.reject(r)},l=function(e,n,o,a,i,s,u){r.xhr=o,r.count=n?parseInt(n.toString(),10):0,r.result=e,r.request=a,r.aggregates=s,r.actual=i,r.virtualSelectRecords=u,t.resolve(r)},p=function(e,t){var n=new c,p={parent:r};o.subQuery.isChild=!0;var f=i.adaptor.processQuery(i,o.subQuery,e?i.adaptor.processResponse(e):t),d=i.makeRequest(f,n,p,o.subQuery);return s||n.then(function(t){e&&(a.a.buildHierarchy(o.subQuery.fKey,o.subQuery.fromTable,e,t,o.subQuery.key),l(e,t.count,t.xhr))},u),d},f=function(e,t){-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&i.dateParse&&(e=a.a.parse.parseJson(e));var r=i.adaptor.processResponse(e,i,o,t.httpRequest,t),n=0,u=null,c=e.virtualSelectRecords;if(o.requiresCounts&&(n=r.count,u=r.aggregates,r=r.result),!o.subQuery)return void l(r,n,t.httpRequest,t.type,e,u,c);s||p(r,t)},d=this.extendRequest(e,f,u),h=new n.Ajax(d);if(h.beforeSend=function(){i.beforeSend(h.httpRequest,h)},d=h.send(),this.requests.push(h),s){var g=void 0,y=o.subQuerySelector.call(this,{query:o.subQuery,parent:o});y&&y.length?(g=Promise.all([d,p(null,y)]),g.then(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],n=i.adaptor.processResponse(r[0],i,o,i.requests[0].httpRequest,i.requests[0]),u=0;o.requiresCounts&&(u=n.count,n=n.result);var c=i.adaptor.processResponse(r[1],i,o.subQuery,i.requests[1].httpRequest,i.requests[1]);u=0,o.subQuery.requiresCounts&&(u=c.count,c=c.result),a.a.buildHierarchy(o.subQuery.fKey,o.subQuery.fromTable,n,c,o.subQuery.key),s=!1,l(n,u,i.requests[0].httpRequest)})):s=!1}return d},e.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var r,n=this.dataSource.headers,o=0;n&&o<n.length;o++){r=[];for(var a=Object.keys(n[o]),i=0,s=a;i<s.length;i++){var u=s[i];r.push(u),e.setRequestHeader(u,n[o][u])}}},e.prototype.saveChanges=function(e,t,r,o){var a=this;r instanceof i.a&&(o=r,r=null);var s={url:r,key:t||this.dataSource.key},u=this.adaptor.batchRequest(this,e,s,o);if(this.dataSource.offline)return u;var l=new c,p=new n.Ajax(u);return p.beforeSend=function(){a.beforeSend(p.httpRequest,p)},p.onSuccess=function(t,r){l.resolve(a,[a.adaptor.processResponse(t,a,null,r.httpRequest,r,e)])},p.onFailure=function(e){l.reject([{error:e}])},p.send(),l.promise},e.prototype.insert=function(e,t,r){e=a.a.parse.replacer(e),t instanceof i.a&&(r=t,t=null);var n=this.adaptor.insert(this,e,t,r);return this.dataSource.offline?n:this.doAjaxRequest(n)},e.prototype.remove=function(e,t,r,n){"object"==typeof t&&(t=t[e]),r instanceof i.a&&(n=r,r=null);var o=this.adaptor.remove(this,e,t,r,n);return this.dataSource.offline?o:this.doAjaxRequest(o)},e.prototype.update=function(e,t,r,n){t=a.a.parse.replacer(t),r instanceof i.a&&(n=r,r=null);var o=this.adaptor.update(this,e,t,r,n);return this.dataSource.offline?o:this.doAjaxRequest(o)},e.prototype.doAjaxRequest=function(e){var t=this,i=new c;e=r.i(o.extend)({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e);var s=new n.Ajax(e);return s.beforeSend=function(){t.beforeSend(s.httpRequest,s)},s.onSuccess=function(e,r){try{a.a.parse.parseJson(e)}catch(t){e=[]}e=t.adaptor.processResponse(a.a.parse.parseJson(e),t,null,r.httpRequest,r),i.resolve(t,[{record:e,dataManager:t}])},s.onFailure=function(e){i.reject([{error:e}])},s.send(),i.promise},e}(),c=function(){function e(){var e=this;this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}return e}()},20:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18);r.d(t,"DataManager",function(){return n.a}),r.d(t,"Deferred",function(){return n.b});var o=r(13);r.d(t,"Query",function(){return o.a}),r.d(t,"Predicate",function(){return o.b});var a=r(17);r.d(t,"Adaptor",function(){return a.a}),r.d(t,"JsonAdaptor",function(){return a.b}),r.d(t,"UrlAdaptor",function(){return a.c}),r.d(t,"ODataAdaptor",function(){return a.d}),r.d(t,"ODataV4Adaptor",function(){return a.e}),r.d(t,"WebApiAdaptor",function(){return a.f}),r.d(t,"WebMethodAdaptor",function(){return a.g}),r.d(t,"RemoteSaveAdaptor",function(){return a.h}),r.d(t,"CacheAdaptor",function(){return a.i});var i=r(14);r.d(t,"DataUtil",function(){return i.a})},3:function(e,t,r){(function(n){var o,a;o=[r,t],void 0!==(a=function(e,t){"use strict";function r(e,t){var r=t;return r.unshift(void 0),new(Function.prototype.bind.apply(e,r))}function n(e){var t,r=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(r);var n="ej2"+q(r),o=function(r){r.source===window&&"string"==typeof r.data&&r.data.length<=32&&r.data===n&&(e(),t())};return window.addEventListener("message",o,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",o)}}function o(e,t){for(var r=t,n=e.split("."),o=0;o<n.length&&!f(r);o++)r=r[n[o]];return r}function a(e,t,r){var n,o,a=e.split("."),i=r||{},s=i,u=a.length;for(n=0;n<u;n++)o=a[n],n+1===u?s[o]=void 0===t?{}:t:p(s[o])&&(s[o]={}),s=s[o];return i}function i(e,t){delete e[t]}function s(e){var t={};return!p(e)&&e.constructor===t.constructor}function u(e,t){return e[t]}function c(e,t){if(!p(t))for(var r=e,n=t,o=Object.keys(t),a=0,i=o;a<i.length;a++){var s=i[a];r[s]=n[s]}}function l(e,t,r,n){var o=e||{},a=arguments.length;n&&(a-=1);for(var i=arguments,u=1;u<a;u++)!function(e){if(!i[e])return"continue";var t=i[e];Object.keys(t).forEach(function(e){var r,a=o[e],i=t[e];n&&s(i)?(r=s(a)?a:{},o[e]=l({},r,i,!0)):o[e]=i})}(u);return o}function p(e){return void 0===e||null===e}function f(e){return void 0===e}function d(e){return e+"_"+T++}function h(e,t){var r,n=this;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var i=o[0],s=function(){return r=null,e.call(n,i)};clearTimeout(r),r=setTimeout(s,t)}}function g(e){for(var t=[],r=Object.keys(e),n=0,o=r;n<o.length;n++){var a=o[n];t.push(encodeURIComponent(a)+"="+encodeURIComponent(""+e[a]))}return t.join("&")}function y(e){var t=Object.prototype.toString;return"[object Array]"===t.call(e)&&"[object Object]"===t.call(e[0])}function v(e,t){var r=e;return r===t||!(r===document||!r)&&v(r.parentNode,t)}function m(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}function b(e,t){var r=document.createElement("div"),n=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("link, style")),o="";p(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),r.appendChild(e.cloneNode(!0));for(var a=0,i=n.length;a<i;a++)o+=n[a].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+o+"</head><body>"+r.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var s=setInterval(function(){t.ready&&(t.print(),t.close(),clearInterval(s))},500);return t}function S(e){var t=e+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"}function w(e,t){var r="string"==typeof e?document.querySelector(e):e;if(r[R])for(var n=0,o=r[R];n<o.length;n++){var a=o[n];if(a instanceof t)return a}return null}function C(e,t){var r="string"==typeof e?document.querySelector(e):e;r[R]?r[R].push(t):r[R]=[t]}function q(e){for(var t="",r=0;r<5;r++)t+=(r?",":"")+e[r];return t}Object.defineProperty(t,"__esModule",{value:!0});var R="ej2_instances",T=0;t.createInstance=r,t.setImmediate=n,t.getValue=o,t.setValue=a,t.deleteObject=i,t.isObject=s,t.getEnumValue=u,t.merge=c,t.extend=l,t.isNullOrUndefined=p,t.isUndefined=f,t.getUniqueID=d,t.debounce=h,t.queryParams=g,t.isObjectArray=y,t.compareElementParent=v,t.throwError=m,t.print=b,t.formatUnit=S,t.getInstance=w,t.addInstance=C}.apply(t,o))&&(e.exports=a)}).call(t,r(9).setImmediate)},7:function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function i(){g&&d&&(g=!1,d.length?h=d.concat(h):y=-1,h.length&&s())}function s(){if(!g){var e=o(i);g=!0;for(var t=h.length;t;){for(d=h,h=[];++y<t;)d&&d[y].run();y=-1,t=h.length}d=null,g=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,p,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{p="function"==typeof clearTimeout?clearTimeout:n}catch(e){p=n}}();var d,h=[],g=!1,y=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new u(e,t)),1!==h.length||g||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},8:function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return c[u]=n,s(u),u++}function o(e){delete c[e]}function a(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function i(e){if(l)setTimeout(i,0,e);else{var t=c[e];if(t){l=!0;try{a(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var s,u=1,c={},l=!1,p=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&i(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),s=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},s=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;s=function(t){var r=p.createElement("script");r.onreadystatechange=function(){i(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){s=function(e){setTimeout(i,0,e)}}(),f.setImmediate=n,f.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(10),r(7))},9:function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new n(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(8),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate}},[108]);
//# sourceMappingURL=data.min.js.map
